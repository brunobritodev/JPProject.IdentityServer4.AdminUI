2018-08-26 15:17:02.869 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-26 15:17:02.894 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-26 15:17:02.895 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-26 15:17:02.895 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-26 15:17:02.895 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-26 15:17:02.978 -03:00 [DBG] Starting token cleanup
2018-08-26 15:18:14.168 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-26 15:18:14.202 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-26 15:18:14.203 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-26 15:18:14.203 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-26 15:18:14.204 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-26 15:18:14.302 -03:00 [DBG] Starting token cleanup
2018-08-26 15:18:32.899 -03:00 [DBG] 0 persisted grants found for c4b6b328-21ca-4438-022d-08d60b6c46e1
2018-08-26 15:18:43.035 -03:00 [DBG] 0 persisted grants found for c4b6b328-21ca-4438-022d-08d60b6c46e1
2018-08-26 15:18:48.966 -03:00 [DBG] 0 persisted grants found for c4b6b328-21ca-4438-022d-08d60b6c46e1
2018-08-26 15:18:52.914 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-26 15:18:52.964 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-26 15:18:52.968 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-26 15:18:52.969 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-26 15:18:52.990 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "c4b6b328-21ca-4438-022d-08d60b6c46e1",
  "DisplayName": "bruno",
  "ActivityId": "0HLGBG150FCTP:00000008",
  "TimeStamp": "2018-08-26T18:18:52Z",
  "ProcessId": 21940,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 15:18:57.443 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-26 15:19:02.402 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-26 15:19:02.572 -03:00 [WRN] User 3065dd79-077d-4f44-94a7-b248cd933b8c validation failed: DuplicateUserName.
2018-08-26 15:19:11.558 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-08-26 15:20:10.216 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-26 15:20:13.664 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-26 15:20:13.688 -03:00 [WRN] User dcf7fd6b-22cc-4248-8992-ac3e34c6a53b validation failed: DuplicateUserName.
2018-08-26 15:20:58.461 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-26 15:21:01.968 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-26 15:21:01.988 -03:00 [WRN] User 4ff1e31d-0b11-4bb4-92f5-20a2258e9a5b validation failed: DuplicateUserName.
2018-08-26 15:21:04.584 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-26 15:21:05.422 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-26 15:21:05.625 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "86cab393-f5a8-46f9-9abc-1f7be2b2e5e2",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGBG150FCTP:0000001F",
  "TimeStamp": "2018-08-26T18:21:05Z",
  "ProcessId": 21940,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 15:21:05.637 -03:00 [DBG] Augmenting SignInContext
2018-08-26 15:21:05.639 -03:00 [DBG] Adding amr claim with value: external
2018-08-26 15:21:05.642 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-26 15:21:05.643 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-26 16:36:26.131 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-26 16:36:26.160 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-26 16:36:26.160 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-26 16:36:26.161 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-26 16:36:26.161 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-26 16:36:26.239 -03:00 [DBG] Starting token cleanup
2018-08-26 16:36:27.614 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-26 16:36:27.618 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-26 16:36:27.619 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-26 16:36:27.625 -03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-08-26 16:36:27.651 -03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-08-26 16:36:43.628 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 16:36:43.637 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 16:36:43.639 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 16:36:43.646 -03:00 [DBG] Start authorize request
2018-08-26 16:36:43.657 -03:00 [DBG] No user present in authorize request
2018-08-26 16:36:43.664 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 16:36:44.091 -03:00 [DBG] UserManagement found in database: true
2018-08-26 16:36:44.111 -03:00 [ERR] Invalid redirect_uri: https://localhost:5003/swagger/oauth2-redirect.html
{
  "ClientId": "usermanagement",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5001/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagement",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagement",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE2OjM2OjQzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 16:36:44.119 -03:00 [ERR] Request validation failed
2018-08-26 16:36:44.120 -03:00 [INF] {
  "ClientId": "usermanagement",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5001/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagement",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagement",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE2OjM2OjQzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 16:36:44.149 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagement",
  "ClientName": "User Management OpenId Connect",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLGBHCR8VGDE:00000002",
  "TimeStamp": "2018-08-26T19:36:44Z",
  "ProcessId": 29164,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 16:36:59.505 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 16:36:59.518 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 16:36:59.520 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 16:36:59.527 -03:00 [DBG] Start authorize request
2018-08-26 16:36:59.529 -03:00 [DBG] No user present in authorize request
2018-08-26 16:36:59.532 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 16:36:59.550 -03:00 [DBG] UserManagement found in database: true
2018-08-26 16:36:59.550 -03:00 [ERR] Invalid redirect_uri: https://localhost:5003/swagger/oauth2-redirect.html
{
  "ClientId": "usermanagement",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5001/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagement",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagement",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE2OjM2OjU5IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 16:36:59.558 -03:00 [ERR] Request validation failed
2018-08-26 16:36:59.559 -03:00 [INF] {
  "ClientId": "usermanagement",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5001/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagement",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagement",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE2OjM2OjU5IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 16:36:59.567 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagement",
  "ClientName": "User Management OpenId Connect",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLGBHCR8VGDE:00000004",
  "TimeStamp": "2018-08-26T19:36:59Z",
  "ProcessId": 29164,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 16:42:01.164 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-26 16:42:01.197 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-26 16:42:01.197 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-26 16:42:01.198 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-26 16:42:01.198 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-26 16:42:01.318 -03:00 [DBG] Starting token cleanup
2018-08-26 16:42:08.489 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 16:42:08.505 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 16:42:08.506 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 16:42:08.511 -03:00 [DBG] Start authorize request
2018-08-26 16:42:08.521 -03:00 [DBG] No user present in authorize request
2018-08-26 16:42:08.534 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 16:42:08.799 -03:00 [DBG] UserManagementUI found in database: false
2018-08-26 16:42:08.816 -03:00 [ERR] Unknown client or not enabled: UserManagementUI
{
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE2OjQyOjA4IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 16:42:08.821 -03:00 [ERR] Request validation failed
2018-08-26 16:42:08.821 -03:00 [INF] {
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE2OjQyOjA4IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 16:42:08.844 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ActivityId": "0HLGBHFV4UJ5E:00000002",
  "TimeStamp": "2018-08-26T19:42:08Z",
  "ProcessId": 2668,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-26 16:53:52.593 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-26 16:53:52.615 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-26 16:53:52.615 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-26 16:53:52.616 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-26 16:53:52.616 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-26 16:53:52.699 -03:00 [DBG] Starting token cleanup
2018-08-26 16:54:00.527 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 16:54:00.536 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 16:54:00.537 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 16:54:00.540 -03:00 [DBG] Start authorize request
2018-08-26 16:54:00.550 -03:00 [DBG] No user present in authorize request
2018-08-26 16:54:00.554 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 16:54:00.989 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 16:54:01.010 -03:00 [ERR] Invalid redirect_uri: https://localhost:5003/swagger/oauth2-redirect.html
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5001/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE2OjU0OjAwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 16:54:01.019 -03:00 [ERR] Request validation failed
2018-08-26 16:54:01.019 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5001/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE2OjU0OjAwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 16:54:01.044 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLGBHMJ47ML0:00000003",
  "TimeStamp": "2018-08-26T19:54:01Z",
  "ProcessId": 32804,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-26 17:03:45.476 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 17:03:45.502 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 17:03:45.504 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 17:03:45.506 -03:00 [DBG] Start authorize request
2018-08-26 17:03:45.507 -03:00 [DBG] No user present in authorize request
2018-08-26 17:03:45.508 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:03:45.828 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:03:45.830 -03:00 [ERR] Invalid redirect_uri: https://localhost:5003/swagger/oauth2-redirect.html
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5001/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjAzOjQ1IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:03:45.836 -03:00 [ERR] Request validation failed
2018-08-26 17:03:45.837 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5001/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjAzOjQ1IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:03:45.845 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLGBHMJ47ML2:00000001",
  "TimeStamp": "2018-08-26T20:03:45Z",
  "ProcessId": 32804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 17:06:08.919 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-26 17:06:08.941 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-26 17:06:08.941 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-26 17:06:08.942 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-26 17:06:08.942 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-26 17:06:09.028 -03:00 [DBG] Starting token cleanup
2018-08-26 17:06:22.721 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 17:06:22.730 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 17:06:22.731 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 17:06:22.734 -03:00 [DBG] Start authorize request
2018-08-26 17:06:22.742 -03:00 [DBG] No user present in authorize request
2018-08-26 17:06:22.746 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:06:23.145 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:06:23.165 -03:00 [ERR] Invalid redirect_uri: https://localhost:5003/swagger/oauth2-redirect.html
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjA2OjIyIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:06:23.174 -03:00 [ERR] Request validation failed
2018-08-26 17:06:23.174 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjA2OjIyIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:06:23.200 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLGBHTEJBVGN:00000003",
  "TimeStamp": "2018-08-26T20:06:23Z",
  "ProcessId": 3708,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 17:19:43.166 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-26 17:19:43.210 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-26 17:19:43.210 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-26 17:19:43.210 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-26 17:19:43.210 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-26 17:19:43.289 -03:00 [DBG] Starting token cleanup
2018-08-26 17:20:03.215 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-26 17:20:03.252 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-26 17:20:03.252 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-26 17:20:03.253 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-26 17:20:03.253 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-26 17:20:03.437 -03:00 [DBG] Starting token cleanup
2018-08-26 17:20:11.967 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 17:20:11.977 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 17:20:11.978 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 17:20:11.984 -03:00 [DBG] Start authorize request
2018-08-26 17:20:11.993 -03:00 [DBG] No user present in authorize request
2018-08-26 17:20:12.007 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:20:12.474 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:20:12.494 -03:00 [ERR] Invalid redirect_uri: https://localhost:5003/swagger/oauth2-redirect.html
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjIwOjExIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:20:12.503 -03:00 [ERR] Request validation failed
2018-08-26 17:20:12.503 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjIwOjExIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:20:12.528 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLGBI578AUUG:00000002",
  "TimeStamp": "2018-08-26T20:20:12Z",
  "ProcessId": 31300,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-26 17:20:37.774 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 17:20:37.778 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 17:20:37.786 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 17:20:37.793 -03:00 [DBG] Start authorize request
2018-08-26 17:20:37.794 -03:00 [DBG] No user present in authorize request
2018-08-26 17:20:37.798 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:20:37.822 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:20:37.825 -03:00 [ERR] Invalid redirect_uri: https://localhost:5003/swagger/oauth2-redirect.html
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjIwOjM3IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:20:37.830 -03:00 [ERR] Request validation failed
2018-08-26 17:20:37.831 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjIwOjM3IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:20:37.837 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLGBI578AUUG:00000004",
  "TimeStamp": "2018-08-26T20:20:37Z",
  "ProcessId": 31300,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-26 17:22:53.193 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 17:22:53.209 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 17:22:53.211 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 17:22:53.214 -03:00 [DBG] Start authorize request
2018-08-26 17:22:53.215 -03:00 [DBG] No user present in authorize request
2018-08-26 17:22:53.216 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:22:53.230 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:22:53.231 -03:00 [ERR] Invalid redirect_uri: https://localhost:5003/swagger/oauth2-redirect.html
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjIyOjUzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:22:53.235 -03:00 [ERR] Request validation failed
2018-08-26 17:22:53.236 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjIyOjUzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:22:53.243 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLGBI578AUUG:00000006",
  "TimeStamp": "2018-08-26T20:22:53Z",
  "ProcessId": 31300,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-26 17:23:10.872 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 17:23:10.875 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 17:23:10.880 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 17:23:10.884 -03:00 [DBG] Start authorize request
2018-08-26 17:23:10.887 -03:00 [DBG] No user present in authorize request
2018-08-26 17:23:10.889 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:23:10.903 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:23:10.906 -03:00 [ERR] Invalid redirect_uri: https://localhost:5003/swagger/oauth2-redirect.html
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjIzOjEwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:23:10.911 -03:00 [ERR] Request validation failed
2018-08-26 17:23:10.912 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjIzOjEwIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:23:10.920 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLGBI578AUUG:00000008",
  "TimeStamp": "2018-08-26T20:23:10Z",
  "ProcessId": 31300,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-26 17:23:23.551 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 17:23:23.555 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 17:23:23.562 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 17:23:23.566 -03:00 [DBG] Start authorize request
2018-08-26 17:23:23.568 -03:00 [DBG] No user present in authorize request
2018-08-26 17:23:23.569 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:23:23.584 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:23:23.586 -03:00 [ERR] Invalid redirect_uri: https://localhost:5003/swagger/oauth2-redirect.html
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjIzOjIzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:23:23.594 -03:00 [ERR] Request validation failed
2018-08-26 17:23:23.595 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjIzOjIzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:23:23.609 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLGBI578AUUM:00000002",
  "TimeStamp": "2018-08-26T20:23:23Z",
  "ProcessId": 31300,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 17:23:26.718 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 17:23:26.722 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 17:23:26.727 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 17:23:26.736 -03:00 [DBG] Start authorize request
2018-08-26 17:23:26.741 -03:00 [DBG] No user present in authorize request
2018-08-26 17:23:26.744 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:23:26.758 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:23:26.763 -03:00 [ERR] Invalid redirect_uri: https://localhost:5003/swagger/oauth2-redirect.html
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjIzOjI2IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:23:26.771 -03:00 [ERR] Request validation failed
2018-08-26 17:23:26.772 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjIzOjI2IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:23:26.780 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLGBI578AUUM:00000004",
  "TimeStamp": "2018-08-26T20:23:26Z",
  "ProcessId": 31300,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 17:23:47.665 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 17:23:47.675 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 17:23:47.675 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 17:23:47.678 -03:00 [DBG] Start authorize request
2018-08-26 17:23:47.679 -03:00 [DBG] No user present in authorize request
2018-08-26 17:23:47.683 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:23:47.698 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:23:47.700 -03:00 [ERR] Invalid redirect_uri: https://localhost:5003/swagger/oauth2-redirect.html
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjIzOjQ3IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:23:47.707 -03:00 [ERR] Request validation failed
2018-08-26 17:23:47.707 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjIzOjQ3IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:23:47.712 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLGBI578AUUM:00000006",
  "TimeStamp": "2018-08-26T20:23:47Z",
  "ProcessId": 31300,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 17:25:09.277 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 17:25:09.286 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 17:25:09.290 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 17:25:09.295 -03:00 [DBG] Start authorize request
2018-08-26 17:25:09.297 -03:00 [DBG] No user present in authorize request
2018-08-26 17:25:09.299 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:25:09.314 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:25:09.317 -03:00 [ERR] Invalid redirect_uri: https://localhost:5003/swagger/oauth2-redirect.html
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjI1OjA5IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:25:09.324 -03:00 [ERR] Request validation failed
2018-08-26 17:25:09.327 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjI1OjA5IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:25:09.334 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLGBI578AUUM:00000008",
  "TimeStamp": "2018-08-26T20:25:09Z",
  "ProcessId": 31300,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 17:25:22.937 -03:00 [DBG] TaskCanceledException. Exiting.
2018-08-26 17:25:22.980 -03:00 [DBG] Stopping token cleanup
2018-08-26 17:26:26.711 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-26 17:26:26.742 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-26 17:26:26.742 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-26 17:26:26.742 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-26 17:26:26.742 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-26 17:26:26.872 -03:00 [DBG] Starting token cleanup
2018-08-26 17:26:32.209 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 17:26:32.225 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 17:26:32.226 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 17:26:32.230 -03:00 [DBG] Start authorize request
2018-08-26 17:26:32.240 -03:00 [DBG] No user present in authorize request
2018-08-26 17:26:32.254 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:26:32.696 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:26:32.717 -03:00 [ERR] Invalid redirect_uri: https://localhost:5003/swagger/oauth2-redirect.html
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjI2OjMyIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:26:32.725 -03:00 [ERR] Request validation failed
2018-08-26 17:26:32.726 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "http://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjI2OjMyIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:26:32.752 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLGBI8PI5PMQ:00000002",
  "TimeStamp": "2018-08-26T20:26:32Z",
  "ProcessId": 33904,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-26 17:27:03.851 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 17:27:03.866 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 17:27:03.867 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 17:27:03.874 -03:00 [DBG] Start authorize request
2018-08-26 17:27:03.875 -03:00 [DBG] No user present in authorize request
2018-08-26 17:27:03.877 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:27:03.897 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:27:03.958 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:27:04.151 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:27:04.172 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:27:04.180 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:27:04.189 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:27:04.191 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.full_access",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDE3OjI3OjAzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjI3OjAzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:27:04.207 -03:00 [INF] Showing login: User is not authenticated
2018-08-26 17:27:04.244 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:27:04.255 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:27:04.258 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:27:04.264 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:27:04.266 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:27:04.272 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:27:04.274 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:27:04.287 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:27:18.625 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-26 17:27:20.580 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-26 17:27:20.886 -03:00 [INF] User created a new account with password.
2018-08-26 17:27:20.910 -03:00 [INF] User created a new account with password.
2018-08-26 17:27:21.164 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "cbf2e91b-b1d5-43bd-a848-59c69da6d0a9",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGBI8PI5PMQ:00000008",
  "TimeStamp": "2018-08-26T20:27:21Z",
  "ProcessId": 33904,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-26 17:27:21.177 -03:00 [DBG] Augmenting SignInContext
2018-08-26 17:27:21.179 -03:00 [DBG] Adding amr claim with value: external
2018-08-26 17:27:21.184 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-26 17:27:21.189 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-26 17:27:21.226 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-26 17:27:21.229 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-26 17:27:21.232 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-26 17:27:21.238 -03:00 [DBG] Start authorize callback request
2018-08-26 17:27:21.241 -03:00 [DBG] User in authorize request: cbf2e91b-b1d5-43bd-a848-59c69da6d0a9
2018-08-26 17:27:21.242 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:27:21.253 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:27:21.256 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:27:21.263 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:27:21.266 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:27:21.272 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:27:21.274 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:27:21.278 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "cbf2e91b-b1d5-43bd-a848-59c69da6d0a9",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.full_access",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDE3OjI3OjAzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "e2e2589c857224a33d6793f78d6d143c",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE3OjI3OjAzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 17:27:21.337 -03:00 [DBG] r4ljfuZ+IcGi2dKi04HTEZ9Wc0/pnELR5Wx8ta0+taE= found in database: false
2018-08-26 17:27:21.340 -03:00 [DBG] user_consent grant with value: UserManagementUI|cbf2e91b-b1d5-43bd-a848-59c69da6d0a9 not found in store.
2018-08-26 17:27:21.343 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-26 17:27:21.344 -03:00 [INF] Showing consent: User has not yet consented
2018-08-26 17:27:21.375 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:27:21.384 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:27:21.389 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:27:21.394 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:27:21.397 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:27:21.402 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:27:21.403 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:27:21.412 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:27:21.415 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:27:21.421 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:28:08.690 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:28:08.706 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:28:08.710 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:28:08.717 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:28:08.722 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:28:08.729 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:28:08.730 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:28:08.743 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:28:08.748 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:28:08.756 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:29:27.333 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:29:27.349 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:29:27.351 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:29:27.361 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:29:27.363 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:29:27.369 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:29:27.372 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:29:27.383 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:29:27.389 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:29:27.396 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:30:13.078 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:30:13.087 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:30:13.090 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:30:13.098 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:30:13.100 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:30:13.106 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:30:13.107 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:30:13.115 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:30:13.117 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:30:13.123 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:30:37.415 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:30:37.429 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:30:37.432 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:30:37.440 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:30:37.443 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:30:37.455 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:30:37.458 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:30:37.475 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:30:37.478 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:30:37.492 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:30:52.378 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:30:52.391 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:30:52.395 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:30:52.404 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:30:52.408 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:30:52.417 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:30:52.419 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:30:52.434 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:30:52.438 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:30:52.446 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:37:23.675 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:37:23.722 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:37:23.726 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:37:23.734 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:37:23.737 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:37:23.742 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:37:23.743 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:37:23.755 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:37:23.757 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:37:23.765 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:37:49.635 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:37:49.645 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:37:49.648 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:37:49.654 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:37:49.656 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:37:49.662 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:37:49.663 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:37:49.674 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:37:49.676 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:37:49.681 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:37:54.489 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:37:54.502 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:37:54.505 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:37:54.511 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:37:54.514 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:37:54.519 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:37:54.520 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:37:54.529 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:37:54.531 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:37:54.538 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:39:20.754 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:39:20.768 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:39:20.770 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:39:20.775 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:39:20.777 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:39:20.783 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:39:20.785 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:39:20.794 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:39:20.796 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:39:20.801 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:42:28.362 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:42:28.372 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:42:28.375 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:42:28.381 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:42:28.383 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:42:28.390 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:42:28.391 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:42:28.401 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:42:28.403 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:42:28.409 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:43:52.719 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:43:52.728 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:43:52.731 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:43:52.736 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:43:52.739 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:43:52.746 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:43:52.747 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:43:52.756 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:43:52.758 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:43:52.765 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:44:14.642 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:44:14.652 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:44:14.654 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:44:14.660 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:44:14.662 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:44:14.668 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:44:14.670 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:44:14.678 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:44:14.680 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:44:14.685 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:44:45.943 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:44:45.952 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:44:45.954 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:44:45.959 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:44:45.961 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:44:45.969 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:44:45.970 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:44:45.980 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:44:45.983 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:44:45.989 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:44:48.509 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:44:48.519 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:44:48.522 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:44:48.527 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:44:48.532 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:44:48.538 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:44:48.539 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:44:48.550 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:44:48.551 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:44:48.556 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:48:20.913 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:48:20.927 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:48:20.929 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:48:20.934 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:48:20.938 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:48:20.949 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:48:20.951 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:48:20.960 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:48:20.963 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:48:20.971 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:51:51.154 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:51:51.167 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:51:51.170 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:51:51.177 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:51:51.179 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:51:51.186 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:51:51.187 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:51:51.196 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:51:51.200 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:51:51.206 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:53:19.134 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:53:19.144 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:53:19.147 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:53:19.152 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:53:19.154 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:53:19.163 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:53:19.164 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:53:19.174 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:53:19.176 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:53:19.183 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:54:09.083 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:54:09.097 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:54:09.099 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:54:09.105 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:54:09.108 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:54:09.114 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:54:09.115 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:54:09.124 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:54:09.126 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:54:09.133 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:56:07.351 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:56:07.367 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:56:07.370 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:56:07.380 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:56:07.383 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:56:07.391 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:56:07.393 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:56:07.409 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:56:07.413 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:56:07.423 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:56:18.423 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:56:18.435 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:56:18.438 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:56:18.444 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:56:18.446 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:56:18.455 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:56:18.458 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:56:18.468 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:56:18.470 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:56:18.476 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:56:30.542 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:56:30.555 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:56:30.559 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:56:30.569 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:56:30.572 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:56:30.589 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:56:30.593 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:56:30.609 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:56:30.614 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:56:30.622 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:57:38.228 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:57:38.236 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:57:38.239 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:57:38.245 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:57:38.248 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:57:38.254 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:57:38.255 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:57:38.264 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:57:38.266 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:57:38.271 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:57:59.098 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:57:59.111 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:57:59.113 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:57:59.120 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:57:59.122 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:57:59.128 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:57:59.129 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:57:59.137 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:57:59.139 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:57:59.145 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:58:30.857 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 17:58:30.872 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:58:30.878 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:58:30.886 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:58:30.889 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:58:30.897 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 17:58:30.898 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 17:58:30.911 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 17:58:30.913 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 17:58:30.922 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:02:54.956 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:02:54.965 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:02:54.968 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:02:54.974 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:02:54.977 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:02:54.985 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:02:54.986 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:02:54.997 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:02:54.999 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:02:55.005 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:04:01.541 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:04:01.552 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:04:01.554 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:04:01.561 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:04:01.563 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:04:01.570 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:04:01.572 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:04:01.587 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:04:01.591 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:04:01.596 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:04:11.258 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:04:11.273 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:04:11.275 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:04:11.285 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:04:11.287 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:04:11.294 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:04:11.295 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:04:11.309 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:04:11.312 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:04:11.320 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:04:35.517 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:04:35.529 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:04:35.532 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:04:35.537 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:04:35.539 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:04:35.546 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:04:35.547 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:04:35.555 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:04:35.557 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:04:35.566 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:08:08.544 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:08:08.560 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:08:08.562 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:08:08.569 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:08:08.571 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:08:08.577 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:08:08.579 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:08:08.588 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:08:08.590 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:08:08.598 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:08:45.977 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:08:45.993 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:08:45.996 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:08:46.003 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:08:46.006 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:08:46.015 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:08:46.017 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:08:46.033 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:08:46.036 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:08:46.046 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:09:03.230 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:09:03.242 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:09:03.244 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:09:03.253 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:09:03.256 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:09:03.265 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:09:03.267 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:09:03.282 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:09:03.286 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:09:03.297 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:10:40.388 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:10:40.401 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:10:40.403 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:10:40.410 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:10:40.413 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:10:40.420 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:10:40.421 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:10:40.431 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:10:40.435 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:10:40.443 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:11:03.377 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:11:03.390 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:11:03.393 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:11:03.400 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:11:03.404 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:11:03.411 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:11:03.413 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:11:03.424 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:11:03.426 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:11:03.432 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:11:11.452 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:11:11.464 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:11:11.467 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:11:11.473 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:11:11.475 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:11:11.482 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:11:11.483 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:11:11.492 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:11:11.494 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:11:11.500 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:13:35.136 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:13:35.152 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:13:35.156 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:13:35.167 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:13:35.171 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:13:35.178 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:13:35.180 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:13:35.188 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:13:35.191 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:13:35.197 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:13:49.221 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:13:49.236 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:13:49.238 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:13:49.247 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:13:49.249 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:13:49.255 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:13:49.256 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:13:49.265 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:13:49.267 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:13:49.272 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:14:46.221 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:14:46.233 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:14:46.236 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:14:46.242 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:14:46.246 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:14:46.253 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:14:46.254 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:14:46.262 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:14:46.264 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:14:46.269 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:15:21.268 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:15:21.284 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:15:21.287 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:15:21.292 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:15:21.294 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:15:21.300 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:15:21.301 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:15:21.309 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:15:21.311 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:15:21.316 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:15:49.684 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:15:49.697 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:15:49.700 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:15:49.708 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:15:49.711 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:15:49.718 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:15:49.719 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:15:49.729 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:15:49.732 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:15:49.739 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:16:12.125 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:16:12.140 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:16:12.143 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:16:12.151 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:16:12.155 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:16:12.163 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:16:12.165 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:16:12.182 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:16:12.184 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:16:12.193 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:17:14.779 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:17:14.791 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:17:14.794 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:17:14.800 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:17:14.802 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:17:14.808 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:17:14.809 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:17:14.816 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:17:14.820 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:17:14.825 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:20:35.366 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:20:35.384 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:20:35.387 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:20:35.396 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:20:35.399 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:20:35.406 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:20:35.407 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:20:35.420 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:20:35.422 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:20:35.431 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:20:47.715 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:20:47.729 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:20:47.735 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:20:47.744 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:20:47.747 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:20:47.759 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:20:47.760 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:20:47.775 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:20:47.778 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:20:47.786 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:21:04.979 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:21:04.996 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:21:05.002 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:21:05.014 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:21:05.017 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:21:05.030 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:21:05.034 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:21:05.050 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:21:05.053 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:21:05.060 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:21:25.698 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:21:25.711 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:21:25.714 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:21:25.725 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:21:25.728 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:21:25.739 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:21:25.741 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:21:25.754 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:21:25.756 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:21:25.763 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:21:40.810 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:21:40.824 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:21:40.830 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:21:40.840 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:21:40.845 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:21:40.856 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:21:40.857 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:21:40.871 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:21:40.877 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:21:40.888 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:21:59.619 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:21:59.633 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:21:59.636 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:21:59.647 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:21:59.650 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:21:59.659 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:21:59.660 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 18:21:59.671 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:21:59.674 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 18:21:59.683 -03:00 [DBG] Found ["UserManagementApi.full_access"] API scopes in database
2018-08-26 18:29:12.810 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-26 18:29:12.844 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-26 18:29:12.845 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-26 18:29:12.845 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-26 18:29:12.845 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-26 18:29:12.954 -03:00 [DBG] Starting token cleanup
2018-08-26 18:29:24.431 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 18:29:24.441 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 18:29:24.442 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 18:29:24.445 -03:00 [DBG] Start authorize request
2018-08-26 18:29:24.453 -03:00 [DBG] User in authorize request: cbf2e91b-b1d5-43bd-a848-59c69da6d0a9
2018-08-26 18:29:24.467 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:29:24.874 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:29:24.946 -03:00 [DBG] Found ["openid"] identity scopes in database
2018-08-26 18:29:25.140 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 18:29:25.158 -03:00 [DBG] Found ["openid"] identity scopes in database
2018-08-26 18:29:25.165 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 18:29:25.169 -03:00 [ERR] Requested scope not allowed: UserManagementApi.read_access
2018-08-26 18:29:25.172 -03:00 [ERR] Request validation failed
2018-08-26 18:29:25.184 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "cbf2e91b-b1d5-43bd-a848-59c69da6d0a9",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access openid",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDE4OjI5OjI0IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access openid",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE4OjI5OjI0IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 18:29:25.210 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "cbf2e91b-b1d5-43bd-a848-59c69da6d0a9",
  "Scopes": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access openid",
  "GrantType": "implicit",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid scope",
  "ActivityId": "0HLGBJBRU8200:00000003",
  "TimeStamp": "2018-08-26T21:29:25Z",
  "ProcessId": 15480,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-26 18:31:34.875 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-26 18:31:34.917 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-26 18:31:34.918 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-26 18:31:34.919 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-26 18:31:34.919 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-26 18:31:35.029 -03:00 [DBG] Starting token cleanup
2018-08-26 18:31:42.249 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 18:31:42.259 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 18:31:42.260 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 18:31:42.264 -03:00 [DBG] Start authorize request
2018-08-26 18:31:42.273 -03:00 [DBG] User in authorize request: cbf2e91b-b1d5-43bd-a848-59c69da6d0a9
2018-08-26 18:31:42.286 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 18:31:42.734 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 18:31:42.794 -03:00 [DBG] Found ["openid"] identity scopes in database
2018-08-26 18:31:42.938 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 18:31:42.956 -03:00 [DBG] Found ["openid"] identity scopes in database
2018-08-26 18:31:42.961 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 18:31:42.965 -03:00 [ERR] Requests for token response type only must include resource scopes, but no identity scopes.
2018-08-26 18:31:42.969 -03:00 [ERR] Request validation failed
2018-08-26 18:31:42.980 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "cbf2e91b-b1d5-43bd-a848-59c69da6d0a9",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access openid",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDE4OjMxOjQyIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access openid",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE4OjMxOjQyIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 18:31:43.014 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "cbf2e91b-b1d5-43bd-a848-59c69da6d0a9",
  "Scopes": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access openid",
  "GrantType": "implicit",
  "Error": "invalid_scope",
  "ActivityId": "0HLGBJD67KA12:00000002",
  "TimeStamp": "2018-08-26T21:31:43Z",
  "ProcessId": 29096,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 19:01:21.322 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-26 19:01:21.348 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-26 19:01:21.349 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-26 19:01:21.349 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-26 19:01:21.349 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-26 19:01:21.444 -03:00 [DBG] Starting token cleanup
2018-08-26 19:01:22.806 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-26 19:01:22.811 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-26 19:01:22.812 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-26 19:01:22.817 -03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-08-26 19:01:22.835 -03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-08-26 19:01:29.758 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 19:01:29.767 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 19:01:29.769 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 19:01:29.775 -03:00 [DBG] Start authorize request
2018-08-26 19:01:29.784 -03:00 [DBG] No user present in authorize request
2018-08-26 19:01:29.790 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 19:01:30.212 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 19:01:30.278 -03:00 [DBG] Found ["openid","email"] identity scopes in database
2018-08-26 19:01:30.486 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 19:01:30.503 -03:00 [DBG] Found ["openid","email"] identity scopes in database
2018-08-26 19:01:30.510 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 19:01:30.514 -03:00 [ERR] Requests for token response type only must include resource scopes, but no identity scopes.
2018-08-26 19:01:30.520 -03:00 [ERR] Request validation failed
2018-08-26 19:01:30.534 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access openid email",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDE5OjAxOjI5IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access openid email",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE5OjAxOjI5IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 19:01:30.558 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "Scopes": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access openid email",
  "GrantType": "implicit",
  "Error": "invalid_scope",
  "ActivityId": "0HLGBJTQNKO2P:00000002",
  "TimeStamp": "2018-08-26T22:01:30Z",
  "ProcessId": 30556,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 19:03:25.731 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-26 19:03:25.753 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-26 19:03:25.754 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-26 19:03:25.754 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-26 19:03:25.754 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-26 19:03:25.831 -03:00 [DBG] Starting token cleanup
2018-08-26 19:03:34.991 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 19:03:35.013 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 19:03:35.016 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 19:03:35.022 -03:00 [DBG] Start authorize request
2018-08-26 19:03:35.033 -03:00 [DBG] No user present in authorize request
2018-08-26 19:03:35.047 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 19:03:35.491 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 19:03:35.559 -03:00 [DBG] Found ["openid","email"] identity scopes in database
2018-08-26 19:03:35.756 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 19:03:35.776 -03:00 [DBG] Found ["openid","email"] identity scopes in database
2018-08-26 19:03:35.783 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 19:03:35.788 -03:00 [ERR] Requests for token response type only must include resource scopes, but no identity scopes.
2018-08-26 19:03:35.791 -03:00 [ERR] Request validation failed
2018-08-26 19:03:35.803 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access openid email",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDE5OjAzOjM0IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access openid email",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE5OjAzOjM0IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 19:03:35.833 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "Scopes": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access openid email",
  "GrantType": "implicit",
  "Error": "invalid_scope",
  "ActivityId": "0HLGBJUVN9KMS:00000002",
  "TimeStamp": "2018-08-26T22:03:35Z",
  "ProcessId": 28040,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-26 19:04:05.305 -03:00 [DBG] TaskCanceledException. Exiting.
2018-08-26 19:04:05.322 -03:00 [DBG] Stopping token cleanup
2018-08-26 19:04:24.873 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-26 19:04:24.897 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-26 19:04:24.897 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-26 19:04:24.897 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-26 19:04:24.897 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-26 19:04:24.981 -03:00 [DBG] Starting token cleanup
2018-08-26 19:04:33.460 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 19:04:33.474 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 19:04:33.475 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 19:04:33.478 -03:00 [DBG] Start authorize request
2018-08-26 19:04:33.489 -03:00 [DBG] No user present in authorize request
2018-08-26 19:04:33.503 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 19:04:33.982 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 19:04:34.050 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 19:04:34.241 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 19:04:34.260 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 19:04:34.268 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 19:04:34.276 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 19:04:34.290 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDE5OjA0OjMzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE5OjA0OjMzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 19:04:34.302 -03:00 [INF] Showing login: User is not authenticated
2018-08-26 19:04:34.357 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 19:04:34.367 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 19:04:34.369 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 19:04:34.376 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 19:04:34.379 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 19:04:34.384 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 19:04:34.388 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 19:04:34.401 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 19:04:38.493 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-26 19:04:43.992 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-26 19:04:44.325 -03:00 [INF] User created a new account with password.
2018-08-26 19:04:44.350 -03:00 [INF] User created a new account with password.
2018-08-26 19:04:44.628 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "102696868227620762147",
  "SubjectId": "61a5cabb-7b72-4331-b50f-de670ff4dcb2",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGBJVHAI3CG:00000007",
  "TimeStamp": "2018-08-26T22:04:44Z",
  "ProcessId": 11584,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-26 19:04:44.642 -03:00 [DBG] Augmenting SignInContext
2018-08-26 19:04:44.644 -03:00 [DBG] Adding amr claim with value: external
2018-08-26 19:04:44.650 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-26 19:04:44.658 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-26 19:04:44.682 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-26 19:04:44.686 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-26 19:04:44.687 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-26 19:04:44.692 -03:00 [DBG] Start authorize callback request
2018-08-26 19:04:44.696 -03:00 [DBG] User in authorize request: 61a5cabb-7b72-4331-b50f-de670ff4dcb2
2018-08-26 19:04:44.697 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 19:04:44.707 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 19:04:44.710 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 19:04:44.717 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 19:04:44.720 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 19:04:44.727 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 19:04:44.728 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 19:04:44.730 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "61a5cabb-7b72-4331-b50f-de670ff4dcb2",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDE5OjA0OjMzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "4ee96e42109898bfe90089d35b91d2fa",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE5OjA0OjMzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 19:04:44.795 -03:00 [DBG] BWGaH/fS95QWH/4MoNijTrVW1Ba8zE20FJFCBEA56sg= found in database: false
2018-08-26 19:04:44.797 -03:00 [DBG] user_consent grant with value: UserManagementUI|61a5cabb-7b72-4331-b50f-de670ff4dcb2 not found in store.
2018-08-26 19:04:44.803 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-26 19:04:44.804 -03:00 [INF] Showing consent: User has not yet consented
2018-08-26 19:04:44.842 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 19:04:44.851 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 19:04:44.854 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 19:04:44.860 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 19:04:44.864 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 19:04:44.869 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 19:04:44.871 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 19:04:44.881 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 19:04:44.883 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 19:04:44.891 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 19:05:16.738 -03:00 [DBG] TaskCanceledException. Exiting.
2018-08-26 19:05:16.764 -03:00 [DBG] Stopping token cleanup
2018-08-26 19:59:39.043 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-26 19:59:39.101 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-26 19:59:39.104 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-26 19:59:39.106 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-26 19:59:39.107 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-26 19:59:39.246 -03:00 [DBG] Starting token cleanup
2018-08-26 19:59:47.246 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 19:59:47.253 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 19:59:47.254 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 19:59:47.258 -03:00 [DBG] Start authorize request
2018-08-26 19:59:47.270 -03:00 [DBG] User in authorize request: 61a5cabb-7b72-4331-b50f-de670ff4dcb2
2018-08-26 19:59:47.283 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 19:59:47.669 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 19:59:47.727 -03:00 [DBG] Found ["openid"] identity scopes in database
2018-08-26 19:59:47.807 -03:00 [DBG] Found [] API scopes in database
2018-08-26 19:59:47.824 -03:00 [DBG] Found ["openid"] identity scopes in database
2018-08-26 19:59:47.827 -03:00 [DBG] Found [] API scopes in database
2018-08-26 19:59:47.830 -03:00 [ERR] Requests for token response type only must include resource scopes, but no identity scopes.
2018-08-26 19:59:47.833 -03:00 [ERR] Request validation failed
2018-08-26 19:59:47.843 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "61a5cabb-7b72-4331-b50f-de670ff4dcb2",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDE5OjU5OjQ3IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "openid",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE5OjU5OjQ3IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 19:59:47.870 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "61a5cabb-7b72-4331-b50f-de670ff4dcb2",
  "Scopes": "openid",
  "GrantType": "implicit",
  "Error": "invalid_scope",
  "ActivityId": "0HLGBKUD5CQKL:00000003",
  "TimeStamp": "2018-08-26T22:59:47Z",
  "ProcessId": 28872,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 19:59:54.739 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 19:59:54.744 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 19:59:54.749 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 19:59:54.755 -03:00 [DBG] Start authorize request
2018-08-26 19:59:54.757 -03:00 [DBG] User in authorize request: 61a5cabb-7b72-4331-b50f-de670ff4dcb2
2018-08-26 19:59:54.764 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 19:59:54.780 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 19:59:54.789 -03:00 [DBG] Found ["openid"] identity scopes in database
2018-08-26 19:59:54.932 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 19:59:54.943 -03:00 [DBG] Found ["openid"] identity scopes in database
2018-08-26 19:59:54.951 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 19:59:54.957 -03:00 [ERR] Requests for token response type only must include resource scopes, but no identity scopes.
2018-08-26 19:59:54.958 -03:00 [ERR] Request validation failed
2018-08-26 19:59:54.959 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "61a5cabb-7b72-4331-b50f-de670ff4dcb2",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDE5OjU5OjU0IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "openid UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDE5OjU5OjU0IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 19:59:54.965 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "61a5cabb-7b72-4331-b50f-de670ff4dcb2",
  "Scopes": "openid UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access",
  "GrantType": "implicit",
  "Error": "invalid_scope",
  "ActivityId": "0HLGBKUD5CQKL:00000005",
  "TimeStamp": "2018-08-26T22:59:54Z",
  "ProcessId": 28872,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 20:00:33.107 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 20:00:33.112 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 20:00:33.116 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 20:00:33.121 -03:00 [DBG] Start authorize request
2018-08-26 20:00:33.124 -03:00 [DBG] User in authorize request: 61a5cabb-7b72-4331-b50f-de670ff4dcb2
2018-08-26 20:00:33.127 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 20:00:33.138 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:00:33.142 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:00:33.212 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:00:33.215 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:00:33.223 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:00:33.230 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 20:00:33.232 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management OpenId Connect",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "61a5cabb-7b72-4331-b50f-de670ff4dcb2",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDIwOjAwOjMzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "4ee96e42109898bfe90089d35b91d2fa",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDIwOjAwOjMzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 20:00:33.303 -03:00 [DBG] BWGaH/fS95QWH/4MoNijTrVW1Ba8zE20FJFCBEA56sg= found in database: false
2018-08-26 20:00:33.305 -03:00 [DBG] user_consent grant with value: UserManagementUI|61a5cabb-7b72-4331-b50f-de670ff4dcb2 not found in store.
2018-08-26 20:00:33.311 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-26 20:00:33.312 -03:00 [INF] Showing consent: User has not yet consented
2018-08-26 20:00:33.360 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 20:00:33.368 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:00:33.371 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:00:33.378 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:00:33.381 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:00:33.389 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:00:33.390 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 20:00:33.401 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:00:33.403 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:00:33.410 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:06:28.264 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-26 20:06:28.287 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-26 20:06:28.288 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-26 20:06:28.288 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-26 20:06:28.288 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-26 20:06:28.372 -03:00 [DBG] Starting token cleanup
2018-08-26 20:06:33.302 -03:00 [DBG] 0 persisted grants found for 61a5cabb-7b72-4331-b50f-de670ff4dcb2
2018-08-26 20:06:37.736 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-26 20:06:37.823 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-26 20:06:37.826 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-26 20:06:37.827 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-26 20:06:37.850 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "61a5cabb-7b72-4331-b50f-de670ff4dcb2",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGBL2725RRV:00000004",
  "TimeStamp": "2018-08-26T23:06:37Z",
  "ProcessId": 23400,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 20:06:57.597 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-26 20:06:57.628 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-26 20:06:57.629 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-26 20:06:57.629 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-26 20:06:57.629 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-26 20:06:57.730 -03:00 [DBG] Starting token cleanup
2018-08-26 20:07:09.194 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 20:07:09.208 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 20:07:09.209 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 20:07:09.214 -03:00 [DBG] Start authorize request
2018-08-26 20:07:09.224 -03:00 [DBG] No user present in authorize request
2018-08-26 20:07:09.237 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 20:07:09.829 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:07:09.881 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:07:10.118 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:07:10.141 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:07:10.149 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:07:10.159 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 20:07:10.173 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.read_access UserManagementApi.write_access UserManagementApi.full_access",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDIwOjA3OjA5IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.read_access UserManagementApi.write_access UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDIwOjA3OjA5IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 20:07:10.184 -03:00 [INF] Showing login: User is not authenticated
2018-08-26 20:07:10.236 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 20:07:10.247 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:07:10.250 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:07:10.256 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:07:10.258 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:07:10.265 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:07:10.267 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 20:07:10.283 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:07:12.323 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-26 20:07:13.258 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-26 20:07:13.568 -03:00 [INF] User created a new account with password.
2018-08-26 20:07:13.591 -03:00 [INF] User created a new account with password.
2018-08-26 20:07:13.858 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGBL2FP3P5C:00000006",
  "TimeStamp": "2018-08-26T23:07:13Z",
  "ProcessId": 6252,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 20:07:13.868 -03:00 [DBG] Augmenting SignInContext
2018-08-26 20:07:13.870 -03:00 [DBG] Adding amr claim with value: external
2018-08-26 20:07:13.876 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-26 20:07:13.882 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-26 20:07:13.905 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-26 20:07:13.907 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-26 20:07:13.908 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-26 20:07:13.913 -03:00 [DBG] Start authorize callback request
2018-08-26 20:07:13.917 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:07:13.919 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 20:07:13.927 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:07:13.929 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:07:13.936 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:07:13.939 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:07:13.945 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:07:13.946 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 20:07:13.949 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.read_access UserManagementApi.write_access UserManagementApi.full_access",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDIwOjA3OjA5IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "f6933a5634abb3d2b645f6920ce828e1",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.read_access UserManagementApi.write_access UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDIwOjA3OjA5IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 20:07:14.012 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: false
2018-08-26 20:07:14.015 -03:00 [DBG] user_consent grant with value: UserManagementUI|42261a5f-a14b-48e5-8533-3b6ca24564e3 not found in store.
2018-08-26 20:07:14.018 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-26 20:07:14.019 -03:00 [INF] Showing consent: User has not yet consented
2018-08-26 20:07:14.058 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 20:07:14.067 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:07:14.070 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:07:14.076 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:07:14.078 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:07:14.084 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:07:14.085 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 20:07:14.095 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:07:14.097 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:07:14.103 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:07:18.370 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-26 20:07:18.411 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 20:07:18.421 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:07:18.423 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:07:18.429 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:07:18.432 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:07:18.437 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:07:18.438 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 20:07:18.457 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-26 20:07:18.460 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-26 20:07:18.462 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-26 20:07:18.463 -03:00 [DBG] Start authorize callback request
2018-08-26 20:07:18.468 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:07:18.471 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 20:07:18.483 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:07:18.487 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:07:18.495 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:07:18.501 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:07:18.509 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:07:18.513 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 20:07:18.515 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.read_access UserManagementApi.write_access UserManagementApi.full_access",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDIwOjA3OjA5IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "f6933a5634abb3d2b645f6920ce828e1",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.read_access UserManagementApi.write_access UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDIwOjA3OjA5IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 20:07:18.529 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: false
2018-08-26 20:07:18.530 -03:00 [DBG] user_consent grant with value: UserManagementUI|42261a5f-a14b-48e5-8533-3b6ca24564e3 not found in store.
2018-08-26 20:07:18.533 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-26 20:07:18.537 -03:00 [INF] User consented to scopes: ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"]
2018-08-26 20:07:18.540 -03:00 [DBG] User indicated to remember consent for scopes: ["UserManagementApi.read_access","UserManagementApi.write_access","UserManagementApi.full_access"]
2018-08-26 20:07:18.545 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:07:18.559 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= not found in database
2018-08-26 20:07:18.602 -03:00 [DBG] Creating Implicit Flow response.
2018-08-26 20:07:18.613 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-26 20:07:18.614 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:07:18.647 -03:00 [DBG] 1Iij0KfoDQDse32PXh9l60wZ6tu8NinVroKu6K8NFSc= not found in database
2018-08-26 20:07:18.663 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "UserManagementApi.read_access UserManagementApi.write_access UserManagementApi.full_access",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****95a6"
    }
  ],
  "ActivityId": "0HLGBL2FP3P5C:0000000A",
  "TimeStamp": "2018-08-26T23:07:18Z",
  "ProcessId": 6252,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 20:07:18.671 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDIwOjA3OjA5IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Scope": "UserManagementApi.read_access UserManagementApi.write_access UserManagementApi.full_access"
}
2018-08-26 20:07:18.686 -03:00 [DBG] Augmenting SignInContext
2018-08-26 20:07:18.686 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-26 20:07:25.237 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 20:07:25.242 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 20:07:25.244 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 20:07:25.252 -03:00 [DBG] Start authorize request
2018-08-26 20:07:25.253 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:07:25.256 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 20:07:25.272 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:07:25.275 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:07:25.288 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:07:25.293 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:07:25.305 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:07:25.307 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 20:07:25.313 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.read_access UserManagementApi.write_access UserManagementApi.full_access",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDIwOjA3OjI1IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "f6933a5634abb3d2b645f6920ce828e1",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.read_access UserManagementApi.write_access UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDIwOjA3OjI1IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 20:07:25.342 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: true
2018-08-26 20:07:25.349 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-26 20:07:25.350 -03:00 [DBG] Creating Implicit Flow response.
2018-08-26 20:07:25.351 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-26 20:07:25.352 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:07:25.369 -03:00 [DBG] jlc9yMGndLnpRQmOM0sp0Tie/CyUc0hUfEgNNbeXWLA= not found in database
2018-08-26 20:07:25.415 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "UserManagementApi.read_access UserManagementApi.write_access UserManagementApi.full_access",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****401c"
    }
  ],
  "ActivityId": "0HLGBL2FP3P5C:0000000B",
  "TimeStamp": "2018-08-26T23:07:25Z",
  "ProcessId": 6252,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 20:07:25.433 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDIwOjA3OjI1IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Scope": "UserManagementApi.read_access UserManagementApi.write_access UserManagementApi.full_access"
}
2018-08-26 20:07:38.239 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:07:38.265 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:07:38.268 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:07:38.274 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:12:08.594 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-26 20:12:08.626 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-26 20:12:08.627 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-26 20:12:08.627 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-26 20:12:08.627 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-26 20:12:08.756 -03:00 [DBG] Starting token cleanup
2018-08-26 20:12:13.028 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:12:13.554 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:12:13.598 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:12:13.838 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:12:39.849 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:12:39.869 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:12:39.872 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:12:39.877 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:12:47.365 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:12:47.395 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:12:47.398 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:12:47.408 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:14:45.642 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:14:45.668 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:14:45.671 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:14:45.680 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:14:59.341 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:14:59.370 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:14:59.374 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:14:59.382 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:15:14.688 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:15:14.710 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:15:14.713 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:15:14.719 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:15:20.647 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:15:20.665 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:15:20.667 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:15:20.677 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:15:25.200 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:15:25.220 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:15:25.223 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:15:25.230 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:15:32.028 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:15:32.051 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:15:32.054 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:15:32.062 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:18:14.065 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:18:14.085 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:18:14.087 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:18:14.097 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:18:33.305 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:18:33.331 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:18:33.335 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:18:33.342 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:20:35.140 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:20:35.165 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:20:35.169 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:20:35.179 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:21:03.828 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:21:03.851 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:21:03.856 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:21:03.866 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:21:04.238 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The layout page '/Views/Shared/_Layout.cshtml' cannot find the section 'styles' in the content page '/Views/Grants/Index.cshtml'.
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.RenderSectionAsyncCore(String sectionName, Boolean required)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.RenderSection(String name, Boolean required)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.RenderSection(String name)
   at AspNetCore.Views_Shared__Layout.<>c__DisplayClass15_0.<<ExecuteAsync>b__1>d.MoveNext() in D:\workspace\JP.Project\src\Backend\Equinox.UI.SSO\Views\Shared\_Layout.cshtml:line 25
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.SetOutputContentAsync()
   at AspNetCore.Views_Shared__Layout.ExecuteAsync() in D:\workspace\JP.Project\src\Backend\Equinox.UI.SSO\Views\Shared\_Layout.cshtml:line 9
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-26 20:21:14.654 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:21:14.680 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:21:14.683 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:21:14.690 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:21:14.768 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The layout page '/Views/Shared/_Layout.cshtml' cannot find the section 'styles' in the content page '/Views/Grants/Index.cshtml'.
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.RenderSectionAsyncCore(String sectionName, Boolean required)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.RenderSection(String name, Boolean required)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPage.RenderSection(String name)
   at AspNetCore.Views_Shared__Layout.<>c__DisplayClass15_0.<<ExecuteAsync>b__1>d.MoveNext() in D:\workspace\JP.Project\src\Backend\Equinox.UI.SSO\Views\Shared\_Layout.cshtml:line 25
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.SetOutputContentAsync()
   at AspNetCore.Views_Shared__Layout.ExecuteAsync() in D:\workspace\JP.Project\src\Backend\Equinox.UI.SSO\Views\Shared\_Layout.cshtml:line 9
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultAsync(IActionResult result)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeResultFilters()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-26 20:21:21.504 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:21:21.527 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:21:21.531 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:21:21.538 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:25:39.146 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:25:39.164 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:25:39.166 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:25:39.175 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:25:48.413 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:25:48.434 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:25:48.438 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:25:48.445 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:26:17.548 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:26:17.569 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:26:17.572 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:26:17.578 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:26:22.631 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:26:22.654 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:26:22.659 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:26:22.666 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:27:01.683 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:27:01.704 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:27:01.708 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:27:01.715 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:27:20.761 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:27:20.782 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:27:20.786 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:27:20.794 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:27:44.231 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:27:44.250 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:27:44.252 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:27:44.258 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:29:37.418 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:29:37.441 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:29:37.444 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:29:37.451 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:30:10.426 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:30:10.458 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:30:10.461 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:30:10.468 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:31:35.757 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:31:35.781 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:31:35.785 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:31:35.792 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:31:50.849 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:31:50.871 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:31:50.875 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:31:50.881 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:32:28.731 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:32:28.752 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:32:28.755 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:32:28.762 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:32:31.405 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:32:31.427 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:32:31.430 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:32:31.436 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:32:38.702 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:32:38.734 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:32:38.738 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:32:38.746 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:42:47.652 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:42:47.673 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:42:47.676 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:42:47.682 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 20:42:50.354 -03:00 [DBG] 3 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 20:42:50.377 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 20:42:50.380 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 20:42:50.386 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:12:08.825 -03:00 [INF] Clearing 2 tokens
2018-08-26 21:41:29.215 -03:00 [DBG] 1 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 21:41:29.230 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:41:29.232 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:41:29.240 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:41:39.032 -03:00 [DBG] CORS request made for path: /Grants/Revoke from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-26 21:41:39.096 -03:00 [DBG] removing 1 persisted grants from database for subject 42261a5f-a14b-48e5-8533-3b6ca24564e3, clientId UserManagementUI
2018-08-26 21:41:39.112 -03:00 [DBG] 0 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 21:41:44.216 -03:00 [DBG] 0 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 21:42:25.712 -03:00 [DBG] 0 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 21:42:50.222 -03:00 [DBG] 0 persisted grants found for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 21:42:59.201 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 21:42:59.218 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 21:42:59.220 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 21:42:59.228 -03:00 [DBG] Start authorize request
2018-08-26 21:42:59.240 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 21:42:59.248 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 21:42:59.269 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:42:59.291 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:42:59.378 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:42:59.390 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:42:59.399 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:42:59.411 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 21:42:59.428 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.write_access UserManagementApi.read_access UserManagementApi.full_access",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDIxOjQyOjU5IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "f6933a5634abb3d2b645f6920ce828e1",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.write_access UserManagementApi.read_access UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDIxOjQyOjU5IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 21:42:59.477 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: false
2018-08-26 21:42:59.478 -03:00 [DBG] user_consent grant with value: UserManagementUI|42261a5f-a14b-48e5-8533-3b6ca24564e3 not found in store.
2018-08-26 21:42:59.482 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-26 21:42:59.483 -03:00 [INF] Showing consent: User has not yet consented
2018-08-26 21:42:59.517 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 21:42:59.527 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:42:59.530 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:42:59.536 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:42:59.538 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:42:59.546 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:42:59.547 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 21:42:59.557 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:42:59.561 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:42:59.566 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:43:03.526 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-26 21:43:03.560 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 21:43:03.572 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:43:03.576 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:43:03.584 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:43:03.587 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:43:03.594 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:43:03.596 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 21:43:03.618 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-26 21:43:03.620 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-26 21:43:03.623 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-26 21:43:03.630 -03:00 [DBG] Start authorize callback request
2018-08-26 21:43:03.634 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 21:43:03.635 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 21:43:03.644 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:43:03.646 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:43:03.653 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:43:03.655 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:43:03.660 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:43:03.662 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 21:43:03.664 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.write_access UserManagementApi.read_access UserManagementApi.full_access",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDIxOjQyOjU5IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "f6933a5634abb3d2b645f6920ce828e1",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.write_access UserManagementApi.read_access UserManagementApi.full_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDIxOjQyOjU5IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 21:43:03.674 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: false
2018-08-26 21:43:03.675 -03:00 [DBG] user_consent grant with value: UserManagementUI|42261a5f-a14b-48e5-8533-3b6ca24564e3 not found in store.
2018-08-26 21:43:03.678 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-26 21:43:03.683 -03:00 [INF] User consented to scopes: ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"]
2018-08-26 21:43:03.690 -03:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 21:43:03.696 -03:00 [DBG] no nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= persisted grant found in database
2018-08-26 21:43:03.704 -03:00 [DBG] Creating Implicit Flow response.
2018-08-26 21:43:03.714 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-26 21:43:03.715 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 21:43:03.768 -03:00 [DBG] JjWc/EwNqGqz3XwbSxzYHlRKaYqfr8YimNYpOIm29vM= not found in database
2018-08-26 21:43:03.829 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "UserManagementApi.write_access UserManagementApi.read_access UserManagementApi.full_access",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****9687"
    }
  ],
  "ActivityId": "0HLGBL5CF5VBR:00000013",
  "TimeStamp": "2018-08-27T00:43:03Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 21:43:03.839 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDIxOjQyOjU5IEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Scope": "UserManagementApi.write_access UserManagementApi.read_access UserManagementApi.full_access"
}
2018-08-26 21:43:13.602 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 21:43:13.610 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 21:43:13.616 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 21:43:13.622 -03:00 [DBG] Start authorize request
2018-08-26 21:43:13.624 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 21:43:13.626 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 21:43:13.641 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:43:13.645 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:43:13.725 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:43:13.728 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:43:13.734 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:43:13.736 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 21:43:13.741 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDIxOjQzOjEzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "f6933a5634abb3d2b645f6920ce828e1",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDIxOjQzOjEzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 21:43:13.755 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: false
2018-08-26 21:43:13.756 -03:00 [DBG] user_consent grant with value: UserManagementUI|42261a5f-a14b-48e5-8533-3b6ca24564e3 not found in store.
2018-08-26 21:43:13.758 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-26 21:43:13.758 -03:00 [INF] Showing consent: User has not yet consented
2018-08-26 21:43:13.770 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 21:43:13.777 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:43:13.780 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:43:13.787 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:43:13.790 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:43:13.798 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:43:13.799 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 21:43:13.810 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:43:13.814 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:43:13.821 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:44:15.274 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 21:44:15.291 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:44:15.294 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:44:15.303 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:44:15.306 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:44:15.319 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:44:15.321 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 21:44:15.334 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:44:15.338 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:44:15.350 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:44:26.878 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 21:44:26.893 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:44:26.897 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:44:26.908 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:44:26.913 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:44:26.921 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:44:26.923 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 21:44:26.934 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:44:26.936 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:44:26.944 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:44:41.472 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 21:44:41.485 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:44:41.488 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:44:41.498 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:44:41.502 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:44:41.510 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:44:41.513 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 21:44:41.523 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:44:41.528 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:44:41.535 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:44:51.240 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 21:44:51.252 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:44:51.256 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:44:51.267 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:44:51.271 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:44:51.278 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:44:51.279 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 21:44:51.289 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:44:51.291 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:44:51.298 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:45:12.531 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 21:45:12.547 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:45:12.557 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:45:12.569 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:45:12.572 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:45:12.583 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:45:12.585 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 21:45:12.596 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:45:12.599 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:45:12.608 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:45:36.632 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 21:45:36.647 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:45:36.650 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:45:36.660 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:45:36.664 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:45:36.669 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:45:36.671 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 21:45:36.681 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:45:36.684 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:45:36.689 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:45:42.631 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 21:45:42.646 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:45:42.648 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:45:42.659 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:45:42.662 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:45:42.669 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:45:42.671 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 21:45:42.678 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:45:42.680 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:45:42.688 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:46:08.160 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 21:46:08.172 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:46:08.175 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:46:08.180 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:46:08.182 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:46:08.190 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:46:08.192 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 21:46:08.202 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:46:08.204 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:46:08.212 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:46:34.095 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-26 21:46:34.101 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 21:46:34.113 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:46:34.115 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:46:34.122 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:46:34.125 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:46:34.131 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:46:34.132 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 21:46:34.147 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-26 21:46:34.149 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-26 21:46:34.152 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-26 21:46:34.154 -03:00 [DBG] Start authorize callback request
2018-08-26 21:46:34.157 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 21:46:34.160 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 21:46:34.174 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 21:46:34.177 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:46:34.187 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:46:34.191 -03:00 [DBG] Found [] identity scopes in database
2018-08-26 21:46:34.197 -03:00 [DBG] Found ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] API scopes in database
2018-08-26 21:46:34.198 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 21:46:34.201 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDIxOjQzOjEzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "SessionId": "f6933a5634abb3d2b645f6920ce828e1",
  "Raw": {
    "response_type": "token",
    "client_id": "UserManagementUI",
    "redirect_uri": "https://localhost:5003/swagger/oauth2-redirect.html",
    "scope": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access",
    "state": "U3VuIEF1ZyAyNiAyMDE4IDIxOjQzOjEzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk="
  }
}
2018-08-26 21:46:34.211 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: false
2018-08-26 21:46:34.212 -03:00 [DBG] user_consent grant with value: UserManagementUI|42261a5f-a14b-48e5-8533-3b6ca24564e3 not found in store.
2018-08-26 21:46:34.215 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-26 21:46:34.216 -03:00 [INF] User consented to scopes: ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"]
2018-08-26 21:46:34.218 -03:00 [DBG] User indicated to remember consent for scopes: ["UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"]
2018-08-26 21:46:34.219 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 21:46:34.226 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= not found in database
2018-08-26 21:46:34.250 -03:00 [DBG] Creating Implicit Flow response.
2018-08-26 21:46:34.251 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-26 21:46:34.253 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 21:46:34.264 -03:00 [DBG] DvAdw4tfT5JMUe+681vX+0liklbqNVefdwhVUgcrkeQ= not found in database
2018-08-26 21:46:34.270 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "access_token",
      "TokenValue": "****7a13"
    }
  ],
  "ActivityId": "0HLGBL5CF5VBS:0000000D",
  "TimeStamp": "2018-08-27T00:46:34Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 21:46:34.275 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "https://localhost:5003/swagger/oauth2-redirect.html",
  "State": "U3VuIEF1ZyAyNiAyMDE4IDIxOjQzOjEzIEdNVC0wMzAwIChIb3LDoXJpbyBQYWRyw6NvIGRlIEJyYXPDrWxpYSk=",
  "Scope": "UserManagementApi.full_access UserManagementApi.read_access UserManagementApi.write_access"
}
2018-08-26 21:55:48.785 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-26 21:55:55.012 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-26 21:55:56.160 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-26 21:55:57.038 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-26 21:56:03.253 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-26 21:56:07.223 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-26 21:57:26.126 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-26 22:12:08.987 -03:00 [INF] Clearing 0 tokens
2018-08-26 23:12:09.086 -03:00 [INF] Clearing 2 tokens
2018-08-26 23:31:50.534 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:31:50.679 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:31:50.681 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:31:50.690 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:31:50.699 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:31:50.700 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:31:50.710 -03:00 [DBG] Start discovery request
2018-08-26 23:31:50.832 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:31:50.870 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:31:50.880 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:31:50.881 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:31:50.882 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:31:50.890 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:31:50.893 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:31:50.901 -03:00 [DBG] Start key discovery request
2018-08-26 23:33:02.266 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:33:02.271 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:33:02.275 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:33:02.279 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:33:02.282 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:33:02.286 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:33:02.288 -03:00 [DBG] Start discovery request
2018-08-26 23:33:02.304 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:33:02.380 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:33:02.384 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:33:02.386 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:33:02.387 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:33:02.392 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:33:02.395 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:33:02.398 -03:00 [DBG] Start key discovery request
2018-08-26 23:33:06.945 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:33:06.948 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:33:06.950 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:33:06.951 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:33:06.956 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:33:06.960 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:33:06.962 -03:00 [DBG] Start discovery request
2018-08-26 23:33:06.976 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:33:07.120 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:33:07.127 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:33:07.129 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:33:07.131 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:33:07.133 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:33:07.139 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:33:07.142 -03:00 [DBG] Start key discovery request
2018-08-26 23:33:22.261 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:33:22.271 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:33:22.275 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:33:22.282 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:33:22.287 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:33:22.290 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:33:22.297 -03:00 [DBG] Start discovery request
2018-08-26 23:33:22.312 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:33:22.366 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:33:22.371 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:33:22.373 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:33:22.375 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:33:22.379 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:33:22.381 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:33:22.382 -03:00 [DBG] Start key discovery request
2018-08-26 23:33:51.302 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:33:51.306 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:33:51.308 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:33:51.310 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:33:51.313 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:33:51.319 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:33:51.326 -03:00 [DBG] Start discovery request
2018-08-26 23:33:51.341 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:33:51.435 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:33:51.442 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:33:51.444 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:33:51.444 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:33:51.452 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:33:51.454 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:33:51.458 -03:00 [DBG] Start key discovery request
2018-08-26 23:34:11.990 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:34:11.994 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:34:11.995 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:34:11.999 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:34:12.001 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:34:12.006 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:34:12.008 -03:00 [DBG] Start discovery request
2018-08-26 23:34:12.022 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:34:12.107 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:34:12.112 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:34:12.113 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:34:12.114 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:34:12.115 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:34:12.119 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:34:12.122 -03:00 [DBG] Start key discovery request
2018-08-26 23:34:31.296 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:34:31.300 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:34:31.302 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:34:31.302 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:34:31.304 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:34:31.306 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:34:31.310 -03:00 [DBG] Start discovery request
2018-08-26 23:34:31.325 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:34:31.371 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:34:31.376 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:34:31.378 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:34:31.379 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:34:31.383 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:34:31.387 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:34:31.389 -03:00 [DBG] Start key discovery request
2018-08-26 23:35:06.241 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:35:06.244 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:35:06.249 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:35:06.251 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:35:06.255 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:35:06.257 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:35:06.259 -03:00 [DBG] Start discovery request
2018-08-26 23:35:06.276 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:35:06.333 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:35:06.339 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:35:06.341 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:35:06.344 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:35:06.350 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:35:06.353 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:35:06.356 -03:00 [DBG] Start key discovery request
2018-08-26 23:35:36.833 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:35:36.837 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:35:36.839 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:35:36.840 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:35:36.843 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:35:36.847 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:35:36.851 -03:00 [DBG] Start discovery request
2018-08-26 23:35:36.866 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:35:36.946 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:35:36.951 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:35:36.952 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:35:36.954 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:35:36.956 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:35:36.962 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:35:36.965 -03:00 [DBG] Start key discovery request
2018-08-26 23:35:56.431 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:35:56.442 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:35:56.444 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:35:56.446 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:35:56.449 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:35:56.453 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:35:56.458 -03:00 [DBG] Start discovery request
2018-08-26 23:35:56.478 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:35:56.566 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:35:56.573 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:35:56.576 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:35:56.578 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:35:56.584 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:35:56.586 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:35:56.593 -03:00 [DBG] Start key discovery request
2018-08-26 23:36:04.371 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:36:04.375 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:36:04.377 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:36:04.377 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:36:04.379 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:36:04.380 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:36:04.381 -03:00 [DBG] Start discovery request
2018-08-26 23:36:04.395 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:36:04.444 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:36:04.449 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:36:04.451 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:36:04.453 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:36:04.456 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:36:04.459 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:36:04.462 -03:00 [DBG] Start key discovery request
2018-08-26 23:36:24.133 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:36:24.138 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:36:24.140 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:36:24.141 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:36:24.144 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:36:24.147 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:36:24.149 -03:00 [DBG] Start discovery request
2018-08-26 23:36:24.165 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:36:24.316 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:36:24.327 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:36:24.329 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:36:24.331 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:36:24.335 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:36:24.339 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:36:24.341 -03:00 [DBG] Start key discovery request
2018-08-26 23:36:27.780 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:36:27.783 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:36:27.785 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:36:27.785 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:36:27.787 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:36:27.789 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:36:27.794 -03:00 [DBG] Start discovery request
2018-08-26 23:36:27.807 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:36:27.840 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:36:27.845 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:36:27.847 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:36:27.849 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:36:27.852 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:36:27.857 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:36:27.859 -03:00 [DBG] Start key discovery request
2018-08-26 23:36:37.815 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:36:37.820 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:36:37.826 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:36:37.830 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:36:37.835 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:36:37.839 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:36:37.850 -03:00 [DBG] Start discovery request
2018-08-26 23:36:37.868 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:36:37.964 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:36:37.969 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:36:37.971 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:36:37.974 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:36:37.979 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:36:37.983 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:36:37.985 -03:00 [DBG] Start key discovery request
2018-08-26 23:37:28.325 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:37:28.328 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:37:28.329 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:37:28.330 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:37:28.331 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:37:28.332 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:37:28.334 -03:00 [DBG] Start discovery request
2018-08-26 23:37:28.349 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:37:28.401 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:37:28.408 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:37:28.411 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:37:28.412 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:37:28.419 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:37:28.422 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:37:28.426 -03:00 [DBG] Start key discovery request
2018-08-26 23:37:54.074 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:37:54.077 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:37:54.079 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:37:54.079 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:37:54.080 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:37:54.081 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:37:54.083 -03:00 [DBG] Start discovery request
2018-08-26 23:37:54.099 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:37:54.143 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:37:54.148 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:37:54.152 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:37:54.152 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:37:54.155 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:37:54.159 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:37:54.160 -03:00 [DBG] Start key discovery request
2018-08-26 23:37:59.677 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:37:59.685 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:37:59.686 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:37:59.689 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:37:59.692 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:37:59.694 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:37:59.697 -03:00 [DBG] Start discovery request
2018-08-26 23:37:59.714 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:37:59.747 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:37:59.751 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:37:59.752 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:37:59.754 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:37:59.757 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:37:59.762 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:37:59.764 -03:00 [DBG] Start key discovery request
2018-08-26 23:38:02.762 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 23:38:02.766 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 23:38:02.769 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 23:38:02.770 -03:00 [DBG] Start authorize request
2018-08-26 23:38:02.772 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 23:38:02.773 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:38:02.787 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:38:02.797 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:38:02.805 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:38:02.811 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:38:02.815 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:38:02.816 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:38:02.817 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "htqITnvjfEYGuS03AX7CtlCLFaK6ezehfoJ1no4E;login",
  "Nonce": "htqITnvjfEYGuS03AX7CtlCLFaK6ezehfoJ1no4E",
  "SessionId": "f6933a5634abb3d2b645f6920ce828e1",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "htqITnvjfEYGuS03AX7CtlCLFaK6ezehfoJ1no4E;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "htqITnvjfEYGuS03AX7CtlCLFaK6ezehfoJ1no4E"
  }
}
2018-08-26 23:38:02.827 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: true
2018-08-26 23:38:02.833 -03:00 [DBG] Consent found in consent store is different than current request, consent is required
2018-08-26 23:38:02.834 -03:00 [INF] Showing consent: User has not yet consented
2018-08-26 23:38:02.854 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:38:02.862 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:38:02.866 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:38:02.869 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:38:02.873 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:38:02.876 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:38:02.878 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:38:02.887 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:38:02.890 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:38:02.893 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:38:54.647 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:38:54.659 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:38:54.664 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:38:54.668 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:38:54.673 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:38:54.676 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:38:54.678 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:38:54.692 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:38:54.698 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:38:54.703 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:39:04.950 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:39:04.962 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:39:04.977 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:39:04.981 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:39:04.987 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:39:04.992 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:39:04.993 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:39:05.006 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:39:05.011 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:39:05.015 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:39:25.352 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:39:25.369 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:39:25.374 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:39:25.377 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:39:25.382 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:39:25.386 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:39:25.388 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:39:25.399 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:39:25.405 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:39:25.408 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:41:08.725 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:41:08.740 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:41:08.746 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:41:08.752 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:41:08.757 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:41:08.761 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:41:08.763 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:41:08.778 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:41:08.783 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:41:08.788 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:41:40.439 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:41:40.455 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:41:40.459 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:41:40.461 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:41:40.465 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:41:40.468 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:41:40.469 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:41:40.478 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:41:40.481 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:41:40.484 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:42:36.599 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:42:36.622 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:42:36.628 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:42:36.633 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:42:36.640 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:42:36.645 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:42:36.647 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:42:36.661 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:42:36.666 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:42:36.673 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:42:55.393 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:42:55.408 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:42:55.411 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:42:55.415 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:42:55.419 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:42:55.423 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:42:55.424 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:42:55.436 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:42:55.440 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:42:55.443 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:43:48.755 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:43:48.768 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:43:48.772 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:43:48.774 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:43:48.778 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:43:48.782 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:43:48.783 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:43:48.791 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:43:48.794 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:43:48.797 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:44:00.329 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:44:00.342 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:44:00.347 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:44:00.352 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:44:00.360 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:44:00.365 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:44:00.367 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:44:00.381 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:44:00.386 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:44:00.391 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:44:10.786 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-26 23:44:10.793 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:44:10.806 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:44:10.810 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:44:10.814 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:44:10.818 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:44:10.820 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:44:10.824 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:44:10.832 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-26 23:44:10.835 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-26 23:44:10.837 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-26 23:44:10.839 -03:00 [DBG] Start authorize callback request
2018-08-26 23:44:10.840 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 23:44:10.844 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:44:10.859 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:44:10.864 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:44:10.867 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:44:10.872 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:44:10.875 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:44:10.877 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:44:10.880 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "htqITnvjfEYGuS03AX7CtlCLFaK6ezehfoJ1no4E;login",
  "Nonce": "htqITnvjfEYGuS03AX7CtlCLFaK6ezehfoJ1no4E",
  "SessionId": "f6933a5634abb3d2b645f6920ce828e1",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "htqITnvjfEYGuS03AX7CtlCLFaK6ezehfoJ1no4E;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "htqITnvjfEYGuS03AX7CtlCLFaK6ezehfoJ1no4E"
  }
}
2018-08-26 23:44:10.893 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: true
2018-08-26 23:44:10.899 -03:00 [DBG] Consent found in consent store is different than current request, consent is required
2018-08-26 23:44:10.901 -03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-26 23:44:10.903 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-26 23:44:10.906 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 23:44:10.912 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database
2018-08-26 23:44:10.938 -03:00 [DBG] Creating Implicit Flow response.
2018-08-26 23:44:10.939 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-26 23:44:10.941 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 23:44:10.959 -03:00 [DBG] XAY2987qNkkhI5GglBlQD+iJwy56VVdKIaeiHWMiveY= not found in database
2018-08-26 23:44:10.982 -03:00 [DBG] Getting claims for identity token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3 and client: UserManagementUI
2018-08-26 23:44:10.985 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-26 23:44:11.090 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****6Dzg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****46a7"
    }
  ],
  "ActivityId": "0HLGBL5CF5VC1:00000016",
  "TimeStamp": "2018-08-27T02:44:11Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 23:44:11.102 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "htqITnvjfEYGuS03AX7CtlCLFaK6ezehfoJ1no4E;login",
  "Scope": "openid profile email"
}
2018-08-26 23:44:12.812 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:44:12.815 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:44:12.816 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:44:12.817 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:44:12.818 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:44:12.821 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:44:12.829 -03:00 [DBG] Start discovery request
2018-08-26 23:44:12.840 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:44:12.886 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:44:12.890 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:44:12.892 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:44:12.894 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:44:12.897 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:44:12.901 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:44:12.902 -03:00 [DBG] Start key discovery request
2018-08-26 23:45:30.173 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:45:30.177 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:45:30.178 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:45:30.179 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:45:30.182 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:45:30.185 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:45:30.191 -03:00 [DBG] Start discovery request
2018-08-26 23:45:30.205 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:45:30.266 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:45:30.272 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:45:30.273 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:45:30.274 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:45:30.277 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:45:30.281 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:45:30.283 -03:00 [DBG] Start key discovery request
2018-08-26 23:45:32.736 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 23:45:32.741 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 23:45:32.744 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 23:45:32.745 -03:00 [DBG] Start authorize request
2018-08-26 23:45:32.746 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 23:45:32.747 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:45:32.759 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:45:32.763 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:45:32.766 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:45:32.769 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:45:32.772 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:45:32.774 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:45:32.775 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "jeOdHGfboA1JnLxbnizDSNbTKHvseBM7aKNw6U7q;login",
  "Nonce": "jeOdHGfboA1JnLxbnizDSNbTKHvseBM7aKNw6U7q",
  "SessionId": "f6933a5634abb3d2b645f6920ce828e1",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "jeOdHGfboA1JnLxbnizDSNbTKHvseBM7aKNw6U7q;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "jeOdHGfboA1JnLxbnizDSNbTKHvseBM7aKNw6U7q"
  }
}
2018-08-26 23:45:32.787 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: true
2018-08-26 23:45:32.791 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-26 23:45:32.793 -03:00 [DBG] Creating Implicit Flow response.
2018-08-26 23:45:32.794 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-26 23:45:32.795 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 23:45:32.808 -03:00 [DBG] 8S9kPRl8FsDmHlyoqP+rR/v8fIRjGBgGqpAkWaSWJsc= not found in database
2018-08-26 23:45:32.821 -03:00 [DBG] Getting claims for identity token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3 and client: UserManagementUI
2018-08-26 23:45:32.823 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-26 23:45:32.828 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****SxBw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****12a5"
    }
  ],
  "ActivityId": "0HLGBL5CF5VC1:00000017",
  "TimeStamp": "2018-08-27T02:45:32Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 23:45:32.831 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "jeOdHGfboA1JnLxbnizDSNbTKHvseBM7aKNw6U7q;login",
  "Scope": "openid profile email"
}
2018-08-26 23:45:34.165 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:45:34.170 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:45:34.171 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:45:34.173 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:45:34.176 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:45:34.179 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:45:34.182 -03:00 [DBG] Start discovery request
2018-08-26 23:45:34.194 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:45:34.220 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:45:34.225 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:45:34.227 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:45:34.228 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:45:34.234 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:45:34.236 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:45:34.239 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:45:34.239 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:45:34.241 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:45:34.243 -03:00 [DBG] Start discovery request
2018-08-26 23:45:34.244 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:45:34.254 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:45:34.257 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:45:34.260 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:45:34.263 -03:00 [DBG] Start key discovery request
2018-08-26 23:45:34.321 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:45:34.325 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:45:34.327 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:45:34.329 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:45:34.332 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:45:34.336 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:45:34.338 -03:00 [DBG] Start key discovery request
2018-08-26 23:45:49.523 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:45:49.527 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:45:49.531 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:45:49.531 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:45:49.534 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:45:49.539 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:45:49.540 -03:00 [DBG] Start discovery request
2018-08-26 23:45:49.553 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:45:49.578 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:45:49.585 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:45:49.587 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:45:49.589 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:45:49.589 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:45:49.597 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:45:49.598 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:45:49.600 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:45:49.603 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:45:49.606 -03:00 [DBG] Start discovery request
2018-08-26 23:45:49.607 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:45:49.610 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:45:49.613 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:45:49.618 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:45:49.619 -03:00 [DBG] Start key discovery request
2018-08-26 23:45:49.682 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:45:49.687 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:45:49.689 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:45:49.690 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:45:49.691 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:45:49.697 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:45:49.699 -03:00 [DBG] Start key discovery request
2018-08-26 23:46:06.828 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:46:06.833 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:46:06.835 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:46:06.836 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:46:06.839 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:46:06.845 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:46:06.847 -03:00 [DBG] Start discovery request
2018-08-26 23:46:06.860 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:46:06.878 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:46:06.881 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:46:06.882 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:46:06.885 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:46:06.886 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:46:06.889 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:46:06.890 -03:00 [DBG] Start key discovery request
2018-08-26 23:46:09.054 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-26 23:46:09.062 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-26 23:46:09.064 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-26 23:46:09.074 -03:00 [DBG] Processing signout request for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 23:46:09.081 -03:00 [DBG] Start end session request validation
2018-08-26 23:46:09.089 -03:00 [DBG] Start identity token validation
2018-08-26 23:46:09.112 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:46:09.114 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-26 23:46:09.164 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-26 23:46:09.170 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535337932,
    "exp": 1535338232,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "jeOdHGfboA1JnLxbnizDSNbTKHvseBM7aKNw6U7q",
    "iat": 1535337932,
    "at_hash": "RhBcaqGbz5j0Xxkq_Y96bA",
    "sid": "f6933a5634abb3d2b645f6920ce828e1",
    "sub": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
    "auth_time": 1535324833,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-08-26 23:46:09.177 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzUzMzc5MzIsImV4cCI6MTUzNTMzODIzMiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiamVPZEhHZmJvQTFKbkx4Ym5pekRTTmJUS0h2c2VCTTdhS053NlU3cSIsImlhdCI6MTUzNTMzNzkzMiwiYXRfaGFzaCI6IlJoQmNhcUdiejVqMFh4a3FfWTk2YkEiLCJzaWQiOiJmNjkzM2E1NjM0YWJiM2QyYjY0NWY2OTIwY2U4MjhlMSIsInN1YiI6IjQyMjYxYTVmLWExNGItNDhlNS04NTMzLTNiNmNhMjQ1NjRlMyIsImF1dGhfdGltZSI6MTUzNTMyNDgzMywiaWRwIjoiRmFjZWJvb2siLCJhbXIiOlsiZXh0ZXJuYWwiXX0.XE7fBwKHumcKjwcL_y9XMFdlxibmKeqJvCu0v5Y6bLMiiJ3ywEo-LeDD_sJuxYg-1NfwGTFtIS5FB6y0sqZcZrXtEjht_7-x6ce9_5cDw9fdWh1MBUjTe2YgvHCjcOvx2D_83mGiDRVx-HSn7wvXM2vukaseGEL8pw4N6U9nbQ_eU-8jXte2tkB6xYt1iUlmKMDeGlSmbnigmNU7UfjqDQ5VIIgC2aTdFHjeKWqpOjku9h-8uP_f_eaUeQ6v4isRDyh0LP0BHImntHNHr01cbjOAzwYxEIJVeQsmX8Nq5uvsokDPSFmFMLFSaU-N7uRkSfZ4nvl0V7pSBV-igRSxBw",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-26 23:46:09.183 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-26 23:46:09.325 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-26 23:46:09.331 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-26 23:46:09.333 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-26 23:46:09.340 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGBL5CF5VC1:00000019",
  "TimeStamp": "2018-08-27T02:46:09Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 23:46:10.163 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-26 23:46:10.172 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-26 23:46:10.173 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-26 23:46:10.180 -03:00 [DBG] Processing signout callback request
2018-08-26 23:46:10.204 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:46:10.206 -03:00 [DBG] No client front-channel logout URLs
2018-08-26 23:46:10.207 -03:00 [DBG] No client back-channel logout URLs
2018-08-26 23:46:10.208 -03:00 [INF] Successful signout callback.
2018-08-26 23:46:10.209 -03:00 [DBG] No client front-channel iframe urls
2018-08-26 23:46:10.211 -03:00 [DBG] No client back-channel iframe urls
2018-08-26 23:46:13.600 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:46:13.604 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:46:13.608 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:46:13.608 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:46:13.610 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:46:13.615 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:46:13.618 -03:00 [DBG] Start discovery request
2018-08-26 23:46:13.630 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:46:13.664 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:46:13.671 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:46:13.673 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:46:13.674 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:46:13.677 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:46:13.678 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:46:13.680 -03:00 [DBG] Start key discovery request
2018-08-26 23:46:21.297 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 23:46:21.301 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 23:46:21.303 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 23:46:21.304 -03:00 [DBG] Start authorize request
2018-08-26 23:46:21.305 -03:00 [DBG] No user present in authorize request
2018-08-26 23:46:21.306 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:46:21.320 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:46:21.325 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:46:21.329 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:46:21.336 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:46:21.338 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:46:21.342 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:46:21.343 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "Dcjs638UWxIySBJNcQIOQQYlwlp5VrBj9A41hjqS;login",
  "Nonce": "Dcjs638UWxIySBJNcQIOQQYlwlp5VrBj9A41hjqS",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "Dcjs638UWxIySBJNcQIOQQYlwlp5VrBj9A41hjqS;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "Dcjs638UWxIySBJNcQIOQQYlwlp5VrBj9A41hjqS"
  }
}
2018-08-26 23:46:21.348 -03:00 [INF] Showing login: User is not authenticated
2018-08-26 23:46:21.369 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:46:21.384 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:46:21.388 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:46:21.393 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:46:21.398 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:46:21.401 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:46:21.403 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:46:21.414 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:46:31.171 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-26 23:46:32.277 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-26 23:46:32.377 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGBL5CF5VC2:00000016",
  "TimeStamp": "2018-08-27T02:46:32Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 23:46:32.389 -03:00 [DBG] Augmenting SignInContext
2018-08-26 23:46:32.391 -03:00 [DBG] Adding amr claim with value: external
2018-08-26 23:46:32.393 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-26 23:46:32.395 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-26 23:46:32.411 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-26 23:46:32.414 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-26 23:46:32.414 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-26 23:46:32.416 -03:00 [DBG] Start authorize callback request
2018-08-26 23:46:32.418 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 23:46:32.419 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:46:32.428 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:46:32.431 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:46:32.436 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:46:32.438 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:46:32.441 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:46:32.443 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:46:32.445 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "Dcjs638UWxIySBJNcQIOQQYlwlp5VrBj9A41hjqS;login",
  "Nonce": "Dcjs638UWxIySBJNcQIOQQYlwlp5VrBj9A41hjqS",
  "SessionId": "eb0e7ae566c4ecb4daac55749705676b",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "Dcjs638UWxIySBJNcQIOQQYlwlp5VrBj9A41hjqS;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "Dcjs638UWxIySBJNcQIOQQYlwlp5VrBj9A41hjqS"
  }
}
2018-08-26 23:46:32.456 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: true
2018-08-26 23:46:32.460 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-26 23:46:32.461 -03:00 [DBG] Creating Implicit Flow response.
2018-08-26 23:46:32.462 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-26 23:46:32.463 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 23:46:32.476 -03:00 [DBG] ZdRMpDYEL1ZCePN7clInHA02WWh3GFIRKL4nttOX4+E= not found in database
2018-08-26 23:46:32.486 -03:00 [DBG] Getting claims for identity token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3 and client: UserManagementUI
2018-08-26 23:46:32.487 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-26 23:46:32.491 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****dCoQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****f377"
    }
  ],
  "ActivityId": "0HLGBL5CF5VC2:00000017",
  "TimeStamp": "2018-08-27T02:46:32Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 23:46:32.494 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "Dcjs638UWxIySBJNcQIOQQYlwlp5VrBj9A41hjqS;login",
  "Scope": "openid profile email"
}
2018-08-26 23:46:32.503 -03:00 [DBG] Augmenting SignInContext
2018-08-26 23:46:32.504 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-26 23:46:34.147 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:46:34.150 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:46:34.152 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:46:34.153 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:46:34.155 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:46:34.160 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:46:34.162 -03:00 [DBG] Start discovery request
2018-08-26 23:46:34.175 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:46:34.207 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:46:34.213 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:46:34.215 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:46:34.217 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:46:34.221 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:46:34.224 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:46:34.226 -03:00 [DBG] Start discovery request
2018-08-26 23:46:34.230 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:46:34.237 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:46:34.291 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:46:34.294 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:46:34.296 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:46:34.298 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:46:34.301 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:46:34.304 -03:00 [DBG] Start key discovery request
2018-08-26 23:46:34.313 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:46:34.316 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:46:34.318 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:46:34.318 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:46:34.321 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:46:34.323 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:46:34.329 -03:00 [DBG] Start key discovery request
2018-08-26 23:46:44.602 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:46:44.609 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:46:44.610 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:46:44.612 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:46:44.615 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:46:44.618 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:46:44.626 -03:00 [DBG] Start discovery request
2018-08-26 23:46:44.639 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:46:44.729 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:46:44.734 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:46:44.736 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:46:44.738 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:46:44.742 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:46:44.744 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:46:44.750 -03:00 [DBG] Start key discovery request
2018-08-26 23:46:52.512 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:46:52.515 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:46:52.516 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:46:52.517 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:46:52.519 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:46:52.520 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:46:52.522 -03:00 [DBG] Start discovery request
2018-08-26 23:46:52.535 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:46:52.563 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:46:52.569 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:46:52.570 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:46:52.572 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:46:52.578 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:46:52.580 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:46:52.582 -03:00 [DBG] Start key discovery request
2018-08-26 23:46:59.593 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:46:59.597 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:46:59.598 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:46:59.599 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:46:59.601 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:46:59.605 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:46:59.609 -03:00 [DBG] Start discovery request
2018-08-26 23:46:59.621 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:46:59.647 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:46:59.653 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:46:59.655 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:46:59.657 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:46:59.662 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:46:59.667 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:46:59.669 -03:00 [DBG] Start key discovery request
2018-08-26 23:47:10.331 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:47:10.336 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:47:10.338 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:47:10.340 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:47:10.345 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:47:10.369 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:47:10.375 -03:00 [DBG] Start discovery request
2018-08-26 23:47:10.388 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:47:10.431 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:47:10.437 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:47:10.440 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:47:10.441 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:47:10.445 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:47:10.450 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:47:10.452 -03:00 [DBG] Start key discovery request
2018-08-26 23:47:14.697 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:47:14.700 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:47:14.702 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:47:14.703 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:47:14.704 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:47:14.707 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:47:14.711 -03:00 [DBG] Start discovery request
2018-08-26 23:47:14.724 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:47:14.757 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:47:14.763 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:47:14.765 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:47:14.767 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:47:14.771 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:47:14.773 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:47:14.777 -03:00 [DBG] Start key discovery request
2018-08-26 23:47:18.623 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:47:18.627 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:47:18.629 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:47:18.631 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:47:18.632 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:47:18.638 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:47:18.640 -03:00 [DBG] Start discovery request
2018-08-26 23:47:18.654 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:47:18.750 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:47:18.756 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:47:18.758 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:47:18.761 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:47:18.767 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:47:18.770 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:47:18.772 -03:00 [DBG] Start key discovery request
2018-08-26 23:48:47.508 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:48:47.516 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:48:47.518 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:48:47.520 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:48:47.524 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:48:47.528 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:48:47.533 -03:00 [DBG] Start discovery request
2018-08-26 23:48:47.548 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:48:47.580 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:48:47.584 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:48:47.585 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:48:47.587 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:48:47.591 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:48:47.596 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:48:47.598 -03:00 [DBG] Start key discovery request
2018-08-26 23:50:38.441 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:50:38.447 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:50:38.449 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:50:38.451 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:50:38.456 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:50:38.458 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:50:38.459 -03:00 [DBG] Start discovery request
2018-08-26 23:50:38.470 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:50:38.525 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:50:38.534 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:50:38.535 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:50:38.537 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:50:38.540 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:50:38.545 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:50:38.549 -03:00 [DBG] Start key discovery request
2018-08-26 23:50:49.289 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:50:49.298 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:50:49.300 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:50:49.302 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:50:49.305 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:50:49.306 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:50:49.308 -03:00 [DBG] Start discovery request
2018-08-26 23:50:49.322 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:50:49.405 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:50:49.410 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:50:49.411 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:50:49.412 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:50:49.414 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:50:49.415 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:50:49.421 -03:00 [DBG] Start key discovery request
2018-08-26 23:51:03.116 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:51:03.126 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:51:03.129 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:51:03.131 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:51:03.133 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:51:03.136 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:51:03.141 -03:00 [DBG] Start discovery request
2018-08-26 23:51:03.152 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:51:03.223 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:51:03.231 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:51:03.232 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:51:03.236 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:51:03.238 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:51:03.241 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:51:03.245 -03:00 [DBG] Start key discovery request
2018-08-26 23:51:09.933 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:51:09.942 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:51:09.944 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:51:09.946 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:51:09.951 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:51:09.953 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:51:09.955 -03:00 [DBG] Start discovery request
2018-08-26 23:51:09.969 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:51:10.068 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:51:10.072 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:51:10.075 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:51:10.077 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:51:10.081 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:51:10.084 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:51:10.086 -03:00 [DBG] Start key discovery request
2018-08-26 23:51:13.971 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-26 23:51:13.974 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-26 23:51:13.978 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-26 23:51:13.982 -03:00 [DBG] Processing signout request for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 23:51:13.985 -03:00 [DBG] Start end session request validation
2018-08-26 23:51:13.988 -03:00 [DBG] Start identity token validation
2018-08-26 23:51:14.000 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:51:14.001 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-26 23:51:14.016 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-26 23:51:14.017 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535337992,
    "exp": 1535338292,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "Dcjs638UWxIySBJNcQIOQQYlwlp5VrBj9A41hjqS",
    "iat": 1535337992,
    "at_hash": "5V8daimqqbr9zIrWTGQz-A",
    "sid": "eb0e7ae566c4ecb4daac55749705676b",
    "sub": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
    "auth_time": 1535337992,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-08-26 23:51:14.023 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzUzMzc5OTIsImV4cCI6MTUzNTMzODI5MiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiRGNqczYzOFVXeEl5U0JKTmNRSU9RUVlsd2xwNVZyQmo5QTQxaGpxUyIsImlhdCI6MTUzNTMzNzk5MiwiYXRfaGFzaCI6IjVWOGRhaW1xcWJyOXpJcldUR1F6LUEiLCJzaWQiOiJlYjBlN2FlNTY2YzRlY2I0ZGFhYzU1NzQ5NzA1Njc2YiIsInN1YiI6IjQyMjYxYTVmLWExNGItNDhlNS04NTMzLTNiNmNhMjQ1NjRlMyIsImF1dGhfdGltZSI6MTUzNTMzNzk5MiwiaWRwIjoiRmFjZWJvb2siLCJhbXIiOlsiZXh0ZXJuYWwiXX0.i9fB_RckNQgf_g6z5M9W45gLc9cWCOD8rEuVqq_RYMX0XvVr0LHatBinOWb8TRIAYgm1ecHTr8V_mF4c__8ngCgoyTkt-5nLyo9bT0fsdAIGmefsfxyxVGZYdjIgHBBNBhT-Q545iVUp8Gbt70vr8Mzf62pY_Jt_dktESBDHgE-x3hUZxo8wMQdfyd3uEBJFzjPlhBDyaSSCXMTdqb9ByAD_GdzefKjrfOF1tdZ7aLmiDtc8PCMMcysYqaePaLliR9wgAzRc-jYqsZXQl31clFw5dxppgeH8R3pN2G4r4ptM5Dr1HkSK8bPHmqomTyvhrbqVXUIZBZcq0u-E37dCoQ",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-26 23:51:14.033 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-26 23:51:14.051 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-26 23:51:14.053 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-26 23:51:14.055 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-26 23:51:14.060 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGBL5CF5VC2:00000019",
  "TimeStamp": "2018-08-27T02:51:14Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 23:51:14.442 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-26 23:51:14.445 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-26 23:51:14.447 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-26 23:51:14.451 -03:00 [DBG] Processing signout callback request
2018-08-26 23:51:14.464 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:51:14.467 -03:00 [DBG] No client front-channel logout URLs
2018-08-26 23:51:14.469 -03:00 [DBG] No client back-channel logout URLs
2018-08-26 23:51:14.470 -03:00 [INF] Successful signout callback.
2018-08-26 23:51:14.472 -03:00 [DBG] No client front-channel iframe urls
2018-08-26 23:51:14.473 -03:00 [DBG] No client back-channel iframe urls
2018-08-26 23:51:17.708 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:51:17.717 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:51:17.719 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:51:17.721 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:51:17.723 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:51:17.724 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:51:17.728 -03:00 [DBG] Start discovery request
2018-08-26 23:51:17.742 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:51:17.761 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:51:17.768 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:51:17.769 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:51:17.770 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:51:17.774 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:51:17.776 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:51:17.778 -03:00 [DBG] Start key discovery request
2018-08-26 23:51:19.562 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 23:51:19.565 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 23:51:19.568 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 23:51:19.568 -03:00 [DBG] Start authorize request
2018-08-26 23:51:19.569 -03:00 [DBG] No user present in authorize request
2018-08-26 23:51:19.570 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:51:19.579 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:51:19.585 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:51:19.588 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:51:19.593 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:51:19.596 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:51:19.598 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:51:19.599 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "eQyOfGRjUXZjwSXGDm4Foxwh3h8ZpAonKBU8ugTo;login",
  "Nonce": "eQyOfGRjUXZjwSXGDm4Foxwh3h8ZpAonKBU8ugTo",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "eQyOfGRjUXZjwSXGDm4Foxwh3h8ZpAonKBU8ugTo;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "eQyOfGRjUXZjwSXGDm4Foxwh3h8ZpAonKBU8ugTo"
  }
}
2018-08-26 23:51:19.606 -03:00 [INF] Showing login: User is not authenticated
2018-08-26 23:51:19.616 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:51:19.637 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:51:19.642 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:51:19.646 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:51:19.650 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:51:19.652 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:51:19.655 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:51:19.669 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:51:22.477 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-26 23:51:23.074 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-26 23:51:23.103 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGBL5CF5VC4:00000012",
  "TimeStamp": "2018-08-27T02:51:23Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 23:51:23.107 -03:00 [DBG] Augmenting SignInContext
2018-08-26 23:51:23.108 -03:00 [DBG] Adding amr claim with value: external
2018-08-26 23:51:23.109 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-26 23:51:23.111 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-26 23:51:23.123 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-26 23:51:23.124 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-26 23:51:23.127 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-26 23:51:23.127 -03:00 [DBG] Start authorize callback request
2018-08-26 23:51:23.128 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 23:51:23.129 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:51:23.140 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:51:23.144 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:51:23.147 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:51:23.151 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:51:23.154 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:51:23.156 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:51:23.157 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "eQyOfGRjUXZjwSXGDm4Foxwh3h8ZpAonKBU8ugTo;login",
  "Nonce": "eQyOfGRjUXZjwSXGDm4Foxwh3h8ZpAonKBU8ugTo",
  "SessionId": "877ce52dcb316782e7482a06fa11aec4",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "eQyOfGRjUXZjwSXGDm4Foxwh3h8ZpAonKBU8ugTo;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "eQyOfGRjUXZjwSXGDm4Foxwh3h8ZpAonKBU8ugTo"
  }
}
2018-08-26 23:51:23.173 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: true
2018-08-26 23:51:23.178 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-26 23:51:23.179 -03:00 [DBG] Creating Implicit Flow response.
2018-08-26 23:51:23.179 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-26 23:51:23.180 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 23:51:23.194 -03:00 [DBG] zXCa9AF7gIfrHvgXKHb3F3S61ulBXx5Hd2uT37aYFZI= not found in database
2018-08-26 23:51:23.200 -03:00 [DBG] Getting claims for identity token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3 and client: UserManagementUI
2018-08-26 23:51:23.201 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-26 23:51:23.205 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****7MTw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****d041"
    }
  ],
  "ActivityId": "0HLGBL5CF5VC4:00000013",
  "TimeStamp": "2018-08-27T02:51:23Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 23:51:23.209 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "eQyOfGRjUXZjwSXGDm4Foxwh3h8ZpAonKBU8ugTo;login",
  "Scope": "openid profile email"
}
2018-08-26 23:51:23.211 -03:00 [DBG] Augmenting SignInContext
2018-08-26 23:51:23.213 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-26 23:56:35.921 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:56:35.988 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:56:35.992 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:56:35.996 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:56:36.000 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:56:36.007 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:56:36.011 -03:00 [DBG] Start discovery request
2018-08-26 23:56:36.029 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:56:36.073 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:56:36.099 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:56:36.103 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:56:36.107 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:56:36.110 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:56:36.112 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:56:36.117 -03:00 [DBG] Start key discovery request
2018-08-26 23:57:21.344 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-26 23:57:21.357 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:57:21.361 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:57:21.363 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-26 23:57:21.367 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-26 23:57:21.371 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-26 23:57:21.372 -03:00 [DBG] Start discovery request
2018-08-26 23:57:21.385 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-26 23:57:21.467 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-26 23:57:21.472 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-26 23:57:21.473 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-26 23:57:21.475 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-26 23:57:21.478 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-26 23:57:21.484 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-26 23:57:21.485 -03:00 [DBG] Start key discovery request
2018-08-26 23:57:22.497 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-26 23:57:22.508 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-26 23:57:22.509 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-26 23:57:22.513 -03:00 [DBG] Start authorize request
2018-08-26 23:57:22.519 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 23:57:22.524 -03:00 [DBG] Start authorize request protocol validation
2018-08-26 23:57:22.543 -03:00 [DBG] UserManagementUI found in database: true
2018-08-26 23:57:22.551 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:57:22.556 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:57:22.560 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-26 23:57:22.564 -03:00 [DBG] Found [] API scopes in database
2018-08-26 23:57:22.565 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-26 23:57:22.571 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "xoqiOfCdioGLHKCRXxs4RzR1vOhXS6FHEtrg5A88;login",
  "Nonce": "xoqiOfCdioGLHKCRXxs4RzR1vOhXS6FHEtrg5A88",
  "SessionId": "877ce52dcb316782e7482a06fa11aec4",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "xoqiOfCdioGLHKCRXxs4RzR1vOhXS6FHEtrg5A88;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "xoqiOfCdioGLHKCRXxs4RzR1vOhXS6FHEtrg5A88"
  }
}
2018-08-26 23:57:22.590 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: true
2018-08-26 23:57:22.597 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-26 23:57:22.598 -03:00 [DBG] Creating Implicit Flow response.
2018-08-26 23:57:22.598 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-26 23:57:22.600 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-26 23:57:22.626 -03:00 [DBG] puR5Aha8Kj28DTUwvNed4lL4/0OImke5mYrpLnEf9Oo= not found in database
2018-08-26 23:57:22.638 -03:00 [DBG] Getting claims for identity token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3 and client: UserManagementUI
2018-08-26 23:57:22.639 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-26 23:57:22.643 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****gK2Q"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****81f8"
    }
  ],
  "ActivityId": "0HLGBL5CF5VC8:00000001",
  "TimeStamp": "2018-08-27T02:57:22Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-26 23:57:22.654 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "xoqiOfCdioGLHKCRXxs4RzR1vOhXS6FHEtrg5A88;login",
  "Scope": "openid profile email"
}
2018-08-27 00:00:56.982 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:00:56.989 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:00:56.995 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:00:56.997 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:00:56.998 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:00:57.000 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:00:57.001 -03:00 [DBG] Start discovery request
2018-08-27 00:00:57.013 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:00:57.074 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:00:57.079 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:00:57.082 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:00:57.084 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:00:57.090 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:00:57.093 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:00:57.095 -03:00 [DBG] Start key discovery request
2018-08-27 00:00:57.341 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:00:57.347 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:00:57.349 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:00:57.351 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:00:57.354 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:00:57.361 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:00:57.364 -03:00 [DBG] Start discovery request
2018-08-27 00:00:57.377 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:00:57.444 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:00:57.451 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:00:57.453 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:00:57.454 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:00:57.459 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:00:57.460 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:00:57.463 -03:00 [DBG] Start key discovery request
2018-08-27 00:01:10.417 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:01:10.424 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:01:10.426 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:01:10.428 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:01:10.432 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:01:10.437 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:01:10.442 -03:00 [DBG] Start discovery request
2018-08-27 00:01:10.453 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:01:10.473 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:01:10.478 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:01:10.480 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:01:10.484 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:01:10.487 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:01:10.490 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:01:10.491 -03:00 [DBG] Start key discovery request
2018-08-27 00:01:12.032 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:01:12.038 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:01:12.039 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:01:12.041 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:01:12.045 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:01:12.049 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:01:12.050 -03:00 [DBG] Start discovery request
2018-08-27 00:01:12.058 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:01:12.071 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:01:12.074 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:01:12.075 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:01:12.077 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:01:12.079 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:01:12.080 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:01:12.082 -03:00 [DBG] Start key discovery request
2018-08-27 00:01:14.948 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 00:01:14.951 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 00:01:14.954 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 00:01:14.962 -03:00 [DBG] Processing signout request for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:01:14.964 -03:00 [DBG] Start end session request validation
2018-08-27 00:01:14.968 -03:00 [DBG] Start identity token validation
2018-08-27 00:01:14.986 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:01:14.988 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 00:01:15.002 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 00:01:15.005 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535338642,
    "exp": 1535338942,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "xoqiOfCdioGLHKCRXxs4RzR1vOhXS6FHEtrg5A88",
    "iat": 1535338642,
    "at_hash": "mjD_jgNYXN3M5JVkJWFUkg",
    "sid": "877ce52dcb316782e7482a06fa11aec4",
    "sub": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
    "auth_time": 1535338283,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-08-27 00:01:15.011 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzUzMzg2NDIsImV4cCI6MTUzNTMzODk0MiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoieG9xaU9mQ2Rpb0dMSEtDUlh4czRSelIxdk9oWFM2RkhFdHJnNUE4OCIsImlhdCI6MTUzNTMzODY0MiwiYXRfaGFzaCI6Im1qRF9qZ05ZWE4zTTVKVmtKV0ZVa2ciLCJzaWQiOiI4NzdjZTUyZGNiMzE2NzgyZTc0ODJhMDZmYTExYWVjNCIsInN1YiI6IjQyMjYxYTVmLWExNGItNDhlNS04NTMzLTNiNmNhMjQ1NjRlMyIsImF1dGhfdGltZSI6MTUzNTMzODI4MywiaWRwIjoiRmFjZWJvb2siLCJhbXIiOlsiZXh0ZXJuYWwiXX0.p3dQHbpLDZG-ES1Q5Wncp4ZvbM6RSbZpLJoLZSLjX12nOjF4CKATgg05ho3ceZdIGH9ghnxol5YxludUTUJWZ27Aez2Pol-rAwBCCLTn5KEd5LGWrYvSzEKDoztBuMKA9aGBor-rgrxr2Ao2TLFNgp3kigrUnsOYh37B_DJFRa7CturBMtg8llT3gM6nL_XRPYfiNXSmUamYVWtxrVpgN9Ry1cMGJRaxZ44NinGbbMVNW25NQTzyRKfZxvNd4jywkn4FBtlonNK3undMseCKgxChNlAb2CKrY5KEpmvb2K_n_bWkdjAeVohJPcnpQHkTy2Y7LUuToLds6xOxgtgK2Q",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 00:01:15.022 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 00:01:15.042 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 00:01:15.043 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 00:01:15.046 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 00:01:15.049 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGBL5CF5VC8:00000003",
  "TimeStamp": "2018-08-27T03:01:15Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:01:15.555 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 00:01:15.558 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 00:01:15.562 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 00:01:15.563 -03:00 [DBG] Processing signout callback request
2018-08-27 00:01:15.582 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:01:15.584 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 00:01:15.585 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 00:01:15.587 -03:00 [INF] Successful signout callback.
2018-08-27 00:01:15.592 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 00:01:15.595 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 00:01:18.707 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:01:18.715 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:01:18.717 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:01:18.719 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:01:18.723 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:01:18.727 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:01:18.729 -03:00 [DBG] Start discovery request
2018-08-27 00:01:18.741 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:01:18.765 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:01:18.771 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:01:18.773 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:01:18.773 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:01:18.776 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:01:18.781 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:01:18.782 -03:00 [DBG] Start key discovery request
2018-08-27 00:01:19.997 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 00:01:20.000 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 00:01:20.002 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 00:01:20.004 -03:00 [DBG] Start authorize request
2018-08-27 00:01:20.006 -03:00 [DBG] No user present in authorize request
2018-08-27 00:01:20.007 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:01:20.028 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:01:20.036 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:01:20.040 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:01:20.045 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:01:20.050 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:01:20.052 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:01:20.055 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "yOBUlCiIboRTVFzUABo6LiP1WPCpW8LNbjeZHzUU;login",
  "Nonce": "yOBUlCiIboRTVFzUABo6LiP1WPCpW8LNbjeZHzUU",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "yOBUlCiIboRTVFzUABo6LiP1WPCpW8LNbjeZHzUU;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "yOBUlCiIboRTVFzUABo6LiP1WPCpW8LNbjeZHzUU"
  }
}
2018-08-27 00:01:20.068 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 00:01:20.078 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:01:20.093 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:01:20.098 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:01:20.102 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:01:20.109 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:01:20.113 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:01:20.116 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:01:20.128 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:01:21.754 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 00:01:22.439 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 00:01:22.464 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGBL5CF5VCB:00000005",
  "TimeStamp": "2018-08-27T03:01:22Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:01:22.471 -03:00 [DBG] Augmenting SignInContext
2018-08-27 00:01:22.473 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 00:01:22.475 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 00:01:22.480 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 00:01:22.490 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 00:01:22.492 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 00:01:22.493 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 00:01:22.495 -03:00 [DBG] Start authorize callback request
2018-08-27 00:01:22.495 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:01:22.498 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:01:22.514 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:01:22.520 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:01:22.523 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:01:22.527 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:01:22.530 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:01:22.532 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:01:22.534 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "yOBUlCiIboRTVFzUABo6LiP1WPCpW8LNbjeZHzUU;login",
  "Nonce": "yOBUlCiIboRTVFzUABo6LiP1WPCpW8LNbjeZHzUU",
  "SessionId": "9b18daa2bab98e501fe9f2f15327851d",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "yOBUlCiIboRTVFzUABo6LiP1WPCpW8LNbjeZHzUU;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "yOBUlCiIboRTVFzUABo6LiP1WPCpW8LNbjeZHzUU"
  }
}
2018-08-27 00:01:22.548 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: true
2018-08-27 00:01:22.555 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 00:01:22.556 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 00:01:22.557 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 00:01:22.560 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:01:22.572 -03:00 [DBG] MHqff8Fe0SW1aNIejJuPClxCSPGX5wFnsubE52w/zvU= not found in database
2018-08-27 00:01:22.584 -03:00 [DBG] Getting claims for identity token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3 and client: UserManagementUI
2018-08-27 00:01:22.586 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 00:01:22.589 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****-fZw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****dc8c"
    }
  ],
  "ActivityId": "0HLGBL5CF5VCB:00000006",
  "TimeStamp": "2018-08-27T03:01:22Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:01:22.597 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "yOBUlCiIboRTVFzUABo6LiP1WPCpW8LNbjeZHzUU;login",
  "Scope": "openid profile email"
}
2018-08-27 00:01:22.602 -03:00 [DBG] Augmenting SignInContext
2018-08-27 00:01:22.604 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 00:01:25.083 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:01:25.086 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:01:25.087 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:01:25.088 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:01:25.089 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:01:25.091 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:01:25.092 -03:00 [DBG] Start discovery request
2018-08-27 00:01:25.106 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:01:25.125 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:01:25.129 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:01:25.131 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:01:25.132 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:01:25.135 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:01:25.140 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:01:25.141 -03:00 [DBG] Start key discovery request
2018-08-27 00:01:43.773 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:01:43.776 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:01:43.778 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:01:43.779 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:01:43.781 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:01:43.782 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:01:43.787 -03:00 [DBG] Start discovery request
2018-08-27 00:01:43.798 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:01:43.825 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:01:43.830 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:01:43.832 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:01:43.834 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:01:43.838 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:01:43.841 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:01:43.843 -03:00 [DBG] Start key discovery request
2018-08-27 00:01:46.024 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:01:46.030 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:01:46.032 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:01:46.033 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:01:46.036 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:01:46.038 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:01:46.040 -03:00 [DBG] Start discovery request
2018-08-27 00:01:46.054 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:01:46.071 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:01:46.079 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:01:46.080 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:01:46.080 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:01:46.084 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:01:46.086 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:01:46.087 -03:00 [DBG] Start key discovery request
2018-08-27 00:04:50.840 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:04:50.847 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:04:50.853 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:04:50.854 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:04:50.856 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:04:50.858 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:04:50.859 -03:00 [DBG] Start discovery request
2018-08-27 00:04:50.871 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:04:50.893 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:04:50.897 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:04:50.899 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:04:50.900 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:04:50.901 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:04:50.902 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:04:50.907 -03:00 [DBG] Start key discovery request
2018-08-27 00:05:26.822 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:05:26.827 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:05:26.829 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:05:26.830 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:05:26.831 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:05:26.835 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:05:26.836 -03:00 [DBG] Start discovery request
2018-08-27 00:05:26.848 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:05:26.870 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:05:26.876 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:05:26.878 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:05:26.878 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:05:26.880 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:05:26.884 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:05:26.887 -03:00 [DBG] Start key discovery request
2018-08-27 00:05:34.065 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:05:34.070 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:05:34.072 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:05:34.073 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:05:34.079 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:05:34.082 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:05:34.084 -03:00 [DBG] Start discovery request
2018-08-27 00:05:34.092 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:05:34.110 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:05:34.115 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:05:34.117 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:05:34.118 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:05:34.120 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:05:34.127 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:05:34.130 -03:00 [DBG] Start key discovery request
2018-08-27 00:05:38.687 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:05:38.690 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:05:38.692 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:05:38.692 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:05:38.694 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:05:38.696 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:05:38.701 -03:00 [DBG] Start discovery request
2018-08-27 00:05:38.711 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:05:38.730 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:05:38.735 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:05:38.737 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:05:38.738 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:05:38.742 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:05:38.746 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:05:38.749 -03:00 [DBG] Start key discovery request
2018-08-27 00:06:43.023 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:06:43.040 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:06:43.045 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:06:43.050 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:06:43.061 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:06:43.067 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:06:43.072 -03:00 [DBG] Start discovery request
2018-08-27 00:06:43.089 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:06:43.133 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:06:43.149 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:06:43.156 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:06:43.158 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:06:43.164 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:06:43.173 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:06:43.176 -03:00 [DBG] Start key discovery request
2018-08-27 00:06:44.291 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:06:44.296 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:06:44.298 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:06:44.300 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:06:44.303 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:06:44.307 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:06:44.311 -03:00 [DBG] Start discovery request
2018-08-27 00:06:44.323 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:06:44.374 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:06:44.378 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:06:44.379 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:06:44.381 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:06:44.383 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:06:44.384 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:06:44.390 -03:00 [DBG] Start key discovery request
2018-08-27 00:06:51.074 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 00:06:51.077 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 00:06:51.078 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 00:06:51.080 -03:00 [DBG] Start authorize request
2018-08-27 00:06:51.082 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:06:51.084 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:06:51.105 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:06:51.110 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:06:51.114 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:06:51.118 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:06:51.122 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:06:51.124 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:06:51.127 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "BoBvR33m88wBOsCbtLVxhQtr6WFGhrEx4kyqtgk4;login",
  "Nonce": "BoBvR33m88wBOsCbtLVxhQtr6WFGhrEx4kyqtgk4",
  "SessionId": "9b18daa2bab98e501fe9f2f15327851d",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "BoBvR33m88wBOsCbtLVxhQtr6WFGhrEx4kyqtgk4;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "BoBvR33m88wBOsCbtLVxhQtr6WFGhrEx4kyqtgk4"
  }
}
2018-08-27 00:06:51.140 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: true
2018-08-27 00:06:51.145 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 00:06:51.146 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 00:06:51.146 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 00:06:51.148 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:06:51.163 -03:00 [DBG] WX7L0rrwJVTmjuePQdOr2JOUWDYSfMlB7R0B86OJKH8= not found in database
2018-08-27 00:06:51.171 -03:00 [DBG] Getting claims for identity token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3 and client: UserManagementUI
2018-08-27 00:06:51.173 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 00:06:51.177 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****yACg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****4d88"
    }
  ],
  "ActivityId": "0HLGBL5CF5VCD:00000001",
  "TimeStamp": "2018-08-27T03:06:51Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:06:51.182 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "BoBvR33m88wBOsCbtLVxhQtr6WFGhrEx4kyqtgk4;login",
  "Scope": "openid profile email"
}
2018-08-27 00:06:52.774 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:06:52.783 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:06:52.787 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:06:52.794 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:06:52.798 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:06:52.805 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:06:52.813 -03:00 [DBG] Start discovery request
2018-08-27 00:06:52.826 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:06:52.873 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:06:52.878 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:06:52.880 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:06:52.883 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:06:52.890 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:06:52.894 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:06:52.896 -03:00 [DBG] Start key discovery request
2018-08-27 00:06:58.027 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:06:58.040 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:06:58.044 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:06:58.050 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:06:58.054 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:06:58.060 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:06:58.065 -03:00 [DBG] Start discovery request
2018-08-27 00:06:58.078 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:06:58.103 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:06:58.109 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:06:58.110 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:06:58.112 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:06:58.115 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:06:58.119 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:06:58.122 -03:00 [DBG] Start key discovery request
2018-08-27 00:07:02.632 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:07:02.641 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:07:02.642 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:07:02.644 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:07:02.648 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:07:02.650 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:07:02.658 -03:00 [DBG] Start discovery request
2018-08-27 00:07:02.672 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:07:02.724 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:07:02.729 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:07:02.730 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:07:02.732 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:07:02.734 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:07:02.739 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:07:02.741 -03:00 [DBG] Start key discovery request
2018-08-27 00:07:13.276 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:07:13.283 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:07:13.285 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:07:13.288 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:07:13.291 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:07:13.294 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:07:13.297 -03:00 [DBG] Start discovery request
2018-08-27 00:07:13.312 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:07:13.386 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:07:13.391 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:07:13.393 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:07:13.395 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:07:13.399 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:07:13.402 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:07:13.406 -03:00 [DBG] Start key discovery request
2018-08-27 00:07:32.156 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:07:32.166 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:07:32.170 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:07:32.172 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:07:32.175 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:07:32.180 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:07:32.182 -03:00 [DBG] Start discovery request
2018-08-27 00:07:32.197 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:07:32.236 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:07:32.241 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:07:32.242 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:07:32.244 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:07:32.249 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:07:32.254 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:07:32.256 -03:00 [DBG] Start key discovery request
2018-08-27 00:07:33.559 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:07:33.565 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:07:33.569 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:07:33.569 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:07:33.573 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:07:33.576 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:07:33.579 -03:00 [DBG] Start discovery request
2018-08-27 00:07:33.591 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:07:33.639 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:07:33.643 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:07:33.644 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:07:33.644 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:07:33.645 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:07:33.647 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:07:33.648 -03:00 [DBG] Start key discovery request
2018-08-27 00:07:37.241 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:07:37.246 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:07:37.249 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:07:37.252 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:07:37.256 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:07:37.258 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:07:37.261 -03:00 [DBG] Start discovery request
2018-08-27 00:07:37.275 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:07:37.319 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:07:37.327 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:07:37.331 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:07:37.333 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:07:37.334 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:07:37.338 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:07:37.343 -03:00 [DBG] Start key discovery request
2018-08-27 00:07:46.749 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:07:46.755 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:07:46.757 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:07:46.758 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:07:46.759 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:07:46.764 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:07:46.767 -03:00 [DBG] Start discovery request
2018-08-27 00:07:46.778 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:07:46.801 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:07:46.806 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:07:46.808 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:07:46.812 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:07:46.815 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:07:46.817 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:07:46.819 -03:00 [DBG] Start key discovery request
2018-08-27 00:07:47.877 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:07:47.882 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:07:47.884 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:07:47.890 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:07:47.894 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:07:47.897 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:07:47.899 -03:00 [DBG] Start discovery request
2018-08-27 00:07:47.909 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:07:47.923 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:07:47.926 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:07:47.930 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:07:47.931 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:07:47.934 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:07:47.935 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:07:47.937 -03:00 [DBG] Start key discovery request
2018-08-27 00:07:49.611 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 00:07:49.615 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 00:07:49.617 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 00:07:49.619 -03:00 [DBG] Processing signout request for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:07:49.622 -03:00 [DBG] Start end session request validation
2018-08-27 00:07:49.624 -03:00 [DBG] Start identity token validation
2018-08-27 00:07:49.634 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:07:49.636 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 00:07:49.643 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 00:07:49.644 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535339211,
    "exp": 1535339511,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "BoBvR33m88wBOsCbtLVxhQtr6WFGhrEx4kyqtgk4",
    "iat": 1535339211,
    "at_hash": "jB8fzSuNJ7SWLJc0QDpeEQ",
    "sid": "9b18daa2bab98e501fe9f2f15327851d",
    "sub": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
    "auth_time": 1535338882,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-08-27 00:07:49.647 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzUzMzkyMTEsImV4cCI6MTUzNTMzOTUxMSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiQm9CdlIzM204OHdCT3NDYnRMVnhoUXRyNldGR2hyRXg0a3lxdGdrNCIsImlhdCI6MTUzNTMzOTIxMSwiYXRfaGFzaCI6ImpCOGZ6U3VOSjdTV0xKYzBRRHBlRVEiLCJzaWQiOiI5YjE4ZGFhMmJhYjk4ZTUwMWZlOWYyZjE1MzI3ODUxZCIsInN1YiI6IjQyMjYxYTVmLWExNGItNDhlNS04NTMzLTNiNmNhMjQ1NjRlMyIsImF1dGhfdGltZSI6MTUzNTMzODg4MiwiaWRwIjoiRmFjZWJvb2siLCJhbXIiOlsiZXh0ZXJuYWwiXX0.cMUxFyRS79h-HtsGnJLWC9mFpVeie7u6Np0mb5pLt9v4duEVEzg_wt8hbPkM7NErEjpU0L-SxdKNWP0aVR9akuyXqamR9otBVJSxR_7ISOe3LQg7CUfbYEh1v4swXgRJOIqW51i3cagT7a0Cyr3tckiSuQFBazwc_R6xXgs4vQqowQLQqHXv8rYzEI9Xh-WdA0_afB4jcAspuJiz5moXbDMb_16mXzFpaR59_WJVEr51Mt-am6bvxiZIn2tqCTJltvRxiZvGCup8eXHQ1t76-2_O2FI-Vut6-3bTheRgFNTV5KV4WA1Xp8_lCJ76__DVq71N_VyZcgpVKNSO1zyACg",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 00:07:49.655 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 00:07:49.670 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 00:07:49.673 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 00:07:49.675 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 00:07:49.677 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGBL5CF5VCD:00000003",
  "TimeStamp": "2018-08-27T03:07:49Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:07:50.130 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 00:07:50.132 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 00:07:50.133 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 00:07:50.138 -03:00 [DBG] Processing signout callback request
2018-08-27 00:07:50.152 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:07:50.157 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 00:07:50.157 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 00:07:50.159 -03:00 [INF] Successful signout callback.
2018-08-27 00:07:50.165 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 00:07:50.169 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 00:07:53.199 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:07:53.204 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:07:53.205 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:07:53.207 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:07:53.210 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:07:53.214 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:07:53.216 -03:00 [DBG] Start discovery request
2018-08-27 00:07:53.228 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:07:53.276 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:07:53.280 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:07:53.282 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:07:53.283 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:07:53.286 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:07:53.290 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:07:53.293 -03:00 [DBG] Start key discovery request
2018-08-27 00:07:54.818 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 00:07:54.821 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 00:07:54.825 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 00:07:54.826 -03:00 [DBG] Start authorize request
2018-08-27 00:07:54.827 -03:00 [DBG] No user present in authorize request
2018-08-27 00:07:54.828 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:07:54.843 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:07:54.848 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:07:54.852 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:07:54.856 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:07:54.861 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:07:54.862 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:07:54.863 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "Tr6xZMOyjW4hhRRhqx5ssFLNncPdmHT0Xk1ueJ8P;login",
  "Nonce": "Tr6xZMOyjW4hhRRhqx5ssFLNncPdmHT0Xk1ueJ8P",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "Tr6xZMOyjW4hhRRhqx5ssFLNncPdmHT0Xk1ueJ8P;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "Tr6xZMOyjW4hhRRhqx5ssFLNncPdmHT0Xk1ueJ8P"
  }
}
2018-08-27 00:07:54.872 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 00:07:54.885 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:07:54.899 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:07:54.905 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:07:54.909 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:07:54.912 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:07:54.915 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:07:54.918 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:07:54.929 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:08:00.192 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 00:08:00.829 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 00:08:00.852 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGBL5CF5VCD:00000009",
  "TimeStamp": "2018-08-27T03:08:00Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:08:00.857 -03:00 [DBG] Augmenting SignInContext
2018-08-27 00:08:00.858 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 00:08:00.859 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 00:08:00.860 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 00:08:00.868 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 00:08:00.870 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 00:08:00.871 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 00:08:00.873 -03:00 [DBG] Start authorize callback request
2018-08-27 00:08:00.873 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:08:00.877 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:08:00.890 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:08:00.894 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:08:00.898 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:08:00.901 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:08:00.905 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:08:00.909 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:08:00.910 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "Tr6xZMOyjW4hhRRhqx5ssFLNncPdmHT0Xk1ueJ8P;login",
  "Nonce": "Tr6xZMOyjW4hhRRhqx5ssFLNncPdmHT0Xk1ueJ8P",
  "SessionId": "312ecb826ba174a7f8d8b6d1386f3165",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "Tr6xZMOyjW4hhRRhqx5ssFLNncPdmHT0Xk1ueJ8P;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "Tr6xZMOyjW4hhRRhqx5ssFLNncPdmHT0Xk1ueJ8P"
  }
}
2018-08-27 00:08:00.926 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: true
2018-08-27 00:08:00.931 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 00:08:00.934 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 00:08:00.935 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 00:08:00.937 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:08:00.953 -03:00 [DBG] rQ9iAb2QfFv4gN68vpBZsa+RU8f6YUlhIv7XK8s1q8k= not found in database
2018-08-27 00:08:00.964 -03:00 [DBG] Getting claims for identity token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3 and client: UserManagementUI
2018-08-27 00:08:00.968 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 00:08:00.972 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****uzvg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****8646"
    }
  ],
  "ActivityId": "0HLGBL5CF5VCD:0000000A",
  "TimeStamp": "2018-08-27T03:08:00Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:08:00.975 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "Tr6xZMOyjW4hhRRhqx5ssFLNncPdmHT0Xk1ueJ8P;login",
  "Scope": "openid profile email"
}
2018-08-27 00:08:00.977 -03:00 [DBG] Augmenting SignInContext
2018-08-27 00:08:00.978 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 00:08:02.479 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:08:02.485 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:08:02.487 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:08:02.489 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:08:02.492 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:08:02.497 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:08:02.499 -03:00 [DBG] Start discovery request
2018-08-27 00:08:02.513 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:08:02.570 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:08:02.579 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:08:02.580 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:08:02.582 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:08:02.584 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:08:02.585 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:08:02.587 -03:00 [DBG] Start key discovery request
2018-08-27 00:08:50.107 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:08:50.113 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:08:50.117 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:08:50.118 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:08:50.123 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:08:50.125 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:08:50.128 -03:00 [DBG] Start discovery request
2018-08-27 00:08:50.139 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:08:50.210 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:08:50.214 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:08:50.219 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:08:50.220 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:08:50.223 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:08:50.227 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:08:50.231 -03:00 [DBG] Start key discovery request
2018-08-27 00:08:50.985 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:08:50.991 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:08:50.993 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:08:50.995 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:08:50.996 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:08:51.001 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:08:51.003 -03:00 [DBG] Start discovery request
2018-08-27 00:08:51.014 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:08:51.148 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:08:51.153 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:08:51.156 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:08:51.158 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:08:51.162 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:08:51.163 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:08:51.164 -03:00 [DBG] Start key discovery request
2018-08-27 00:10:52.421 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:10:52.428 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:10:52.432 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:10:52.433 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:10:52.439 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:10:52.441 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:10:52.446 -03:00 [DBG] Start discovery request
2018-08-27 00:10:52.458 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:10:52.472 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:10:52.476 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:10:52.478 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:10:52.479 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:10:52.482 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:10:52.484 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:10:52.488 -03:00 [DBG] Start discovery request
2018-08-27 00:10:52.498 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:10:52.608 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:10:52.613 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:10:52.615 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:10:52.617 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:10:52.619 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:10:52.623 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:10:52.625 -03:00 [DBG] Start key discovery request
2018-08-27 00:10:52.639 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:10:52.643 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:10:52.645 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:10:52.647 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:10:52.649 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:10:52.653 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:10:52.658 -03:00 [DBG] Start key discovery request
2018-08-27 00:11:13.106 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:11:13.111 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:11:13.113 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:11:13.115 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:11:13.117 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:11:13.121 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:11:13.123 -03:00 [DBG] Start discovery request
2018-08-27 00:11:13.135 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:11:13.160 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:11:13.165 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:11:13.173 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:11:13.174 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:11:13.176 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:11:13.184 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:11:13.188 -03:00 [DBG] Start discovery request
2018-08-27 00:11:13.201 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:11:13.333 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:11:13.339 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:11:13.344 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:11:13.358 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:11:13.364 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:11:13.366 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:11:13.370 -03:00 [DBG] Start key discovery request
2018-08-27 00:11:13.388 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:11:13.396 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:11:13.398 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:11:13.402 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:11:13.409 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:11:13.412 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:11:13.419 -03:00 [DBG] Start key discovery request
2018-08-27 00:11:32.388 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:11:32.394 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:11:32.396 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:11:32.398 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:11:32.401 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:11:32.406 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:11:32.409 -03:00 [DBG] Start discovery request
2018-08-27 00:11:32.421 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:11:32.439 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:11:32.445 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:11:32.447 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:11:32.450 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:11:32.452 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:11:32.457 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:11:32.458 -03:00 [DBG] Start discovery request
2018-08-27 00:11:32.471 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:11:32.515 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:11:32.519 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:11:32.521 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:11:32.522 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:11:32.525 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:11:32.529 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:11:32.534 -03:00 [DBG] Start key discovery request
2018-08-27 00:11:32.543 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:11:32.570 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:11:32.571 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:11:32.576 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:11:32.578 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:11:32.580 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:11:32.582 -03:00 [DBG] Start key discovery request
2018-08-27 00:12:09.107 -03:00 [INF] Clearing 0 tokens
2018-08-27 00:12:18.240 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:12:18.245 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:18.247 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:18.254 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:12:18.256 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:12:18.258 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:12:18.263 -03:00 [DBG] Start discovery request
2018-08-27 00:12:18.279 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:12:18.343 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:12:18.356 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:18.357 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:18.358 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:12:18.360 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:12:18.362 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:12:18.363 -03:00 [DBG] Start key discovery request
2018-08-27 00:12:19.642 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 00:12:19.644 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 00:12:19.647 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 00:12:19.649 -03:00 [DBG] Start authorize request
2018-08-27 00:12:19.650 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:12:19.652 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:12:19.665 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:12:19.671 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:12:19.676 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:12:19.680 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:12:19.684 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:12:19.686 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:12:19.690 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "UhnWIwH0t0NM6mBXjpTVuKQFejFx5IAxx2oO8UP5;login",
  "Nonce": "UhnWIwH0t0NM6mBXjpTVuKQFejFx5IAxx2oO8UP5",
  "SessionId": "312ecb826ba174a7f8d8b6d1386f3165",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "UhnWIwH0t0NM6mBXjpTVuKQFejFx5IAxx2oO8UP5;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "UhnWIwH0t0NM6mBXjpTVuKQFejFx5IAxx2oO8UP5"
  }
}
2018-08-27 00:12:19.709 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: true
2018-08-27 00:12:19.715 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 00:12:19.716 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 00:12:19.717 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 00:12:19.718 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:12:19.739 -03:00 [DBG] H2FVqoG125iGdHPNgFMg6LgmKTi3QZMf35IDOV7DZYE= not found in database
2018-08-27 00:12:19.747 -03:00 [DBG] Getting claims for identity token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3 and client: UserManagementUI
2018-08-27 00:12:19.750 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 00:12:19.756 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Yh2w"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****be36"
    }
  ],
  "ActivityId": "0HLGBL5CF5VCD:0000000B",
  "TimeStamp": "2018-08-27T03:12:19Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:12:19.767 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "UhnWIwH0t0NM6mBXjpTVuKQFejFx5IAxx2oO8UP5;login",
  "Scope": "openid profile email"
}
2018-08-27 00:12:21.338 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:12:21.347 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:21.348 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:21.350 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:12:21.356 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:12:21.358 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:12:21.360 -03:00 [DBG] Start discovery request
2018-08-27 00:12:21.371 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:12:21.429 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:12:21.434 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:21.436 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:21.439 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:12:21.443 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:12:21.446 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:12:21.449 -03:00 [DBG] Start key discovery request
2018-08-27 00:12:42.043 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:12:42.048 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:42.051 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:42.053 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:12:42.057 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:12:42.062 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:12:42.064 -03:00 [DBG] Start discovery request
2018-08-27 00:12:42.074 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:12:42.104 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:12:42.104 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:12:42.109 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:42.111 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:42.111 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:42.112 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:42.113 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:12:42.115 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:12:42.120 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:12:42.120 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:12:42.123 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:12:42.124 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:12:42.127 -03:00 [DBG] Start discovery request
2018-08-27 00:12:42.130 -03:00 [DBG] Start key discovery request
2018-08-27 00:12:42.141 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:12:42.312 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:12:42.316 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:42.318 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:42.320 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:12:42.322 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:12:42.325 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:12:42.327 -03:00 [DBG] Start key discovery request
2018-08-27 00:12:43.546 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:12:43.550 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:43.553 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:43.555 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:12:43.556 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:12:43.559 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:12:43.561 -03:00 [DBG] Start discovery request
2018-08-27 00:12:43.575 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:12:43.593 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:12:43.597 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:12:43.598 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:43.601 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:43.602 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:43.607 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:43.607 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:12:43.609 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:12:43.611 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:12:43.612 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:12:43.613 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:12:43.614 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:12:43.615 -03:00 [DBG] Start discovery request
2018-08-27 00:12:43.616 -03:00 [DBG] Start key discovery request
2018-08-27 00:12:43.625 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:12:43.797 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:12:43.801 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:43.802 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:43.803 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:12:43.804 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:12:43.808 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:12:43.811 -03:00 [DBG] Start key discovery request
2018-08-27 00:12:44.073 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:12:44.078 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:44.080 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:44.082 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:12:44.086 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:12:44.088 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:12:44.090 -03:00 [DBG] Start discovery request
2018-08-27 00:12:44.105 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:12:44.118 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:12:44.122 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:12:44.125 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:44.128 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:44.128 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:44.132 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:12:44.135 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:44.137 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:12:44.137 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:12:44.141 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:12:44.144 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:12:44.145 -03:00 [DBG] Start discovery request
2018-08-27 00:12:44.146 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:12:44.148 -03:00 [DBG] Start key discovery request
2018-08-27 00:12:44.157 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:12:44.308 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:12:44.325 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:44.327 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:44.329 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:12:44.330 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:12:44.331 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:12:44.342 -03:00 [DBG] Start key discovery request
2018-08-27 00:12:44.564 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:12:44.570 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:44.572 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:44.577 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:12:44.581 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:12:44.585 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:12:44.588 -03:00 [DBG] Start discovery request
2018-08-27 00:12:44.600 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:12:44.613 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:12:44.616 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:12:44.617 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:44.621 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:44.621 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:44.623 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:44.623 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:12:44.626 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:12:44.627 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:12:44.630 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:12:44.631 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:12:44.632 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:12:44.634 -03:00 [DBG] Start discovery request
2018-08-27 00:12:44.635 -03:00 [DBG] Start key discovery request
2018-08-27 00:12:44.642 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:12:44.770 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:12:44.774 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:44.776 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:44.778 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:12:44.781 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:12:44.784 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:12:44.786 -03:00 [DBG] Start key discovery request
2018-08-27 00:12:47.085 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 00:12:47.088 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 00:12:47.093 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 00:12:47.096 -03:00 [DBG] Processing signout request for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:12:47.097 -03:00 [DBG] Start end session request validation
2018-08-27 00:12:47.098 -03:00 [DBG] Start identity token validation
2018-08-27 00:12:47.108 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:12:47.109 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 00:12:47.114 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 00:12:47.116 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535339539,
    "exp": 1535339839,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "UhnWIwH0t0NM6mBXjpTVuKQFejFx5IAxx2oO8UP5",
    "iat": 1535339539,
    "at_hash": "KJhLvH2vQYHvGUwlMwXvmA",
    "sid": "312ecb826ba174a7f8d8b6d1386f3165",
    "sub": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
    "auth_time": 1535339280,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-08-27 00:12:47.119 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzUzMzk1MzksImV4cCI6MTUzNTMzOTgzOSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiVWhuV0l3SDB0ME5NNm1CWGpwVFZ1S1FGZWpGeDVJQXh4Mm9POFVQNSIsImlhdCI6MTUzNTMzOTUzOSwiYXRfaGFzaCI6IktKaEx2SDJ2UVlIdkdVd2xNd1h2bUEiLCJzaWQiOiIzMTJlY2I4MjZiYTE3NGE3ZjhkOGI2ZDEzODZmMzE2NSIsInN1YiI6IjQyMjYxYTVmLWExNGItNDhlNS04NTMzLTNiNmNhMjQ1NjRlMyIsImF1dGhfdGltZSI6MTUzNTMzOTI4MCwiaWRwIjoiRmFjZWJvb2siLCJhbXIiOlsiZXh0ZXJuYWwiXX0.weZjPQUYG6Jav_k36-HvuwFOGtUJCNVBlyMzURcia15TflBJPVy9esoOP6eQcNI5ZUtCbCkrQ6ysHp4U5DAbrrGZrTpUpM1sTmPMkkuvm6nxxlNn1aWN_twU60IKrQolnzKhG02uXTOFPWxWaeUyCD1KzFsNeo-gZ3VahVcGCx-oBqLqOi1Pcp4BR6NjJpyVzVRkUszexG3PxvfMjsiu4p9NA-1fJfmO8jdYWBdrdHbE7YU4JxfOwWbbNVA3okPRYKl62vJoPsnRF_WPpHo_C-MoEDXG7yCbvUbC6ch7g_3IevvEuDyrhzuvkxD7_ZrSbR3ByWHQ05ZMH3cutmYh2w",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 00:12:47.123 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 00:12:47.138 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 00:12:47.139 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 00:12:47.155 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 00:12:47.159 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGBL5CF5VCD:0000000D",
  "TimeStamp": "2018-08-27T03:12:47Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:12:47.553 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 00:12:47.556 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 00:12:47.558 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 00:12:47.562 -03:00 [DBG] Processing signout callback request
2018-08-27 00:12:47.573 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:12:47.574 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 00:12:47.575 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 00:12:47.577 -03:00 [INF] Successful signout callback.
2018-08-27 00:12:47.579 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 00:12:47.581 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 00:12:50.177 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:12:50.183 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:50.185 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:50.187 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:12:50.191 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:12:50.193 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:12:50.196 -03:00 [DBG] Start discovery request
2018-08-27 00:12:50.208 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:12:50.267 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:12:50.271 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:12:50.273 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:12:50.286 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:12:50.296 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:12:50.298 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:12:50.300 -03:00 [DBG] Start key discovery request
2018-08-27 00:12:50.756 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 00:12:50.758 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 00:12:50.761 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 00:12:50.763 -03:00 [DBG] Processing signout callback request
2018-08-27 00:12:50.775 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:12:50.776 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 00:12:50.779 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 00:12:50.781 -03:00 [INF] Successful signout callback.
2018-08-27 00:12:50.783 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 00:12:50.785 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 00:13:50.035 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:13:50.040 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:13:50.042 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:13:50.043 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:13:50.049 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:13:50.052 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:13:50.054 -03:00 [DBG] Start discovery request
2018-08-27 00:13:50.066 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:13:50.102 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:13:50.107 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:13:50.109 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:13:50.110 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:13:50.113 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:13:50.116 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:13:50.117 -03:00 [DBG] Start key discovery request
2018-08-27 00:13:52.924 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 00:13:52.927 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 00:13:52.930 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 00:13:52.931 -03:00 [DBG] Start authorize request
2018-08-27 00:13:52.932 -03:00 [DBG] No user present in authorize request
2018-08-27 00:13:52.935 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:13:52.948 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:13:52.953 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:13:52.958 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:13:52.961 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:13:52.963 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:13:52.967 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:13:52.969 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "FDcYsY5LbOU48lfq3XQTv8mIjTzhTcX0ppIXf6U6;login",
  "Nonce": "FDcYsY5LbOU48lfq3XQTv8mIjTzhTcX0ppIXf6U6",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "FDcYsY5LbOU48lfq3XQTv8mIjTzhTcX0ppIXf6U6;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "FDcYsY5LbOU48lfq3XQTv8mIjTzhTcX0ppIXf6U6"
  }
}
2018-08-27 00:13:52.975 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 00:13:52.985 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:13:52.996 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:13:53.000 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:13:53.003 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:13:53.006 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:13:53.010 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:13:53.013 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:13:53.026 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:14:02.952 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 00:14:03.621 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 00:14:03.656 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGBL5CF5VCG:00000008",
  "TimeStamp": "2018-08-27T03:14:03Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:14:03.659 -03:00 [DBG] Augmenting SignInContext
2018-08-27 00:14:03.660 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 00:14:03.662 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 00:14:03.664 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 00:14:03.672 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 00:14:03.673 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 00:14:03.674 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 00:14:03.675 -03:00 [DBG] Start authorize callback request
2018-08-27 00:14:03.676 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:14:03.677 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:14:03.685 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:14:03.689 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:14:03.692 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:14:03.694 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:14:03.697 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:14:03.700 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:14:03.701 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "FDcYsY5LbOU48lfq3XQTv8mIjTzhTcX0ppIXf6U6;login",
  "Nonce": "FDcYsY5LbOU48lfq3XQTv8mIjTzhTcX0ppIXf6U6",
  "SessionId": "b58c0dd8a887f88c88590b81b4146acf",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "FDcYsY5LbOU48lfq3XQTv8mIjTzhTcX0ppIXf6U6;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "FDcYsY5LbOU48lfq3XQTv8mIjTzhTcX0ppIXf6U6"
  }
}
2018-08-27 00:14:03.710 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: true
2018-08-27 00:14:03.714 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 00:14:03.715 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 00:14:03.716 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 00:14:03.717 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:14:03.729 -03:00 [DBG] m9XYIJ3HbMrli4zyUVtYZ0uSfkA0iaSypwJaPSRyVWA= not found in database
2018-08-27 00:14:03.738 -03:00 [DBG] Getting claims for identity token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3 and client: UserManagementUI
2018-08-27 00:14:03.740 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 00:14:03.743 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****u5Gw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****d5b4"
    }
  ],
  "ActivityId": "0HLGBL5CF5VCG:00000009",
  "TimeStamp": "2018-08-27T03:14:03Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:14:03.750 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "FDcYsY5LbOU48lfq3XQTv8mIjTzhTcX0ppIXf6U6;login",
  "Scope": "openid profile email"
}
2018-08-27 00:14:03.751 -03:00 [DBG] Augmenting SignInContext
2018-08-27 00:14:03.753 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 00:14:05.530 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:14:05.535 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:14:05.536 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:14:05.537 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:14:05.540 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:14:05.545 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:14:05.547 -03:00 [DBG] Start discovery request
2018-08-27 00:14:05.558 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:14:05.633 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:14:05.637 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:14:05.640 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:14:05.641 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:14:05.646 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:14:05.648 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:14:05.650 -03:00 [DBG] Start key discovery request
2018-08-27 00:14:36.805 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:14:36.817 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:14:36.820 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:14:36.823 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:14:36.829 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:14:36.833 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:14:36.834 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:14:36.850 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:14:39.039 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 00:14:39.599 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 00:14:39.627 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGBL5CF5VCF:00000009",
  "TimeStamp": "2018-08-27T03:14:39Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:14:39.638 -03:00 [DBG] Augmenting SignInContext
2018-08-27 00:14:39.642 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 00:14:39.645 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 00:14:39.647 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 00:14:39.658 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 00:14:39.663 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 00:14:39.666 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 00:14:39.670 -03:00 [DBG] Start authorize callback request
2018-08-27 00:14:39.672 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:14:39.677 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:14:39.693 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:14:39.701 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:14:39.706 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:14:39.713 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:14:39.719 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:14:39.721 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:14:39.723 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "FDcYsY5LbOU48lfq3XQTv8mIjTzhTcX0ppIXf6U6;login",
  "Nonce": "FDcYsY5LbOU48lfq3XQTv8mIjTzhTcX0ppIXf6U6",
  "SessionId": "599d5af2ec88c91cf67b3b180ce0464d",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "FDcYsY5LbOU48lfq3XQTv8mIjTzhTcX0ppIXf6U6;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "FDcYsY5LbOU48lfq3XQTv8mIjTzhTcX0ppIXf6U6"
  }
}
2018-08-27 00:14:39.736 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: true
2018-08-27 00:14:39.742 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 00:14:39.743 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 00:14:39.746 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 00:14:39.747 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:14:39.761 -03:00 [DBG] pmoy4dNuyXIGBSdM7E0sN7rh1LcoC/R515nZ581Ctyo= not found in database
2018-08-27 00:14:39.769 -03:00 [DBG] Getting claims for identity token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3 and client: UserManagementUI
2018-08-27 00:14:39.771 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 00:14:39.774 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Rgsw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****a938"
    }
  ],
  "ActivityId": "0HLGBL5CF5VCF:0000000A",
  "TimeStamp": "2018-08-27T03:14:39Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:14:39.782 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "FDcYsY5LbOU48lfq3XQTv8mIjTzhTcX0ppIXf6U6;login",
  "Scope": "openid profile email"
}
2018-08-27 00:14:39.784 -03:00 [DBG] Augmenting SignInContext
2018-08-27 00:14:39.785 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 00:14:41.245 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:14:41.251 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:14:41.252 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:14:41.254 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:14:41.259 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:14:41.260 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:14:41.263 -03:00 [DBG] Start discovery request
2018-08-27 00:14:41.276 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:14:41.336 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:14:41.345 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:14:41.347 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:14:41.347 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:14:41.348 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:14:41.349 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:14:41.353 -03:00 [DBG] Start key discovery request
2018-08-27 00:14:44.377 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:14:44.382 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:14:44.385 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:14:44.387 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:14:44.398 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:14:44.405 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:14:44.410 -03:00 [DBG] Start discovery request
2018-08-27 00:14:44.423 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:14:44.476 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:14:44.481 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:14:44.482 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:14:44.483 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:14:44.487 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:14:44.490 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:14:44.492 -03:00 [DBG] Start key discovery request
2018-08-27 00:14:47.673 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 00:14:47.676 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 00:14:47.678 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 00:14:47.680 -03:00 [DBG] Processing signout request for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:14:47.682 -03:00 [DBG] Start end session request validation
2018-08-27 00:14:47.687 -03:00 [DBG] Start identity token validation
2018-08-27 00:14:47.703 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:14:47.704 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 00:14:47.713 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 00:14:47.718 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535339679,
    "exp": 1535339979,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "FDcYsY5LbOU48lfq3XQTv8mIjTzhTcX0ppIXf6U6",
    "iat": 1535339679,
    "at_hash": "-WGU1vXOySMKV7b4QdAC4g",
    "sid": "599d5af2ec88c91cf67b3b180ce0464d",
    "sub": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
    "auth_time": 1535339679,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-08-27 00:14:47.730 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzUzMzk2NzksImV4cCI6MTUzNTMzOTk3OSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiRkRjWXNZNUxiT1U0OGxmcTNYUVR2OG1JalR6aFRjWDBwcElYZjZVNiIsImlhdCI6MTUzNTMzOTY3OSwiYXRfaGFzaCI6Ii1XR1UxdlhPeVNNS1Y3YjRRZEFDNGciLCJzaWQiOiI1OTlkNWFmMmVjODhjOTFjZjY3YjNiMTgwY2UwNDY0ZCIsInN1YiI6IjQyMjYxYTVmLWExNGItNDhlNS04NTMzLTNiNmNhMjQ1NjRlMyIsImF1dGhfdGltZSI6MTUzNTMzOTY3OSwiaWRwIjoiRmFjZWJvb2siLCJhbXIiOlsiZXh0ZXJuYWwiXX0.VrTnYHyHp8A7oXvaM-3HuPMzE6xKshK_DHfjwCg846mOAzHhF7S1WRMQypAinJmzx_AQ_PL4lTMy6r4_pNRx4se8_mM_DnxpOnhjgpMO5x0Ghc5ce3ANo76q3MIRysKAAYx9RA_0tZDoJaUD7DtE4zMPI81FedWJ24Insigtn3VroKQm5g3moyQTBQ_LvenEUtR8nHVkdkaCQqsM31rozejm18GKoaU6Z5eIL29EsXI6fTS8i9JlwiGWy6StWu_tipblPKimOO9YmMOhRmlwNOqvCQpDZFLgWLh4pvGKFQ-tEoPGUhuri5Xm0gw244Z84hgkLA5GZfP8O5XeIlRgsw",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 00:14:47.736 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 00:14:47.750 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 00:14:47.751 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 00:14:47.754 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 00:14:47.755 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGBL5CF5VCF:0000000C",
  "TimeStamp": "2018-08-27T03:14:47Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:14:48.322 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 00:14:48.324 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 00:14:48.326 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 00:14:48.331 -03:00 [DBG] Processing signout callback request
2018-08-27 00:14:48.346 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:14:48.349 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 00:14:48.349 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 00:14:48.351 -03:00 [INF] Successful signout callback.
2018-08-27 00:14:48.354 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 00:14:48.354 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 00:14:51.389 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:14:51.393 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:14:51.395 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:14:51.397 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:14:51.400 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:14:51.404 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:14:51.405 -03:00 [DBG] Start discovery request
2018-08-27 00:14:51.416 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:14:51.483 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:14:51.488 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:14:51.489 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:14:51.491 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:14:51.494 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:14:51.498 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:14:51.500 -03:00 [DBG] Start key discovery request
2018-08-27 00:14:53.133 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 00:14:53.138 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 00:14:53.142 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 00:14:53.146 -03:00 [DBG] Start authorize request
2018-08-27 00:14:53.148 -03:00 [DBG] No user present in authorize request
2018-08-27 00:14:53.149 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:14:53.162 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:14:53.169 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:14:53.172 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:14:53.177 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:14:53.179 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:14:53.180 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:14:53.180 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "j08nIvQSufYquyL7WoHlieXWFaCVaioPNaOjylXN;login",
  "Nonce": "j08nIvQSufYquyL7WoHlieXWFaCVaioPNaOjylXN",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "j08nIvQSufYquyL7WoHlieXWFaCVaioPNaOjylXN;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "j08nIvQSufYquyL7WoHlieXWFaCVaioPNaOjylXN"
  }
}
2018-08-27 00:14:53.184 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 00:14:53.199 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:14:53.211 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:14:53.215 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:14:53.217 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:14:53.219 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:14:53.221 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:14:53.221 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:14:53.233 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:15:03.979 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 00:15:04.521 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 00:15:04.540 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGBL5CF5VCF:00000012",
  "TimeStamp": "2018-08-27T03:15:04Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:15:04.542 -03:00 [DBG] Augmenting SignInContext
2018-08-27 00:15:04.542 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 00:15:04.543 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 00:15:04.543 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 00:15:04.550 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 00:15:04.552 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 00:15:04.553 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 00:15:04.553 -03:00 [DBG] Start authorize callback request
2018-08-27 00:15:04.554 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:15:04.554 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:15:04.566 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:15:04.568 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:15:04.570 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:15:04.573 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:15:04.575 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:15:04.576 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:15:04.577 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "j08nIvQSufYquyL7WoHlieXWFaCVaioPNaOjylXN;login",
  "Nonce": "j08nIvQSufYquyL7WoHlieXWFaCVaioPNaOjylXN",
  "SessionId": "b0c35d4056ad31304ed1283201d6144f",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "j08nIvQSufYquyL7WoHlieXWFaCVaioPNaOjylXN;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "j08nIvQSufYquyL7WoHlieXWFaCVaioPNaOjylXN"
  }
}
2018-08-27 00:15:04.583 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: true
2018-08-27 00:15:04.589 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 00:15:04.597 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 00:15:04.597 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 00:15:04.602 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:15:04.621 -03:00 [DBG] UaWK+mySy5wT0cUdSPrJHCVN3edtMN8hY7ZiuKdGSrI= not found in database
2018-08-27 00:15:04.631 -03:00 [DBG] Getting claims for identity token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3 and client: UserManagementUI
2018-08-27 00:15:04.632 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 00:15:04.635 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****XOvQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****329a"
    }
  ],
  "ActivityId": "0HLGBL5CF5VCF:00000013",
  "TimeStamp": "2018-08-27T03:15:04Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:15:04.642 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "j08nIvQSufYquyL7WoHlieXWFaCVaioPNaOjylXN;login",
  "Scope": "openid profile email"
}
2018-08-27 00:15:04.643 -03:00 [DBG] Augmenting SignInContext
2018-08-27 00:15:04.644 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 00:15:06.484 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:15:06.488 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:15:06.489 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:15:06.490 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:15:06.490 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:15:06.491 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:15:06.491 -03:00 [DBG] Start discovery request
2018-08-27 00:15:06.501 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:15:06.581 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:15:06.584 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:15:06.584 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:15:06.585 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:15:06.585 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:15:06.586 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:15:06.586 -03:00 [DBG] Start key discovery request
2018-08-27 00:16:35.847 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:16:35.851 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:16:35.856 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:16:35.860 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:16:35.860 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:16:35.861 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:16:35.861 -03:00 [DBG] Start discovery request
2018-08-27 00:16:35.872 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:16:35.942 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:16:35.944 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:16:35.945 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:16:35.945 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:16:35.945 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:16:35.946 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:16:35.946 -03:00 [DBG] Start key discovery request
2018-08-27 00:18:26.165 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:18:26.183 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:18:26.187 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:18:26.189 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:18:26.192 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:18:26.193 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:18:26.195 -03:00 [DBG] Start discovery request
2018-08-27 00:18:26.205 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:18:26.228 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:18:26.234 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:18:26.236 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:18:26.237 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:18:26.237 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:18:26.238 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:18:26.238 -03:00 [DBG] Start discovery request
2018-08-27 00:18:26.250 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:18:26.263 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:18:26.265 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:18:26.280 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:18:26.282 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:18:26.283 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:18:26.284 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:18:26.284 -03:00 [DBG] Start key discovery request
2018-08-27 00:18:26.464 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:18:26.489 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:18:26.491 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:18:26.492 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:18:26.494 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:18:26.496 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:18:26.501 -03:00 [DBG] Start key discovery request
2018-08-27 00:18:35.157 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:18:35.161 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:18:35.162 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:18:35.163 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:18:35.164 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:18:35.165 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:18:35.165 -03:00 [DBG] Start discovery request
2018-08-27 00:18:35.179 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:18:35.234 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:18:35.237 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:18:35.238 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:18:35.238 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:18:35.239 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:18:35.239 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:18:35.239 -03:00 [DBG] Start key discovery request
2018-08-27 00:19:12.698 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:19:12.713 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:19:12.721 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:19:12.721 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:19:12.724 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:19:12.724 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:19:12.725 -03:00 [DBG] Start discovery request
2018-08-27 00:19:12.736 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:19:12.841 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:19:12.847 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:19:12.848 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:19:12.848 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:19:12.849 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:19:12.849 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:19:12.850 -03:00 [DBG] Start key discovery request
2018-08-27 00:19:16.633 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:19:16.639 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:19:16.640 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:19:16.640 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:19:16.641 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:19:16.641 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:19:16.642 -03:00 [DBG] Start discovery request
2018-08-27 00:19:16.653 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:19:16.665 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:19:16.670 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:19:16.672 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:19:16.673 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:19:16.674 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:19:16.674 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:19:16.674 -03:00 [DBG] Start key discovery request
2018-08-27 00:19:17.708 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:19:17.711 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:19:17.712 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:19:17.712 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:19:17.713 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:19:17.714 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:19:17.715 -03:00 [DBG] Start discovery request
2018-08-27 00:19:17.727 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:19:17.735 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:19:17.738 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:19:17.738 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:19:17.738 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:19:17.740 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:19:17.740 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:19:17.741 -03:00 [DBG] Start key discovery request
2018-08-27 00:19:18.039 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:19:18.044 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:19:18.045 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:19:18.045 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:19:18.046 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:19:18.046 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:19:18.047 -03:00 [DBG] Start discovery request
2018-08-27 00:19:18.057 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:19:18.068 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:19:18.070 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:19:18.071 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:19:18.071 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:19:18.071 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:19:18.073 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:19:18.073 -03:00 [DBG] Start key discovery request
2018-08-27 00:19:18.596 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:19:18.600 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:19:18.601 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:19:18.601 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:19:18.603 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:19:18.604 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:19:18.604 -03:00 [DBG] Start discovery request
2018-08-27 00:19:18.616 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:19:18.710 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:19:18.713 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:19:18.714 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:19:18.715 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:19:18.715 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:19:18.716 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:19:18.716 -03:00 [DBG] Start key discovery request
2018-08-27 00:19:19.001 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:19:19.007 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:19:19.008 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:19:19.009 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:19:19.009 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:19:19.010 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:19:19.010 -03:00 [DBG] Start discovery request
2018-08-27 00:19:19.023 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:19:19.036 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:19:19.039 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:19:19.040 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:19:19.040 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:19:19.041 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:19:19.041 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:19:19.041 -03:00 [DBG] Start key discovery request
2018-08-27 00:19:21.973 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 00:19:21.974 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 00:19:21.975 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 00:19:21.975 -03:00 [DBG] Processing signout request for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:19:21.976 -03:00 [DBG] Start end session request validation
2018-08-27 00:19:21.976 -03:00 [DBG] Start identity token validation
2018-08-27 00:19:21.988 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:19:21.988 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 00:19:21.993 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 00:19:21.993 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535339704,
    "exp": 1535340004,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "j08nIvQSufYquyL7WoHlieXWFaCVaioPNaOjylXN",
    "iat": 1535339704,
    "at_hash": "YLrxDox7_mHbaxn_Aozftw",
    "sid": "b0c35d4056ad31304ed1283201d6144f",
    "sub": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
    "auth_time": 1535339704,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-08-27 00:19:21.994 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzUzMzk3MDQsImV4cCI6MTUzNTM0MDAwNCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiajA4bkl2UVN1ZllxdXlMN1dvSGxpZVhXRmFDVmFpb1BOYU9qeWxYTiIsImlhdCI6MTUzNTMzOTcwNCwiYXRfaGFzaCI6IllMcnhEb3g3X21IYmF4bl9Bb3pmdHciLCJzaWQiOiJiMGMzNWQ0MDU2YWQzMTMwNGVkMTI4MzIwMWQ2MTQ0ZiIsInN1YiI6IjQyMjYxYTVmLWExNGItNDhlNS04NTMzLTNiNmNhMjQ1NjRlMyIsImF1dGhfdGltZSI6MTUzNTMzOTcwNCwiaWRwIjoiRmFjZWJvb2siLCJhbXIiOlsiZXh0ZXJuYWwiXX0.YT_DHpaYcFwMBKxokE-Im-5ROlfnmZ-pkGhuykq-FP65sDY8WeNZoQ-vZbBl5xR4_feMSLpo812tYRaWL0-Nj3Tpy7T6JpY1RZwJCYvvvQB27hSmkWaPDFqmsveXT40Y3mhkBXqi3a6YUA7ec8ScFjlthnPxys4cH9v7Ar6bOKrlXkxMle4-Tx6QOBVoyY3Gcd_OjLQ-DlEgJ9XOe06eJ8mvGHinzE44jZcAMTskvcgpXdTd3SeAYbiQopsznpPa0y4kFjrmS8IWCp2pCl9FR1HNq0yHGKcFg2-lPqyA8D9us9vdciqBRuI0XEllqibewfkzblpJYuZATnwcVXXOvQ",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 00:19:21.995 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 00:19:22.007 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 00:19:22.007 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 00:19:22.008 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 00:19:22.008 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGBL5CF5VCF:00000015",
  "TimeStamp": "2018-08-27T03:19:22Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:19:22.445 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 00:19:22.446 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 00:19:22.447 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 00:19:22.447 -03:00 [DBG] Processing signout callback request
2018-08-27 00:19:22.458 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:19:22.458 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 00:19:22.459 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 00:19:22.459 -03:00 [INF] Successful signout callback.
2018-08-27 00:19:22.459 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 00:19:22.459 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 00:19:29.392 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:19:29.395 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:19:29.396 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:19:29.397 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:19:29.397 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:19:29.398 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:19:29.398 -03:00 [DBG] Start discovery request
2018-08-27 00:19:29.408 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:19:29.466 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:19:29.477 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:19:29.477 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:19:29.478 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:19:29.479 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:19:29.479 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:19:29.479 -03:00 [DBG] Start key discovery request
2018-08-27 00:19:30.699 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 00:19:30.700 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 00:19:30.701 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 00:19:30.701 -03:00 [DBG] Start authorize request
2018-08-27 00:19:30.701 -03:00 [DBG] No user present in authorize request
2018-08-27 00:19:30.702 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:19:30.715 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:19:30.718 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:19:30.720 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:19:30.724 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:19:30.726 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:19:30.727 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:19:30.727 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "xqOYSgLqPS3cHXh4x2nNv3AZtDSP5hZKGlzt4hK2;login",
  "Nonce": "xqOYSgLqPS3cHXh4x2nNv3AZtDSP5hZKGlzt4hK2",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "xqOYSgLqPS3cHXh4x2nNv3AZtDSP5hZKGlzt4hK2;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "xqOYSgLqPS3cHXh4x2nNv3AZtDSP5hZKGlzt4hK2"
  }
}
2018-08-27 00:19:30.728 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 00:19:30.738 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:19:30.749 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:19:30.756 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:19:30.758 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:19:30.761 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:19:30.763 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:19:30.764 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:19:30.775 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:19:32.272 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 00:19:32.944 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 00:19:32.973 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGBL5CF5VCG:00000014",
  "TimeStamp": "2018-08-27T03:19:32Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:19:32.975 -03:00 [DBG] Augmenting SignInContext
2018-08-27 00:19:32.975 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 00:19:32.975 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 00:19:32.976 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 00:19:32.982 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 00:19:32.983 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 00:19:32.987 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 00:19:32.987 -03:00 [DBG] Start authorize callback request
2018-08-27 00:19:32.988 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:19:32.988 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:19:32.997 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:19:32.999 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:19:33.000 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:19:33.002 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:19:33.004 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:19:33.004 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:19:33.004 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "xqOYSgLqPS3cHXh4x2nNv3AZtDSP5hZKGlzt4hK2;login",
  "Nonce": "xqOYSgLqPS3cHXh4x2nNv3AZtDSP5hZKGlzt4hK2",
  "SessionId": "3c0a43c4dd0a02a2525b4c89aece7f82",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "xqOYSgLqPS3cHXh4x2nNv3AZtDSP5hZKGlzt4hK2;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "xqOYSgLqPS3cHXh4x2nNv3AZtDSP5hZKGlzt4hK2"
  }
}
2018-08-27 00:19:33.018 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: true
2018-08-27 00:19:33.024 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 00:19:33.025 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 00:19:33.026 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 00:19:33.027 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:19:33.038 -03:00 [DBG] rsEP/MGVSlspqe6hHzCqHyNKeedJ6h/Xkqp9Fd/Tpac= not found in database
2018-08-27 00:19:33.044 -03:00 [DBG] Getting claims for identity token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3 and client: UserManagementUI
2018-08-27 00:19:33.045 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 00:19:33.047 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****r0oQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****8613"
    }
  ],
  "ActivityId": "0HLGBL5CF5VCG:00000015",
  "TimeStamp": "2018-08-27T03:19:33Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:19:33.050 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "xqOYSgLqPS3cHXh4x2nNv3AZtDSP5hZKGlzt4hK2;login",
  "Scope": "openid profile email"
}
2018-08-27 00:19:33.050 -03:00 [DBG] Augmenting SignInContext
2018-08-27 00:19:33.051 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 00:19:34.418 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:19:34.421 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:19:34.422 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:19:34.423 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:19:34.424 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:19:34.424 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:19:34.425 -03:00 [DBG] Start discovery request
2018-08-27 00:19:34.437 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:19:34.504 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:19:34.507 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:19:34.508 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:19:34.508 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:19:34.509 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:19:34.509 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:19:34.509 -03:00 [DBG] Start key discovery request
2018-08-27 00:20:27.697 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:20:27.701 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:20:27.702 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:20:27.703 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:20:27.704 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:20:27.704 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:20:27.708 -03:00 [DBG] Start discovery request
2018-08-27 00:20:27.722 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:20:27.761 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:20:27.764 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:20:27.765 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:20:27.766 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:20:27.766 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:20:27.767 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:20:27.767 -03:00 [DBG] Start key discovery request
2018-08-27 00:20:28.821 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 00:20:28.823 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 00:20:28.824 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 00:20:28.825 -03:00 [DBG] Start authorize request
2018-08-27 00:20:28.825 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:20:28.826 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:20:28.836 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:20:28.840 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:20:28.842 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:20:28.845 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:20:28.847 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:20:28.847 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:20:28.848 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "D4Q3TaDwm2lDzJWKhN3oVP91cB6kYO2ctnrAIOm6;login",
  "Nonce": "D4Q3TaDwm2lDzJWKhN3oVP91cB6kYO2ctnrAIOm6",
  "SessionId": "3c0a43c4dd0a02a2525b4c89aece7f82",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "D4Q3TaDwm2lDzJWKhN3oVP91cB6kYO2ctnrAIOm6;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "D4Q3TaDwm2lDzJWKhN3oVP91cB6kYO2ctnrAIOm6"
  }
}
2018-08-27 00:20:28.853 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: true
2018-08-27 00:20:28.857 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 00:20:28.857 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 00:20:28.857 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 00:20:28.857 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:20:28.868 -03:00 [DBG] 1rdyS+AupZWK4LkDqDlkH02uNDc2V2G7nr/+KxkOfQg= not found in database
2018-08-27 00:20:28.880 -03:00 [DBG] Getting claims for identity token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3 and client: UserManagementUI
2018-08-27 00:20:28.880 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 00:20:28.883 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****OKXg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****99c8"
    }
  ],
  "ActivityId": "0HLGBL5CF5VCG:00000016",
  "TimeStamp": "2018-08-27T03:20:28Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:20:28.887 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "D4Q3TaDwm2lDzJWKhN3oVP91cB6kYO2ctnrAIOm6;login",
  "Scope": "openid profile email"
}
2018-08-27 00:20:30.370 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:20:30.374 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:20:30.376 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:20:30.377 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:20:30.377 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:20:30.378 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:20:30.378 -03:00 [DBG] Start discovery request
2018-08-27 00:20:30.388 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:20:30.467 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:20:30.471 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:20:30.471 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:20:30.472 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:20:30.472 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:20:30.472 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:20:30.473 -03:00 [DBG] Start key discovery request
2018-08-27 00:20:46.516 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 00:20:46.517 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 00:20:46.518 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 00:20:46.518 -03:00 [DBG] Processing signout request for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:20:46.519 -03:00 [DBG] Start end session request validation
2018-08-27 00:20:46.519 -03:00 [DBG] Start identity token validation
2018-08-27 00:20:46.532 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:20:46.533 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 00:20:46.542 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 00:20:46.542 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535340028,
    "exp": 1535340328,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "D4Q3TaDwm2lDzJWKhN3oVP91cB6kYO2ctnrAIOm6",
    "iat": 1535340028,
    "at_hash": "L0uLM1L9BBGWTg2jSrlAfQ",
    "sid": "3c0a43c4dd0a02a2525b4c89aece7f82",
    "sub": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
    "auth_time": 1535339972,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-08-27 00:20:46.543 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzUzNDAwMjgsImV4cCI6MTUzNTM0MDMyOCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiRDRRM1RhRHdtMmxEekpXS2hOM29WUDkxY0I2a1lPMmN0bnJBSU9tNiIsImlhdCI6MTUzNTM0MDAyOCwiYXRfaGFzaCI6IkwwdUxNMUw5QkJHV1RnMmpTcmxBZlEiLCJzaWQiOiIzYzBhNDNjNGRkMGEwMmEyNTI1YjRjODlhZWNlN2Y4MiIsInN1YiI6IjQyMjYxYTVmLWExNGItNDhlNS04NTMzLTNiNmNhMjQ1NjRlMyIsImF1dGhfdGltZSI6MTUzNTMzOTk3MiwiaWRwIjoiRmFjZWJvb2siLCJhbXIiOlsiZXh0ZXJuYWwiXX0.Xvtcy2CKubOI2l6pQNdCMt9AV8_UXf2tVUE_GMO9tu9gAVHthYhPTiWqjiR-fbTiZD4vbXYSvhORI0Kt9qvPqEqZJCvZmPUE9CQK9-1Fzk9JjSlI5ZuqiEv0NNT_3AwcuknK49XnCA0lb3tpHieEC9m0UW_hVIz9cGNEbXX5bv89pRj54QHKjfDHY6UWgnfhbiFIYyx_0gg91vocw8A1GULJDnapDdmEvSJbYfks5DHqfoXXiNFByZODR3xeWo4CfmMcnU6367moftEutEYoCIk0mmLaDJ1JTRtGwxQRQIvF1bqdtw5mx3ODf21bLYIOpAsX-c8aMS4C3EpqGbOKXg",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 00:20:46.543 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 00:20:46.554 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 00:20:46.554 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 00:20:46.555 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 00:20:46.555 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGBL5CF5VCG:00000018",
  "TimeStamp": "2018-08-27T03:20:46Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:20:46.922 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 00:20:46.923 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 00:20:46.923 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 00:20:46.923 -03:00 [DBG] Processing signout callback request
2018-08-27 00:20:46.934 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:20:46.935 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 00:20:46.935 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 00:20:46.935 -03:00 [INF] Successful signout callback.
2018-08-27 00:20:46.936 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 00:20:46.936 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 00:20:50.521 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:20:50.525 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:20:50.526 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:20:50.527 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:20:50.527 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:20:50.528 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:20:50.528 -03:00 [DBG] Start discovery request
2018-08-27 00:20:50.539 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:20:50.563 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:20:50.566 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:20:50.566 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:20:50.567 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:20:50.567 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:20:50.568 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:20:50.568 -03:00 [DBG] Start key discovery request
2018-08-27 00:21:44.988 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:21:45.001 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:21:45.002 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:21:45.002 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:21:45.003 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:21:45.007 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:21:45.007 -03:00 [DBG] Start discovery request
2018-08-27 00:21:45.027 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:21:45.190 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:21:45.218 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:21:45.220 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:21:45.220 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:21:45.221 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:21:45.221 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:21:45.222 -03:00 [DBG] Start key discovery request
2018-08-27 00:21:45.315 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 00:21:45.316 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 00:21:45.317 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 00:21:45.317 -03:00 [DBG] Start authorize request
2018-08-27 00:21:45.318 -03:00 [DBG] No user present in authorize request
2018-08-27 00:21:45.318 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:21:45.331 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:21:45.335 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:21:45.338 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:21:45.342 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:21:45.344 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:21:45.345 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:21:45.345 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "rsI0nhST9AtXH9q94GMFy2d9cPvZ9hUzBUPHl2BK",
  "Nonce": "rsI0nhST9AtXH9q94GMFy2d9cPvZ9hUzBUPHl2BK",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "rsI0nhST9AtXH9q94GMFy2d9cPvZ9hUzBUPHl2BK",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "rsI0nhST9AtXH9q94GMFy2d9cPvZ9hUzBUPHl2BK"
  }
}
2018-08-27 00:21:45.346 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 00:21:45.427 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:21:45.448 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:21:45.453 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:21:45.456 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:21:45.461 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:21:45.464 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:21:45.465 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:21:45.481 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:21:50.121 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 00:21:50.122 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 00:21:50.123 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 00:21:50.123 -03:00 [DBG] Start authorize request
2018-08-27 00:21:50.124 -03:00 [DBG] No user present in authorize request
2018-08-27 00:21:50.124 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:21:50.147 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:21:50.151 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:21:50.153 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:21:50.158 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:21:50.160 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:21:50.161 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:21:50.162 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "KLbTZQ2cuZpz6Y8azkBdhskE30OREcF0zQK8YnxQ",
  "Nonce": "KLbTZQ2cuZpz6Y8azkBdhskE30OREcF0zQK8YnxQ",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "KLbTZQ2cuZpz6Y8azkBdhskE30OREcF0zQK8YnxQ",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "KLbTZQ2cuZpz6Y8azkBdhskE30OREcF0zQK8YnxQ"
  }
}
2018-08-27 00:21:50.163 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 00:21:50.174 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:21:50.183 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:21:50.186 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:21:50.189 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:21:50.191 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:21:50.192 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:21:50.193 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:21:50.203 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:22:00.164 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 00:22:00.844 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 00:22:00.864 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGBL5CF5VCG:0000001E",
  "TimeStamp": "2018-08-27T03:22:00Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:22:00.866 -03:00 [DBG] Augmenting SignInContext
2018-08-27 00:22:00.866 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 00:22:00.866 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 00:22:00.867 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 00:22:00.874 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 00:22:00.877 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 00:22:00.877 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 00:22:00.877 -03:00 [DBG] Start authorize callback request
2018-08-27 00:22:00.878 -03:00 [DBG] User in authorize request: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:22:00.878 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:22:00.889 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:22:00.892 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:22:00.894 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:22:00.897 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:22:00.899 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:22:00.899 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:22:00.899 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "KLbTZQ2cuZpz6Y8azkBdhskE30OREcF0zQK8YnxQ",
  "Nonce": "KLbTZQ2cuZpz6Y8azkBdhskE30OREcF0zQK8YnxQ",
  "SessionId": "18344c3951ffb7204544374da4199161",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "KLbTZQ2cuZpz6Y8azkBdhskE30OREcF0zQK8YnxQ",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "KLbTZQ2cuZpz6Y8azkBdhskE30OREcF0zQK8YnxQ"
  }
}
2018-08-27 00:22:00.907 -03:00 [DBG] nk+ZQxr0k2XfRFPYE+E0SyRDpdFTbCW7mjS8HzFg7lQ= found in database: true
2018-08-27 00:22:00.911 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 00:22:00.911 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 00:22:00.911 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 00:22:00.911 -03:00 [DBG] Getting claims for access token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:22:00.924 -03:00 [DBG] IeOHp6rHZq+HL92IbWoBYBXxthrMQr4qvC6fI4nXGXs= not found in database
2018-08-27 00:22:00.929 -03:00 [DBG] Getting claims for identity token for subject: 42261a5f-a14b-48e5-8533-3b6ca24564e3 and client: UserManagementUI
2018-08-27 00:22:00.930 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 00:22:00.932 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****r4Mw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****681d"
    }
  ],
  "ActivityId": "0HLGBL5CF5VCG:0000001F",
  "TimeStamp": "2018-08-27T03:22:00Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:22:00.933 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "KLbTZQ2cuZpz6Y8azkBdhskE30OREcF0zQK8YnxQ",
  "Scope": "openid profile email"
}
2018-08-27 00:22:00.934 -03:00 [DBG] Augmenting SignInContext
2018-08-27 00:22:00.934 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 00:22:02.593 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:22:02.596 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:22:02.597 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:22:02.597 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:22:02.598 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:22:02.599 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:22:02.599 -03:00 [DBG] Start discovery request
2018-08-27 00:22:02.609 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:22:02.679 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:22:02.682 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:22:02.684 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:22:02.684 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:22:02.684 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:22:02.685 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:22:02.685 -03:00 [DBG] Start key discovery request
2018-08-27 00:22:07.369 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 00:22:07.371 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 00:22:07.372 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 00:22:07.372 -03:00 [DBG] Processing signout request for 42261a5f-a14b-48e5-8533-3b6ca24564e3
2018-08-27 00:22:07.372 -03:00 [DBG] Start end session request validation
2018-08-27 00:22:07.373 -03:00 [DBG] Start identity token validation
2018-08-27 00:22:07.387 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:22:07.387 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 00:22:07.393 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 00:22:07.394 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535340120,
    "exp": 1535340420,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "KLbTZQ2cuZpz6Y8azkBdhskE30OREcF0zQK8YnxQ",
    "iat": 1535340120,
    "at_hash": "9dlrjTOHW10kbvSOp8e2Fg",
    "sid": "18344c3951ffb7204544374da4199161",
    "sub": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
    "auth_time": 1535340120,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-08-27 00:22:07.394 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzUzNDAxMjAsImV4cCI6MTUzNTM0MDQyMCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiS0xiVFpRMmN1WnB6Nlk4YXprQmRoc2tFMzBPUkVjRjB6UUs4WW54USIsImlhdCI6MTUzNTM0MDEyMCwiYXRfaGFzaCI6IjlkbHJqVE9IVzEwa2J2U09wOGUyRmciLCJzaWQiOiIxODM0NGMzOTUxZmZiNzIwNDU0NDM3NGRhNDE5OTE2MSIsInN1YiI6IjQyMjYxYTVmLWExNGItNDhlNS04NTMzLTNiNmNhMjQ1NjRlMyIsImF1dGhfdGltZSI6MTUzNTM0MDEyMCwiaWRwIjoiRmFjZWJvb2siLCJhbXIiOlsiZXh0ZXJuYWwiXX0.DV3R2LS4bjMXn33laGZ1jNEI_1xVzfE7knoHmM6jUdPdHFl6wX_vul8aNgX3lgoR7hlQNozlqrmN_R_O8bbNSAU2dafVQuwBCQX5AWuQtfb6D5psxWhphiBrhwUXtPjTJWOFakTkIdKo_6i_l60cE1Pay44fLSrG7dvo5OTGWXVOE_c4jnQNdnz7PHtHmR2TNLIIXXtirsPQP3E0DhyIqbB0DndduHJs7Wqu1N1-sjgcA6_TVUOlnkbI8Czms8kbaMZc5LgJODx3Eam9xKQPjDPinsUCMlt9ZGK5E_ajfvdvFFN8lYsJ9NzUJ2jUwGB0_3WuByE5GGOAYb6tonr4Mw",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 00:22:07.395 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 00:22:07.405 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 00:22:07.406 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 00:22:07.406 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 00:22:07.407 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "42261a5f-a14b-48e5-8533-3b6ca24564e3",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGBL5CF5VCG:00000021",
  "TimeStamp": "2018-08-27T03:22:07Z",
  "ProcessId": 27532,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 00:22:07.783 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 00:22:07.785 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 00:22:07.785 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 00:22:07.785 -03:00 [DBG] Processing signout callback request
2018-08-27 00:22:07.798 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:22:07.799 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 00:22:07.800 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 00:22:07.801 -03:00 [INF] Successful signout callback.
2018-08-27 00:22:07.801 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 00:22:07.801 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 00:22:11.014 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:22:11.024 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:22:11.026 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:22:11.027 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:22:11.027 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:22:11.028 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:22:11.028 -03:00 [DBG] Start discovery request
2018-08-27 00:22:11.038 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:22:11.065 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:22:11.069 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:22:11.069 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:22:11.070 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:22:11.070 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:22:11.071 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:22:11.071 -03:00 [DBG] Start key discovery request
2018-08-27 00:22:11.203 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 00:22:11.206 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 00:22:11.207 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 00:22:11.208 -03:00 [DBG] Start authorize request
2018-08-27 00:22:11.208 -03:00 [DBG] No user present in authorize request
2018-08-27 00:22:11.209 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:22:11.223 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:22:11.226 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:22:11.228 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:22:11.232 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:22:11.234 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:22:11.234 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:22:11.234 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "Jrj5A8gg3EzivXORYNb2fe90DiR69lvGgK5S6MYO",
  "Nonce": "Jrj5A8gg3EzivXORYNb2fe90DiR69lvGgK5S6MYO",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "Jrj5A8gg3EzivXORYNb2fe90DiR69lvGgK5S6MYO",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "Jrj5A8gg3EzivXORYNb2fe90DiR69lvGgK5S6MYO"
  }
}
2018-08-27 00:22:11.235 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 00:22:11.249 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:22:11.259 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:22:11.262 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:22:11.264 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:22:11.268 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:22:11.269 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:22:11.269 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:22:11.279 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:22:19.904 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 00:22:19.905 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 00:22:19.906 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 00:22:19.906 -03:00 [DBG] Processing signout callback request
2018-08-27 00:22:19.918 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:22:19.919 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 00:22:19.920 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 00:22:19.921 -03:00 [INF] Successful signout callback.
2018-08-27 00:22:19.921 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 00:22:19.922 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 00:22:25.914 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 00:22:25.922 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:22:25.923 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:22:25.923 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 00:22:25.925 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 00:22:25.926 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 00:22:25.926 -03:00 [DBG] Start discovery request
2018-08-27 00:22:25.936 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 00:22:25.957 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 00:22:25.960 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 00:22:25.960 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 00:22:25.961 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 00:22:25.961 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 00:22:25.962 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 00:22:25.963 -03:00 [DBG] Start key discovery request
2018-08-27 00:22:26.108 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 00:22:26.111 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 00:22:26.112 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 00:22:26.112 -03:00 [DBG] Start authorize request
2018-08-27 00:22:26.113 -03:00 [DBG] No user present in authorize request
2018-08-27 00:22:26.113 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:22:26.133 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:22:26.138 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:22:26.141 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:22:26.144 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:22:26.146 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:22:26.146 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:22:26.146 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "eD958EUmQw9xEzYIMFLn56eXPsOMhQ1Kzof3essB",
  "Nonce": "eD958EUmQw9xEzYIMFLn56eXPsOMhQ1Kzof3essB",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "eD958EUmQw9xEzYIMFLn56eXPsOMhQ1Kzof3essB",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "eD958EUmQw9xEzYIMFLn56eXPsOMhQ1Kzof3essB"
  }
}
2018-08-27 00:22:26.147 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 00:22:26.158 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:22:26.169 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:22:26.174 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:22:26.178 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:22:26.181 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:22:26.185 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:22:26.186 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:22:26.195 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:37:17.020 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 00:37:17.053 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 00:37:17.054 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 00:37:17.054 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 00:37:17.054 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 00:37:17.172 -03:00 [DBG] Starting token cleanup
2018-08-27 00:37:22.058 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:37:22.443 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:37:22.503 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:37:22.565 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:37:22.580 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:37:22.583 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:37:22.591 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:37:22.605 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:38:17.407 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:38:17.426 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:38:17.431 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:38:17.435 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:38:17.440 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:38:17.444 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:38:17.446 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:38:17.461 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:38:37.209 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:38:37.224 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:38:37.229 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:38:37.235 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:38:37.240 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:38:37.243 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:38:37.246 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:38:37.259 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:40:27.197 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 00:40:27.230 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 00:40:27.231 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 00:40:27.231 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 00:40:27.231 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 00:40:27.351 -03:00 [DBG] Starting token cleanup
2018-08-27 00:40:34.903 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 00:40:35.313 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:40:35.382 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:40:35.455 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:40:35.472 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 00:40:35.475 -03:00 [DBG] Found [] API scopes in database
2018-08-27 00:40:35.482 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 00:40:35.496 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 00:46:54.707 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 00:46:54.745 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 00:46:54.746 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 00:46:54.746 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 00:46:54.746 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 00:46:54.879 -03:00 [DBG] Starting token cleanup
2018-08-27 00:47:00.350 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 00:47:06.244 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 00:47:09.504 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 00:47:12.675 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 00:48:43.914 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 00:48:43.945 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 00:48:43.946 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 00:48:43.947 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 00:48:43.947 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 00:48:44.062 -03:00 [DBG] Starting token cleanup
2018-08-27 00:48:50.987 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 00:49:31.544 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 00:49:31.589 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 00:49:31.590 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 00:49:31.591 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 00:49:31.591 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 00:49:31.732 -03:00 [DBG] Starting token cleanup
2018-08-27 00:49:39.429 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 00:50:44.335 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 00:50:44.358 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 00:50:44.358 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 00:50:44.358 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 00:50:44.359 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 00:50:44.440 -03:00 [DBG] Starting token cleanup
2018-08-27 00:51:01.636 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 00:52:07.802 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 00:52:07.828 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 00:52:07.828 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 00:52:07.828 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 00:52:07.828 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 00:52:07.962 -03:00 [DBG] Starting token cleanup
2018-08-27 00:52:10.647 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 00:52:33.929 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 00:52:33.956 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 00:52:33.956 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 00:52:33.956 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 00:52:33.957 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 00:52:34.066 -03:00 [DBG] Starting token cleanup
2018-08-27 00:52:40.935 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 00:53:35.830 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 00:53:35.858 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 00:53:35.858 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 00:53:35.858 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 00:53:35.858 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 00:53:35.974 -03:00 [DBG] Starting token cleanup
2018-08-27 00:53:37.417 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 00:54:53.068 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 00:54:53.095 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 00:54:53.095 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 00:54:53.095 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 00:54:53.096 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 00:54:53.199 -03:00 [DBG] Starting token cleanup
2018-08-27 00:54:53.706 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 01:03:28.382 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 01:03:28.404 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 01:03:28.404 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 01:03:28.404 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 01:03:28.405 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 01:03:28.484 -03:00 [DBG] Starting token cleanup
2018-08-27 01:03:35.838 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 01:05:00.482 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 01:05:00.506 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 01:05:00.506 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 01:05:00.507 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 01:05:00.507 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 01:05:00.603 -03:00 [DBG] Starting token cleanup
2018-08-27 01:05:04.226 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 01:11:19.098 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 01:11:19.124 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 01:11:19.124 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 01:11:19.125 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 01:11:19.125 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 01:11:19.214 -03:00 [DBG] Starting token cleanup
2018-08-27 01:11:40.988 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 01:12:15.084 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 01:13:04.371 -03:00 [DBG] CORS request made for path: /Account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 01:14:33.854 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 01:14:33.878 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 01:14:33.879 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 01:14:33.879 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 01:14:33.879 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 01:14:33.958 -03:00 [DBG] Starting token cleanup
2018-08-27 01:14:35.994 -03:00 [DBG] CORS request made for path: /Account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 01:15:27.202 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 01:15:27.225 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 01:15:27.225 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 01:15:27.225 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 01:15:27.226 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 01:15:27.309 -03:00 [DBG] Starting token cleanup
2018-08-27 01:15:28.389 -03:00 [DBG] CORS request made for path: /Account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 01:15:38.871 -03:00 [DBG] CORS request made for path: /Account/login from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 01:15:52.074 -03:00 [DBG] CORS request made for path: /Account/loginInfo from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 01:16:11.128 -03:00 [DBG] CORS request made for path: /Account/LoginInfo from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 01:16:22.787 -03:00 [DBG] CORS request made for path: /Account/Register from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 01:17:24.315 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 01:17:24.339 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 01:17:24.340 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 01:17:24.340 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 01:17:24.340 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 01:17:24.425 -03:00 [DBG] Starting token cleanup
2018-08-27 01:17:27.259 -03:00 [DBG] CORS request made for path: /Account/Register from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 01:17:30.425 -03:00 [DBG] CORS request made for path: /Account/Register from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 01:17:43.436 -03:00 [DBG] CORS request made for path: /Account/Login from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 01:17:49.109 -03:00 [DBG] CORS request made for path: /Account/Login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 01:17:54.382 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 01:21:41.608 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 01:21:41.637 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 01:21:41.637 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 01:21:41.637 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 01:21:41.638 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 01:21:41.724 -03:00 [DBG] Starting token cleanup
2018-08-27 01:21:53.545 -03:00 [DBG] CORS request made for path: /account/login-info from origin: http://localhost:4200 but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 01:23:12.037 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 01:23:12.256 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 01:23:12.263 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 01:23:12.276 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 01:23:12.289 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 01:23:12.292 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 01:23:12.298 -03:00 [DBG] Start discovery request
2018-08-27 01:23:12.666 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 01:23:12.703 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 01:23:12.711 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 01:23:12.713 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 01:23:12.716 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 01:23:12.720 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 01:23:12.721 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 01:23:12.725 -03:00 [DBG] Start key discovery request
2018-08-27 01:23:12.767 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 01:23:12.778 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 01:23:12.779 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 01:23:12.785 -03:00 [DBG] Start authorize request
2018-08-27 01:23:12.795 -03:00 [DBG] No user present in authorize request
2018-08-27 01:23:12.802 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 01:23:13.067 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 01:23:13.117 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 01:23:13.158 -03:00 [DBG] Found [] API scopes in database
2018-08-27 01:23:13.168 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 01:23:13.172 -03:00 [DBG] Found [] API scopes in database
2018-08-27 01:23:13.180 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 01:23:13.197 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "yKeW7H5zXZ4MfM6AjvyKwBWeOU4h7lVePVI4ntBy",
  "Nonce": "yKeW7H5zXZ4MfM6AjvyKwBWeOU4h7lVePVI4ntBy",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "yKeW7H5zXZ4MfM6AjvyKwBWeOU4h7lVePVI4ntBy",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "yKeW7H5zXZ4MfM6AjvyKwBWeOU4h7lVePVI4ntBy"
  }
}
2018-08-27 01:23:13.209 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 01:23:13.291 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 01:23:13.305 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 01:23:13.309 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 01:23:13.314 -03:00 [DBG] Found [] API scopes in database
2018-08-27 01:23:13.320 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 01:23:13.325 -03:00 [DBG] Found [] API scopes in database
2018-08-27 01:23:13.328 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 01:23:13.343 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 01:23:23.874 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 01:23:23.878 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 01:23:23.883 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 01:23:23.889 -03:00 [DBG] Start discovery request
2018-08-27 01:23:23.909 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 01:30:46.204 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 01:30:46.227 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 01:30:46.227 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 01:30:46.228 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 01:30:46.228 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 01:30:46.311 -03:00 [DBG] Starting token cleanup
2018-08-27 01:43:43.648 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 01:43:43.677 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 01:43:43.677 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 01:43:43.677 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 01:43:43.677 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 01:43:43.763 -03:00 [DBG] Starting token cleanup
2018-08-27 02:06:31.960 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 02:06:31.992 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 02:06:31.992 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 02:06:31.993 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 02:06:31.993 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 02:06:32.102 -03:00 [DBG] Starting token cleanup
2018-08-27 02:09:32.686 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 02:09:32.712 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 02:09:32.712 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 02:09:32.713 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 02:09:32.713 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 02:09:32.801 -03:00 [DBG] Starting token cleanup
2018-08-27 02:10:47.875 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 02:10:47.904 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 02:10:47.905 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 02:10:47.906 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 02:10:47.906 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 02:10:48.058 -03:00 [DBG] Starting token cleanup
2018-08-27 02:13:38.399 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 02:13:38.422 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 02:13:38.423 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 02:13:38.423 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 02:13:38.423 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 02:13:38.509 -03:00 [DBG] Starting token cleanup
2018-08-27 02:16:18.706 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 02:16:18.736 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 02:16:18.737 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 02:16:18.737 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 02:16:18.737 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 02:16:18.830 -03:00 [DBG] Starting token cleanup
2018-08-27 02:36:25.015 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 02:36:25.042 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 02:36:25.043 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 02:36:25.043 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 02:36:25.043 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 02:36:25.150 -03:00 [DBG] Starting token cleanup
2018-08-27 02:40:49.679 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 02:40:49.715 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 02:40:49.716 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 02:40:49.716 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 02:40:49.716 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 02:40:49.861 -03:00 [DBG] Starting token cleanup
2018-08-27 09:33:06.405 -03:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Clients] AS [c])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Clients'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:55fc56b8-f15d-4295-95b3-13be7abdcc56
Error Number:208,State:1,Class:16
2018-08-27 09:33:06.463 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Clients'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:55fc56b8-f15d-4295-95b3-13be7abdcc56
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Clients'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:55fc56b8-f15d-4295-95b3-13be7abdcc56
Error Number:208,State:1,Class:16
2018-08-27 09:33:06.595 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Clients'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:55fc56b8-f15d-4295-95b3-13be7abdcc56
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Clients'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:55fc56b8-f15d-4295-95b3-13be7abdcc56
Error Number:208,State:1,Class:16
2018-08-27 09:33:34.813 -03:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Clients] AS [c])
    THEN CAST(1 AS BIT) ELSE CAST(0 AS BIT)
END
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Clients'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:9e70e5b9-69db-4893-8bf9-b7d932d6856d
Error Number:208,State:1,Class:16
2018-08-27 09:33:34.867 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Clients'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:9e70e5b9-69db-4893-8bf9-b7d932d6856d
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Clients'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:9e70e5b9-69db-4893-8bf9-b7d932d6856d
Error Number:208,State:1,Class:16
2018-08-27 09:33:34.885 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Clients'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:9e70e5b9-69db-4893-8bf9-b7d932d6856d
Error Number:208,State:1,Class:16
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'Clients'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.QueryMethodProvider.GetResult[TResult](IEnumerable`1 valueBuffers, Boolean throwOnNullResult)
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:9e70e5b9-69db-4893-8bf9-b7d932d6856d
Error Number:208,State:1,Class:16
2018-08-27 09:50:36.816 -03:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
GO


CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
GO
System.Data.SqlClient.SqlException (0x80131904): Incorrect syntax near 'GO'.
Incorrect syntax near 'GO'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite, String methodName)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
ClientConnectionId:c731aa00-7588-4954-9535-f7dd5fcaa096
Error Number:102,State:1,Class:15
2018-08-27 09:51:36.305 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 09:51:36.326 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 09:51:36.326 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 09:51:36.327 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 09:51:36.327 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 09:51:36.398 -03:00 [DBG] Starting token cleanup
2018-08-27 11:05:23.929 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 11:05:23.969 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 11:05:23.971 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 11:05:23.971 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 11:05:23.971 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 11:05:24.072 -03:00 [DBG] Starting token cleanup
2018-08-27 11:05:43.868 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 11:05:43.888 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 11:05:43.889 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 11:05:43.889 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 11:05:43.889 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 11:05:43.958 -03:00 [DBG] Starting token cleanup
2018-08-27 11:07:21.327 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 11:07:21.347 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 11:07:21.348 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 11:07:21.348 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 11:07:21.348 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 11:07:21.424 -03:00 [DBG] Starting token cleanup
2018-08-27 11:21:18.483 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:21:18.624 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:21:18.627 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:21:18.640 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:21:18.648 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:21:18.649 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:21:18.652 -03:00 [DBG] Start discovery request
2018-08-27 11:21:18.914 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:21:18.950 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:21:18.956 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:21:18.957 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:21:18.958 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:21:18.959 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:21:18.960 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:21:18.963 -03:00 [DBG] Start key discovery request
2018-08-27 11:21:18.985 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 11:21:18.990 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 11:21:18.991 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 11:21:18.995 -03:00 [DBG] Start authorize request
2018-08-27 11:21:19.001 -03:00 [DBG] No user present in authorize request
2018-08-27 11:21:19.004 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:21:19.187 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:21:19.226 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:21:19.255 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:21:19.265 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:21:19.268 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:21:19.273 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:21:19.281 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "2v8glgZdK5pJ1wnr1EFXUlfOzmLZNDy18O1pEehx",
  "Nonce": "2v8glgZdK5pJ1wnr1EFXUlfOzmLZNDy18O1pEehx",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "2v8glgZdK5pJ1wnr1EFXUlfOzmLZNDy18O1pEehx",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "2v8glgZdK5pJ1wnr1EFXUlfOzmLZNDy18O1pEehx"
  }
}
2018-08-27 11:21:19.291 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 11:21:19.310 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:21:19.319 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:21:19.321 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:21:19.323 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:21:19.325 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:21:19.326 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:21:19.327 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:21:19.335 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:21:37.038 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:21:37.042 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:21:37.043 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:21:37.045 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:21:37.047 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:21:37.048 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:21:37.051 -03:00 [DBG] Start discovery request
2018-08-27 11:21:37.059 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:21:37.088 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:21:37.091 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:21:37.092 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:21:37.093 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:21:37.094 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:21:37.095 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:21:37.097 -03:00 [DBG] Start key discovery request
2018-08-27 11:21:37.143 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 11:21:37.145 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 11:21:37.149 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 11:21:37.150 -03:00 [DBG] Start authorize request
2018-08-27 11:21:37.151 -03:00 [DBG] No user present in authorize request
2018-08-27 11:21:37.152 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:21:37.160 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:21:37.162 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:21:37.166 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:21:37.169 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:21:37.171 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:21:37.172 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:21:37.174 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "VenHHAjgsuBYXJpbajGC36YhOIIGUGNbfY6KsltN",
  "Nonce": "VenHHAjgsuBYXJpbajGC36YhOIIGUGNbfY6KsltN",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "VenHHAjgsuBYXJpbajGC36YhOIIGUGNbfY6KsltN",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "VenHHAjgsuBYXJpbajGC36YhOIIGUGNbfY6KsltN"
  }
}
2018-08-27 11:21:37.178 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 11:21:37.189 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:21:37.196 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:21:37.199 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:21:37.200 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:21:37.202 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:21:37.204 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:21:37.205 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:21:37.211 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:21:58.017 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 11:21:59.034 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 11:21:59.343 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null.
Parameter name: password
   at Microsoft.AspNetCore.Identity.UserManager`1.CreateAsync(TUser user, String password)
   at Equinox.Infra.CrossCutting.Identity.Services.UserService.CreateUser(IDomainUser user, String password, String provider, String providerId) in D:\workspace\JpProject\src\Backend\Equinox.Infra.CrossCutting.Identity\Services\UserService.cs:line 74
   at Equinox.Domain.CommandHandlers.UserCommandHandler.Handle(RegisterNewUserWithoutPassCommand request, CancellationToken cancellationToken) in D:\workspace\JpProject\src\Backend\Equinox.Domain\CommandHandlers\UserCommandHandler.cs:line 77
   at MediatR.Internal.RequestHandlerWrapperImpl`1.<>c__DisplayClass0_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Equinox.UI.SSO.Controllers.Account.AccountController.AutoProvisionUserAsync(String provider, String providerUserId, IEnumerable`1 claims) in D:\workspace\JpProject\src\Frontend\Equinox.UI.SSO\Controllers\Account\AccountController.cs:line 545
   at Equinox.UI.SSO.Controllers.Account.AccountController.ExternalLoginCallback() in D:\workspace\JpProject\src\Frontend\Equinox.UI.SSO\Controllers\Account\AccountController.cs:line 209
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-27 11:22:06.613 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:22:06.620 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:22:06.622 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:22:06.623 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:22:06.626 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:22:06.627 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:22:06.628 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:22:06.634 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:26:46.563 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 11:26:47.423 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 11:27:25.534 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 11:27:25.554 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 11:27:25.554 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 11:27:25.554 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 11:27:25.554 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 11:27:25.628 -03:00 [DBG] Starting token cleanup
2018-08-27 11:27:55.566 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 11:27:55.587 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 11:27:55.588 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 11:27:55.588 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 11:27:55.588 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 11:27:55.661 -03:00 [DBG] Starting token cleanup
2018-08-27 11:28:09.012 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:28:09.115 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:28:09.118 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:28:09.155 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:28:09.161 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:28:09.163 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:28:09.166 -03:00 [DBG] Start discovery request
2018-08-27 11:28:09.411 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:28:09.441 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:28:09.447 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:28:09.448 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:28:09.449 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:28:09.450 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:28:09.452 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:28:09.457 -03:00 [DBG] Start key discovery request
2018-08-27 11:28:09.492 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 11:28:09.496 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 11:28:09.498 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 11:28:09.501 -03:00 [DBG] Start authorize request
2018-08-27 11:28:09.508 -03:00 [DBG] No user present in authorize request
2018-08-27 11:28:09.511 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:28:09.665 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:28:09.694 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:28:09.719 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:28:09.726 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:28:09.729 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:28:09.734 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:28:09.742 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "kfvoiRMO3s1cv3gRw6Ri03blvyx6qMQmknrPZTV2",
  "Nonce": "kfvoiRMO3s1cv3gRw6Ri03blvyx6qMQmknrPZTV2",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "kfvoiRMO3s1cv3gRw6Ri03blvyx6qMQmknrPZTV2",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "kfvoiRMO3s1cv3gRw6Ri03blvyx6qMQmknrPZTV2"
  }
}
2018-08-27 11:28:09.750 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 11:28:09.835 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:28:09.842 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:28:09.845 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:28:09.846 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:28:09.848 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:28:09.850 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:28:09.850 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:28:09.859 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:28:29.258 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 11:28:30.067 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 11:28:30.330 -03:00 [INF] User created a new account with password.
2018-08-27 11:28:30.368 -03:00 [INF] User created a new account with password.
2018-08-27 11:28:30.687 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Invalid object name 'StoredEvent'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.Execute(IRelationalConnection connection, DbCommandMethod executeMethod, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.ExecuteReader(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(DbContext _, ValueTuple`2 parameters)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IReadOnlyList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Equinox.Infra.Data.Repository.EventSourcing.EventStoreSQLRepository.Store(StoredEvent theEvent) in D:\workspace\JpProject\src\Backend\Equinox.Infra.Data\Repository\EventSourcing\EventStoreSQLRepository.cs:line 27
   at Equinox.Infra.Data.EventSourcing.SqlEventStore.Save[T](T theEvent) in D:\workspace\JpProject\src\Backend\Equinox.Infra.Data\EventSourcing\SqlEventStore.cs:line 28
   at Equinox.Infra.CrossCutting.Bus.InMemoryBus.RaiseEvent[T](T event) in D:\workspace\JpProject\src\Backend\Equinox.Infra.CrossCutting.Bus\InMemoryBus.cs:line 28
   at Equinox.Domain.CommandHandlers.UserCommandHandler.Handle(RegisterNewUserWithoutPassCommand request, CancellationToken cancellationToken) in D:\workspace\JpProject\src\Backend\Equinox.Domain\CommandHandlers\UserCommandHandler.cs:line 79
   at MediatR.Internal.RequestHandlerWrapperImpl`1.<>c__DisplayClass0_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Equinox.UI.SSO.Controllers.Account.AccountController.AutoProvisionUserAsync(String provider, String providerUserId, IEnumerable`1 claims) in D:\workspace\JpProject\src\Frontend\Equinox.UI.SSO\Controllers\Account\AccountController.cs:line 545
   at Equinox.UI.SSO.Controllers.Account.AccountController.ExternalLoginCallback() in D:\workspace\JpProject\src\Frontend\Equinox.UI.SSO\Controllers\Account\AccountController.cs:line 209
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-27 11:29:24.841 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 11:29:24.861 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 11:29:24.862 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 11:29:24.862 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 11:29:24.862 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 11:29:24.933 -03:00 [DBG] Starting token cleanup
2018-08-27 11:29:29.697 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:29:29.794 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:29:29.797 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:29:29.835 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:29:29.840 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:29:29.841 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:29:29.845 -03:00 [DBG] Start discovery request
2018-08-27 11:29:30.105 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:29:30.135 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:29:30.139 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:29:30.140 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:29:30.141 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:29:30.142 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:29:30.143 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:29:30.146 -03:00 [DBG] Start key discovery request
2018-08-27 11:29:30.182 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 11:29:30.187 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 11:29:30.187 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 11:29:30.191 -03:00 [DBG] Start authorize request
2018-08-27 11:29:30.197 -03:00 [DBG] No user present in authorize request
2018-08-27 11:29:30.200 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:29:30.349 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:29:30.379 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:29:30.404 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:29:30.415 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:29:30.418 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:29:30.424 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:29:30.432 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "4x1N1FGwTiVOYmj987w0mq1yE9ar2ofcDTCszlMO",
  "Nonce": "4x1N1FGwTiVOYmj987w0mq1yE9ar2ofcDTCszlMO",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "4x1N1FGwTiVOYmj987w0mq1yE9ar2ofcDTCszlMO",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "4x1N1FGwTiVOYmj987w0mq1yE9ar2ofcDTCszlMO"
  }
}
2018-08-27 11:29:30.440 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 11:29:30.547 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:29:30.555 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:29:30.558 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:29:30.560 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:29:30.562 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:29:30.563 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:29:30.563 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:29:30.571 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:29:33.601 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 11:29:34.676 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 11:29:34.875 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "f3678226-52c4-4275-9875-8e9aa40d5280",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGC55VIF4SG:00000005",
  "TimeStamp": "2018-08-27T14:29:34Z",
  "ProcessId": 15772,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:29:34.884 -03:00 [DBG] Augmenting SignInContext
2018-08-27 11:29:34.885 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 11:29:34.890 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 11:29:34.894 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 11:29:34.911 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 11:29:34.912 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 11:29:34.913 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 11:29:34.918 -03:00 [DBG] Start authorize callback request
2018-08-27 11:29:34.921 -03:00 [DBG] User in authorize request: f3678226-52c4-4275-9875-8e9aa40d5280
2018-08-27 11:29:34.922 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:29:34.928 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:29:34.931 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:29:34.933 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:29:34.935 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:29:34.937 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:29:34.937 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:29:34.938 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "f3678226-52c4-4275-9875-8e9aa40d5280",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "4x1N1FGwTiVOYmj987w0mq1yE9ar2ofcDTCszlMO",
  "Nonce": "4x1N1FGwTiVOYmj987w0mq1yE9ar2ofcDTCszlMO",
  "SessionId": "458d590218de7b9a66dd83a6df407257",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "4x1N1FGwTiVOYmj987w0mq1yE9ar2ofcDTCszlMO",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "4x1N1FGwTiVOYmj987w0mq1yE9ar2ofcDTCszlMO"
  }
}
2018-08-27 11:29:34.982 -03:00 [DBG] 082vaEVrlYoRn6FjewlPRq07zgT4HhwyY0Xaefssn3E= found in database: false
2018-08-27 11:29:34.984 -03:00 [DBG] user_consent grant with value: UserManagementUI|f3678226-52c4-4275-9875-8e9aa40d5280 not found in store.
2018-08-27 11:29:34.985 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 11:29:34.985 -03:00 [INF] Showing consent: User has not yet consented
2018-08-27 11:29:35.008 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:29:35.015 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:29:35.018 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:29:35.020 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:29:35.022 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:29:35.025 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:29:35.025 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:29:35.031 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:29:35.033 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:29:35.035 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:30:25.033 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 11:30:25.073 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:30:25.085 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:30:25.089 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:30:25.091 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:30:25.094 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:30:25.097 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:30:25.098 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:30:25.114 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 11:30:25.116 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 11:30:25.117 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 11:30:25.118 -03:00 [DBG] Start authorize callback request
2018-08-27 11:30:25.122 -03:00 [DBG] User in authorize request: f3678226-52c4-4275-9875-8e9aa40d5280
2018-08-27 11:30:25.122 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:30:25.132 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:30:25.135 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:30:25.136 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:30:25.140 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:30:25.143 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:30:25.144 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:30:25.145 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "f3678226-52c4-4275-9875-8e9aa40d5280",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "4x1N1FGwTiVOYmj987w0mq1yE9ar2ofcDTCszlMO",
  "Nonce": "4x1N1FGwTiVOYmj987w0mq1yE9ar2ofcDTCszlMO",
  "SessionId": "458d590218de7b9a66dd83a6df407257",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "4x1N1FGwTiVOYmj987w0mq1yE9ar2ofcDTCszlMO",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "4x1N1FGwTiVOYmj987w0mq1yE9ar2ofcDTCszlMO"
  }
}
2018-08-27 11:30:25.152 -03:00 [DBG] 082vaEVrlYoRn6FjewlPRq07zgT4HhwyY0Xaefssn3E= found in database: false
2018-08-27 11:30:25.153 -03:00 [DBG] user_consent grant with value: UserManagementUI|f3678226-52c4-4275-9875-8e9aa40d5280 not found in store.
2018-08-27 11:30:25.154 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 11:30:25.157 -03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-27 11:30:25.161 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-27 11:30:25.164 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: f3678226-52c4-4275-9875-8e9aa40d5280
2018-08-27 11:30:25.175 -03:00 [DBG] 082vaEVrlYoRn6FjewlPRq07zgT4HhwyY0Xaefssn3E= not found in database
2018-08-27 11:30:25.285 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 11:30:25.292 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 11:30:25.307 -03:00 [DBG] Getting claims for access token for subject: f3678226-52c4-4275-9875-8e9aa40d5280
2018-08-27 11:30:25.335 -03:00 [DBG] MyyWNhVyuG9H2VBF/xgM1hd/qqySyGO41Hrpw+0Rrus= not found in database
2018-08-27 11:30:25.349 -03:00 [DBG] Getting claims for identity token for subject: f3678226-52c4-4275-9875-8e9aa40d5280 and client: UserManagementUI
2018-08-27 11:30:25.350 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 11:30:25.397 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "f3678226-52c4-4275-9875-8e9aa40d5280",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****HLbw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****d91f"
    }
  ],
  "ActivityId": "0HLGC55VIF4SJ:00000006",
  "TimeStamp": "2018-08-27T14:30:25Z",
  "ProcessId": 15772,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:30:25.409 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "f3678226-52c4-4275-9875-8e9aa40d5280",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "4x1N1FGwTiVOYmj987w0mq1yE9ar2ofcDTCszlMO",
  "Scope": "openid profile email"
}
2018-08-27 11:30:25.424 -03:00 [DBG] Augmenting SignInContext
2018-08-27 11:30:25.424 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 11:30:26.468 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:30:26.472 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:30:26.473 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:30:26.474 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:30:26.476 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:30:26.479 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:30:26.482 -03:00 [DBG] Start discovery request
2018-08-27 11:30:26.487 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:30:26.502 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:30:26.507 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:30:26.509 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:30:26.510 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:30:26.511 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:30:26.513 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:30:26.515 -03:00 [DBG] Start key discovery request
2018-08-27 11:30:41.126 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 11:30:41.141 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 11:30:41.141 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 11:30:41.164 -03:00 [DBG] Processing signout request for f3678226-52c4-4275-9875-8e9aa40d5280
2018-08-27 11:30:41.169 -03:00 [DBG] Start end session request validation
2018-08-27 11:30:41.174 -03:00 [DBG] Start identity token validation
2018-08-27 11:30:41.189 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:30:41.191 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 11:30:41.229 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 11:30:41.232 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535380225,
    "exp": 1535380525,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "4x1N1FGwTiVOYmj987w0mq1yE9ar2ofcDTCszlMO",
    "iat": 1535380225,
    "at_hash": "_z5mvmUR5ImNkuOYOe062Q",
    "sid": "458d590218de7b9a66dd83a6df407257",
    "sub": "f3678226-52c4-4275-9875-8e9aa40d5280",
    "auth_time": 1535380174,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-08-27 11:30:41.237 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "f3678226-52c4-4275-9875-8e9aa40d5280",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzUzODAyMjUsImV4cCI6MTUzNTM4MDUyNSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiNHgxTjFGR3dUaVZPWW1qOTg3dzBtcTF5RTlhcjJvZmNEVENzemxNTyIsImlhdCI6MTUzNTM4MDIyNSwiYXRfaGFzaCI6Il96NW12bVVSNUltTmt1T1lPZTA2MlEiLCJzaWQiOiI0NThkNTkwMjE4ZGU3YjlhNjZkZDgzYTZkZjQwNzI1NyIsInN1YiI6ImYzNjc4MjI2LTUyYzQtNDI3NS05ODc1LThlOWFhNDBkNTI4MCIsImF1dGhfdGltZSI6MTUzNTM4MDE3NCwiaWRwIjoiRmFjZWJvb2siLCJhbXIiOlsiZXh0ZXJuYWwiXX0.bqfMPXaIuyt6SlAS-BLm6ut50iJl2zQ1bZMoJJx_gFa7k-wub1n-2KnFcdoz-kX_g6EdjDWevF136Mm-dbBjzGYW0D_2D6nBbzxkl2HxpjwDltdM_ToiaO60gzX4aF6X5Zod5AeOHzNTzKMvQ95IHCD9YkvpJMk_x_lk_Elyub2T18p_-Y1zVNotSjOYaH8F_znAuYAOW-ADlKUhfTkATKPcZQXExS0zaSCFEJBESSxIGHlWxlLYMhCq10T0cWesz8SYfqGODyV6GMa8ABxXBRV4dz0CMjOngTF8ZjlsaJeQsPLBxp-w1_GkmxySOkW2bIQsOLRbd3on2UNzB3HLbw",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 11:30:41.243 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 11:30:41.274 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 11:30:41.275 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 11:30:41.277 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 11:30:41.280 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "f3678226-52c4-4275-9875-8e9aa40d5280",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGC55VIF4SJ:00000008",
  "TimeStamp": "2018-08-27T14:30:41Z",
  "ProcessId": 15772,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:30:41.344 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 11:30:41.348 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 11:30:41.349 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 11:30:41.353 -03:00 [DBG] Processing signout callback request
2018-08-27 11:30:41.368 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:30:41.369 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 11:30:41.370 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 11:30:41.371 -03:00 [INF] Successful signout callback.
2018-08-27 11:30:41.371 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 11:30:41.372 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 11:30:46.058 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:30:46.062 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:30:46.063 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:30:46.065 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:30:46.070 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:30:46.072 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:30:46.073 -03:00 [DBG] Start discovery request
2018-08-27 11:30:46.082 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:30:46.092 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:30:46.097 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:30:46.099 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:30:46.101 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:30:46.104 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:30:46.106 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:30:46.107 -03:00 [DBG] Start key discovery request
2018-08-27 11:30:46.117 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 11:30:46.118 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 11:30:46.119 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 11:30:46.120 -03:00 [DBG] Start authorize request
2018-08-27 11:30:46.120 -03:00 [DBG] No user present in authorize request
2018-08-27 11:30:46.121 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:30:46.133 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:30:46.136 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:30:46.138 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:30:46.139 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:30:46.141 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:30:46.143 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:30:46.144 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "lEVI3qu9NMDEqgRk79oRKWA6WE8VoPSxbP0jPOF5",
  "Nonce": "lEVI3qu9NMDEqgRk79oRKWA6WE8VoPSxbP0jPOF5",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "lEVI3qu9NMDEqgRk79oRKWA6WE8VoPSxbP0jPOF5",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "lEVI3qu9NMDEqgRk79oRKWA6WE8VoPSxbP0jPOF5"
  }
}
2018-08-27 11:30:46.147 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 11:30:46.152 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:30:46.162 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:30:46.164 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:30:46.166 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:30:46.167 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:30:46.169 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:30:46.169 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:30:46.176 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:31:13.866 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:31:13.872 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:31:13.873 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:31:13.874 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:31:13.875 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:31:13.878 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:31:13.882 -03:00 [DBG] Start discovery request
2018-08-27 11:31:13.888 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:31:13.906 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:31:13.909 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:31:13.911 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:31:13.913 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:31:13.916 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:31:13.919 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:31:13.921 -03:00 [DBG] Start key discovery request
2018-08-27 11:31:13.935 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 11:31:13.936 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 11:31:13.938 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 11:31:13.939 -03:00 [DBG] Start authorize request
2018-08-27 11:31:13.940 -03:00 [DBG] No user present in authorize request
2018-08-27 11:31:13.941 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:31:13.953 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:31:13.955 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:31:13.958 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:31:13.960 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:31:13.964 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:31:13.964 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:31:13.965 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "kHNBbhu3UbktVHiK8Vsr86C9Ad4dIJYCtfHhmsV4",
  "Nonce": "kHNBbhu3UbktVHiK8Vsr86C9Ad4dIJYCtfHhmsV4",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "kHNBbhu3UbktVHiK8Vsr86C9Ad4dIJYCtfHhmsV4",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "kHNBbhu3UbktVHiK8Vsr86C9Ad4dIJYCtfHhmsV4"
  }
}
2018-08-27 11:31:13.969 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 11:31:13.973 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:31:13.980 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:31:13.983 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:31:13.984 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:31:13.986 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:31:13.987 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:31:13.987 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:31:13.994 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:31:17.846 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-27 11:31:22.673 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 11:31:22.765 -03:00 [WRN] User a1070588-2cf4-407c-a19d-713c36dfca65 validation failed: DuplicateUserName.
2018-08-27 11:31:31.805 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 11:31:32.492 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 11:31:32.504 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "f3678226-52c4-4275-9875-8e9aa40d5280",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGC55VIF4SJ:00000016",
  "TimeStamp": "2018-08-27T14:31:32Z",
  "ProcessId": 15772,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:31:32.506 -03:00 [DBG] Augmenting SignInContext
2018-08-27 11:31:32.506 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 11:31:32.507 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 11:31:32.508 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 11:31:38.917 -03:00 [DBG] 2 persisted grants found for f3678226-52c4-4275-9875-8e9aa40d5280
2018-08-27 11:31:38.941 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:31:38.945 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:31:38.948 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:37:44.513 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 11:37:44.549 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 11:37:44.550 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 11:37:44.551 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 11:37:44.551 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 11:37:44.618 -03:00 [DBG] Starting token cleanup
2018-08-27 11:37:58.871 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 11:37:58.894 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 11:37:58.894 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 11:37:58.894 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 11:37:58.895 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 11:37:58.972 -03:00 [DBG] Starting token cleanup
2018-08-27 11:38:05.682 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:38:05.780 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:38:05.783 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:38:05.821 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:38:05.827 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:38:05.828 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:38:05.831 -03:00 [DBG] Start discovery request
2018-08-27 11:38:06.098 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:38:06.127 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:38:06.133 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:38:06.134 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:38:06.136 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:38:06.138 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:38:06.139 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:38:06.142 -03:00 [DBG] Start key discovery request
2018-08-27 11:38:06.185 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 11:38:06.190 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 11:38:06.191 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 11:38:06.194 -03:00 [DBG] Start authorize request
2018-08-27 11:38:06.202 -03:00 [DBG] User in authorize request: f3678226-52c4-4275-9875-8e9aa40d5280
2018-08-27 11:38:06.207 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:38:06.381 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:38:06.421 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:38:06.450 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:38:06.459 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:38:06.462 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:38:06.467 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:38:06.476 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "f3678226-52c4-4275-9875-8e9aa40d5280",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "P4SogcveiYlYFqmgP1blrBH12ebVylnr12Osipvz",
  "Nonce": "P4SogcveiYlYFqmgP1blrBH12ebVylnr12Osipvz",
  "SessionId": "b16d534e48e4b5ec422e25fc01624d4d",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "P4SogcveiYlYFqmgP1blrBH12ebVylnr12Osipvz",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "P4SogcveiYlYFqmgP1blrBH12ebVylnr12Osipvz"
  }
}
2018-08-27 11:38:06.508 -03:00 [INF] Showing login: User is not active
2018-08-27 11:38:06.602 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:38:06.610 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:38:06.613 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:38:06.614 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:38:06.616 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:38:06.618 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:38:06.618 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:38:06.627 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:38:08.227 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 11:38:09.245 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 11:38:09.500 -03:00 [INF] User created a new account with password.
2018-08-27 11:38:09.522 -03:00 [INF] User created a new account with password.
2018-08-27 11:38:09.773 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGC5APL1BVI:00000005",
  "TimeStamp": "2018-08-27T14:38:09Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:38:09.782 -03:00 [DBG] Augmenting SignInContext
2018-08-27 11:38:09.784 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 11:38:09.787 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 11:38:09.792 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 11:38:09.804 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 11:38:09.805 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 11:38:09.806 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 11:38:09.811 -03:00 [DBG] Start authorize callback request
2018-08-27 11:38:09.813 -03:00 [DBG] User in authorize request: 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:38:09.814 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:38:09.821 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:38:09.823 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:38:09.825 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:38:09.826 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:38:09.828 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:38:09.829 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:38:09.830 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "P4SogcveiYlYFqmgP1blrBH12ebVylnr12Osipvz",
  "Nonce": "P4SogcveiYlYFqmgP1blrBH12ebVylnr12Osipvz",
  "SessionId": "19ae419baf355668fbe788d60a8f9d52",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "P4SogcveiYlYFqmgP1blrBH12ebVylnr12Osipvz",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "P4SogcveiYlYFqmgP1blrBH12ebVylnr12Osipvz"
  }
}
2018-08-27 11:38:09.857 -03:00 [DBG] BjCbRn2IsE6XiGcYLrF+YzLgsqxzSVmqBE0pjLJmOfc= found in database: false
2018-08-27 11:38:09.859 -03:00 [DBG] user_consent grant with value: UserManagementUI|7b3fb49d-352c-4234-8c74-d83db7ca3964 not found in store.
2018-08-27 11:38:09.860 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 11:38:09.860 -03:00 [INF] Showing consent: User has not yet consented
2018-08-27 11:38:09.880 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:38:09.888 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:38:09.890 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:38:09.891 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:38:09.893 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:38:09.894 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:38:09.895 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:38:09.900 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:38:09.906 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:38:09.907 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:38:15.330 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 11:38:15.362 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:38:15.370 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:38:15.373 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:38:15.375 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:38:15.376 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:38:15.378 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:38:15.378 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:38:15.391 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 11:38:15.393 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 11:38:15.394 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 11:38:15.395 -03:00 [DBG] Start authorize callback request
2018-08-27 11:38:15.397 -03:00 [DBG] User in authorize request: 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:38:15.398 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:38:15.406 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:38:15.408 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:38:15.410 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:38:15.412 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:38:15.416 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:38:15.417 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:38:15.419 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "P4SogcveiYlYFqmgP1blrBH12ebVylnr12Osipvz",
  "Nonce": "P4SogcveiYlYFqmgP1blrBH12ebVylnr12Osipvz",
  "SessionId": "19ae419baf355668fbe788d60a8f9d52",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "P4SogcveiYlYFqmgP1blrBH12ebVylnr12Osipvz",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "P4SogcveiYlYFqmgP1blrBH12ebVylnr12Osipvz"
  }
}
2018-08-27 11:38:15.430 -03:00 [DBG] BjCbRn2IsE6XiGcYLrF+YzLgsqxzSVmqBE0pjLJmOfc= found in database: false
2018-08-27 11:38:15.431 -03:00 [DBG] user_consent grant with value: UserManagementUI|7b3fb49d-352c-4234-8c74-d83db7ca3964 not found in store.
2018-08-27 11:38:15.432 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 11:38:15.436 -03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-27 11:38:15.438 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-27 11:38:15.441 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:38:15.454 -03:00 [DBG] BjCbRn2IsE6XiGcYLrF+YzLgsqxzSVmqBE0pjLJmOfc= not found in database
2018-08-27 11:38:15.486 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 11:38:15.494 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 11:38:15.494 -03:00 [DBG] Getting claims for access token for subject: 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:38:15.523 -03:00 [DBG] VnLS8bx4ARQKN8n7/RNg2qAa2vrMzGXqiS/FX4UAsC8= not found in database
2018-08-27 11:38:15.533 -03:00 [DBG] Getting claims for identity token for subject: 7b3fb49d-352c-4234-8c74-d83db7ca3964 and client: UserManagementUI
2018-08-27 11:38:15.538 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 11:38:15.582 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****4gYw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****47d5"
    }
  ],
  "ActivityId": "0HLGC5APL1BVI:0000000A",
  "TimeStamp": "2018-08-27T14:38:15Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:38:15.589 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "P4SogcveiYlYFqmgP1blrBH12ebVylnr12Osipvz",
  "Scope": "openid profile email"
}
2018-08-27 11:38:15.602 -03:00 [DBG] Augmenting SignInContext
2018-08-27 11:38:15.603 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 11:38:16.538 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:38:16.541 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:38:16.542 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:38:16.542 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:38:16.544 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:38:16.546 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:38:16.547 -03:00 [DBG] Start discovery request
2018-08-27 11:38:16.555 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:38:16.572 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:38:16.575 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:38:16.577 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:38:16.578 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:38:16.580 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:38:16.581 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:38:16.583 -03:00 [DBG] Start key discovery request
2018-08-27 11:38:23.171 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 11:38:23.175 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 11:38:23.177 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 11:38:23.181 -03:00 [DBG] Processing signout request for 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:38:23.188 -03:00 [DBG] Start end session request validation
2018-08-27 11:38:23.193 -03:00 [DBG] Start identity token validation
2018-08-27 11:38:23.209 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:38:23.211 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 11:38:23.246 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 11:38:23.250 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535380695,
    "exp": 1535380995,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "P4SogcveiYlYFqmgP1blrBH12ebVylnr12Osipvz",
    "iat": 1535380695,
    "at_hash": "g46J0xJ7PlQAWSBSwxplEA",
    "sid": "19ae419baf355668fbe788d60a8f9d52",
    "sub": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
    "auth_time": 1535380689,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-08-27 11:38:23.258 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzUzODA2OTUsImV4cCI6MTUzNTM4MDk5NSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiUDRTb2djdmVpWWxZRnFtZ1AxYmxyQkgxMmViVnlsbnIxMk9zaXB2eiIsImlhdCI6MTUzNTM4MDY5NSwiYXRfaGFzaCI6Imc0NkoweEo3UGxRQVdTQlN3eHBsRUEiLCJzaWQiOiIxOWFlNDE5YmFmMzU1NjY4ZmJlNzg4ZDYwYThmOWQ1MiIsInN1YiI6IjdiM2ZiNDlkLTM1MmMtNDIzNC04Yzc0LWQ4M2RiN2NhMzk2NCIsImF1dGhfdGltZSI6MTUzNTM4MDY4OSwiaWRwIjoiRmFjZWJvb2siLCJhbXIiOlsiZXh0ZXJuYWwiXX0.x46PDYXh8dTrUC2N5H9WcAmxhYP98tJyW-Nq327M54j8M_uMi9ufQBhiTlrFx29afPKLyaVJ68fhxwBIohtNFOX-WhxE396yMl8cH2nY76RRvAeGj67Mj7qlFSYqbW44zoINVqUPySNs9VauP4eTORyZRY9cTw55jpsApZXVJYjG6ZsRlo68XxO7V6WZKPdp_cI_Deu9y6abCaoBrAsI_NDsuri-msLs3ZLOHnFkQ0otETymPK8RsY2dshY2EOPc7rRnXF1c_XCAc3bbs10CI6wdRVCKcKQmKqYU0NiDFwBqpg3e79A2RFB68H68ihqf3q6M6bHKpQXUc8HzF-4gYw",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 11:38:23.262 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 11:38:23.305 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 11:38:23.308 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 11:38:23.309 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 11:38:23.313 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGC5APL1BVI:0000000C",
  "TimeStamp": "2018-08-27T14:38:23Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:38:23.452 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 11:38:23.457 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 11:38:23.459 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 11:38:23.465 -03:00 [DBG] Processing signout callback request
2018-08-27 11:38:23.489 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:38:23.490 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 11:38:23.491 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 11:38:23.492 -03:00 [INF] Successful signout callback.
2018-08-27 11:38:23.492 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 11:38:23.493 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 11:38:25.183 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:38:25.187 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:38:25.188 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:38:25.190 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:38:25.192 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:38:25.196 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:38:25.197 -03:00 [DBG] Start discovery request
2018-08-27 11:38:25.206 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:38:25.221 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:38:25.223 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:38:25.225 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:38:25.226 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:38:25.229 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:38:25.231 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:38:25.232 -03:00 [DBG] Start key discovery request
2018-08-27 11:38:25.247 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 11:38:25.249 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 11:38:25.250 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 11:38:25.251 -03:00 [DBG] Start authorize request
2018-08-27 11:38:25.253 -03:00 [DBG] No user present in authorize request
2018-08-27 11:38:25.254 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:38:25.263 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:38:25.268 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:38:25.271 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:38:25.273 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:38:25.275 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:38:25.276 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:38:25.278 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "ycEzEwRU8XTeR7OGRir9U0MDwa0ZtagJgE7OPdRO",
  "Nonce": "ycEzEwRU8XTeR7OGRir9U0MDwa0ZtagJgE7OPdRO",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "ycEzEwRU8XTeR7OGRir9U0MDwa0ZtagJgE7OPdRO",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "ycEzEwRU8XTeR7OGRir9U0MDwa0ZtagJgE7OPdRO"
  }
}
2018-08-27 11:38:25.281 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 11:38:25.285 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:38:25.292 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:38:25.294 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:38:25.296 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:38:25.299 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:38:25.301 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:38:25.302 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:38:25.308 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:38:50.754 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-08-27 11:38:53.095 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 11:38:53.692 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 11:38:53.707 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGC5APL1BVI:00000015",
  "TimeStamp": "2018-08-27T14:38:53Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:38:53.709 -03:00 [DBG] Augmenting SignInContext
2018-08-27 11:38:53.709 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 11:38:53.710 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 11:38:53.711 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 11:38:53.733 -03:00 [DBG] 2 persisted grants found for 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:38:53.757 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:38:53.759 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:38:53.761 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:39:02.023 -03:00 [DBG] 2 persisted grants found for 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:39:02.045 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:39:02.048 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:39:02.050 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:39:15.865 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 11:39:16.436 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 11:39:16.448 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGC5APL1BVI:0000001C",
  "TimeStamp": "2018-08-27T14:39:16Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:39:16.449 -03:00 [DBG] Augmenting SignInContext
2018-08-27 11:39:16.450 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 11:39:16.450 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 11:39:16.451 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 11:39:16.454 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 11:39:16.458 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 11:39:16.458 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 11:39:16.459 -03:00 [DBG] Start authorize callback request
2018-08-27 11:39:16.460 -03:00 [DBG] User in authorize request: 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:39:16.461 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:39:16.468 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:39:16.471 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:39:16.473 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:39:16.474 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:39:16.476 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:39:16.477 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:39:16.478 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "ycEzEwRU8XTeR7OGRir9U0MDwa0ZtagJgE7OPdRO",
  "Nonce": "ycEzEwRU8XTeR7OGRir9U0MDwa0ZtagJgE7OPdRO",
  "SessionId": "520fc30917047cb8c0441ab7b5e63888",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "ycEzEwRU8XTeR7OGRir9U0MDwa0ZtagJgE7OPdRO",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "ycEzEwRU8XTeR7OGRir9U0MDwa0ZtagJgE7OPdRO"
  }
}
2018-08-27 11:39:16.485 -03:00 [DBG] BjCbRn2IsE6XiGcYLrF+YzLgsqxzSVmqBE0pjLJmOfc= found in database: true
2018-08-27 11:39:16.490 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 11:39:16.491 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 11:39:16.491 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 11:39:16.492 -03:00 [DBG] Getting claims for access token for subject: 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:39:16.502 -03:00 [DBG] pPn0d0PoJ5A/A5nKFuXC3yNYzMyC2LJgsfe9TYDOI/4= not found in database
2018-08-27 11:39:16.513 -03:00 [DBG] Getting claims for identity token for subject: 7b3fb49d-352c-4234-8c74-d83db7ca3964 and client: UserManagementUI
2018-08-27 11:39:16.515 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 11:39:16.518 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****zxvg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****3b0a"
    }
  ],
  "ActivityId": "0HLGC5APL1BVI:0000001D",
  "TimeStamp": "2018-08-27T14:39:16Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:39:16.523 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "ycEzEwRU8XTeR7OGRir9U0MDwa0ZtagJgE7OPdRO",
  "Scope": "openid profile email"
}
2018-08-27 11:39:16.524 -03:00 [DBG] Augmenting SignInContext
2018-08-27 11:39:16.524 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 11:39:17.539 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:39:17.543 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:39:17.545 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:39:17.546 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:39:17.549 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:39:17.554 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:39:17.556 -03:00 [DBG] Start discovery request
2018-08-27 11:39:17.562 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:39:17.576 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:39:17.579 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:39:17.582 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:39:17.583 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:39:17.585 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:39:17.587 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:39:17.588 -03:00 [DBG] Start key discovery request
2018-08-27 11:39:28.076 -03:00 [DBG] 3 persisted grants found for 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:39:28.095 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:39:28.097 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:39:28.099 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:39:29.453 -03:00 [DBG] CORS request made for path: /Grants/Revoke from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 11:39:29.473 -03:00 [DBG] removing 3 persisted grants from database for subject 7b3fb49d-352c-4234-8c74-d83db7ca3964, clientId UserManagementUI
2018-08-27 11:39:29.492 -03:00 [DBG] 0 persisted grants found for 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:39:46.360 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 11:39:46.370 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 11:39:46.371 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 11:39:46.373 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 11:39:46.374 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGC5APL1BVI:00000025",
  "TimeStamp": "2018-08-27T14:39:46Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:39:46.426 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 11:39:46.428 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 11:39:46.430 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 11:39:46.431 -03:00 [DBG] Processing signout callback request
2018-08-27 11:39:46.446 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:39:46.446 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 11:39:46.447 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 11:39:46.448 -03:00 [INF] Successful signout callback.
2018-08-27 11:39:46.448 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 11:39:46.449 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 11:44:33.599 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:44:33.639 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:44:33.640 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:44:33.640 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:44:33.641 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:44:33.642 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:44:33.643 -03:00 [DBG] Start discovery request
2018-08-27 11:44:33.650 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:44:33.666 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:44:33.674 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:44:33.675 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:44:33.676 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:44:33.677 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:44:33.679 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:44:33.681 -03:00 [DBG] Start key discovery request
2018-08-27 11:44:33.688 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 11:44:33.690 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 11:44:33.691 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 11:44:33.692 -03:00 [DBG] Start authorize request
2018-08-27 11:44:33.694 -03:00 [DBG] No user present in authorize request
2018-08-27 11:44:33.694 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:44:33.700 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:44:33.702 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:44:33.705 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:44:33.707 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:44:33.710 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:44:33.710 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:44:33.711 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "ryznRC56d00QWb4ZgKIDxXHgtLAPklDfM1chymaO",
  "Nonce": "ryznRC56d00QWb4ZgKIDxXHgtLAPklDfM1chymaO",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "ryznRC56d00QWb4ZgKIDxXHgtLAPklDfM1chymaO",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "ryznRC56d00QWb4ZgKIDxXHgtLAPklDfM1chymaO"
  }
}
2018-08-27 11:44:33.714 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 11:44:33.717 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:44:33.724 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:44:33.727 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:44:33.728 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:44:33.730 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:44:33.732 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:44:33.732 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:44:33.739 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:44:35.354 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 11:44:36.067 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 11:44:36.079 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGC5APL1BVI:0000002D",
  "TimeStamp": "2018-08-27T14:44:36Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:44:36.081 -03:00 [DBG] Augmenting SignInContext
2018-08-27 11:44:36.081 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 11:44:36.082 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 11:44:36.082 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 11:44:36.085 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 11:44:36.091 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 11:44:36.092 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 11:44:36.092 -03:00 [DBG] Start authorize callback request
2018-08-27 11:44:36.093 -03:00 [DBG] User in authorize request: 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:44:36.094 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:44:36.100 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:44:36.102 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:44:36.104 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:44:36.106 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:44:36.108 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:44:36.109 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:44:36.110 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "ryznRC56d00QWb4ZgKIDxXHgtLAPklDfM1chymaO",
  "Nonce": "ryznRC56d00QWb4ZgKIDxXHgtLAPklDfM1chymaO",
  "SessionId": "44273fe20224b2b4e2481c7fe045edd9",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "ryznRC56d00QWb4ZgKIDxXHgtLAPklDfM1chymaO",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "ryznRC56d00QWb4ZgKIDxXHgtLAPklDfM1chymaO"
  }
}
2018-08-27 11:44:36.116 -03:00 [DBG] BjCbRn2IsE6XiGcYLrF+YzLgsqxzSVmqBE0pjLJmOfc= found in database: false
2018-08-27 11:44:36.118 -03:00 [DBG] user_consent grant with value: UserManagementUI|7b3fb49d-352c-4234-8c74-d83db7ca3964 not found in store.
2018-08-27 11:44:36.119 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 11:44:36.120 -03:00 [INF] Showing consent: User has not yet consented
2018-08-27 11:44:36.122 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:44:36.128 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:44:36.131 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:44:36.133 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:44:36.135 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:44:36.136 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:44:36.138 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:44:36.143 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:44:36.145 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:44:36.146 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:44:38.217 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 11:44:38.220 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:44:38.230 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:44:38.232 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:44:38.234 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:44:38.236 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:44:38.239 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:44:38.240 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:44:38.243 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 11:44:38.243 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 11:44:38.244 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 11:44:38.245 -03:00 [DBG] Start authorize callback request
2018-08-27 11:44:38.246 -03:00 [DBG] User in authorize request: 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:44:38.248 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:44:38.255 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:44:38.258 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:44:38.260 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:44:38.261 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:44:38.263 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:44:38.263 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:44:38.264 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "ryznRC56d00QWb4ZgKIDxXHgtLAPklDfM1chymaO",
  "Nonce": "ryznRC56d00QWb4ZgKIDxXHgtLAPklDfM1chymaO",
  "SessionId": "44273fe20224b2b4e2481c7fe045edd9",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "ryznRC56d00QWb4ZgKIDxXHgtLAPklDfM1chymaO",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "ryznRC56d00QWb4ZgKIDxXHgtLAPklDfM1chymaO"
  }
}
2018-08-27 11:44:38.273 -03:00 [DBG] BjCbRn2IsE6XiGcYLrF+YzLgsqxzSVmqBE0pjLJmOfc= found in database: false
2018-08-27 11:44:38.273 -03:00 [DBG] user_consent grant with value: UserManagementUI|7b3fb49d-352c-4234-8c74-d83db7ca3964 not found in store.
2018-08-27 11:44:38.274 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 11:44:38.275 -03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-27 11:44:38.276 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-27 11:44:38.277 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:44:38.282 -03:00 [DBG] BjCbRn2IsE6XiGcYLrF+YzLgsqxzSVmqBE0pjLJmOfc= not found in database
2018-08-27 11:44:38.290 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 11:44:38.290 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 11:44:38.291 -03:00 [DBG] Getting claims for access token for subject: 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:44:38.300 -03:00 [DBG] VQHRKZ+ZQOwB+0jO3WukYnMTX29miZVdXZeAhwVUtz8= not found in database
2018-08-27 11:44:38.305 -03:00 [DBG] Getting claims for identity token for subject: 7b3fb49d-352c-4234-8c74-d83db7ca3964 and client: UserManagementUI
2018-08-27 11:44:38.305 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 11:44:38.309 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****NP1g"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****6ad9"
    }
  ],
  "ActivityId": "0HLGC5APL1BVT:00000004",
  "TimeStamp": "2018-08-27T14:44:38Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:44:38.311 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "ryznRC56d00QWb4ZgKIDxXHgtLAPklDfM1chymaO",
  "Scope": "openid profile email"
}
2018-08-27 11:44:38.312 -03:00 [DBG] Augmenting SignInContext
2018-08-27 11:44:38.313 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 11:44:38.933 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:44:38.935 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:44:38.938 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:44:38.939 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:44:38.941 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:44:38.941 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:44:38.944 -03:00 [DBG] Start discovery request
2018-08-27 11:44:38.948 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:44:38.962 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:44:38.966 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:44:38.967 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:44:38.968 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:44:38.969 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:44:38.972 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:44:38.975 -03:00 [DBG] Start key discovery request
2018-08-27 11:45:19.023 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:45:19.027 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:45:19.028 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:45:19.029 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:45:19.030 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:45:19.032 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:45:19.033 -03:00 [DBG] Start discovery request
2018-08-27 11:45:19.042 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:45:19.069 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:45:19.074 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:45:19.075 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:45:19.076 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:45:19.077 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:45:19.078 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:45:19.079 -03:00 [DBG] Start key discovery request
2018-08-27 11:45:40.948 -03:00 [DBG] 2 persisted grants found for 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:45:40.965 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:45:40.968 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:45:40.970 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:45:42.254 -03:00 [DBG] CORS request made for path: /Grants/Revoke from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 11:45:42.257 -03:00 [DBG] removing 2 persisted grants from database for subject 7b3fb49d-352c-4234-8c74-d83db7ca3964, clientId UserManagementUI
2018-08-27 11:45:42.271 -03:00 [DBG] 0 persisted grants found for 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:45:55.765 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 11:45:55.773 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 11:45:55.774 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 11:45:55.775 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 11:45:55.777 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGC5APL1BVT:0000000D",
  "TimeStamp": "2018-08-27T14:45:55Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:45:55.825 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 11:45:55.827 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 11:45:55.828 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 11:45:55.829 -03:00 [DBG] Processing signout callback request
2018-08-27 11:45:55.839 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:45:55.839 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 11:45:55.840 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 11:45:55.840 -03:00 [INF] Successful signout callback.
2018-08-27 11:45:55.841 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 11:45:55.841 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 11:48:47.607 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 11:48:48.414 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 11:48:48.428 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGC5APL1BVT:00000013",
  "TimeStamp": "2018-08-27T14:48:48Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:48:48.429 -03:00 [DBG] Augmenting SignInContext
2018-08-27 11:48:48.430 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 11:48:48.431 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 11:48:48.431 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 11:48:50.294 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:48:50.297 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:48:50.299 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:48:50.300 -03:00 [DBG] Start discovery request
2018-08-27 11:48:50.305 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:48:52.690 -03:00 [DBG] 0 persisted grants found for 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:48:55.852 -03:00 [DBG] 0 persisted grants found for 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:53:22.517 -03:00 [DBG] 0 persisted grants found for 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 11:53:27.501 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 11:53:27.508 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 11:53:27.509 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 11:53:27.510 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 11:53:27.513 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGC5APL1BVT:0000001C",
  "TimeStamp": "2018-08-27T14:53:27Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:54:07.999 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:54:08.003 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:54:08.006 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:54:08.006 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:54:08.007 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:54:08.008 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:54:08.012 -03:00 [DBG] Start discovery request
2018-08-27 11:54:08.019 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:54:08.026 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:54:08.029 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:54:08.030 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:54:08.031 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:54:08.033 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:54:08.034 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:54:08.034 -03:00 [DBG] Start key discovery request
2018-08-27 11:54:08.049 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 11:54:08.050 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 11:54:08.052 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 11:54:08.053 -03:00 [DBG] Start authorize request
2018-08-27 11:54:08.054 -03:00 [DBG] No user present in authorize request
2018-08-27 11:54:08.054 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:54:08.060 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:54:08.065 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:54:08.070 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:54:08.072 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:54:08.073 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:54:08.074 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:54:08.075 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "w0UH5mGxh86O663PLQKC86kGPgzltYuE0NbTl7xy",
  "Nonce": "w0UH5mGxh86O663PLQKC86kGPgzltYuE0NbTl7xy",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "w0UH5mGxh86O663PLQKC86kGPgzltYuE0NbTl7xy",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "w0UH5mGxh86O663PLQKC86kGPgzltYuE0NbTl7xy"
  }
}
2018-08-27 11:54:08.077 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 11:54:08.081 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:54:08.089 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:54:08.091 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:54:08.092 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:54:08.094 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:54:08.096 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:54:08.097 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:54:08.103 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:54:17.338 -03:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 11:54:17.444 -03:00 [DBG] Augmenting SignInContext
2018-08-27 11:54:17.444 -03:00 [DBG] Adding idp claim with value: local
2018-08-27 11:54:17.445 -03:00 [DBG] Adding amr claim with value: pwd
2018-08-27 11:54:17.446 -03:00 [DBG] Adding auth_time claim with value: 1535381657
2018-08-27 11:54:17.447 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 11:54:17.450 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bhdebrito",
  "SubjectId": "a4e211ec-86f0-43dd-b102-1413fc89f8a3",
  "DisplayName": "bhdebrito",
  "Endpoint": "UI",
  "ActivityId": "0HLGC5APL1BVT:00000021",
  "TimeStamp": "2018-08-27T14:54:17Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:54:17.455 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 11:54:17.456 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 11:54:17.457 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 11:54:17.458 -03:00 [DBG] Start authorize callback request
2018-08-27 11:54:17.459 -03:00 [DBG] User in authorize request: a4e211ec-86f0-43dd-b102-1413fc89f8a3
2018-08-27 11:54:17.459 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:54:17.467 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:54:17.469 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:54:17.470 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:54:17.471 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:54:17.473 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:54:17.473 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:54:17.474 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "a4e211ec-86f0-43dd-b102-1413fc89f8a3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "w0UH5mGxh86O663PLQKC86kGPgzltYuE0NbTl7xy",
  "Nonce": "w0UH5mGxh86O663PLQKC86kGPgzltYuE0NbTl7xy",
  "SessionId": "a73793568a8b0e9b06dac84e6c901385",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "w0UH5mGxh86O663PLQKC86kGPgzltYuE0NbTl7xy",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "w0UH5mGxh86O663PLQKC86kGPgzltYuE0NbTl7xy"
  }
}
2018-08-27 11:54:17.482 -03:00 [DBG] 4eOVJ8eTKAfIxHShhIT+yJ4V4j1pro8FxuqDVgOy2Xs= found in database: false
2018-08-27 11:54:17.483 -03:00 [DBG] user_consent grant with value: UserManagementUI|a4e211ec-86f0-43dd-b102-1413fc89f8a3 not found in store.
2018-08-27 11:54:17.484 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 11:54:17.485 -03:00 [INF] Showing consent: User has not yet consented
2018-08-27 11:54:17.489 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:54:17.494 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:54:17.497 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:54:17.499 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:54:17.501 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:54:17.502 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:54:17.503 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:54:17.508 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:54:17.510 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:54:17.511 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:54:19.301 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 11:54:19.311 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:54:19.317 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:54:19.319 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:54:19.321 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:54:19.322 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:54:19.324 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:54:19.325 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:54:19.332 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 11:54:19.332 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 11:54:19.333 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 11:54:19.334 -03:00 [DBG] Start authorize callback request
2018-08-27 11:54:19.334 -03:00 [DBG] User in authorize request: a4e211ec-86f0-43dd-b102-1413fc89f8a3
2018-08-27 11:54:19.335 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:54:19.340 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:54:19.342 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:54:19.344 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:54:19.346 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:54:19.348 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:54:19.349 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:54:19.350 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "a4e211ec-86f0-43dd-b102-1413fc89f8a3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "w0UH5mGxh86O663PLQKC86kGPgzltYuE0NbTl7xy",
  "Nonce": "w0UH5mGxh86O663PLQKC86kGPgzltYuE0NbTl7xy",
  "SessionId": "a73793568a8b0e9b06dac84e6c901385",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "w0UH5mGxh86O663PLQKC86kGPgzltYuE0NbTl7xy",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "w0UH5mGxh86O663PLQKC86kGPgzltYuE0NbTl7xy"
  }
}
2018-08-27 11:54:19.357 -03:00 [DBG] 4eOVJ8eTKAfIxHShhIT+yJ4V4j1pro8FxuqDVgOy2Xs= found in database: false
2018-08-27 11:54:19.358 -03:00 [DBG] user_consent grant with value: UserManagementUI|a4e211ec-86f0-43dd-b102-1413fc89f8a3 not found in store.
2018-08-27 11:54:19.359 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 11:54:19.360 -03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-27 11:54:19.361 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-27 11:54:19.364 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: a4e211ec-86f0-43dd-b102-1413fc89f8a3
2018-08-27 11:54:19.368 -03:00 [DBG] 4eOVJ8eTKAfIxHShhIT+yJ4V4j1pro8FxuqDVgOy2Xs= not found in database
2018-08-27 11:54:19.376 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 11:54:19.376 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 11:54:19.377 -03:00 [DBG] Getting claims for access token for subject: a4e211ec-86f0-43dd-b102-1413fc89f8a3
2018-08-27 11:54:19.386 -03:00 [DBG] 2Cz5ni1TFnH47ISfdlHxEjPlmfU5lPYgPtmd/jojC1M= not found in database
2018-08-27 11:54:19.389 -03:00 [DBG] Getting claims for identity token for subject: a4e211ec-86f0-43dd-b102-1413fc89f8a3 and client: UserManagementUI
2018-08-27 11:54:19.390 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 11:54:19.393 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "a4e211ec-86f0-43dd-b102-1413fc89f8a3",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****5Wsw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****cbf7"
    }
  ],
  "ActivityId": "0HLGC5APL1BVT:00000026",
  "TimeStamp": "2018-08-27T14:54:19Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:54:19.395 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "a4e211ec-86f0-43dd-b102-1413fc89f8a3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "w0UH5mGxh86O663PLQKC86kGPgzltYuE0NbTl7xy",
  "Scope": "openid profile email"
}
2018-08-27 11:54:19.396 -03:00 [DBG] Augmenting SignInContext
2018-08-27 11:54:19.396 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 11:54:20.333 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:54:20.336 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:54:20.337 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:54:20.338 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:54:20.339 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:54:20.340 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:54:20.341 -03:00 [DBG] Start discovery request
2018-08-27 11:54:20.349 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:54:20.372 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:54:20.376 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:54:20.377 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:54:20.378 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:54:20.380 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:54:20.381 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:54:20.386 -03:00 [DBG] Start key discovery request
2018-08-27 11:54:26.334 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 11:54:26.339 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 11:54:26.340 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 11:54:26.342 -03:00 [DBG] Processing signout request for a4e211ec-86f0-43dd-b102-1413fc89f8a3
2018-08-27 11:54:26.344 -03:00 [DBG] Start end session request validation
2018-08-27 11:54:26.344 -03:00 [DBG] Start identity token validation
2018-08-27 11:54:26.351 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:54:26.352 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 11:54:26.357 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 11:54:26.358 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535381659,
    "exp": 1535381959,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "w0UH5mGxh86O663PLQKC86kGPgzltYuE0NbTl7xy",
    "iat": 1535381659,
    "at_hash": "TF6M0yE_XvL7-6AWodXrCA",
    "sid": "a73793568a8b0e9b06dac84e6c901385",
    "sub": "a4e211ec-86f0-43dd-b102-1413fc89f8a3",
    "auth_time": 1535381657,
    "idp": "local",
    "amr": "pwd"
  }
}
2018-08-27 11:54:26.360 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "a4e211ec-86f0-43dd-b102-1413fc89f8a3",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzUzODE2NTksImV4cCI6MTUzNTM4MTk1OSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoidzBVSDVtR3hoODZPNjYzUExRS0M4NmtHUGd6bHRZdUUwTmJUbDd4eSIsImlhdCI6MTUzNTM4MTY1OSwiYXRfaGFzaCI6IlRGNk0weUVfWHZMNy02QVdvZFhyQ0EiLCJzaWQiOiJhNzM3OTM1NjhhOGIwZTliMDZkYWM4NGU2YzkwMTM4NSIsInN1YiI6ImE0ZTIxMWVjLTg2ZjAtNDNkZC1iMTAyLTE0MTNmYzg5ZjhhMyIsImF1dGhfdGltZSI6MTUzNTM4MTY1NywiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.GPNgv9Pr_SAl72G0KeU5ChhaTAyN6iG-NDKeXhpq_WKVluKaf05UBk2-iXdtb0DS8USKcY0dmC9xMEFUSFqJXSfODvhskStquo_gbU7QZICIFNJDo4XI6bpPD7n9N3cCF5SdpghXhfRwHSJxXpvoDoTtq26-K0FFJQYq77UKNOhyJgnxwjizccvPc6fdS-2D8nuEAKdctpcKJe2FvKLhEh9oV5bV1T_But2exmot-wB6Ask4LR746vcb2zbmHfK280X5oZSrKSVL3KmTe1KufrlPGjXrnF7K1c3yuCKG7EE3UZWnEhgfqoRNqj6FoGbWKNsno7AT7bjOR5oq9k5Wsw",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 11:54:26.362 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 11:54:26.366 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 11:54:26.369 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 11:54:26.370 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 11:54:26.372 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "a4e211ec-86f0-43dd-b102-1413fc89f8a3",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGC5APL1BVT:00000028",
  "TimeStamp": "2018-08-27T14:54:26Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:54:26.435 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 11:54:26.438 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 11:54:26.439 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 11:54:26.440 -03:00 [DBG] Processing signout callback request
2018-08-27 11:54:26.447 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:54:26.448 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 11:54:26.449 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 11:54:26.449 -03:00 [INF] Successful signout callback.
2018-08-27 11:54:26.450 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 11:54:26.451 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 11:54:28.621 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:54:28.627 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:54:28.629 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:54:28.632 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:54:28.636 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:54:28.637 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:54:28.638 -03:00 [DBG] Start discovery request
2018-08-27 11:54:28.648 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:54:28.662 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:54:28.668 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:54:28.669 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:54:28.670 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:54:28.672 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:54:28.676 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:54:28.679 -03:00 [DBG] Start key discovery request
2018-08-27 11:54:28.697 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 11:54:28.699 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 11:54:28.700 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 11:54:28.701 -03:00 [DBG] Start authorize request
2018-08-27 11:54:28.702 -03:00 [DBG] No user present in authorize request
2018-08-27 11:54:28.703 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:54:28.710 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:54:28.713 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:54:28.716 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:54:28.718 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:54:28.721 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:54:28.721 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:54:28.723 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "mICUtyIEeDYNGoDBYBpMtm85dUVqzEgwhLx6IuCU",
  "Nonce": "mICUtyIEeDYNGoDBYBpMtm85dUVqzEgwhLx6IuCU",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "mICUtyIEeDYNGoDBYBpMtm85dUVqzEgwhLx6IuCU",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "mICUtyIEeDYNGoDBYBpMtm85dUVqzEgwhLx6IuCU"
  }
}
2018-08-27 11:54:28.725 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 11:54:28.734 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:54:28.741 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:54:28.743 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:54:28.744 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:54:28.747 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:54:28.749 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:54:28.750 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:54:28.755 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:55:12.721 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:55:12.725 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:55:12.727 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:55:12.728 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:55:12.730 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:55:12.733 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:55:12.735 -03:00 [DBG] Start discovery request
2018-08-27 11:55:12.740 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:55:12.770 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:55:12.774 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:55:12.775 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:55:12.777 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:55:12.779 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:55:12.780 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:55:12.783 -03:00 [DBG] Start key discovery request
2018-08-27 11:55:12.808 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 11:55:12.812 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 11:55:12.819 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 11:55:12.821 -03:00 [DBG] Start authorize request
2018-08-27 11:55:12.822 -03:00 [DBG] No user present in authorize request
2018-08-27 11:55:12.822 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:55:12.829 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:55:12.832 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:55:12.837 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:55:12.839 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:55:12.840 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:55:12.840 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:55:12.841 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "bkq6ZFhow6yaINN9UPseEWcCl2rtCNKpWbEzGYLI",
  "Nonce": "bkq6ZFhow6yaINN9UPseEWcCl2rtCNKpWbEzGYLI",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "bkq6ZFhow6yaINN9UPseEWcCl2rtCNKpWbEzGYLI",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "bkq6ZFhow6yaINN9UPseEWcCl2rtCNKpWbEzGYLI"
  }
}
2018-08-27 11:55:12.844 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 11:55:12.854 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:55:12.860 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:55:12.862 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:55:12.864 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:55:12.866 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:55:12.867 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:55:12.869 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:55:12.874 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:56:12.788 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:56:12.801 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:56:12.803 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:56:12.804 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:56:12.807 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:56:12.810 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:56:12.811 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:56:12.817 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:56:16.301 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-27 11:56:56.023 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 11:56:56.047 -03:00 [INF] User created a new account with password.
2018-08-27 11:56:56.048 -03:00 [INF] User created a new account with password.
2018-08-27 11:56:56.069 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "106800735291513176099",
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "DisplayName": "Marco Aurelio",
  "Endpoint": "UI",
  "ActivityId": "0HLGC5APL1C06:00000005",
  "TimeStamp": "2018-08-27T14:56:56Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:56:56.071 -03:00 [DBG] Augmenting SignInContext
2018-08-27 11:56:56.072 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 11:56:56.072 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 11:56:56.073 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 11:56:56.076 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 11:56:56.076 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 11:56:56.077 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 11:56:56.078 -03:00 [DBG] Start authorize callback request
2018-08-27 11:56:56.079 -03:00 [DBG] User in authorize request: 175c6391-f8be-47f3-9c57-b14016ca51c6
2018-08-27 11:56:56.080 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:56:56.091 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:56:56.093 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:56:56.094 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:56:56.096 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:56:56.098 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:56:56.098 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:56:56.099 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "bkq6ZFhow6yaINN9UPseEWcCl2rtCNKpWbEzGYLI",
  "Nonce": "bkq6ZFhow6yaINN9UPseEWcCl2rtCNKpWbEzGYLI",
  "SessionId": "2078b61e6504cdcd9cf5ddb7e0da4f50",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "bkq6ZFhow6yaINN9UPseEWcCl2rtCNKpWbEzGYLI",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "bkq6ZFhow6yaINN9UPseEWcCl2rtCNKpWbEzGYLI"
  }
}
2018-08-27 11:56:56.107 -03:00 [DBG] okPngKVxmvIXIhYy36G9Z9Hr/bKawntUL7TsxKX0rOA= found in database: false
2018-08-27 11:56:56.107 -03:00 [DBG] user_consent grant with value: UserManagementUI|175c6391-f8be-47f3-9c57-b14016ca51c6 not found in store.
2018-08-27 11:56:56.108 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 11:56:56.108 -03:00 [INF] Showing consent: User has not yet consented
2018-08-27 11:56:56.110 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:56:56.117 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:56:56.119 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:56:56.121 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:56:56.123 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:56:56.124 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:56:56.125 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:56:56.130 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:56:56.133 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:56:56.134 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:20.918 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 11:57:20.921 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:57:20.930 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:57:20.934 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:57:20.936 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:20.939 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:57:20.941 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:20.942 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:57:20.949 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 11:57:20.951 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 11:57:20.953 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 11:57:20.954 -03:00 [DBG] Start authorize callback request
2018-08-27 11:57:20.954 -03:00 [DBG] User in authorize request: 175c6391-f8be-47f3-9c57-b14016ca51c6
2018-08-27 11:57:20.955 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:57:20.961 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:57:20.963 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:57:20.966 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:20.968 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:57:20.970 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:20.970 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:57:20.971 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "bkq6ZFhow6yaINN9UPseEWcCl2rtCNKpWbEzGYLI",
  "Nonce": "bkq6ZFhow6yaINN9UPseEWcCl2rtCNKpWbEzGYLI",
  "SessionId": "2078b61e6504cdcd9cf5ddb7e0da4f50",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "bkq6ZFhow6yaINN9UPseEWcCl2rtCNKpWbEzGYLI",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "bkq6ZFhow6yaINN9UPseEWcCl2rtCNKpWbEzGYLI"
  }
}
2018-08-27 11:57:20.978 -03:00 [DBG] okPngKVxmvIXIhYy36G9Z9Hr/bKawntUL7TsxKX0rOA= found in database: false
2018-08-27 11:57:20.979 -03:00 [DBG] user_consent grant with value: UserManagementUI|175c6391-f8be-47f3-9c57-b14016ca51c6 not found in store.
2018-08-27 11:57:20.980 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 11:57:20.981 -03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-27 11:57:20.982 -03:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 175c6391-f8be-47f3-9c57-b14016ca51c6
2018-08-27 11:57:20.986 -03:00 [DBG] no okPngKVxmvIXIhYy36G9Z9Hr/bKawntUL7TsxKX0rOA= persisted grant found in database
2018-08-27 11:57:20.988 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 11:57:20.989 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 11:57:20.990 -03:00 [DBG] Getting claims for access token for subject: 175c6391-f8be-47f3-9c57-b14016ca51c6
2018-08-27 11:57:20.999 -03:00 [DBG] 8SIrP663pZt6hkzQP2ZbkoFHE69oaV0azj1I8pDwGKU= not found in database
2018-08-27 11:57:21.006 -03:00 [DBG] Getting claims for identity token for subject: 175c6391-f8be-47f3-9c57-b14016ca51c6 and client: UserManagementUI
2018-08-27 11:57:21.008 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 11:57:21.012 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****96vg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****5521"
    }
  ],
  "ActivityId": "0HLGC5APL1C06:0000000B",
  "TimeStamp": "2018-08-27T14:57:21Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:57:21.014 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "bkq6ZFhow6yaINN9UPseEWcCl2rtCNKpWbEzGYLI",
  "Scope": "openid profile email"
}
2018-08-27 11:57:21.016 -03:00 [DBG] Augmenting SignInContext
2018-08-27 11:57:21.017 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 11:57:22.101 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:57:22.105 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:57:22.106 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:57:22.108 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:57:22.110 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:57:22.113 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:57:22.114 -03:00 [DBG] Start discovery request
2018-08-27 11:57:22.120 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:57:22.123 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:57:22.125 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:57:22.126 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:57:22.126 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:57:22.127 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:57:22.128 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:57:22.129 -03:00 [DBG] Start key discovery request
2018-08-27 11:57:22.135 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 11:57:22.136 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 11:57:22.137 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 11:57:22.137 -03:00 [DBG] Start authorize request
2018-08-27 11:57:22.138 -03:00 [DBG] User in authorize request: 175c6391-f8be-47f3-9c57-b14016ca51c6
2018-08-27 11:57:22.138 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:57:22.144 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:57:22.146 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:57:22.148 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:22.150 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:57:22.151 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:22.152 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:57:22.154 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "RVhNNSRBUnkSJZojlkGBPHs6RzaKygu5WuS9He78",
  "Nonce": "RVhNNSRBUnkSJZojlkGBPHs6RzaKygu5WuS9He78",
  "SessionId": "2078b61e6504cdcd9cf5ddb7e0da4f50",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "RVhNNSRBUnkSJZojlkGBPHs6RzaKygu5WuS9He78",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "RVhNNSRBUnkSJZojlkGBPHs6RzaKygu5WuS9He78"
  }
}
2018-08-27 11:57:22.159 -03:00 [DBG] okPngKVxmvIXIhYy36G9Z9Hr/bKawntUL7TsxKX0rOA= found in database: false
2018-08-27 11:57:22.160 -03:00 [DBG] user_consent grant with value: UserManagementUI|175c6391-f8be-47f3-9c57-b14016ca51c6 not found in store.
2018-08-27 11:57:22.161 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 11:57:22.161 -03:00 [INF] Showing consent: User has not yet consented
2018-08-27 11:57:22.163 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:57:22.169 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:57:22.171 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:57:22.172 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:22.174 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:57:22.176 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:22.176 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:57:22.182 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:57:22.184 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:57:22.185 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:37.809 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:57:37.813 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:57:37.814 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:57:37.815 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:57:37.816 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:57:37.817 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:57:37.818 -03:00 [DBG] Start discovery request
2018-08-27 11:57:37.825 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:57:37.833 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:57:37.836 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:57:37.837 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:57:37.838 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:57:37.839 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:57:37.839 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:57:37.840 -03:00 [DBG] Start key discovery request
2018-08-27 11:57:37.848 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 11:57:37.850 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 11:57:37.853 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 11:57:37.854 -03:00 [DBG] Start authorize request
2018-08-27 11:57:37.854 -03:00 [DBG] User in authorize request: 175c6391-f8be-47f3-9c57-b14016ca51c6
2018-08-27 11:57:37.855 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:57:37.861 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:57:37.863 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:57:37.865 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:37.867 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:57:37.868 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:37.869 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:57:37.871 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "YytX7BqtsErbpwnWrqPFvKnKYgku9wyuEyVXFfrR",
  "Nonce": "YytX7BqtsErbpwnWrqPFvKnKYgku9wyuEyVXFfrR",
  "SessionId": "2078b61e6504cdcd9cf5ddb7e0da4f50",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "YytX7BqtsErbpwnWrqPFvKnKYgku9wyuEyVXFfrR",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "YytX7BqtsErbpwnWrqPFvKnKYgku9wyuEyVXFfrR"
  }
}
2018-08-27 11:57:37.877 -03:00 [DBG] okPngKVxmvIXIhYy36G9Z9Hr/bKawntUL7TsxKX0rOA= found in database: false
2018-08-27 11:57:37.877 -03:00 [DBG] user_consent grant with value: UserManagementUI|175c6391-f8be-47f3-9c57-b14016ca51c6 not found in store.
2018-08-27 11:57:37.878 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 11:57:37.879 -03:00 [INF] Showing consent: User has not yet consented
2018-08-27 11:57:37.881 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:57:37.889 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:57:37.892 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:57:37.894 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:37.896 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:57:37.897 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:37.898 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:57:37.904 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:57:37.906 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:57:37.908 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:39.822 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 11:57:39.826 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:57:39.835 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:57:39.837 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:57:39.838 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:39.840 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:57:39.841 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:39.842 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:57:39.844 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 11:57:39.845 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 11:57:39.846 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 11:57:39.846 -03:00 [DBG] Start authorize callback request
2018-08-27 11:57:39.848 -03:00 [DBG] User in authorize request: 175c6391-f8be-47f3-9c57-b14016ca51c6
2018-08-27 11:57:39.849 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:57:39.854 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:57:39.857 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:57:39.858 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:39.860 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:57:39.861 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:57:39.862 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:57:39.864 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "YytX7BqtsErbpwnWrqPFvKnKYgku9wyuEyVXFfrR",
  "Nonce": "YytX7BqtsErbpwnWrqPFvKnKYgku9wyuEyVXFfrR",
  "SessionId": "2078b61e6504cdcd9cf5ddb7e0da4f50",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "YytX7BqtsErbpwnWrqPFvKnKYgku9wyuEyVXFfrR",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "YytX7BqtsErbpwnWrqPFvKnKYgku9wyuEyVXFfrR"
  }
}
2018-08-27 11:57:39.870 -03:00 [DBG] okPngKVxmvIXIhYy36G9Z9Hr/bKawntUL7TsxKX0rOA= found in database: false
2018-08-27 11:57:39.871 -03:00 [DBG] user_consent grant with value: UserManagementUI|175c6391-f8be-47f3-9c57-b14016ca51c6 not found in store.
2018-08-27 11:57:39.872 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 11:57:39.872 -03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-27 11:57:39.873 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-27 11:57:39.876 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 175c6391-f8be-47f3-9c57-b14016ca51c6
2018-08-27 11:57:39.880 -03:00 [DBG] okPngKVxmvIXIhYy36G9Z9Hr/bKawntUL7TsxKX0rOA= not found in database
2018-08-27 11:57:39.886 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 11:57:39.886 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 11:57:39.886 -03:00 [DBG] Getting claims for access token for subject: 175c6391-f8be-47f3-9c57-b14016ca51c6
2018-08-27 11:57:39.895 -03:00 [DBG] /QFqXShBoT6EvdspovBdYgxt4R/Hi9jOdD/YhnbN1L8= not found in database
2018-08-27 11:57:39.900 -03:00 [DBG] Getting claims for identity token for subject: 175c6391-f8be-47f3-9c57-b14016ca51c6 and client: UserManagementUI
2018-08-27 11:57:39.901 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 11:57:39.904 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Fe3A"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****b129"
    }
  ],
  "ActivityId": "0HLGC5APL1C06:00000011",
  "TimeStamp": "2018-08-27T14:57:39Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:57:39.906 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "YytX7BqtsErbpwnWrqPFvKnKYgku9wyuEyVXFfrR",
  "Scope": "openid profile email"
}
2018-08-27 11:57:40.380 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:57:40.385 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:57:40.386 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:57:40.387 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:57:40.388 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:57:40.390 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:57:40.392 -03:00 [DBG] Start discovery request
2018-08-27 11:57:40.402 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:57:40.407 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:57:40.409 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:57:40.409 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:57:40.409 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:57:40.410 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:57:40.413 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:57:40.414 -03:00 [DBG] Start key discovery request
2018-08-27 11:57:46.883 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:57:46.886 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:57:46.887 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:57:46.888 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:57:46.890 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:57:46.891 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:57:46.895 -03:00 [DBG] Start discovery request
2018-08-27 11:57:46.904 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:57:46.911 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:57:46.914 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:57:46.916 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:57:46.917 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:57:46.917 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:57:46.918 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:57:46.919 -03:00 [DBG] Start key discovery request
2018-08-27 11:57:50.587 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:57:50.591 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:57:50.592 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:57:50.594 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:57:50.595 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:57:50.596 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:57:50.601 -03:00 [DBG] Start discovery request
2018-08-27 11:57:50.612 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:57:50.619 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:57:50.622 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:57:50.622 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:57:50.623 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:57:50.624 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:57:50.625 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:57:50.625 -03:00 [DBG] Start key discovery request
2018-08-27 11:57:54.507 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:57:54.511 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:57:54.513 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:57:54.514 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:57:54.516 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:57:54.517 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:57:54.519 -03:00 [DBG] Start discovery request
2018-08-27 11:57:54.528 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:57:54.532 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:57:54.534 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:57:54.535 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:57:54.536 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:57:54.536 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:57:54.537 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:57:54.538 -03:00 [DBG] Start key discovery request
2018-08-27 11:57:57.247 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:57:57.250 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:57:57.251 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:57:57.252 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:57:57.254 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:57:57.255 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:57:57.256 -03:00 [DBG] Start discovery request
2018-08-27 11:57:57.261 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:57:57.267 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:57:57.270 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:57:57.270 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:57:57.271 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:57:57.272 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:57:57.272 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:57:57.273 -03:00 [DBG] Start key discovery request
2018-08-27 11:58:00.092 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:58:00.096 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:58:00.097 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:58:00.098 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:58:00.101 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:58:00.104 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:58:00.106 -03:00 [DBG] Start discovery request
2018-08-27 11:58:00.114 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:58:00.123 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:58:00.125 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:58:00.126 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:58:00.127 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:58:00.127 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:58:00.128 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:58:00.129 -03:00 [DBG] Start key discovery request
2018-08-27 11:58:03.432 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:58:03.436 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:58:03.437 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:58:03.438 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:58:03.441 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:58:03.442 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:58:03.445 -03:00 [DBG] Start discovery request
2018-08-27 11:58:03.455 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:58:03.462 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:58:03.465 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:58:03.467 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:58:03.468 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:58:03.469 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:58:03.470 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:58:03.471 -03:00 [DBG] Start key discovery request
2018-08-27 11:58:04.436 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 11:58:04.437 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 11:58:04.439 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 11:58:04.440 -03:00 [DBG] Start authorize request
2018-08-27 11:58:04.441 -03:00 [DBG] User in authorize request: 175c6391-f8be-47f3-9c57-b14016ca51c6
2018-08-27 11:58:04.442 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:58:04.447 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:58:04.451 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:58:04.453 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:58:04.455 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:58:04.456 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:58:04.456 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:58:04.459 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "eZXx6Gq30OGwi5xeBOyrAaj8wCBnoCu3dIvlcl46;login",
  "Nonce": "eZXx6Gq30OGwi5xeBOyrAaj8wCBnoCu3dIvlcl46",
  "SessionId": "2078b61e6504cdcd9cf5ddb7e0da4f50",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "eZXx6Gq30OGwi5xeBOyrAaj8wCBnoCu3dIvlcl46;login",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "eZXx6Gq30OGwi5xeBOyrAaj8wCBnoCu3dIvlcl46"
  }
}
2018-08-27 11:58:04.465 -03:00 [DBG] okPngKVxmvIXIhYy36G9Z9Hr/bKawntUL7TsxKX0rOA= found in database: true
2018-08-27 11:58:04.469 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 11:58:04.470 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 11:58:04.470 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 11:58:04.471 -03:00 [DBG] Getting claims for access token for subject: 175c6391-f8be-47f3-9c57-b14016ca51c6
2018-08-27 11:58:04.480 -03:00 [DBG] 5oY3WikpnCLio1mLKBXXwqwawGCmOZw4kFORBMY9aGM= not found in database
2018-08-27 11:58:04.491 -03:00 [DBG] Getting claims for identity token for subject: 175c6391-f8be-47f3-9c57-b14016ca51c6 and client: UserManagementUI
2018-08-27 11:58:04.493 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 11:58:04.496 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****2rvA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****0624"
    }
  ],
  "ActivityId": "0HLGC5APL1C06:00000012",
  "TimeStamp": "2018-08-27T14:58:04Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:58:04.500 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "eZXx6Gq30OGwi5xeBOyrAaj8wCBnoCu3dIvlcl46;login",
  "Scope": "openid profile email"
}
2018-08-27 11:58:05.875 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:58:05.880 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:58:05.881 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:58:05.882 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:58:05.885 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:58:05.886 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:58:05.887 -03:00 [DBG] Start discovery request
2018-08-27 11:58:05.892 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:58:05.895 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:58:05.896 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:58:05.897 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:58:05.898 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:58:05.901 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:58:05.902 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:58:05.902 -03:00 [DBG] Start key discovery request
2018-08-27 11:58:09.736 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:58:09.740 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:58:09.741 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:58:09.742 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:58:09.744 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:58:09.745 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:58:09.749 -03:00 [DBG] Start discovery request
2018-08-27 11:58:09.757 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:58:09.764 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:58:09.768 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:58:09.769 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:58:09.770 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:58:09.771 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:58:09.772 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:58:09.772 -03:00 [DBG] Start key discovery request
2018-08-27 11:58:13.583 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:58:13.587 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:58:13.588 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:58:13.588 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:58:13.589 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:58:13.590 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:58:13.592 -03:00 [DBG] Start discovery request
2018-08-27 11:58:13.601 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:58:13.611 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:58:13.612 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:58:13.613 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:58:13.613 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:58:13.616 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:58:13.617 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:58:13.618 -03:00 [DBG] Start key discovery request
2018-08-27 11:58:19.382 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:58:19.387 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:58:19.388 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:58:19.389 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:58:19.391 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:58:19.392 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:58:19.395 -03:00 [DBG] Start discovery request
2018-08-27 11:58:19.406 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:58:19.413 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:58:19.416 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:58:19.417 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:58:19.420 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:58:19.421 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:58:19.422 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:58:19.424 -03:00 [DBG] Start key discovery request
2018-08-27 11:59:13.354 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:59:13.360 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:59:13.361 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:59:13.362 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:59:13.363 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:59:13.364 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:59:13.366 -03:00 [DBG] Start discovery request
2018-08-27 11:59:13.375 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:59:13.379 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:59:13.381 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:59:13.383 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:59:13.384 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:59:13.385 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:59:13.387 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:59:13.389 -03:00 [DBG] Start key discovery request
2018-08-27 11:59:19.674 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 11:59:19.675 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 11:59:19.678 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 11:59:19.679 -03:00 [DBG] Processing signout request for 175c6391-f8be-47f3-9c57-b14016ca51c6
2018-08-27 11:59:19.680 -03:00 [DBG] Start end session request validation
2018-08-27 11:59:19.680 -03:00 [DBG] Start identity token validation
2018-08-27 11:59:19.687 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:59:19.688 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 11:59:19.692 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 11:59:19.693 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535381884,
    "exp": 1535382184,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "eZXx6Gq30OGwi5xeBOyrAaj8wCBnoCu3dIvlcl46",
    "iat": 1535381884,
    "at_hash": "HJm2L66cx-qeu7U66Eh7fA",
    "sid": "2078b61e6504cdcd9cf5ddb7e0da4f50",
    "sub": "175c6391-f8be-47f3-9c57-b14016ca51c6",
    "auth_time": 1535381816,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 11:59:19.696 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzUzODE4ODQsImV4cCI6MTUzNTM4MjE4NCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiZVpYeDZHcTMwT0d3aTV4ZUJPeXJBYWo4d0NCbm9DdTNkSXZsY2w0NiIsImlhdCI6MTUzNTM4MTg4NCwiYXRfaGFzaCI6IkhKbTJMNjZjeC1xZXU3VTY2RWg3ZkEiLCJzaWQiOiIyMDc4YjYxZTY1MDRjZGNkOWNmNWRkYjdlMGRhNGY1MCIsInN1YiI6IjE3NWM2MzkxLWY4YmUtNDdmMy05YzU3LWIxNDAxNmNhNTFjNiIsImF1dGhfdGltZSI6MTUzNTM4MTgxNiwiaWRwIjoiR29vZ2xlIiwiYW1yIjpbImV4dGVybmFsIl19.CyR67eB2E7oJ0BoSI-pocuYdDtvNCr8BkjOCgMO8k_QMQ3YtsYE2eC5Ag3jEWhs4vE2rM0B2onQbxH7Y4w-h5Zo9I5KvBMzf6ZUe50ozRTIASCuOj0gFhdb2fnbFth48l92Z7vS_mwdGtjI_RbUBJs-4o0AbyuBsTvQQFgDc4EuHywobTY9qt-E9XZxydsXAR5zO9yzgMFDojY4I3ipcYjSqJgz0evBPWm0eeq9gHA-yNDr2VSY5O9rcc2VkYr0-C--O-CfKBczS0QQz3j133jFUgPHcCMsOx5gqmr9Kn4aJRNIhtID4mPJCaJHyHGOiLTQ0eX1hw-09XVAhZV2rvA",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 11:59:19.698 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 11:59:19.701 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 11:59:19.702 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 11:59:19.703 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 11:59:19.704 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "DisplayName": "Marco Aurelio",
  "ActivityId": "0HLGC5APL1C06:00000014",
  "TimeStamp": "2018-08-27T14:59:19Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:59:19.724 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 11:59:19.726 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 11:59:19.728 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 11:59:19.729 -03:00 [DBG] Processing signout callback request
2018-08-27 11:59:19.741 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:59:19.742 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 11:59:19.742 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 11:59:19.743 -03:00 [INF] Successful signout callback.
2018-08-27 11:59:19.743 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 11:59:19.744 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 11:59:23.103 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:59:23.107 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:59:23.109 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:59:23.109 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:59:23.111 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:59:23.112 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:59:23.113 -03:00 [DBG] Start discovery request
2018-08-27 11:59:23.120 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:59:23.128 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:59:23.131 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:59:23.132 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:59:23.134 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:59:23.135 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:59:23.136 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:59:23.136 -03:00 [DBG] Start key discovery request
2018-08-27 11:59:23.141 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 11:59:23.142 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 11:59:23.146 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 11:59:23.147 -03:00 [DBG] Start authorize request
2018-08-27 11:59:23.147 -03:00 [DBG] No user present in authorize request
2018-08-27 11:59:23.148 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:59:23.154 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:59:23.156 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:59:23.158 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:59:23.160 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:59:23.162 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:59:23.163 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:59:23.165 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "LLtms0qzJwQv5s8xzYekpgXG5ffYAPCVFBURzqPx",
  "Nonce": "LLtms0qzJwQv5s8xzYekpgXG5ffYAPCVFBURzqPx",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "LLtms0qzJwQv5s8xzYekpgXG5ffYAPCVFBURzqPx",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "LLtms0qzJwQv5s8xzYekpgXG5ffYAPCVFBURzqPx"
  }
}
2018-08-27 11:59:23.168 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 11:59:23.174 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:59:23.182 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:59:23.186 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:59:23.188 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:59:23.190 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:59:23.192 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:59:23.193 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:59:23.200 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:59:26.360 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-27 11:59:27.950 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 11:59:27.965 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "106800735291513176099",
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "DisplayName": "Marco Aurelio",
  "Endpoint": "UI",
  "ActivityId": "0HLGC5APL1C06:0000001A",
  "TimeStamp": "2018-08-27T14:59:27Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:59:27.966 -03:00 [DBG] Augmenting SignInContext
2018-08-27 11:59:27.967 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 11:59:27.967 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 11:59:27.968 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 11:59:27.972 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 11:59:27.973 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 11:59:27.974 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 11:59:27.975 -03:00 [DBG] Start authorize callback request
2018-08-27 11:59:27.975 -03:00 [DBG] User in authorize request: 175c6391-f8be-47f3-9c57-b14016ca51c6
2018-08-27 11:59:27.976 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:59:27.983 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:59:27.986 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:59:27.988 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:59:27.991 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:59:27.993 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:59:27.994 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:59:27.995 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "LLtms0qzJwQv5s8xzYekpgXG5ffYAPCVFBURzqPx",
  "Nonce": "LLtms0qzJwQv5s8xzYekpgXG5ffYAPCVFBURzqPx",
  "SessionId": "e623b7492e4c8aa457d768b413706ce9",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "LLtms0qzJwQv5s8xzYekpgXG5ffYAPCVFBURzqPx",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "LLtms0qzJwQv5s8xzYekpgXG5ffYAPCVFBURzqPx"
  }
}
2018-08-27 11:59:28.004 -03:00 [DBG] okPngKVxmvIXIhYy36G9Z9Hr/bKawntUL7TsxKX0rOA= found in database: true
2018-08-27 11:59:28.007 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 11:59:28.008 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 11:59:28.009 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 11:59:28.010 -03:00 [DBG] Getting claims for access token for subject: 175c6391-f8be-47f3-9c57-b14016ca51c6
2018-08-27 11:59:28.018 -03:00 [DBG] 4hz48/Za8TkIIA4ub7qNBmoMwZTOSAdN9oQbvCdPiMQ= not found in database
2018-08-27 11:59:28.026 -03:00 [DBG] Getting claims for identity token for subject: 175c6391-f8be-47f3-9c57-b14016ca51c6 and client: UserManagementUI
2018-08-27 11:59:28.027 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 11:59:28.030 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****FgHg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****2cff"
    }
  ],
  "ActivityId": "0HLGC5APL1C06:0000001B",
  "TimeStamp": "2018-08-27T14:59:28Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:59:28.034 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "LLtms0qzJwQv5s8xzYekpgXG5ffYAPCVFBURzqPx",
  "Scope": "openid profile email"
}
2018-08-27 11:59:28.035 -03:00 [DBG] Augmenting SignInContext
2018-08-27 11:59:28.035 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 11:59:28.515 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:59:28.520 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:59:28.521 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:59:28.523 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:59:28.524 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:59:28.525 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:59:28.526 -03:00 [DBG] Start discovery request
2018-08-27 11:59:28.532 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:59:28.536 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:59:28.539 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:59:28.540 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:59:28.540 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:59:28.541 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:59:28.542 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:59:28.543 -03:00 [DBG] Start key discovery request
2018-08-27 11:59:32.680 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:59:32.685 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:59:32.686 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:59:32.687 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:59:32.689 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:59:32.690 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:59:32.694 -03:00 [DBG] Start discovery request
2018-08-27 11:59:32.703 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:59:32.708 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:59:32.711 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:59:32.712 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:59:32.713 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:59:32.714 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:59:32.715 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:59:32.715 -03:00 [DBG] Start key discovery request
2018-08-27 11:59:36.903 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:59:36.905 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:59:36.907 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:59:36.909 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:59:36.910 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:59:36.912 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:59:36.916 -03:00 [DBG] Start discovery request
2018-08-27 11:59:36.927 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:59:36.931 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:59:36.934 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:59:36.935 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:59:36.936 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:59:36.936 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:59:36.938 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:59:36.938 -03:00 [DBG] Start key discovery request
2018-08-27 11:59:43.112 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 11:59:43.115 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 11:59:43.117 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 11:59:43.117 -03:00 [DBG] Processing signout request for 175c6391-f8be-47f3-9c57-b14016ca51c6
2018-08-27 11:59:43.118 -03:00 [DBG] Start end session request validation
2018-08-27 11:59:43.118 -03:00 [DBG] Start identity token validation
2018-08-27 11:59:43.125 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:59:43.125 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 11:59:43.130 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 11:59:43.131 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535381968,
    "exp": 1535382268,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "LLtms0qzJwQv5s8xzYekpgXG5ffYAPCVFBURzqPx",
    "iat": 1535381968,
    "at_hash": "xV6NNL34s8Hz3hEn4yFNuw",
    "sid": "e623b7492e4c8aa457d768b413706ce9",
    "sub": "175c6391-f8be-47f3-9c57-b14016ca51c6",
    "auth_time": 1535381967,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 11:59:43.134 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzUzODE5NjgsImV4cCI6MTUzNTM4MjI2OCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiTEx0bXMwcXpKd1F2NXM4eHpZZWtwZ1hHNWZmWUFQQ1ZGQlVSenFQeCIsImlhdCI6MTUzNTM4MTk2OCwiYXRfaGFzaCI6InhWNk5OTDM0czhIejNoRW40eUZOdXciLCJzaWQiOiJlNjIzYjc0OTJlNGM4YWE0NTdkNzY4YjQxMzcwNmNlOSIsInN1YiI6IjE3NWM2MzkxLWY4YmUtNDdmMy05YzU3LWIxNDAxNmNhNTFjNiIsImF1dGhfdGltZSI6MTUzNTM4MTk2NywiaWRwIjoiR29vZ2xlIiwiYW1yIjpbImV4dGVybmFsIl19.Qe3GmuKzq0DcnKUm8xwNKbv_zg3LoyH3AhZxCQlHkMtq4MVly-7VdLJeBPK13cdh6Sh06C0J5vqI0WxDKyl1HlgED-YcNuW2YuLuFdpAmSgeN61ICqgMRGCw24SVO9KwLjgP1ymqn6QplfM18twR6L4aGgn8S2jctesdyHGOEI2cPDRIjGH2yyBzkd6GoBVljjSI_ngamuz0jmUMWzTfo17cLtS4bKACeMJmmK5tT2oE4v8Q1VtCZBVHmI9Q7Ezdtax3ODrM6f1WjF3P2Kkej8n9JwLPO2til3MiraWInbmc3-J94VlnRLvZtd4Ko8_jowJVXxiFLuxYRYSy2JFgHg",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 11:59:43.136 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 11:59:43.141 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 11:59:43.142 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 11:59:43.145 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 11:59:43.146 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "175c6391-f8be-47f3-9c57-b14016ca51c6",
  "DisplayName": "Marco Aurelio",
  "ActivityId": "0HLGC5APL1C06:0000001D",
  "TimeStamp": "2018-08-27T14:59:43Z",
  "ProcessId": 14596,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 11:59:43.163 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 11:59:43.166 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 11:59:43.171 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 11:59:43.172 -03:00 [DBG] Processing signout callback request
2018-08-27 11:59:43.179 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:59:43.179 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 11:59:43.180 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 11:59:43.180 -03:00 [INF] Successful signout callback.
2018-08-27 11:59:43.181 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 11:59:43.182 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 11:59:46.674 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 11:59:46.678 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:59:46.679 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:59:46.680 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 11:59:46.681 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 11:59:46.683 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 11:59:46.684 -03:00 [DBG] Start discovery request
2018-08-27 11:59:46.691 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 11:59:46.695 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 11:59:46.696 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 11:59:46.697 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 11:59:46.698 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 11:59:46.703 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 11:59:46.704 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 11:59:46.705 -03:00 [DBG] Start key discovery request
2018-08-27 11:59:46.710 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 11:59:46.712 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 11:59:46.713 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 11:59:46.714 -03:00 [DBG] Start authorize request
2018-08-27 11:59:46.715 -03:00 [DBG] No user present in authorize request
2018-08-27 11:59:46.716 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:59:46.722 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:59:46.724 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:59:46.726 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:59:46.728 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:59:46.729 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:59:46.730 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:59:46.731 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "1zVEuQYCks5XRi280YcXTnxZCDiadBlmiEL7Izw5",
  "Nonce": "1zVEuQYCks5XRi280YcXTnxZCDiadBlmiEL7Izw5",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "1zVEuQYCks5XRi280YcXTnxZCDiadBlmiEL7Izw5",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "1zVEuQYCks5XRi280YcXTnxZCDiadBlmiEL7Izw5"
  }
}
2018-08-27 11:59:46.733 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 11:59:46.735 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 11:59:46.741 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 11:59:46.743 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:59:46.745 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:59:46.747 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 11:59:46.748 -03:00 [DBG] Found [] API scopes in database
2018-08-27 11:59:46.749 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 11:59:46.755 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 12:37:59.042 -03:00 [INF] Clearing 0 tokens
2018-08-27 13:19:37.221 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-27 13:29:25.222 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 13:29:25.243 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 13:29:25.244 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 13:29:25.244 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 13:29:25.244 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 13:29:25.321 -03:00 [DBG] Starting token cleanup
2018-08-27 13:29:36.405 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 13:29:36.512 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 13:29:36.515 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 13:29:36.554 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 13:29:36.560 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 13:29:36.560 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 13:29:36.564 -03:00 [DBG] Start discovery request
2018-08-27 13:29:36.815 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 13:29:36.845 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 13:29:36.851 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 13:29:36.854 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 13:29:36.855 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 13:29:36.856 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 13:29:36.858 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 13:29:36.861 -03:00 [DBG] Start key discovery request
2018-08-27 13:29:36.902 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 13:29:36.908 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 13:29:36.910 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 13:29:36.914 -03:00 [DBG] Start authorize request
2018-08-27 13:29:36.922 -03:00 [DBG] No user present in authorize request
2018-08-27 13:29:36.925 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 13:29:37.079 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:29:37.110 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:29:37.136 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:29:37.146 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:29:37.148 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:29:37.154 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 13:29:37.162 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "qU3KLrFEQEJLyBm5Ahx9hfI3sNl1aj7SsmGwkxnY",
  "Nonce": "qU3KLrFEQEJLyBm5Ahx9hfI3sNl1aj7SsmGwkxnY",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "qU3KLrFEQEJLyBm5Ahx9hfI3sNl1aj7SsmGwkxnY",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "qU3KLrFEQEJLyBm5Ahx9hfI3sNl1aj7SsmGwkxnY"
  }
}
2018-08-27 13:29:37.173 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 13:29:37.271 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 13:29:37.278 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:29:37.281 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:29:37.282 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:29:37.285 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:29:37.287 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:29:37.288 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 13:29:37.296 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:29:39.389 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 13:29:40.678 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 13:29:40.858 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGC793KHKC0:00000006",
  "TimeStamp": "2018-08-27T16:29:40Z",
  "ProcessId": 20768,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 13:29:40.868 -03:00 [DBG] Augmenting SignInContext
2018-08-27 13:29:40.870 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 13:29:40.873 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 13:29:40.878 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 13:29:40.895 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 13:29:40.897 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 13:29:40.898 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 13:29:40.902 -03:00 [DBG] Start authorize callback request
2018-08-27 13:29:40.905 -03:00 [DBG] User in authorize request: 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 13:29:40.907 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 13:29:40.914 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:29:40.917 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:29:40.919 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:29:40.925 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:29:40.928 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:29:40.928 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 13:29:40.929 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "qU3KLrFEQEJLyBm5Ahx9hfI3sNl1aj7SsmGwkxnY",
  "Nonce": "qU3KLrFEQEJLyBm5Ahx9hfI3sNl1aj7SsmGwkxnY",
  "SessionId": "91bf1b6b8535d2ce04d99020bc8e539d",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "qU3KLrFEQEJLyBm5Ahx9hfI3sNl1aj7SsmGwkxnY",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "qU3KLrFEQEJLyBm5Ahx9hfI3sNl1aj7SsmGwkxnY"
  }
}
2018-08-27 13:29:40.972 -03:00 [DBG] BjCbRn2IsE6XiGcYLrF+YzLgsqxzSVmqBE0pjLJmOfc= found in database: false
2018-08-27 13:29:40.974 -03:00 [DBG] user_consent grant with value: UserManagementUI|7b3fb49d-352c-4234-8c74-d83db7ca3964 not found in store.
2018-08-27 13:29:40.975 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 13:29:40.976 -03:00 [INF] Showing consent: User has not yet consented
2018-08-27 13:29:40.998 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 13:29:41.009 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:29:41.011 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:29:41.012 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:29:41.014 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:29:41.015 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:29:41.016 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 13:29:41.024 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:29:41.026 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:29:41.027 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:29:43.219 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 13:29:43.253 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 13:29:43.261 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:29:43.263 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:29:43.265 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:29:43.266 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:29:43.268 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:29:43.269 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 13:29:43.282 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 13:29:43.283 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 13:29:43.285 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 13:29:43.287 -03:00 [DBG] Start authorize callback request
2018-08-27 13:29:43.290 -03:00 [DBG] User in authorize request: 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 13:29:43.292 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 13:29:43.298 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:29:43.303 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:29:43.306 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:29:43.309 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:29:43.311 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:29:43.313 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 13:29:43.314 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "qU3KLrFEQEJLyBm5Ahx9hfI3sNl1aj7SsmGwkxnY",
  "Nonce": "qU3KLrFEQEJLyBm5Ahx9hfI3sNl1aj7SsmGwkxnY",
  "SessionId": "91bf1b6b8535d2ce04d99020bc8e539d",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "qU3KLrFEQEJLyBm5Ahx9hfI3sNl1aj7SsmGwkxnY",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "qU3KLrFEQEJLyBm5Ahx9hfI3sNl1aj7SsmGwkxnY"
  }
}
2018-08-27 13:29:43.322 -03:00 [DBG] BjCbRn2IsE6XiGcYLrF+YzLgsqxzSVmqBE0pjLJmOfc= found in database: false
2018-08-27 13:29:43.323 -03:00 [DBG] user_consent grant with value: UserManagementUI|7b3fb49d-352c-4234-8c74-d83db7ca3964 not found in store.
2018-08-27 13:29:43.324 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 13:29:43.329 -03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-27 13:29:43.331 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-27 13:29:43.335 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 13:29:43.346 -03:00 [DBG] BjCbRn2IsE6XiGcYLrF+YzLgsqxzSVmqBE0pjLJmOfc= not found in database
2018-08-27 13:29:43.454 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 13:29:43.461 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 13:29:43.462 -03:00 [DBG] Getting claims for access token for subject: 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 13:29:43.499 -03:00 [DBG] BxXpNDBM/dS2LylhUwIjKbowFrwT7aCjyapBpHzNsb8= not found in database
2018-08-27 13:29:43.515 -03:00 [DBG] Getting claims for identity token for subject: 7b3fb49d-352c-4234-8c74-d83db7ca3964 and client: UserManagementUI
2018-08-27 13:29:43.516 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 13:29:43.563 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Melg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****afad"
    }
  ],
  "ActivityId": "0HLGC793KHKBV:00000006",
  "TimeStamp": "2018-08-27T16:29:43Z",
  "ProcessId": 20768,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 13:29:43.571 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "qU3KLrFEQEJLyBm5Ahx9hfI3sNl1aj7SsmGwkxnY",
  "Scope": "openid profile email"
}
2018-08-27 13:29:43.583 -03:00 [DBG] Augmenting SignInContext
2018-08-27 13:29:43.584 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 13:29:44.717 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 13:29:44.721 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 13:29:44.722 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 13:29:44.723 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 13:29:44.725 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 13:29:44.726 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 13:29:44.728 -03:00 [DBG] Start discovery request
2018-08-27 13:29:44.737 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 13:29:44.772 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 13:29:44.776 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 13:29:44.777 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 13:29:44.777 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 13:29:44.779 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 13:29:44.781 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 13:29:44.782 -03:00 [DBG] Start key discovery request
2018-08-27 13:29:48.454 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 13:29:48.458 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 13:29:48.459 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 13:29:48.464 -03:00 [DBG] Processing signout request for 7b3fb49d-352c-4234-8c74-d83db7ca3964
2018-08-27 13:29:48.474 -03:00 [DBG] Start end session request validation
2018-08-27 13:29:48.482 -03:00 [DBG] Start identity token validation
2018-08-27 13:29:48.501 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:29:48.503 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 13:29:48.537 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 13:29:48.542 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535387383,
    "exp": 1535387683,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "qU3KLrFEQEJLyBm5Ahx9hfI3sNl1aj7SsmGwkxnY",
    "iat": 1535387383,
    "at_hash": "bqOHjfhKectYGbgozJiLvA",
    "sid": "91bf1b6b8535d2ce04d99020bc8e539d",
    "sub": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
    "auth_time": 1535387380,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-08-27 13:29:48.549 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzUzODczODMsImV4cCI6MTUzNTM4NzY4MywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoicVUzS0xyRkVRRUpMeUJtNUFoeDloZkkzc05sMWFqN1NzbUd3a3huWSIsImlhdCI6MTUzNTM4NzM4MywiYXRfaGFzaCI6ImJxT0hqZmhLZWN0WUdiZ296SmlMdkEiLCJzaWQiOiI5MWJmMWI2Yjg1MzVkMmNlMDRkOTkwMjBiYzhlNTM5ZCIsInN1YiI6IjdiM2ZiNDlkLTM1MmMtNDIzNC04Yzc0LWQ4M2RiN2NhMzk2NCIsImF1dGhfdGltZSI6MTUzNTM4NzM4MCwiaWRwIjoiRmFjZWJvb2siLCJhbXIiOlsiZXh0ZXJuYWwiXX0.eRquYRb5AUnWHFxL3QJOxCPfUYD6neyTKCpmjog-DS7WVXqsvuCczqY-4I4qcEm86vOHdcrfdaJSO8rk7XbwJcE7SJYmwaFfzZdLepxrGKTM_7xoQoTxx7V9pS0p9vSvdLDdccnDlDvFjGoYtHa1Sr_LYO-s8K5uJ6aPnY-LbSmrYcxL0_B7BINwvz_BvEqOz3Pee0t8-Sy7Ts7BWfv3QDpIDkwmUnWGa9Pe4pbcDuhX1X49ZxYWldX0wrF3v3OXBtYU0ce5KZ8vtNhVFvQBjEvXt-klSXwY4otwIuOkoyUS2yWDkhOn3zap_sH3HG41YqP2HRhHO76c_FF6MAMelg",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 13:29:48.553 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 13:29:48.589 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 13:29:48.592 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 13:29:48.593 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 13:29:48.597 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "7b3fb49d-352c-4234-8c74-d83db7ca3964",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGC793KHKBV:00000008",
  "TimeStamp": "2018-08-27T16:29:48Z",
  "ProcessId": 20768,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 13:29:48.765 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 13:29:48.769 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 13:29:48.771 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 13:29:48.775 -03:00 [DBG] Processing signout callback request
2018-08-27 13:29:48.794 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:29:48.795 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 13:29:48.796 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 13:29:48.796 -03:00 [INF] Successful signout callback.
2018-08-27 13:29:48.797 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 13:29:48.798 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 13:29:51.388 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 13:29:51.393 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 13:29:51.394 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 13:29:51.396 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 13:29:51.397 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 13:29:51.398 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 13:29:51.401 -03:00 [DBG] Start discovery request
2018-08-27 13:29:51.413 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 13:29:51.462 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 13:29:51.466 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 13:29:51.467 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 13:29:51.468 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 13:29:51.470 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 13:29:51.471 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 13:29:51.474 -03:00 [DBG] Start key discovery request
2018-08-27 13:29:51.507 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 13:29:51.511 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 13:29:51.512 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 13:29:51.514 -03:00 [DBG] Start authorize request
2018-08-27 13:29:51.515 -03:00 [DBG] No user present in authorize request
2018-08-27 13:29:51.516 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 13:29:51.528 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:29:51.531 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:29:51.534 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:29:51.538 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:29:51.542 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:29:51.542 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 13:29:51.543 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "WtxPVtjv0OeATGXFttVi0BOIAqkQDdNk56I9z11R",
  "Nonce": "WtxPVtjv0OeATGXFttVi0BOIAqkQDdNk56I9z11R",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "WtxPVtjv0OeATGXFttVi0BOIAqkQDdNk56I9z11R",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "WtxPVtjv0OeATGXFttVi0BOIAqkQDdNk56I9z11R"
  }
}
2018-08-27 13:29:51.546 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 13:29:51.557 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 13:29:51.564 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:29:51.566 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:29:51.570 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:29:51.573 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:29:51.578 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:29:51.578 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 13:29:51.589 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:29:52.898 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-27 13:30:02.850 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 13:30:03.026 -03:00 [INF] User created a new account with password.
2018-08-27 13:30:03.061 -03:00 [INF] User created a new account with password.
2018-08-27 13:30:03.173 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "100165260137603692915",
  "SubjectId": "d89fa705-5791-4bd1-a7fa-9ee57084bde7",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGC793KHKC0:0000000F",
  "TimeStamp": "2018-08-27T16:30:03Z",
  "ProcessId": 20768,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 13:30:03.175 -03:00 [DBG] Augmenting SignInContext
2018-08-27 13:30:03.176 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 13:30:03.176 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 13:30:03.177 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 13:30:03.181 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 13:30:03.182 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 13:30:03.183 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 13:30:03.184 -03:00 [DBG] Start authorize callback request
2018-08-27 13:30:03.188 -03:00 [DBG] User in authorize request: d89fa705-5791-4bd1-a7fa-9ee57084bde7
2018-08-27 13:30:03.189 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 13:30:03.195 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:30:03.198 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:30:03.199 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:30:03.201 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:30:03.204 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:30:03.206 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 13:30:03.207 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "d89fa705-5791-4bd1-a7fa-9ee57084bde7",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "WtxPVtjv0OeATGXFttVi0BOIAqkQDdNk56I9z11R",
  "Nonce": "WtxPVtjv0OeATGXFttVi0BOIAqkQDdNk56I9z11R",
  "SessionId": "c7978267f3c82ad7870db56cd99fbd3c",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "WtxPVtjv0OeATGXFttVi0BOIAqkQDdNk56I9z11R",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "WtxPVtjv0OeATGXFttVi0BOIAqkQDdNk56I9z11R"
  }
}
2018-08-27 13:30:03.214 -03:00 [DBG] Zh0xtvsJeztb3IMeQ691HeMRxIGotFBUB2cHshCaWQg= found in database: false
2018-08-27 13:30:03.217 -03:00 [DBG] user_consent grant with value: UserManagementUI|d89fa705-5791-4bd1-a7fa-9ee57084bde7 not found in store.
2018-08-27 13:30:03.218 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 13:30:03.220 -03:00 [INF] Showing consent: User has not yet consented
2018-08-27 13:30:03.223 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 13:30:03.230 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:30:03.232 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:30:03.234 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:30:03.237 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:30:03.239 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:30:03.239 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 13:30:03.246 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:30:03.248 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:30:03.250 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:30:05.501 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 13:30:05.505 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 13:30:05.517 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:30:05.521 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:30:05.523 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:30:05.526 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:30:05.528 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:30:05.529 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 13:30:05.533 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 13:30:05.534 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 13:30:05.535 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 13:30:05.537 -03:00 [DBG] Start authorize callback request
2018-08-27 13:30:05.540 -03:00 [DBG] User in authorize request: d89fa705-5791-4bd1-a7fa-9ee57084bde7
2018-08-27 13:30:05.541 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 13:30:05.551 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:30:05.555 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:30:05.557 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:30:05.560 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:30:05.562 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:30:05.563 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 13:30:05.564 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "d89fa705-5791-4bd1-a7fa-9ee57084bde7",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "WtxPVtjv0OeATGXFttVi0BOIAqkQDdNk56I9z11R",
  "Nonce": "WtxPVtjv0OeATGXFttVi0BOIAqkQDdNk56I9z11R",
  "SessionId": "c7978267f3c82ad7870db56cd99fbd3c",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "WtxPVtjv0OeATGXFttVi0BOIAqkQDdNk56I9z11R",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "WtxPVtjv0OeATGXFttVi0BOIAqkQDdNk56I9z11R"
  }
}
2018-08-27 13:30:05.572 -03:00 [DBG] Zh0xtvsJeztb3IMeQ691HeMRxIGotFBUB2cHshCaWQg= found in database: false
2018-08-27 13:30:05.574 -03:00 [DBG] user_consent grant with value: UserManagementUI|d89fa705-5791-4bd1-a7fa-9ee57084bde7 not found in store.
2018-08-27 13:30:05.575 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 13:30:05.575 -03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-27 13:30:05.576 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-27 13:30:05.577 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: d89fa705-5791-4bd1-a7fa-9ee57084bde7
2018-08-27 13:30:05.580 -03:00 [DBG] Zh0xtvsJeztb3IMeQ691HeMRxIGotFBUB2cHshCaWQg= not found in database
2018-08-27 13:30:05.588 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 13:30:05.588 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 13:30:05.589 -03:00 [DBG] Getting claims for access token for subject: d89fa705-5791-4bd1-a7fa-9ee57084bde7
2018-08-27 13:30:05.598 -03:00 [DBG] oFLK18IJoaRmqte/b10sXSKw3L7JSC1UH5l32jkzTDM= not found in database
2018-08-27 13:30:05.603 -03:00 [DBG] Getting claims for identity token for subject: d89fa705-5791-4bd1-a7fa-9ee57084bde7 and client: UserManagementUI
2018-08-27 13:30:05.605 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 13:30:05.608 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "d89fa705-5791-4bd1-a7fa-9ee57084bde7",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****AmUw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****31d3"
    }
  ],
  "ActivityId": "0HLGC793KHKBT:0000000D",
  "TimeStamp": "2018-08-27T16:30:05Z",
  "ProcessId": 20768,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 13:30:05.611 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "d89fa705-5791-4bd1-a7fa-9ee57084bde7",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "WtxPVtjv0OeATGXFttVi0BOIAqkQDdNk56I9z11R",
  "Scope": "openid profile email"
}
2018-08-27 13:30:05.614 -03:00 [DBG] Augmenting SignInContext
2018-08-27 13:30:05.614 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 13:30:07.051 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 13:30:07.054 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 13:30:07.055 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 13:30:07.056 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 13:30:07.058 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 13:30:07.059 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 13:30:07.061 -03:00 [DBG] Start discovery request
2018-08-27 13:30:07.068 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 13:30:07.107 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 13:30:07.109 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 13:30:07.110 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 13:30:07.111 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 13:30:07.113 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 13:30:07.114 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 13:30:07.115 -03:00 [DBG] Start key discovery request
2018-08-27 13:30:18.388 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 13:30:18.390 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 13:30:18.393 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 13:30:18.395 -03:00 [DBG] Processing signout request for d89fa705-5791-4bd1-a7fa-9ee57084bde7
2018-08-27 13:30:18.397 -03:00 [DBG] Start end session request validation
2018-08-27 13:30:18.399 -03:00 [DBG] Start identity token validation
2018-08-27 13:30:18.417 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:30:18.418 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 13:30:18.428 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 13:30:18.429 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535387405,
    "exp": 1535387705,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "WtxPVtjv0OeATGXFttVi0BOIAqkQDdNk56I9z11R",
    "iat": 1535387405,
    "at_hash": "968eINYmyRZ9MkVXVJnk-A",
    "sid": "c7978267f3c82ad7870db56cd99fbd3c",
    "sub": "d89fa705-5791-4bd1-a7fa-9ee57084bde7",
    "auth_time": 1535387403,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 13:30:18.431 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "d89fa705-5791-4bd1-a7fa-9ee57084bde7",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzUzODc0MDUsImV4cCI6MTUzNTM4NzcwNSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiV3R4UFZ0anYwT2VBVEdYRnR0VmkwQk9JQXFrUURkTms1Nkk5ejExUiIsImlhdCI6MTUzNTM4NzQwNSwiYXRfaGFzaCI6Ijk2OGVJTllteVJaOU1rVlhWSm5rLUEiLCJzaWQiOiJjNzk3ODI2N2YzYzgyYWQ3ODcwZGI1NmNkOTlmYmQzYyIsInN1YiI6ImQ4OWZhNzA1LTU3OTEtNGJkMS1hN2ZhLTllZTU3MDg0YmRlNyIsImF1dGhfdGltZSI6MTUzNTM4NzQwMywiaWRwIjoiR29vZ2xlIiwiYW1yIjpbImV4dGVybmFsIl19.D5jEAEkmWhkF_kymy4fcq_RLTc3CoPWM7MpmE_LuqKEFVNbt5nH4UsxFp2Ik2NR2l_FFTmbyLadvDAW9pzvNavUAtf9cUQ84aKxkazuu0iV08q43P8-YP1auIcsIqWBHtxS1z0SPsSyhKENvi4yV6BggPpe1AO2avIBZ-T8B6VN2MMHxQtXjbw5eJI5Un51ryr4-7Ir0iDA3bLGQMFAgb2HYh5NNNkK7xvi1h2_NO39FmY_fUncM1MchoioJz4qFDv7LA0xtZ2LgN3yykZLBpfp8NtCIgiYi3MXGdtItkSA8NFplSv55GTvgmGId6T4dWfrnLLymEzBg2nmqixAmUw",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 13:30:18.433 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 13:30:18.439 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 13:30:18.441 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 13:30:18.442 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 13:30:18.444 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "d89fa705-5791-4bd1-a7fa-9ee57084bde7",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGC793KHKBT:0000000F",
  "TimeStamp": "2018-08-27T16:30:18Z",
  "ProcessId": 20768,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 13:30:18.631 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 13:30:18.632 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 13:30:18.634 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 13:30:18.636 -03:00 [DBG] Processing signout callback request
2018-08-27 13:30:18.647 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:30:18.648 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 13:30:18.650 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 13:30:18.651 -03:00 [INF] Successful signout callback.
2018-08-27 13:30:18.652 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 13:30:18.659 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 13:30:21.444 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 13:30:21.447 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 13:30:21.449 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 13:30:21.450 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 13:30:21.452 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 13:30:21.454 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 13:30:21.458 -03:00 [DBG] Start discovery request
2018-08-27 13:30:21.468 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 13:30:21.514 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 13:30:21.517 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 13:30:21.520 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 13:30:21.521 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 13:30:21.522 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 13:30:21.523 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 13:30:21.528 -03:00 [DBG] Start key discovery request
2018-08-27 13:30:21.565 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 13:30:21.568 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 13:30:21.569 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 13:30:21.570 -03:00 [DBG] Start authorize request
2018-08-27 13:30:21.571 -03:00 [DBG] No user present in authorize request
2018-08-27 13:30:21.572 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 13:30:21.580 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:30:21.582 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:30:21.584 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:30:21.587 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:30:21.590 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:30:21.591 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 13:30:21.592 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "G47mapCzTPEIeYL1JPJr9zYK0ecfLiGZwos59GKI",
  "Nonce": "G47mapCzTPEIeYL1JPJr9zYK0ecfLiGZwos59GKI",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "G47mapCzTPEIeYL1JPJr9zYK0ecfLiGZwos59GKI",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "G47mapCzTPEIeYL1JPJr9zYK0ecfLiGZwos59GKI"
  }
}
2018-08-27 13:30:21.594 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 13:30:21.598 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 13:30:21.608 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:30:21.611 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:30:21.612 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:30:21.614 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:30:21.616 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:30:21.617 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 13:30:21.626 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:38:50.900 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 13:38:50.939 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 13:38:50.941 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:38:50.944 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:38:50.946 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 13:38:50.948 -03:00 [DBG] Found [] API scopes in database
2018-08-27 13:38:50.948 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 13:38:50.955 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 14:02:57.248 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 14:02:57.269 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 14:02:57.270 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 14:02:57.270 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 14:02:57.271 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 14:02:57.349 -03:00 [DBG] Starting token cleanup
2018-08-27 14:09:02.376 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 14:09:02.397 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 14:09:02.398 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 14:09:02.398 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 14:09:02.399 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 14:09:02.472 -03:00 [DBG] Starting token cleanup
2018-08-27 14:34:46.122 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 14:34:46.253 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 14:34:46.256 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 14:34:46.299 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 14:34:46.318 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 14:34:46.319 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 14:34:46.323 -03:00 [DBG] Start discovery request
2018-08-27 14:34:46.587 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 14:34:46.621 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 14:34:46.626 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 14:34:46.626 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 14:34:46.628 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 14:34:46.630 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 14:34:46.632 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 14:34:46.635 -03:00 [DBG] Start key discovery request
2018-08-27 14:34:46.689 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 14:34:46.693 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 14:34:46.694 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 14:34:46.697 -03:00 [DBG] Start authorize request
2018-08-27 14:34:46.704 -03:00 [DBG] No user present in authorize request
2018-08-27 14:34:46.707 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 14:34:46.863 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 14:34:46.894 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 14:34:46.918 -03:00 [DBG] Found [] API scopes in database
2018-08-27 14:34:46.927 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 14:34:46.930 -03:00 [DBG] Found [] API scopes in database
2018-08-27 14:34:46.936 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 14:34:46.943 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "D19FeHJeQwpa2gpvLYROymPctla9jf9Ie5BtxVPO",
  "Nonce": "D19FeHJeQwpa2gpvLYROymPctla9jf9Ie5BtxVPO",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "D19FeHJeQwpa2gpvLYROymPctla9jf9Ie5BtxVPO",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "D19FeHJeQwpa2gpvLYROymPctla9jf9Ie5BtxVPO"
  }
}
2018-08-27 14:34:46.951 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 14:34:47.059 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 14:34:47.067 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 14:34:47.073 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 14:34:47.075 -03:00 [DBG] Found [] API scopes in database
2018-08-27 14:34:47.077 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 14:34:47.079 -03:00 [DBG] Found [] API scopes in database
2018-08-27 14:34:47.080 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 14:34:47.089 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 15:13:23.322 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 15:13:23.343 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 15:13:23.343 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 15:13:23.343 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 15:13:23.344 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 15:13:23.412 -03:00 [DBG] Starting token cleanup
2018-08-27 15:14:27.675 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 15:14:27.697 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 15:14:27.697 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 15:14:27.697 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 15:14:27.697 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 15:14:27.768 -03:00 [DBG] Starting token cleanup
2018-08-27 15:15:22.826 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 15:15:22.849 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 15:15:22.849 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 15:15:22.849 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 15:15:22.850 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 15:15:22.920 -03:00 [DBG] Starting token cleanup
2018-08-27 15:15:59.072 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 15:15:59.093 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 15:15:59.093 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 15:15:59.093 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 15:15:59.093 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 15:15:59.163 -03:00 [DBG] Starting token cleanup
2018-08-27 15:17:11.755 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 15:17:11.867 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 15:17:11.870 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 15:17:11.912 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 15:17:11.929 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 15:17:11.931 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 15:17:11.935 -03:00 [DBG] Start discovery request
2018-08-27 15:17:12.201 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 15:17:12.234 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 15:17:12.244 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 15:17:12.246 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 15:17:12.248 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 15:17:12.256 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 15:17:12.256 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 15:17:12.260 -03:00 [DBG] Start key discovery request
2018-08-27 15:17:12.301 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 15:17:12.306 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 15:17:12.307 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 15:17:12.310 -03:00 [DBG] Start authorize request
2018-08-27 15:17:12.319 -03:00 [DBG] No user present in authorize request
2018-08-27 15:17:12.322 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 15:17:12.484 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 15:17:12.514 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 15:17:12.543 -03:00 [DBG] Found [] API scopes in database
2018-08-27 15:17:12.552 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 15:17:12.554 -03:00 [DBG] Found [] API scopes in database
2018-08-27 15:17:12.559 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 15:17:12.567 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "rCynYdiopkpxVJBp8ZpQeevUbnzKnpxVjXEYWhIo",
  "Nonce": "rCynYdiopkpxVJBp8ZpQeevUbnzKnpxVjXEYWhIo",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "rCynYdiopkpxVJBp8ZpQeevUbnzKnpxVjXEYWhIo",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "rCynYdiopkpxVJBp8ZpQeevUbnzKnpxVjXEYWhIo"
  }
}
2018-08-27 15:17:12.575 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 15:17:12.677 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 15:17:12.685 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 15:17:12.687 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 15:17:12.689 -03:00 [DBG] Found [] API scopes in database
2018-08-27 15:17:12.691 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 15:17:12.692 -03:00 [DBG] Found [] API scopes in database
2018-08-27 15:17:12.693 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 15:17:12.702 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 15:51:35.952 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 15:51:35.974 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 15:51:35.974 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 15:51:35.974 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 15:51:35.974 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 15:51:36.049 -03:00 [DBG] Starting token cleanup
2018-08-27 15:53:54.915 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 15:53:54.936 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 15:53:54.936 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 15:53:54.936 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 15:53:54.937 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 15:53:55.008 -03:00 [DBG] Starting token cleanup
2018-08-27 15:54:50.944 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 15:54:50.965 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 15:54:50.966 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 15:54:50.966 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 15:54:50.966 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 15:54:51.034 -03:00 [DBG] Starting token cleanup
2018-08-27 15:56:58.079 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 15:56:58.101 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 15:56:58.101 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 15:56:58.102 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 15:56:58.102 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 15:56:58.179 -03:00 [DBG] Starting token cleanup
2018-08-27 15:57:22.623 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 15:57:22.644 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 15:57:22.645 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 15:57:22.645 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 15:57:22.645 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 15:57:22.717 -03:00 [DBG] Starting token cleanup
2018-08-27 16:06:17.529 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 16:06:17.671 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:06:17.675 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:06:17.718 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 16:06:17.728 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 16:06:17.730 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 16:06:17.733 -03:00 [DBG] Start discovery request
2018-08-27 16:06:18.004 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 16:06:18.036 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 16:06:18.044 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:06:18.045 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:06:18.051 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 16:06:18.056 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 16:06:18.057 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 16:06:18.060 -03:00 [DBG] Start key discovery request
2018-08-27 16:06:18.099 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 16:06:18.103 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 16:06:18.104 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 16:06:18.108 -03:00 [DBG] Start authorize request
2018-08-27 16:06:18.115 -03:00 [DBG] No user present in authorize request
2018-08-27 16:06:18.119 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:06:18.271 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:06:18.305 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:06:18.330 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:06:18.339 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:06:18.342 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:06:18.347 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:06:18.355 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "KouIUNeViM29I1oW28HqwcDrllcYFT335PGIZkI1",
  "Nonce": "KouIUNeViM29I1oW28HqwcDrllcYFT335PGIZkI1",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "KouIUNeViM29I1oW28HqwcDrllcYFT335PGIZkI1",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "KouIUNeViM29I1oW28HqwcDrllcYFT335PGIZkI1"
  }
}
2018-08-27 16:06:18.365 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 16:06:18.470 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:06:18.477 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:06:18.479 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:06:18.481 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:06:18.483 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:06:18.485 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:06:18.485 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:06:18.494 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:06:28.263 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:06:28.270 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:06:28.274 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:06:28.277 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:06:28.279 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:06:28.281 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:06:28.283 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:06:28.292 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:08:41.630 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 16:08:41.652 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 16:08:41.652 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 16:08:41.652 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 16:08:41.652 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 16:08:41.728 -03:00 [DBG] Starting token cleanup
2018-08-27 16:08:55.442 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:08:55.818 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:08:55.870 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:08:55.925 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:08:55.937 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:08:55.940 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:08:55.946 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:08:55.960 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:11:08.583 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 16:11:08.605 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 16:11:08.605 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 16:11:08.605 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 16:11:08.605 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 16:11:08.676 -03:00 [DBG] Starting token cleanup
2018-08-27 16:11:15.463 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 16:11:15.559 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:11:15.565 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:11:15.606 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 16:11:15.612 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 16:11:15.613 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 16:11:15.617 -03:00 [DBG] Start discovery request
2018-08-27 16:11:15.851 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 16:11:15.888 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 16:11:15.895 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:11:15.896 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:11:15.898 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 16:11:15.903 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 16:11:15.905 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 16:11:15.908 -03:00 [DBG] Start key discovery request
2018-08-27 16:11:15.943 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 16:11:15.947 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 16:11:15.948 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 16:11:15.951 -03:00 [DBG] Start authorize request
2018-08-27 16:11:15.958 -03:00 [DBG] No user present in authorize request
2018-08-27 16:11:15.961 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:11:16.122 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:11:16.163 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:11:16.192 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:11:16.201 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:11:16.203 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:11:16.210 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:11:16.218 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "hBYpFn4ER0wkQTIpaNhfimjqHJ4g7bOG0mwULpdk",
  "Nonce": "hBYpFn4ER0wkQTIpaNhfimjqHJ4g7bOG0mwULpdk",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "hBYpFn4ER0wkQTIpaNhfimjqHJ4g7bOG0mwULpdk",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "hBYpFn4ER0wkQTIpaNhfimjqHJ4g7bOG0mwULpdk"
  }
}
2018-08-27 16:11:16.229 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 16:11:16.319 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:11:16.326 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:11:16.328 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:11:16.330 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:11:16.333 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:11:16.335 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:11:16.335 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:11:16.344 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:11:19.835 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 16:11:20.699 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 16:11:20.868 -03:00 [INF] Provider Facebook associated.
2018-08-27 16:11:21.029 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "b705d555-3adb-4cfd-9b37-861702faba83",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCA3E61U6K:00000005",
  "TimeStamp": "2018-08-27T19:11:21Z",
  "ProcessId": 30964,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 16:11:21.038 -03:00 [DBG] Augmenting SignInContext
2018-08-27 16:11:21.042 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 16:11:21.046 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 16:11:21.051 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 16:11:21.068 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 16:11:21.070 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 16:11:21.071 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 16:11:21.076 -03:00 [DBG] Start authorize callback request
2018-08-27 16:11:21.079 -03:00 [DBG] User in authorize request: b705d555-3adb-4cfd-9b37-861702faba83
2018-08-27 16:11:21.080 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:11:21.088 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:11:21.090 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:11:21.094 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:11:21.096 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:11:21.099 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:11:21.099 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:11:21.100 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "b705d555-3adb-4cfd-9b37-861702faba83",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "hBYpFn4ER0wkQTIpaNhfimjqHJ4g7bOG0mwULpdk",
  "Nonce": "hBYpFn4ER0wkQTIpaNhfimjqHJ4g7bOG0mwULpdk",
  "SessionId": "6aeb34d6fdd6b132f14f9c9bd8405793",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "hBYpFn4ER0wkQTIpaNhfimjqHJ4g7bOG0mwULpdk",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "hBYpFn4ER0wkQTIpaNhfimjqHJ4g7bOG0mwULpdk"
  }
}
2018-08-27 16:11:21.144 -03:00 [DBG] IGee+XC5sjVMMWeAHNQd4akQJfKzIK4I9mi+BfyajYc= found in database: false
2018-08-27 16:11:21.146 -03:00 [DBG] user_consent grant with value: UserManagementUI|b705d555-3adb-4cfd-9b37-861702faba83 not found in store.
2018-08-27 16:11:21.147 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 16:11:21.148 -03:00 [INF] Showing consent: User has not yet consented
2018-08-27 16:11:21.172 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:11:21.182 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:11:21.185 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:11:21.194 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:11:21.197 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:11:21.199 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:11:21.200 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:11:21.212 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:11:21.215 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:11:21.217 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:11:58.259 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 16:11:58.302 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 16:11:58.304 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 16:11:58.305 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 16:11:58.309 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "b705d555-3adb-4cfd-9b37-861702faba83",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGCA3E61U6K:00000010",
  "TimeStamp": "2018-08-27T19:11:58Z",
  "ProcessId": 30964,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 16:12:33.844 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 16:12:33.865 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 16:12:33.865 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 16:12:33.865 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 16:12:33.865 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 16:12:33.937 -03:00 [DBG] Starting token cleanup
2018-08-27 16:12:37.788 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 16:12:37.908 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:12:37.912 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:12:37.952 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 16:12:37.958 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 16:12:37.959 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 16:12:37.962 -03:00 [DBG] Start discovery request
2018-08-27 16:12:38.185 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 16:12:38.218 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 16:12:38.222 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:12:38.222 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:12:38.224 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 16:12:38.227 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 16:12:38.232 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 16:12:38.238 -03:00 [DBG] Start key discovery request
2018-08-27 16:12:38.279 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 16:12:38.287 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 16:12:38.288 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 16:12:38.292 -03:00 [DBG] Start authorize request
2018-08-27 16:12:38.299 -03:00 [DBG] No user present in authorize request
2018-08-27 16:12:38.302 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:12:38.456 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:12:38.493 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:12:38.519 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:12:38.539 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:12:38.542 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:12:38.547 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:12:38.555 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "3GydvoYmkDVVkDxjfSAkzZ3QlV0K6JMlPK7ZFbKO",
  "Nonce": "3GydvoYmkDVVkDxjfSAkzZ3QlV0K6JMlPK7ZFbKO",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "3GydvoYmkDVVkDxjfSAkzZ3QlV0K6JMlPK7ZFbKO",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "3GydvoYmkDVVkDxjfSAkzZ3QlV0K6JMlPK7ZFbKO"
  }
}
2018-08-27 16:12:38.568 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 16:12:38.660 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:12:38.666 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:12:38.668 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:12:38.670 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:12:38.672 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:12:38.674 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:12:38.675 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:12:38.683 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:12:43.494 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 16:12:44.234 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 16:14:20.433 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 16:14:20.454 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 16:14:20.454 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 16:14:20.455 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 16:14:20.455 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 16:14:20.524 -03:00 [DBG] Starting token cleanup
2018-08-27 16:14:45.089 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 16:14:45.110 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 16:14:45.110 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 16:14:45.111 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 16:14:45.111 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 16:14:45.181 -03:00 [DBG] Starting token cleanup
2018-08-27 16:14:53.050 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.FindByLoginAsync(String loginProvider, String providerKey, CancellationToken cancellationToken)
   at Equinox.UI.SSO.Controllers.Account.AccountController.FindUserFromExternalProviderAsync(AuthenticateResult result) in D:\workspace\JpProject\src\Frontend\Equinox.UI.SSO\Controllers\Account\AccountController.cs:line 496
   at Equinox.UI.SSO.Controllers.Account.AccountController.ExternalLoginCallback() in D:\workspace\JpProject\src\Frontend\Equinox.UI.SSO\Controllers\Account\AccountController.cs:line 207
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-27 16:14:54.325 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 16:14:54.435 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:14:54.439 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:14:54.441 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 16:14:54.446 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 16:14:54.447 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 16:14:54.450 -03:00 [DBG] Start discovery request
2018-08-27 16:14:54.706 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 16:14:54.733 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 16:14:54.736 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:14:54.738 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:14:54.740 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 16:14:54.742 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 16:14:54.744 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 16:14:54.748 -03:00 [DBG] Start key discovery request
2018-08-27 16:14:54.778 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 16:14:54.783 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 16:14:54.783 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 16:14:54.787 -03:00 [DBG] Start authorize request
2018-08-27 16:14:54.793 -03:00 [DBG] No user present in authorize request
2018-08-27 16:14:54.798 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:14:54.961 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:14:54.999 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:14:55.026 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:14:55.034 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:14:55.037 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:14:55.042 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:14:55.051 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "N4WJe2X8AuqoBI8ZSeDB6riPcQBPAzpEGuVsJnmU",
  "Nonce": "N4WJe2X8AuqoBI8ZSeDB6riPcQBPAzpEGuVsJnmU",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "N4WJe2X8AuqoBI8ZSeDB6riPcQBPAzpEGuVsJnmU",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "N4WJe2X8AuqoBI8ZSeDB6riPcQBPAzpEGuVsJnmU"
  }
}
2018-08-27 16:14:55.062 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 16:14:55.101 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:14:55.109 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:14:55.112 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:14:55.114 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:14:55.116 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:14:55.117 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:14:55.118 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:14:55.126 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:15:02.263 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 16:15:03.123 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 16:15:37.098 -03:00 [INF] Provider Facebook associated.
2018-08-27 16:15:40.424 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCA5EVEAE7:00000008",
  "TimeStamp": "2018-08-27T19:15:40Z",
  "ProcessId": 29796,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 16:15:40.435 -03:00 [DBG] Augmenting SignInContext
2018-08-27 16:15:40.437 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 16:15:40.441 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 16:15:40.445 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 16:15:40.463 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 16:15:40.465 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 16:15:40.466 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 16:15:40.470 -03:00 [DBG] Start authorize callback request
2018-08-27 16:15:40.472 -03:00 [DBG] User in authorize request: 68202b22-d09d-442c-8bb2-325d922ed55c
2018-08-27 16:15:40.473 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:15:40.484 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:15:40.486 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:15:40.488 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:15:40.490 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:15:40.492 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:15:40.494 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:15:40.495 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "N4WJe2X8AuqoBI8ZSeDB6riPcQBPAzpEGuVsJnmU",
  "Nonce": "N4WJe2X8AuqoBI8ZSeDB6riPcQBPAzpEGuVsJnmU",
  "SessionId": "b1d8a07daaa7bfa23a2bd0201bf3160c",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "N4WJe2X8AuqoBI8ZSeDB6riPcQBPAzpEGuVsJnmU",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "N4WJe2X8AuqoBI8ZSeDB6riPcQBPAzpEGuVsJnmU"
  }
}
2018-08-27 16:15:40.534 -03:00 [DBG] yCTQeKD0JfQrTvLr+4TZa3gAId8q725c47uE670gM3Q= found in database: false
2018-08-27 16:15:40.536 -03:00 [DBG] user_consent grant with value: UserManagementUI|68202b22-d09d-442c-8bb2-325d922ed55c not found in store.
2018-08-27 16:15:40.537 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 16:15:40.537 -03:00 [INF] Showing consent: User has not yet consented
2018-08-27 16:15:40.561 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:15:40.570 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:15:40.574 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:15:40.577 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:15:40.580 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:15:40.581 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:15:40.582 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:15:40.587 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:15:40.589 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:15:40.591 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:15:46.504 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 16:15:46.536 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:15:46.544 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:15:46.548 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:15:46.550 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:15:46.552 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:15:46.553 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:15:46.554 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:15:46.569 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 16:15:46.571 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 16:15:46.572 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 16:15:46.573 -03:00 [DBG] Start authorize callback request
2018-08-27 16:15:46.580 -03:00 [DBG] User in authorize request: 68202b22-d09d-442c-8bb2-325d922ed55c
2018-08-27 16:15:46.581 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:15:46.589 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:15:46.592 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:15:46.594 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:15:46.598 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:15:46.600 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:15:46.601 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:15:46.602 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "N4WJe2X8AuqoBI8ZSeDB6riPcQBPAzpEGuVsJnmU",
  "Nonce": "N4WJe2X8AuqoBI8ZSeDB6riPcQBPAzpEGuVsJnmU",
  "SessionId": "b1d8a07daaa7bfa23a2bd0201bf3160c",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "N4WJe2X8AuqoBI8ZSeDB6riPcQBPAzpEGuVsJnmU",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "N4WJe2X8AuqoBI8ZSeDB6riPcQBPAzpEGuVsJnmU"
  }
}
2018-08-27 16:15:46.609 -03:00 [DBG] yCTQeKD0JfQrTvLr+4TZa3gAId8q725c47uE670gM3Q= found in database: false
2018-08-27 16:15:46.610 -03:00 [DBG] user_consent grant with value: UserManagementUI|68202b22-d09d-442c-8bb2-325d922ed55c not found in store.
2018-08-27 16:15:46.611 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 16:15:46.615 -03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-27 16:15:46.617 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-27 16:15:46.620 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 68202b22-d09d-442c-8bb2-325d922ed55c
2018-08-27 16:15:46.635 -03:00 [DBG] yCTQeKD0JfQrTvLr+4TZa3gAId8q725c47uE670gM3Q= not found in database
2018-08-27 16:15:46.665 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 16:15:46.673 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 16:15:46.673 -03:00 [DBG] Getting claims for access token for subject: 68202b22-d09d-442c-8bb2-325d922ed55c
2018-08-27 16:15:46.702 -03:00 [DBG] IhITqDWfNOOj1irWZCIC09GmjqQMambpaQtfkokBkZg= not found in database
2018-08-27 16:15:46.715 -03:00 [DBG] Getting claims for identity token for subject: 68202b22-d09d-442c-8bb2-325d922ed55c and client: UserManagementUI
2018-08-27 16:15:46.716 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 16:15:46.765 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****vrWA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****2bfe"
    }
  ],
  "ActivityId": "0HLGCA5EVEAE9:00000005",
  "TimeStamp": "2018-08-27T19:15:46Z",
  "ProcessId": 29796,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 16:15:46.771 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "N4WJe2X8AuqoBI8ZSeDB6riPcQBPAzpEGuVsJnmU",
  "Scope": "openid profile email"
}
2018-08-27 16:15:46.785 -03:00 [DBG] Augmenting SignInContext
2018-08-27 16:15:46.786 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 16:15:48.282 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 16:15:48.288 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:15:48.288 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:15:48.290 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 16:15:48.292 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 16:15:48.294 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 16:15:48.297 -03:00 [DBG] Start discovery request
2018-08-27 16:15:48.306 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 16:15:48.332 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 16:15:48.335 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:15:48.336 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:15:48.337 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 16:15:48.339 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 16:15:48.340 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 16:15:48.344 -03:00 [DBG] Start key discovery request
2018-08-27 16:16:13.659 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 16:16:13.664 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 16:16:13.666 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 16:16:13.669 -03:00 [DBG] Processing signout request for 68202b22-d09d-442c-8bb2-325d922ed55c
2018-08-27 16:16:13.674 -03:00 [DBG] Start end session request validation
2018-08-27 16:16:13.680 -03:00 [DBG] Start identity token validation
2018-08-27 16:16:13.695 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:16:13.696 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 16:16:13.734 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 16:16:13.737 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535397346,
    "exp": 1535397646,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "N4WJe2X8AuqoBI8ZSeDB6riPcQBPAzpEGuVsJnmU",
    "iat": 1535397346,
    "at_hash": "bMVC1luBdRHuB7E9wU6FZA",
    "sid": "b1d8a07daaa7bfa23a2bd0201bf3160c",
    "sub": "68202b22-d09d-442c-8bb2-325d922ed55c",
    "auth_time": 1535397340,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-08-27 16:16:13.743 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzUzOTczNDYsImV4cCI6MTUzNTM5NzY0NiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiTjRXSmUyWDhBdXFvQkk4WlNlREI2cmlQY1FCUEF6cEVHdVZzSm5tVSIsImlhdCI6MTUzNTM5NzM0NiwiYXRfaGFzaCI6ImJNVkMxbHVCZFJIdUI3RTl3VTZGWkEiLCJzaWQiOiJiMWQ4YTA3ZGFhYTdiZmEyM2EyYmQwMjAxYmYzMTYwYyIsInN1YiI6IjY4MjAyYjIyLWQwOWQtNDQyYy04YmIyLTMyNWQ5MjJlZDU1YyIsImF1dGhfdGltZSI6MTUzNTM5NzM0MCwiaWRwIjoiRmFjZWJvb2siLCJhbXIiOlsiZXh0ZXJuYWwiXX0.SL3ApsUUb_OXpMLiRGDlkYPqDGHshwY7OolElo9i23jG72bEgzanyzuslwJpySPxX7VihzXkLkz2-MT-xFzo43W6pr4yTg9NYXQdc7Psc9-FajrsuwWAaK5L05EH1jMumhkf73Qf8jiB2Pb6vMlC2WPe6KRY2GHyVWHzQ8Zo2RxR9a31LCmJgOILyqd5qzDurFAMrR5vCxirfY1uNmGGo3_qrNdIBip-idJ99kFC9ZD3c7G31k0cOlyD1mhObVRFQ6KjSFsZurEyHKeiQ1rJu1yEVtCj-JfvEmafzW14TrvizUFI3Ou-cK2j-mheUNgYQmfhRhKUA7tU1d35S-vrWA",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 16:16:13.749 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 16:16:13.783 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 16:16:13.785 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 16:16:13.786 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 16:16:13.789 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGCA5EVEAE9:00000007",
  "TimeStamp": "2018-08-27T19:16:13Z",
  "ProcessId": 29796,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 16:16:13.967 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 16:16:13.971 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 16:16:13.972 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 16:16:13.978 -03:00 [DBG] Processing signout callback request
2018-08-27 16:16:13.995 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:16:13.996 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 16:16:13.997 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 16:16:13.997 -03:00 [INF] Successful signout callback.
2018-08-27 16:16:13.999 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 16:16:14.000 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 16:16:17.074 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 16:16:17.077 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:16:17.078 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:16:17.080 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 16:16:17.081 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 16:16:17.083 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 16:16:17.086 -03:00 [DBG] Start discovery request
2018-08-27 16:16:17.094 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 16:16:17.103 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 16:16:17.106 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:16:17.107 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:16:17.109 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 16:16:17.110 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 16:16:17.112 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 16:16:17.115 -03:00 [DBG] Start key discovery request
2018-08-27 16:16:17.186 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 16:16:17.188 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 16:16:17.189 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 16:16:17.190 -03:00 [DBG] Start authorize request
2018-08-27 16:16:17.191 -03:00 [DBG] No user present in authorize request
2018-08-27 16:16:17.191 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:16:17.203 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:16:17.206 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:16:17.208 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:16:17.211 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:16:17.215 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:16:17.216 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:16:17.218 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "pC6wQjqNsOgblEfoYjPFBbQ4A7G7avZ9UUZf0Pul",
  "Nonce": "pC6wQjqNsOgblEfoYjPFBbQ4A7G7avZ9UUZf0Pul",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "pC6wQjqNsOgblEfoYjPFBbQ4A7G7avZ9UUZf0Pul",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "pC6wQjqNsOgblEfoYjPFBbQ4A7G7avZ9UUZf0Pul"
  }
}
2018-08-27 16:16:17.221 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 16:16:17.227 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:16:17.237 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:16:17.240 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:16:17.242 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:16:17.245 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:16:17.248 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:16:17.249 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:16:17.255 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:35:15.196 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 16:35:15.217 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 16:35:15.217 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 16:35:15.217 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 16:35:15.217 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 16:35:15.290 -03:00 [DBG] Starting token cleanup
2018-08-27 16:39:49.823 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 16:39:49.944 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:39:49.947 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:39:49.986 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 16:39:50.004 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 16:39:50.004 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 16:39:50.009 -03:00 [DBG] Start discovery request
2018-08-27 16:39:50.270 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 16:39:50.302 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 16:39:50.308 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:39:50.309 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:39:50.322 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 16:39:50.326 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 16:39:50.327 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 16:39:50.330 -03:00 [DBG] Start key discovery request
2018-08-27 16:39:50.370 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 16:39:50.375 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 16:39:50.377 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 16:39:50.380 -03:00 [DBG] Start authorize request
2018-08-27 16:39:50.387 -03:00 [DBG] No user present in authorize request
2018-08-27 16:39:50.390 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:39:50.545 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:39:50.581 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:39:50.608 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:39:50.618 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:39:50.622 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:39:50.628 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:39:50.638 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "SkvnWDRkMardAMpsnUfu6LcxqcSlJTKp1689gXQG",
  "Nonce": "SkvnWDRkMardAMpsnUfu6LcxqcSlJTKp1689gXQG",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "SkvnWDRkMardAMpsnUfu6LcxqcSlJTKp1689gXQG",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "SkvnWDRkMardAMpsnUfu6LcxqcSlJTKp1689gXQG"
  }
}
2018-08-27 16:39:50.648 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 16:39:50.745 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:39:50.753 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:39:50.756 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:39:50.758 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:39:50.761 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:39:50.763 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:39:50.764 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:39:50.774 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:41:55.339 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 16:41:55.345 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:41:55.346 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:41:55.347 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 16:41:55.348 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 16:41:55.350 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 16:41:55.351 -03:00 [DBG] Start discovery request
2018-08-27 16:41:55.377 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 16:43:06.868 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 16:43:06.891 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 16:43:06.891 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 16:43:06.891 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 16:43:06.891 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 16:43:06.962 -03:00 [DBG] Starting token cleanup
2018-08-27 16:46:19.742 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 16:46:19.763 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 16:46:19.764 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 16:46:19.765 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 16:46:19.765 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 16:46:19.842 -03:00 [DBG] Starting token cleanup
2018-08-27 16:50:56.253 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 16:50:56.274 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 16:50:56.274 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 16:50:56.274 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 16:50:56.274 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 16:50:56.348 -03:00 [DBG] Starting token cleanup
2018-08-27 16:51:36.969 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 16:51:36.991 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 16:51:36.991 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 16:51:36.992 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 16:51:36.992 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 16:51:37.065 -03:00 [DBG] Starting token cleanup
2018-08-27 16:52:33.159 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 16:52:33.179 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 16:52:33.179 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 16:52:33.180 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 16:52:33.180 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 16:52:33.255 -03:00 [DBG] Starting token cleanup
2018-08-27 16:52:43.868 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 16:52:43.968 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:52:43.972 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:52:44.015 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 16:52:44.023 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 16:52:44.024 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 16:52:44.028 -03:00 [DBG] Start discovery request
2018-08-27 16:52:44.303 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 16:52:44.337 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 16:52:44.342 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:52:44.343 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:52:44.344 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 16:52:44.346 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 16:52:44.347 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 16:52:44.351 -03:00 [DBG] Start key discovery request
2018-08-27 16:52:44.398 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 16:52:44.402 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 16:52:44.403 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 16:52:44.406 -03:00 [DBG] Start authorize request
2018-08-27 16:52:44.414 -03:00 [DBG] No user present in authorize request
2018-08-27 16:52:44.419 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:52:44.579 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:52:44.611 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:52:44.636 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:52:44.645 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:52:44.647 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:52:44.653 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:52:44.661 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "ir1WWVWTbUqyZhN2Z1uTiHPZJawcmw3kMULouq70",
  "Nonce": "ir1WWVWTbUqyZhN2Z1uTiHPZJawcmw3kMULouq70",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "ir1WWVWTbUqyZhN2Z1uTiHPZJawcmw3kMULouq70",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "ir1WWVWTbUqyZhN2Z1uTiHPZJawcmw3kMULouq70"
  }
}
2018-08-27 16:52:44.671 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 16:52:44.771 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:52:44.779 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:52:44.782 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:52:44.783 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:52:44.785 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:52:44.787 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:52:44.787 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:52:44.798 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:52:46.749 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 16:52:47.635 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 16:52:47.821 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCAQJP9TOV:00000007",
  "TimeStamp": "2018-08-27T19:52:47Z",
  "ProcessId": 28172,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 16:52:47.830 -03:00 [DBG] Augmenting SignInContext
2018-08-27 16:52:47.832 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 16:52:47.837 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 16:52:47.841 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 16:52:47.860 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 16:52:47.863 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 16:52:47.864 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 16:52:47.869 -03:00 [DBG] Start authorize callback request
2018-08-27 16:52:47.872 -03:00 [DBG] User in authorize request: 68202b22-d09d-442c-8bb2-325d922ed55c
2018-08-27 16:52:47.873 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:52:47.881 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:52:47.883 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:52:47.885 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:52:47.887 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:52:47.888 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:52:47.889 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:52:47.891 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "ir1WWVWTbUqyZhN2Z1uTiHPZJawcmw3kMULouq70",
  "Nonce": "ir1WWVWTbUqyZhN2Z1uTiHPZJawcmw3kMULouq70",
  "SessionId": "503daf2b3e09162b84d4a6a6c28a14d7",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "ir1WWVWTbUqyZhN2Z1uTiHPZJawcmw3kMULouq70",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "ir1WWVWTbUqyZhN2Z1uTiHPZJawcmw3kMULouq70"
  }
}
2018-08-27 16:52:47.956 -03:00 [DBG] yCTQeKD0JfQrTvLr+4TZa3gAId8q725c47uE670gM3Q= found in database: true
2018-08-27 16:52:47.962 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 16:52:47.968 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 16:52:47.975 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 16:52:47.975 -03:00 [DBG] Getting claims for access token for subject: 68202b22-d09d-442c-8bb2-325d922ed55c
2018-08-27 16:52:48.009 -03:00 [DBG] BhXkuw6neD8NbRffB1nGcb0Z+V7PPznKT3ev/XO5aX0= not found in database
2018-08-27 16:52:48.111 -03:00 [DBG] Getting claims for identity token for subject: 68202b22-d09d-442c-8bb2-325d922ed55c and client: UserManagementUI
2018-08-27 16:52:48.113 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 16:52:48.157 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****xPOg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****3e8b"
    }
  ],
  "ActivityId": "0HLGCAQJP9TOV:00000008",
  "TimeStamp": "2018-08-27T19:52:48Z",
  "ProcessId": 28172,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 16:52:48.164 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "ir1WWVWTbUqyZhN2Z1uTiHPZJawcmw3kMULouq70",
  "Scope": "openid profile email"
}
2018-08-27 16:52:48.176 -03:00 [DBG] Augmenting SignInContext
2018-08-27 16:52:48.176 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 16:52:49.353 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 16:52:49.356 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:52:49.357 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:52:49.359 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 16:52:49.360 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 16:52:49.362 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 16:52:49.365 -03:00 [DBG] Start discovery request
2018-08-27 16:52:49.375 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 16:52:49.407 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 16:52:49.410 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:52:49.412 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:52:49.413 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 16:52:49.414 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 16:52:49.416 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 16:52:49.417 -03:00 [DBG] Start key discovery request
2018-08-27 16:52:56.787 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 16:52:56.790 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 16:52:56.791 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 16:52:56.798 -03:00 [DBG] Processing signout request for 68202b22-d09d-442c-8bb2-325d922ed55c
2018-08-27 16:52:56.804 -03:00 [DBG] Start end session request validation
2018-08-27 16:52:56.809 -03:00 [DBG] Start identity token validation
2018-08-27 16:52:56.825 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:52:56.828 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 16:52:56.862 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 16:52:56.866 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535399568,
    "exp": 1535399868,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "ir1WWVWTbUqyZhN2Z1uTiHPZJawcmw3kMULouq70",
    "iat": 1535399568,
    "at_hash": "Yw3dkKPZ_Zdmo4v3bsxolA",
    "sid": "503daf2b3e09162b84d4a6a6c28a14d7",
    "sub": "68202b22-d09d-442c-8bb2-325d922ed55c",
    "auth_time": 1535399567,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-08-27 16:52:56.871 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzUzOTk1NjgsImV4cCI6MTUzNTM5OTg2OCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiaXIxV1dWV1RiVXF5WmhOMloxdVRpSFBaSmF3Y213M2tNVUxvdXE3MCIsImlhdCI6MTUzNTM5OTU2OCwiYXRfaGFzaCI6Ill3M2RrS1BaX1pkbW80djNic3hvbEEiLCJzaWQiOiI1MDNkYWYyYjNlMDkxNjJiODRkNGE2YTZjMjhhMTRkNyIsInN1YiI6IjY4MjAyYjIyLWQwOWQtNDQyYy04YmIyLTMyNWQ5MjJlZDU1YyIsImF1dGhfdGltZSI6MTUzNTM5OTU2NywiaWRwIjoiRmFjZWJvb2siLCJhbXIiOlsiZXh0ZXJuYWwiXX0.v6YfvvK1Jn1W62dpUfxVi4z1ozuA-ixbqspjH70at84azPOqNkYoL4gBUB-tKgJ0fwcJLSSZE_u4tzTnLmWvqvOMZpy60y2IoeXPQMKPBzr_9GP46hWga0Y1sy1xjsTadBtAH-mGPJtvVroADl9uzpl5ac-VX7QVZegTYHwcv3HryjYLUCR-6LvWEiCtZPKzJ1lpk7hGqwtHltp68YlOGy9DFB_Lv_zMFpU91UZLuyx0qXeOAfYkLpiXn94w1ZxORXigktX9b6MLUpPL4y4Tawskbut6DgWmxmd9uaJrgNc-lqBVN-ng-BHN-sfht_TjlrykAcLqUBmoB-XKBSxPOg",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 16:52:56.876 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 16:52:56.913 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 16:52:56.915 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 16:52:56.917 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 16:52:56.920 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGCAQJP9TOV:0000000A",
  "TimeStamp": "2018-08-27T19:52:56Z",
  "ProcessId": 28172,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 16:52:57.091 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 16:52:57.095 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 16:52:57.097 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 16:52:57.103 -03:00 [DBG] Processing signout callback request
2018-08-27 16:52:57.121 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:52:57.122 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 16:52:57.122 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 16:52:57.124 -03:00 [INF] Successful signout callback.
2018-08-27 16:52:57.125 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 16:52:57.126 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 16:53:00.106 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 16:53:00.109 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:53:00.111 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:53:00.112 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 16:53:00.114 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 16:53:00.118 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 16:53:00.120 -03:00 [DBG] Start discovery request
2018-08-27 16:53:00.129 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 16:53:00.163 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 16:53:00.168 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 16:53:00.170 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 16:53:00.171 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 16:53:00.173 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 16:53:00.177 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 16:53:00.179 -03:00 [DBG] Start key discovery request
2018-08-27 16:53:00.225 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 16:53:00.227 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 16:53:00.228 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 16:53:00.229 -03:00 [DBG] Start authorize request
2018-08-27 16:53:00.230 -03:00 [DBG] No user present in authorize request
2018-08-27 16:53:00.230 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:53:00.239 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:53:00.244 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:53:00.247 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:53:00.251 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:53:00.254 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:53:00.254 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:53:00.255 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "KYlC7dwPsNO2rhOqD1c4hclbHIL0rnOGRythgFQW",
  "Nonce": "KYlC7dwPsNO2rhOqD1c4hclbHIL0rnOGRythgFQW",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "KYlC7dwPsNO2rhOqD1c4hclbHIL0rnOGRythgFQW",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "KYlC7dwPsNO2rhOqD1c4hclbHIL0rnOGRythgFQW"
  }
}
2018-08-27 16:53:00.259 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 16:53:00.265 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 16:53:00.274 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 16:53:00.278 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:53:00.280 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:53:00.282 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 16:53:00.283 -03:00 [DBG] Found [] API scopes in database
2018-08-27 16:53:00.284 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 16:53:00.290 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:03:01.251 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 17:03:01.282 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 17:03:01.284 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 17:03:01.285 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 17:03:01.285 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 17:03:01.286 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 17:03:01.287 -03:00 [DBG] Start discovery request
2018-08-27 17:03:01.292 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 17:03:01.301 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 17:03:01.302 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 17:03:01.304 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 17:03:01.304 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 17:03:01.305 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 17:03:01.306 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 17:03:01.307 -03:00 [DBG] Start key discovery request
2018-08-27 17:03:01.321 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 17:03:01.323 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 17:03:01.326 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 17:03:01.326 -03:00 [DBG] Start authorize request
2018-08-27 17:03:01.327 -03:00 [DBG] No user present in authorize request
2018-08-27 17:03:01.327 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 17:03:01.334 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:03:01.336 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:03:01.340 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:03:01.343 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:03:01.345 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:03:01.346 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 17:03:01.347 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "QACBlCuzL93GyPoCnFm25pDdcFhHPNcjfFWLCtRp",
  "Nonce": "QACBlCuzL93GyPoCnFm25pDdcFhHPNcjfFWLCtRp",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "QACBlCuzL93GyPoCnFm25pDdcFhHPNcjfFWLCtRp",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "QACBlCuzL93GyPoCnFm25pDdcFhHPNcjfFWLCtRp"
  }
}
2018-08-27 17:03:01.350 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 17:03:01.363 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 17:03:01.369 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:03:01.372 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:03:01.374 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:03:01.378 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:03:01.380 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:03:01.380 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 17:03:01.388 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:03:26.894 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 17:03:26.897 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 17:03:26.898 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 17:03:26.899 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 17:03:26.900 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 17:03:26.901 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 17:03:26.902 -03:00 [DBG] Start discovery request
2018-08-27 17:03:26.907 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 17:03:26.916 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 17:03:26.919 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 17:03:26.919 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 17:03:26.920 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 17:03:26.921 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 17:03:26.922 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 17:03:26.926 -03:00 [DBG] Start key discovery request
2018-08-27 17:03:26.935 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 17:03:26.936 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 17:03:26.938 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 17:03:26.940 -03:00 [DBG] Start authorize request
2018-08-27 17:03:26.941 -03:00 [DBG] No user present in authorize request
2018-08-27 17:03:26.942 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 17:03:26.952 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:03:26.954 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:03:26.956 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:03:26.959 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:03:26.960 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:03:26.961 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 17:03:26.962 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "3Ne5ae8Lxkv74Vj3aSgJZcQOYSAV2SpEV1O08vZb",
  "Nonce": "3Ne5ae8Lxkv74Vj3aSgJZcQOYSAV2SpEV1O08vZb",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "3Ne5ae8Lxkv74Vj3aSgJZcQOYSAV2SpEV1O08vZb",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "3Ne5ae8Lxkv74Vj3aSgJZcQOYSAV2SpEV1O08vZb"
  }
}
2018-08-27 17:03:26.965 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 17:03:26.970 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 17:03:26.976 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:03:26.978 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:03:26.980 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:03:26.981 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:03:26.983 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:03:26.983 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 17:03:26.990 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:03:29.349 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 17:03:30.070 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 17:03:30.082 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCAQJP9TP6:0000000A",
  "TimeStamp": "2018-08-27T20:03:30Z",
  "ProcessId": 28172,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 17:03:30.083 -03:00 [DBG] Augmenting SignInContext
2018-08-27 17:03:30.084 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 17:03:30.084 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 17:03:30.085 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 17:03:30.088 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 17:03:30.089 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 17:03:30.092 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 17:03:30.093 -03:00 [DBG] Start authorize callback request
2018-08-27 17:03:30.094 -03:00 [DBG] User in authorize request: 68202b22-d09d-442c-8bb2-325d922ed55c
2018-08-27 17:03:30.095 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 17:03:30.101 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:03:30.105 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:03:30.108 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:03:30.110 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:03:30.112 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:03:30.113 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 17:03:30.114 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "3Ne5ae8Lxkv74Vj3aSgJZcQOYSAV2SpEV1O08vZb",
  "Nonce": "3Ne5ae8Lxkv74Vj3aSgJZcQOYSAV2SpEV1O08vZb",
  "SessionId": "ea836b066853b9fb08fc88295bf0791e",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "3Ne5ae8Lxkv74Vj3aSgJZcQOYSAV2SpEV1O08vZb",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "3Ne5ae8Lxkv74Vj3aSgJZcQOYSAV2SpEV1O08vZb"
  }
}
2018-08-27 17:03:30.121 -03:00 [DBG] yCTQeKD0JfQrTvLr+4TZa3gAId8q725c47uE670gM3Q= found in database: true
2018-08-27 17:03:30.125 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 17:03:30.125 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 17:03:30.126 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 17:03:30.126 -03:00 [DBG] Getting claims for access token for subject: 68202b22-d09d-442c-8bb2-325d922ed55c
2018-08-27 17:03:30.134 -03:00 [DBG] r9j5bA8NfXAnHHyzGCsEGO1C8rP7koMPmjn+GG8esfo= not found in database
2018-08-27 17:03:30.146 -03:00 [DBG] Getting claims for identity token for subject: 68202b22-d09d-442c-8bb2-325d922ed55c and client: UserManagementUI
2018-08-27 17:03:30.147 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 17:03:30.150 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****UOkg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****0b03"
    }
  ],
  "ActivityId": "0HLGCAQJP9TP6:0000000B",
  "TimeStamp": "2018-08-27T20:03:30Z",
  "ProcessId": 28172,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 17:03:30.152 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "3Ne5ae8Lxkv74Vj3aSgJZcQOYSAV2SpEV1O08vZb",
  "Scope": "openid profile email"
}
2018-08-27 17:03:30.154 -03:00 [DBG] Augmenting SignInContext
2018-08-27 17:03:30.154 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 17:03:31.295 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 17:03:31.299 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 17:03:31.300 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 17:03:31.301 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 17:03:31.303 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 17:03:31.304 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 17:03:31.306 -03:00 [DBG] Start discovery request
2018-08-27 17:03:31.317 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 17:03:31.338 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 17:03:31.342 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 17:03:31.344 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 17:03:31.344 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 17:03:31.346 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 17:03:31.347 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 17:03:31.348 -03:00 [DBG] Start key discovery request
2018-08-27 17:03:35.472 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 17:03:35.474 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 17:03:35.475 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 17:03:35.477 -03:00 [DBG] Processing signout request for 68202b22-d09d-442c-8bb2-325d922ed55c
2018-08-27 17:03:35.478 -03:00 [DBG] Start end session request validation
2018-08-27 17:03:35.479 -03:00 [DBG] Start identity token validation
2018-08-27 17:03:35.485 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:03:35.486 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 17:03:35.493 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 17:03:35.494 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535400210,
    "exp": 1535400510,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "3Ne5ae8Lxkv74Vj3aSgJZcQOYSAV2SpEV1O08vZb",
    "iat": 1535400210,
    "at_hash": "kVeOJ8YOYegS-u8zHa6fwg",
    "sid": "ea836b066853b9fb08fc88295bf0791e",
    "sub": "68202b22-d09d-442c-8bb2-325d922ed55c",
    "auth_time": 1535400210,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-08-27 17:03:35.496 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzU0MDAyMTAsImV4cCI6MTUzNTQwMDUxMCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiM05lNWFlOEx4a3Y3NFZqM2FTZ0paY1FPWVNBVjJTcEVWMU8wOHZaYiIsImlhdCI6MTUzNTQwMDIxMCwiYXRfaGFzaCI6ImtWZU9KOFlPWWVnUy11OHpIYTZmd2ciLCJzaWQiOiJlYTgzNmIwNjY4NTNiOWZiMDhmYzg4Mjk1YmYwNzkxZSIsInN1YiI6IjY4MjAyYjIyLWQwOWQtNDQyYy04YmIyLTMyNWQ5MjJlZDU1YyIsImF1dGhfdGltZSI6MTUzNTQwMDIxMCwiaWRwIjoiRmFjZWJvb2siLCJhbXIiOlsiZXh0ZXJuYWwiXX0.Q43ZR3O1RwnospKv_tqYsYEKuPdyWyhW2lcXbo8sy1vmRnMueCzkC2CASaHssHjbzcCqBMhDeVmjeukP8Px3EucmfjWdQxGfG2kxHIJpf-OJS2N0fm-dNCvTDUY21JvLS5qg4KoAM8bNNjCBn75fK4gaScxElxI0MSdbE369hgeQu5ITciJV9hnW6UL97wwsDErTI6P9V-MJb0po0ADI5BgFIsW4SkI9IGWtL5QFzhaYc-WR_yQ6dK4D_VcnYNGall2lVuGO6QlNJTR39ehGz_h67mnsb7j0C_bHS5luCQG5zqe99Q7jgtL5R6QmgpVfpfPz60Bi9KAslB4np5UOkg",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 17:03:35.499 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 17:03:35.505 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 17:03:35.506 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 17:03:35.506 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 17:03:35.508 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGCAQJP9TP6:0000000D",
  "TimeStamp": "2018-08-27T20:03:35Z",
  "ProcessId": 28172,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 17:03:35.675 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 17:03:35.677 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 17:03:35.679 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 17:03:35.681 -03:00 [DBG] Processing signout callback request
2018-08-27 17:03:35.698 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:03:35.700 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 17:03:35.702 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 17:03:35.703 -03:00 [INF] Successful signout callback.
2018-08-27 17:03:35.704 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 17:03:35.706 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 17:03:38.355 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 17:03:38.359 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 17:03:38.361 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 17:03:38.363 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 17:03:38.365 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 17:03:38.368 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 17:03:38.370 -03:00 [DBG] Start discovery request
2018-08-27 17:03:38.380 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 17:03:38.422 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 17:03:38.436 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 17:03:38.437 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 17:03:38.438 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 17:03:38.440 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 17:03:38.441 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 17:03:38.443 -03:00 [DBG] Start key discovery request
2018-08-27 17:03:38.490 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 17:03:38.492 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 17:03:38.494 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 17:03:38.495 -03:00 [DBG] Start authorize request
2018-08-27 17:03:38.495 -03:00 [DBG] No user present in authorize request
2018-08-27 17:03:38.496 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 17:03:38.504 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:03:38.507 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:03:38.510 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:03:38.530 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:03:38.532 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:03:38.532 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 17:03:38.534 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "riwCRl67i3GrROIt0DGQNInwLZBHTAZJuC0mIy19",
  "Nonce": "riwCRl67i3GrROIt0DGQNInwLZBHTAZJuC0mIy19",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "riwCRl67i3GrROIt0DGQNInwLZBHTAZJuC0mIy19",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "riwCRl67i3GrROIt0DGQNInwLZBHTAZJuC0mIy19"
  }
}
2018-08-27 17:03:38.539 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 17:03:38.544 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 17:03:38.552 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:03:38.558 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:03:38.562 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:03:38.565 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:03:38.568 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:03:38.570 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 17:03:38.582 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:03:44.207 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 17:03:44.215 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:03:44.217 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:03:44.219 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:03:44.221 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:03:44.222 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:03:44.223 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 17:03:44.230 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:03:45.479 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-27 17:03:51.244 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 17:03:56.322 -03:00 [WRN] User a6fd6db7-f6c8-4646-8b94-172affc28bbe validation failed: DuplicateUserName.
2018-08-27 17:04:03.206 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 17:04:03.757 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 17:04:03.770 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCAQJP9TP4:00000016",
  "TimeStamp": "2018-08-27T20:04:03Z",
  "ProcessId": 28172,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 17:04:03.771 -03:00 [DBG] Augmenting SignInContext
2018-08-27 17:04:03.772 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 17:04:03.772 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 17:04:03.773 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 17:04:06.117 -03:00 [DBG] 4 persisted grants found for 68202b22-d09d-442c-8bb2-325d922ed55c
2018-08-27 17:04:06.137 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:04:06.140 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:04:06.142 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:04:20.555 -03:00 [DBG] 4 persisted grants found for 68202b22-d09d-442c-8bb2-325d922ed55c
2018-08-27 17:04:20.578 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:04:20.582 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:04:20.584 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:10:13.385 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 17:10:13.406 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 17:10:13.407 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 17:10:13.407 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 17:10:13.408 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 17:10:13.479 -03:00 [DBG] Starting token cleanup
2018-08-27 17:10:21.089 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 17:10:21.093 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 17:10:21.094 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 17:10:21.096 -03:00 [DBG] Start discovery request
2018-08-27 17:10:21.422 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 17:10:24.164 -03:00 [DBG] 4 persisted grants found for 68202b22-d09d-442c-8bb2-325d922ed55c
2018-08-27 17:10:24.347 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:10:24.367 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:10:24.392 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:10:38.454 -03:00 [DBG] 4 persisted grants found for 68202b22-d09d-442c-8bb2-325d922ed55c
2018-08-27 17:10:38.470 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:10:38.473 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:10:38.474 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:10:41.679 -03:00 [DBG] 4 persisted grants found for 68202b22-d09d-442c-8bb2-325d922ed55c
2018-08-27 17:10:41.694 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:10:41.698 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:10:41.699 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:10:53.794 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 17:10:53.839 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 17:10:53.842 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 17:10:53.845 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 17:10:53.863 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "68202b22-d09d-442c-8bb2-325d922ed55c",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGCB4E7DUOL:00000012",
  "TimeStamp": "2018-08-27T20:10:53Z",
  "ProcessId": 9384,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 17:11:26.428 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 17:11:26.450 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 17:11:26.450 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 17:11:26.450 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 17:11:26.451 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 17:11:26.520 -03:00 [DBG] Starting token cleanup
2018-08-27 17:12:01.648 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 17:12:01.741 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 17:12:01.745 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 17:12:01.747 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 17:12:01.750 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 17:12:01.751 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 17:12:01.754 -03:00 [DBG] Start discovery request
2018-08-27 17:12:01.971 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 17:12:01.993 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 17:12:01.997 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 17:12:01.998 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 17:12:01.998 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 17:12:01.999 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 17:12:02.000 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 17:12:02.002 -03:00 [DBG] Start key discovery request
2018-08-27 17:12:02.022 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 17:12:02.028 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 17:12:02.029 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 17:12:02.038 -03:00 [DBG] Start authorize request
2018-08-27 17:12:02.044 -03:00 [DBG] No user present in authorize request
2018-08-27 17:12:02.048 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 17:12:02.200 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:12:02.238 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:12:02.266 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:12:02.273 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:12:02.276 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:12:02.282 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 17:12:02.290 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "wn8ro1xWjnKVPCNByiadAYNBgAX6a0EyHNL5uiF8",
  "Nonce": "wn8ro1xWjnKVPCNByiadAYNBgAX6a0EyHNL5uiF8",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "wn8ro1xWjnKVPCNByiadAYNBgAX6a0EyHNL5uiF8",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "wn8ro1xWjnKVPCNByiadAYNBgAX6a0EyHNL5uiF8"
  }
}
2018-08-27 17:12:02.302 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 17:12:02.317 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 17:12:02.327 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:12:02.330 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:12:02.331 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:12:02.333 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:12:02.335 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:12:02.336 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 17:12:02.344 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:12:09.284 -03:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 17:12:09.476 -03:00 [DBG] Augmenting SignInContext
2018-08-27 17:12:09.478 -03:00 [DBG] Adding idp claim with value: local
2018-08-27 17:12:09.478 -03:00 [DBG] Adding amr claim with value: pwd
2018-08-27 17:12:09.479 -03:00 [DBG] Adding auth_time claim with value: 1535400729
2018-08-27 17:12:09.487 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 17:12:09.507 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bhdebrito",
  "SubjectId": "c5fca25b-d337-4e02-892d-68ec7d8e808f",
  "DisplayName": "bhdebrito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCB53BPUCV:0000000A",
  "TimeStamp": "2018-08-27T20:12:09Z",
  "ProcessId": 29088,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 17:12:09.532 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 17:12:09.534 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 17:12:09.535 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 17:12:09.539 -03:00 [DBG] Start authorize callback request
2018-08-27 17:12:09.542 -03:00 [DBG] User in authorize request: c5fca25b-d337-4e02-892d-68ec7d8e808f
2018-08-27 17:12:09.543 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 17:12:09.550 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:12:09.553 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:12:09.556 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:12:09.562 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:12:09.566 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:12:09.567 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 17:12:09.568 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "c5fca25b-d337-4e02-892d-68ec7d8e808f",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "wn8ro1xWjnKVPCNByiadAYNBgAX6a0EyHNL5uiF8",
  "Nonce": "wn8ro1xWjnKVPCNByiadAYNBgAX6a0EyHNL5uiF8",
  "SessionId": "b3063432ff30e344aa7c26ddb8b9a873",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "wn8ro1xWjnKVPCNByiadAYNBgAX6a0EyHNL5uiF8",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "wn8ro1xWjnKVPCNByiadAYNBgAX6a0EyHNL5uiF8"
  }
}
2018-08-27 17:12:09.612 -03:00 [DBG] 1aIPKUuL7GR4JBWPKGeymKkdAfFCBtZEOwNAlVVyfu0= found in database: false
2018-08-27 17:12:09.614 -03:00 [DBG] user_consent grant with value: UserManagementUI|c5fca25b-d337-4e02-892d-68ec7d8e808f not found in store.
2018-08-27 17:12:09.615 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 17:12:09.616 -03:00 [INF] Showing consent: User has not yet consented
2018-08-27 17:12:09.639 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 17:12:09.645 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:12:09.648 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:12:09.649 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:12:09.651 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:12:09.653 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:12:09.654 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 17:12:09.659 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:12:09.662 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:12:09.664 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:12:12.662 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 17:12:12.676 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 17:12:12.683 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:12:12.685 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:12:12.687 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:12:12.689 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:12:12.690 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:12:12.692 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 17:12:12.704 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 17:12:12.706 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 17:12:12.707 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 17:12:12.708 -03:00 [DBG] Start authorize callback request
2018-08-27 17:12:12.711 -03:00 [DBG] User in authorize request: c5fca25b-d337-4e02-892d-68ec7d8e808f
2018-08-27 17:12:12.712 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 17:12:12.718 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:12:12.721 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:12:12.723 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:12:12.727 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 17:12:12.729 -03:00 [DBG] Found [] API scopes in database
2018-08-27 17:12:12.730 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 17:12:12.731 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "c5fca25b-d337-4e02-892d-68ec7d8e808f",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "wn8ro1xWjnKVPCNByiadAYNBgAX6a0EyHNL5uiF8",
  "Nonce": "wn8ro1xWjnKVPCNByiadAYNBgAX6a0EyHNL5uiF8",
  "SessionId": "b3063432ff30e344aa7c26ddb8b9a873",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "wn8ro1xWjnKVPCNByiadAYNBgAX6a0EyHNL5uiF8",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "wn8ro1xWjnKVPCNByiadAYNBgAX6a0EyHNL5uiF8"
  }
}
2018-08-27 17:12:12.737 -03:00 [DBG] 1aIPKUuL7GR4JBWPKGeymKkdAfFCBtZEOwNAlVVyfu0= found in database: false
2018-08-27 17:12:12.738 -03:00 [DBG] user_consent grant with value: UserManagementUI|c5fca25b-d337-4e02-892d-68ec7d8e808f not found in store.
2018-08-27 17:12:12.741 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 17:12:12.744 -03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-27 17:12:12.746 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-27 17:12:12.749 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: c5fca25b-d337-4e02-892d-68ec7d8e808f
2018-08-27 17:12:12.760 -03:00 [DBG] 1aIPKUuL7GR4JBWPKGeymKkdAfFCBtZEOwNAlVVyfu0= not found in database
2018-08-27 17:12:12.797 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 17:12:12.805 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 17:12:12.805 -03:00 [DBG] Getting claims for access token for subject: c5fca25b-d337-4e02-892d-68ec7d8e808f
2018-08-27 17:12:12.837 -03:00 [DBG] PDIDqKzwm2ZS6cYg/bAOjBWmKjbureO5EGrGsV6D8D0= not found in database
2018-08-27 17:12:12.849 -03:00 [DBG] Getting claims for identity token for subject: c5fca25b-d337-4e02-892d-68ec7d8e808f and client: UserManagementUI
2018-08-27 17:12:12.850 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 17:12:12.894 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "c5fca25b-d337-4e02-892d-68ec7d8e808f",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****xc-w"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****c774"
    }
  ],
  "ActivityId": "0HLGCB53BPUCV:00000010",
  "TimeStamp": "2018-08-27T20:12:12Z",
  "ProcessId": 29088,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 17:12:12.901 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "c5fca25b-d337-4e02-892d-68ec7d8e808f",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "wn8ro1xWjnKVPCNByiadAYNBgAX6a0EyHNL5uiF8",
  "Scope": "openid profile email"
}
2018-08-27 17:12:12.914 -03:00 [DBG] Augmenting SignInContext
2018-08-27 17:12:12.915 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 17:12:14.387 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 17:12:14.391 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 17:12:14.392 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 17:12:14.393 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 17:12:14.394 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 17:12:14.395 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 17:12:14.400 -03:00 [DBG] Start discovery request
2018-08-27 17:12:14.411 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 17:12:14.457 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 17:12:14.461 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 17:12:14.462 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 17:12:14.463 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 17:12:14.465 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 17:12:14.465 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 17:12:14.467 -03:00 [DBG] Start key discovery request
2018-08-27 17:15:32.504 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 17:15:32.525 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 17:15:32.525 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 17:15:32.525 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 17:15:32.525 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 17:15:32.609 -03:00 [DBG] Starting token cleanup
2018-08-27 17:15:40.359 -03:00 [DBG] 0 persisted grants found for c5fca25b-d337-4e02-892d-68ec7d8e808f
2018-08-27 17:15:44.714 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 17:15:44.757 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 17:15:44.758 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 17:15:44.760 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 17:15:44.778 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "c5fca25b-d337-4e02-892d-68ec7d8e808f",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGCB7C3FO21:00000008",
  "TimeStamp": "2018-08-27T20:15:44Z",
  "ProcessId": 11992,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 17:15:44.946 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 17:15:44.951 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 17:15:44.952 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 17:15:44.956 -03:00 [DBG] Processing signout callback request
2018-08-27 17:15:45.281 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 17:15:45.284 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 17:15:45.285 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 17:15:45.285 -03:00 [INF] Successful signout callback.
2018-08-27 17:15:45.286 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 17:15:45.286 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 17:16:05.841 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 17:16:05.879 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 17:16:05.880 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 17:16:05.883 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 17:16:05.884 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 17:16:05.885 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 17:16:05.888 -03:00 [DBG] Start discovery request
2018-08-27 17:16:06.027 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 17:16:06.048 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 17:16:06.051 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 17:16:06.052 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 17:16:06.053 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 17:16:06.055 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 17:16:06.055 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 17:16:06.058 -03:00 [DBG] Start key discovery request
2018-08-27 17:16:19.264 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-08-27 17:16:21.664 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 17:16:22.428 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 17:16:22.598 -03:00 [INF] Provider Facebook associated.
2018-08-27 17:16:22.747 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "e71ac70f-e78d-44c5-becb-bee7d655923c",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCB7C3FO21:00000013",
  "TimeStamp": "2018-08-27T20:16:22Z",
  "ProcessId": 11992,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 17:16:22.756 -03:00 [DBG] Augmenting SignInContext
2018-08-27 17:16:22.758 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 17:16:22.761 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 17:16:22.762 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 17:16:22.776 -03:00 [DBG] 0 persisted grants found for e71ac70f-e78d-44c5-becb-bee7d655923c
2018-08-27 17:16:42.690 -03:00 [DBG] 0 persisted grants found for e71ac70f-e78d-44c5-becb-bee7d655923c
2018-08-27 17:16:50.826 -03:00 [DBG] 0 persisted grants found for e71ac70f-e78d-44c5-becb-bee7d655923c
2018-08-27 20:38:13.987 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 20:38:14.010 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 20:38:14.011 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 20:38:14.012 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 20:38:14.012 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 20:38:14.091 -03:00 [DBG] Starting token cleanup
2018-08-27 20:52:48.148 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 20:52:48.457 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 20:52:48.461 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 20:52:48.503 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 20:52:48.527 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 20:52:48.529 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 20:52:48.533 -03:00 [DBG] Start discovery request
2018-08-27 20:52:48.772 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 20:52:48.816 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 20:52:48.819 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 20:52:48.820 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 20:52:48.822 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 20:52:48.823 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 20:52:48.824 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 20:52:48.828 -03:00 [DBG] Start key discovery request
2018-08-27 20:52:48.854 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 20:52:48.859 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 20:52:48.860 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 20:52:48.869 -03:00 [DBG] Start authorize request
2018-08-27 20:52:48.877 -03:00 [DBG] No user present in authorize request
2018-08-27 20:52:48.881 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 20:52:49.057 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 20:52:49.098 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 20:52:49.124 -03:00 [DBG] Found [] API scopes in database
2018-08-27 20:52:49.133 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 20:52:49.136 -03:00 [DBG] Found [] API scopes in database
2018-08-27 20:52:49.142 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 20:52:49.150 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "4FNiYtv8YWtrz2FRH2DyYVgefeQcc750JzuXLUoT",
  "Nonce": "4FNiYtv8YWtrz2FRH2DyYVgefeQcc750JzuXLUoT",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "4FNiYtv8YWtrz2FRH2DyYVgefeQcc750JzuXLUoT",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "4FNiYtv8YWtrz2FRH2DyYVgefeQcc750JzuXLUoT"
  }
}
2018-08-27 20:52:49.158 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 20:52:49.283 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 20:52:49.293 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 20:52:49.297 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 20:52:49.301 -03:00 [DBG] Found [] API scopes in database
2018-08-27 20:52:49.305 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 20:52:49.308 -03:00 [DBG] Found [] API scopes in database
2018-08-27 20:52:49.310 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 20:52:49.322 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 20:52:51.194 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 20:52:52.313 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 20:52:55.505 -03:00 [INF] Provider Facebook associated.
2018-08-27 20:52:58.791 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "0dd8c070-98c4-4e82-93ac-f833e7ee90f4",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCF0OIO6CR:00000005",
  "TimeStamp": "2018-08-27T23:52:58Z",
  "ProcessId": 9496,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 20:52:58.801 -03:00 [DBG] Augmenting SignInContext
2018-08-27 20:52:58.803 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 20:52:58.807 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 20:52:58.812 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 20:52:58.833 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 20:52:58.834 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 20:52:58.836 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 20:52:58.843 -03:00 [DBG] Start authorize callback request
2018-08-27 20:52:58.846 -03:00 [DBG] User in authorize request: 0dd8c070-98c4-4e82-93ac-f833e7ee90f4
2018-08-27 20:52:58.847 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 20:52:58.855 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 20:52:58.859 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 20:52:58.861 -03:00 [DBG] Found [] API scopes in database
2018-08-27 20:52:58.864 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 20:52:58.866 -03:00 [DBG] Found [] API scopes in database
2018-08-27 20:52:58.867 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 20:52:58.868 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "0dd8c070-98c4-4e82-93ac-f833e7ee90f4",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "4FNiYtv8YWtrz2FRH2DyYVgefeQcc750JzuXLUoT",
  "Nonce": "4FNiYtv8YWtrz2FRH2DyYVgefeQcc750JzuXLUoT",
  "SessionId": "7ad4ad05059eb5b698fc6863454b442b",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "4FNiYtv8YWtrz2FRH2DyYVgefeQcc750JzuXLUoT",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "4FNiYtv8YWtrz2FRH2DyYVgefeQcc750JzuXLUoT"
  }
}
2018-08-27 20:52:58.911 -03:00 [DBG] XHAPbtDiHV15rp7aOcloRR2wB6AkdMgicFP9YAHeZYc= found in database: false
2018-08-27 20:52:58.913 -03:00 [DBG] user_consent grant with value: UserManagementUI|0dd8c070-98c4-4e82-93ac-f833e7ee90f4 not found in store.
2018-08-27 20:52:58.915 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 20:52:58.916 -03:00 [INF] Showing consent: User has not yet consented
2018-08-27 20:52:58.942 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 20:52:58.950 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 20:52:58.954 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 20:52:58.956 -03:00 [DBG] Found [] API scopes in database
2018-08-27 20:52:58.959 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 20:52:58.961 -03:00 [DBG] Found [] API scopes in database
2018-08-27 20:52:58.963 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 20:52:58.973 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 20:52:58.976 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 20:52:58.978 -03:00 [DBG] Found [] API scopes in database
2018-08-27 20:53:05.177 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 20:53:05.211 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 20:53:05.221 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 20:53:05.226 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 20:53:05.229 -03:00 [DBG] Found [] API scopes in database
2018-08-27 20:53:05.233 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 20:53:05.237 -03:00 [DBG] Found [] API scopes in database
2018-08-27 20:53:05.238 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 20:53:05.255 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 20:53:05.256 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 20:53:05.258 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 20:53:05.260 -03:00 [DBG] Start authorize callback request
2018-08-27 20:53:05.265 -03:00 [DBG] User in authorize request: 0dd8c070-98c4-4e82-93ac-f833e7ee90f4
2018-08-27 20:53:05.268 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 20:53:05.280 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 20:53:05.285 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 20:53:05.288 -03:00 [DBG] Found [] API scopes in database
2018-08-27 20:53:05.291 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 20:53:05.296 -03:00 [DBG] Found [] API scopes in database
2018-08-27 20:53:05.299 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 20:53:05.301 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "0dd8c070-98c4-4e82-93ac-f833e7ee90f4",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "4FNiYtv8YWtrz2FRH2DyYVgefeQcc750JzuXLUoT",
  "Nonce": "4FNiYtv8YWtrz2FRH2DyYVgefeQcc750JzuXLUoT",
  "SessionId": "7ad4ad05059eb5b698fc6863454b442b",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "4FNiYtv8YWtrz2FRH2DyYVgefeQcc750JzuXLUoT",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "4FNiYtv8YWtrz2FRH2DyYVgefeQcc750JzuXLUoT"
  }
}
2018-08-27 20:53:05.312 -03:00 [DBG] XHAPbtDiHV15rp7aOcloRR2wB6AkdMgicFP9YAHeZYc= found in database: false
2018-08-27 20:53:05.313 -03:00 [DBG] user_consent grant with value: UserManagementUI|0dd8c070-98c4-4e82-93ac-f833e7ee90f4 not found in store.
2018-08-27 20:53:05.314 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 20:53:05.319 -03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-27 20:53:05.321 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-27 20:53:05.325 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 0dd8c070-98c4-4e82-93ac-f833e7ee90f4
2018-08-27 20:53:05.339 -03:00 [DBG] XHAPbtDiHV15rp7aOcloRR2wB6AkdMgicFP9YAHeZYc= not found in database
2018-08-27 20:53:05.367 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 20:53:05.374 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 20:53:05.375 -03:00 [DBG] Getting claims for access token for subject: 0dd8c070-98c4-4e82-93ac-f833e7ee90f4
2018-08-27 20:53:05.403 -03:00 [DBG] Sx0aQmX/VgCMnhIQpgPEs2CjvFcR81QAyqqqQqcdUjY= not found in database
2018-08-27 20:53:05.416 -03:00 [DBG] Getting claims for identity token for subject: 0dd8c070-98c4-4e82-93ac-f833e7ee90f4 and client: UserManagementUI
2018-08-27 20:53:05.417 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 20:53:05.459 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "0dd8c070-98c4-4e82-93ac-f833e7ee90f4",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****hLlg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****e533"
    }
  ],
  "ActivityId": "0HLGCF0OIO6CQ:00000006",
  "TimeStamp": "2018-08-27T23:53:05Z",
  "ProcessId": 9496,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 20:53:05.465 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "0dd8c070-98c4-4e82-93ac-f833e7ee90f4",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "4FNiYtv8YWtrz2FRH2DyYVgefeQcc750JzuXLUoT",
  "Scope": "openid profile email"
}
2018-08-27 20:53:05.477 -03:00 [DBG] Augmenting SignInContext
2018-08-27 20:53:05.477 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 20:53:06.487 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 20:53:06.493 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 20:53:06.494 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 20:53:06.496 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 20:53:06.497 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 20:53:06.499 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 20:53:06.505 -03:00 [DBG] Start discovery request
2018-08-27 20:53:06.515 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 20:53:06.544 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 20:53:06.549 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 20:53:06.552 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 20:53:06.554 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 20:53:06.557 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 20:53:06.562 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 20:53:06.566 -03:00 [DBG] Start key discovery request
2018-08-27 20:56:20.510 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 20:56:20.535 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 20:56:20.536 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 20:56:20.536 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 20:56:20.536 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 20:56:20.624 -03:00 [DBG] Starting token cleanup
2018-08-27 20:56:43.946 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 20:56:44.162 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 20:56:44.164 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 20:56:44.165 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 20:56:44.188 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "0dd8c070-98c4-4e82-93ac-f833e7ee90f4",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGCF2US17BH:00000001",
  "TimeStamp": "2018-08-27T23:56:44Z",
  "ProcessId": 24072,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 20:56:44.507 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 20:56:44.512 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 20:56:44.513 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 20:56:44.520 -03:00 [DBG] Processing signout callback request
2018-08-27 20:56:44.854 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 20:56:44.860 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 20:56:44.860 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 20:56:44.862 -03:00 [INF] Successful signout callback.
2018-08-27 20:56:44.862 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 20:56:44.863 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 21:05:05.318 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 21:05:05.395 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 21:05:05.397 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 21:05:05.400 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 21:05:09.671 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 21:05:09.672 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 21:05:09.676 -03:00 [DBG] Start discovery request
2018-08-27 21:05:11.715 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 21:05:11.744 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 21:05:11.748 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 21:05:11.749 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 21:05:11.750 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 21:05:11.752 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 21:05:11.753 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 21:05:11.759 -03:00 [DBG] Start key discovery request
2018-08-27 21:05:11.810 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 21:05:11.820 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 21:05:11.821 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 21:05:11.826 -03:00 [DBG] Start authorize request
2018-08-27 21:05:11.830 -03:00 [DBG] No user present in authorize request
2018-08-27 21:05:11.835 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:05:12.390 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:05:12.435 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:07:55.915 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 21:07:55.940 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 21:07:55.941 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 21:07:55.941 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 21:07:55.941 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 21:07:56.071 -03:00 [DBG] Starting token cleanup
2018-08-27 21:13:21.583 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 21:13:21.605 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 21:13:21.606 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 21:13:21.608 -03:00 [DBG] Start authorize request
2018-08-27 21:13:21.615 -03:00 [DBG] No user present in authorize request
2018-08-27 21:13:21.618 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:13:21.943 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:13:22.007 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:13:22.080 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:13:22.094 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:13:22.098 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:13:22.105 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 21:13:22.117 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "pWOEQlTH1DuiNTHteCJi0R45Q1m27aoXWpjibd3B",
  "Nonce": "pWOEQlTH1DuiNTHteCJi0R45Q1m27aoXWpjibd3B",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "pWOEQlTH1DuiNTHteCJi0R45Q1m27aoXWpjibd3B",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "pWOEQlTH1DuiNTHteCJi0R45Q1m27aoXWpjibd3B"
  }
}
2018-08-27 21:13:22.126 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 21:13:22.254 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:13:22.264 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:13:22.268 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:13:22.270 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:13:22.273 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:13:22.276 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:13:22.277 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 21:13:22.289 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:14:11.686 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 21:14:11.712 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 21:14:11.715 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 21:14:11.718 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 21:14:11.720 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 21:14:11.721 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 21:14:11.725 -03:00 [DBG] Start discovery request
2018-08-27 21:14:11.819 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 21:14:11.847 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 21:14:11.850 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 21:14:11.852 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 21:14:11.852 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 21:14:11.854 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 21:14:11.857 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 21:14:11.863 -03:00 [DBG] Start key discovery request
2018-08-27 21:14:11.883 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 21:14:11.885 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 21:14:11.886 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 21:14:11.887 -03:00 [DBG] Start authorize request
2018-08-27 21:14:11.889 -03:00 [DBG] No user present in authorize request
2018-08-27 21:14:11.889 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:14:11.902 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:14:11.906 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:14:11.908 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:14:11.912 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:14:11.915 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:14:11.916 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 21:14:11.917 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "1J3h5yRthu7Oi2Cxk22J40ND0ZH30C0o07fGi8gh",
  "Nonce": "1J3h5yRthu7Oi2Cxk22J40ND0ZH30C0o07fGi8gh",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "1J3h5yRthu7Oi2Cxk22J40ND0ZH30C0o07fGi8gh",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "1J3h5yRthu7Oi2Cxk22J40ND0ZH30C0o07fGi8gh"
  }
}
2018-08-27 21:14:11.921 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 21:14:11.934 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:14:11.942 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:14:11.945 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:14:11.947 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:14:11.950 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:14:11.952 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:14:11.953 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 21:14:11.962 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:14:17.685 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-27 21:14:22.323 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 21:14:29.923 -03:00 [INF] Provider Google associated.
2018-08-27 21:14:30.143 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "102696868227620762147",
  "SubjectId": "2cc636b4-cc16-426c-bed8-3c0c9c397895",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCFC85V1RB:00000008",
  "TimeStamp": "2018-08-28T00:14:30Z",
  "ProcessId": 9172,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 21:14:30.160 -03:00 [DBG] Augmenting SignInContext
2018-08-27 21:14:30.162 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 21:14:30.169 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 21:14:30.176 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 21:14:30.199 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 21:14:30.202 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 21:14:30.204 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 21:14:30.211 -03:00 [DBG] Start authorize callback request
2018-08-27 21:14:30.214 -03:00 [DBG] User in authorize request: 2cc636b4-cc16-426c-bed8-3c0c9c397895
2018-08-27 21:14:30.215 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:14:30.227 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:14:30.231 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:14:30.234 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:14:30.237 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:14:30.240 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:14:30.242 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 21:14:30.243 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "2cc636b4-cc16-426c-bed8-3c0c9c397895",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "1J3h5yRthu7Oi2Cxk22J40ND0ZH30C0o07fGi8gh",
  "Nonce": "1J3h5yRthu7Oi2Cxk22J40ND0ZH30C0o07fGi8gh",
  "SessionId": "98ca6914f6d6fa68ce18a73c5bd3c1cd",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "1J3h5yRthu7Oi2Cxk22J40ND0ZH30C0o07fGi8gh",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "1J3h5yRthu7Oi2Cxk22J40ND0ZH30C0o07fGi8gh"
  }
}
2018-08-27 21:14:30.294 -03:00 [DBG] qt3FQVpnxq/HoXsulfjN4FAtcKTwjey3GPh7tCpvngs= found in database: false
2018-08-27 21:14:30.296 -03:00 [DBG] user_consent grant with value: UserManagementUI|2cc636b4-cc16-426c-bed8-3c0c9c397895 not found in store.
2018-08-27 21:14:30.297 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 21:14:30.298 -03:00 [INF] Showing consent: User has not yet consented
2018-08-27 21:14:30.331 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:14:30.342 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:14:30.346 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:14:30.349 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:14:30.352 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:14:30.355 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:14:30.358 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 21:14:30.370 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:14:30.373 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:14:30.376 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:14:36.883 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 21:14:36.913 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:14:36.923 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:14:36.927 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:14:36.928 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:14:36.931 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:14:36.934 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:14:36.935 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 21:14:36.951 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 21:14:36.952 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 21:14:36.956 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 21:14:36.958 -03:00 [DBG] Start authorize callback request
2018-08-27 21:14:36.962 -03:00 [DBG] User in authorize request: 2cc636b4-cc16-426c-bed8-3c0c9c397895
2018-08-27 21:14:36.963 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:14:36.976 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:14:36.980 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:14:36.985 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:14:36.988 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:14:36.992 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:14:36.993 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 21:14:36.995 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "2cc636b4-cc16-426c-bed8-3c0c9c397895",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "1J3h5yRthu7Oi2Cxk22J40ND0ZH30C0o07fGi8gh",
  "Nonce": "1J3h5yRthu7Oi2Cxk22J40ND0ZH30C0o07fGi8gh",
  "SessionId": "98ca6914f6d6fa68ce18a73c5bd3c1cd",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "1J3h5yRthu7Oi2Cxk22J40ND0ZH30C0o07fGi8gh",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "1J3h5yRthu7Oi2Cxk22J40ND0ZH30C0o07fGi8gh"
  }
}
2018-08-27 21:14:37.005 -03:00 [DBG] qt3FQVpnxq/HoXsulfjN4FAtcKTwjey3GPh7tCpvngs= found in database: false
2018-08-27 21:14:37.006 -03:00 [DBG] user_consent grant with value: UserManagementUI|2cc636b4-cc16-426c-bed8-3c0c9c397895 not found in store.
2018-08-27 21:14:37.007 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 21:14:37.015 -03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-27 21:14:37.017 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-27 21:14:37.021 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 2cc636b4-cc16-426c-bed8-3c0c9c397895
2018-08-27 21:14:37.034 -03:00 [DBG] qt3FQVpnxq/HoXsulfjN4FAtcKTwjey3GPh7tCpvngs= not found in database
2018-08-27 21:14:37.066 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 21:14:37.074 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 21:14:37.074 -03:00 [DBG] Getting claims for access token for subject: 2cc636b4-cc16-426c-bed8-3c0c9c397895
2018-08-27 21:14:37.107 -03:00 [DBG] wgOiHd9+A6023qUOVTx5ZztpyLhnB/GGbx9jYGqSN2w= not found in database
2018-08-27 21:14:37.122 -03:00 [DBG] Getting claims for identity token for subject: 2cc636b4-cc16-426c-bed8-3c0c9c397895 and client: UserManagementUI
2018-08-27 21:14:37.124 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 21:14:37.186 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "2cc636b4-cc16-426c-bed8-3c0c9c397895",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****-lBA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****c10f"
    }
  ],
  "ActivityId": "0HLGCFC85V1RB:0000000C",
  "TimeStamp": "2018-08-28T00:14:37Z",
  "ProcessId": 9172,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 21:14:37.196 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cc636b4-cc16-426c-bed8-3c0c9c397895",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "1J3h5yRthu7Oi2Cxk22J40ND0ZH30C0o07fGi8gh",
  "Scope": "openid profile email"
}
2018-08-27 21:14:37.214 -03:00 [DBG] Augmenting SignInContext
2018-08-27 21:14:37.215 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 21:14:38.313 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 21:14:38.317 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 21:14:38.318 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 21:14:38.319 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 21:14:38.322 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 21:14:38.323 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 21:14:38.326 -03:00 [DBG] Start discovery request
2018-08-27 21:14:38.338 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 21:14:38.369 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 21:14:38.377 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 21:14:38.379 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 21:14:38.381 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 21:14:38.385 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 21:14:38.386 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 21:14:38.388 -03:00 [DBG] Start key discovery request
2018-08-27 21:14:42.670 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 21:14:42.672 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 21:14:42.674 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 21:14:42.680 -03:00 [DBG] Processing signout request for 2cc636b4-cc16-426c-bed8-3c0c9c397895
2018-08-27 21:14:42.686 -03:00 [DBG] Start end session request validation
2018-08-27 21:14:42.691 -03:00 [DBG] Start identity token validation
2018-08-27 21:14:42.707 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:14:42.708 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 21:14:42.755 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 21:14:42.759 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535415277,
    "exp": 1535415577,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "1J3h5yRthu7Oi2Cxk22J40ND0ZH30C0o07fGi8gh",
    "iat": 1535415277,
    "at_hash": "PnpGI0Ka06Er9kPKLfFaXw",
    "sid": "98ca6914f6d6fa68ce18a73c5bd3c1cd",
    "sub": "2cc636b4-cc16-426c-bed8-3c0c9c397895",
    "auth_time": 1535415270,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 21:14:42.767 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "2cc636b4-cc16-426c-bed8-3c0c9c397895",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzU0MTUyNzcsImV4cCI6MTUzNTQxNTU3NywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiMUozaDV5UnRodTdPaTJDeGsyMko0ME5EMFpIMzBDMG8wN2ZHaThnaCIsImlhdCI6MTUzNTQxNTI3NywiYXRfaGFzaCI6IlBucEdJMEthMDZFcjlrUEtMZkZhWHciLCJzaWQiOiI5OGNhNjkxNGY2ZDZmYTY4Y2UxOGE3M2M1YmQzYzFjZCIsInN1YiI6IjJjYzYzNmI0LWNjMTYtNDI2Yy1iZWQ4LTNjMGM5YzM5Nzg5NSIsImF1dGhfdGltZSI6MTUzNTQxNTI3MCwiaWRwIjoiR29vZ2xlIiwiYW1yIjpbImV4dGVybmFsIl19.qm7tElW_F_xWsGaTPiFApEedJ-wAOfz389Y4BHsfH7ZiZFOFqxJYNwqMa2MzeCVORhxOKOfOLNl2Qzt9cN6MHKu90T81Q055iOH6fxkQHIVd1ldp_lFNpBoQmcUYB4mNuJYcRYeYL9qfr6lY9QKf7lK3hGanTy_SNOpAX2FH7dMQA8dn3LSrseoh8gw-57vWr1M1siw66cpjp6kFWhA-PrnxkYQRk1Y902gL65xhnJazAFpI6bAQNIgjTccgVRClfWGGsixzh7CydRtMPDsoytdgmvVbkKSxNY1BRu1uuHxixZphDYp71qOC5COfJWyb_unQrVeskHP1f_c-fJ-lBA",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 21:14:42.774 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 21:14:42.823 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 21:14:42.825 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 21:14:42.828 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 21:14:42.833 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "2cc636b4-cc16-426c-bed8-3c0c9c397895",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGCFC85V1RB:0000000E",
  "TimeStamp": "2018-08-28T00:14:42Z",
  "ProcessId": 9172,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 21:14:43.000 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 21:14:43.003 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 21:14:43.004 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 21:14:43.010 -03:00 [DBG] Processing signout callback request
2018-08-27 21:14:43.036 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:14:43.038 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 21:14:43.039 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 21:14:43.039 -03:00 [INF] Successful signout callback.
2018-08-27 21:14:43.040 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 21:14:43.041 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 21:15:18.401 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 21:15:18.424 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 21:15:18.424 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 21:15:18.424 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 21:15:18.424 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 21:15:18.505 -03:00 [DBG] Starting token cleanup
2018-08-27 21:15:44.900 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-08-27 21:19:31.025 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 21:19:31.048 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 21:19:31.049 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 21:19:31.049 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 21:19:31.049 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 21:19:31.133 -03:00 [DBG] Starting token cleanup
2018-08-27 21:21:42.969 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 21:21:43.083 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 21:21:43.086 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 21:21:43.126 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 21:21:43.143 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 21:21:43.144 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 21:21:43.149 -03:00 [DBG] Start discovery request
2018-08-27 21:21:43.464 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 21:21:43.504 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 21:21:43.507 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 21:21:43.508 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 21:21:43.510 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 21:21:43.512 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 21:21:43.514 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 21:21:43.519 -03:00 [DBG] Start key discovery request
2018-08-27 21:21:43.565 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 21:21:43.573 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 21:21:43.574 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 21:21:43.580 -03:00 [DBG] Start authorize request
2018-08-27 21:21:43.588 -03:00 [DBG] No user present in authorize request
2018-08-27 21:21:43.592 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:21:43.771 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:21:43.834 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:21:43.885 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:21:43.897 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:21:43.901 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:21:43.907 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 21:21:43.916 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "3k0YpVuoyixhhReoqVtVbelVMzSXTle6uvJ6e8fl",
  "Nonce": "3k0YpVuoyixhhReoqVtVbelVMzSXTle6uvJ6e8fl",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "3k0YpVuoyixhhReoqVtVbelVMzSXTle6uvJ6e8fl",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "3k0YpVuoyixhhReoqVtVbelVMzSXTle6uvJ6e8fl"
  }
}
2018-08-27 21:21:43.926 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 21:21:44.042 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:21:44.054 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:21:44.057 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:21:44.060 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:21:44.064 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:21:44.066 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:21:44.067 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 21:21:44.076 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:21:49.285 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-27 21:22:54.984 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 21:24:32.911 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 21:24:32.932 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 21:24:32.933 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 21:24:32.933 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 21:24:32.933 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 21:24:33.028 -03:00 [DBG] Starting token cleanup
2018-08-27 21:25:45.943 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 21:25:46.075 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 21:25:46.079 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 21:25:46.127 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 21:25:46.151 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 21:25:46.153 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 21:25:46.159 -03:00 [DBG] Start discovery request
2018-08-27 21:25:46.450 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 21:25:46.512 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 21:25:46.515 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 21:25:46.516 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 21:25:46.518 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 21:25:46.521 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 21:25:46.524 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 21:25:46.529 -03:00 [DBG] Start key discovery request
2018-08-27 21:25:46.557 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 21:25:46.561 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 21:25:46.562 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 21:25:46.566 -03:00 [DBG] Start authorize request
2018-08-27 21:25:46.573 -03:00 [DBG] No user present in authorize request
2018-08-27 21:25:46.576 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:25:46.766 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:25:46.814 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:25:46.851 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:25:46.862 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:25:46.867 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:25:46.876 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 21:25:46.884 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "rb1tV3bjt2OGMflnKfaehOsXpbOXdsYsZZU5rLvf",
  "Nonce": "rb1tV3bjt2OGMflnKfaehOsXpbOXdsYsZZU5rLvf",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "rb1tV3bjt2OGMflnKfaehOsXpbOXdsYsZZU5rLvf",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "rb1tV3bjt2OGMflnKfaehOsXpbOXdsYsZZU5rLvf"
  }
}
2018-08-27 21:25:46.900 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 21:25:47.043 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:25:47.057 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:25:47.060 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:25:47.064 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:25:47.067 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:25:47.070 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:25:47.071 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 21:25:47.082 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:27:49.264 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 21:27:49.270 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 21:27:49.275 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 21:27:49.277 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 21:27:49.281 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 21:27:49.283 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 21:27:49.284 -03:00 [DBG] Start discovery request
2018-08-27 21:27:49.293 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 21:27:49.309 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 21:27:49.312 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 21:27:49.314 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 21:27:49.315 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 21:27:49.317 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 21:27:49.320 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 21:27:49.321 -03:00 [DBG] Start key discovery request
2018-08-27 21:27:49.438 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 21:27:49.441 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 21:27:49.442 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 21:27:49.443 -03:00 [DBG] Start authorize request
2018-08-27 21:27:49.444 -03:00 [DBG] No user present in authorize request
2018-08-27 21:27:49.445 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:27:49.455 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:27:49.459 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:27:49.462 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:27:49.465 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:27:49.468 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:27:49.470 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 21:27:49.471 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "TtsNAPov8LVNiUgiAhYKyLiFWXBl10DTl3TE51dh",
  "Nonce": "TtsNAPov8LVNiUgiAhYKyLiFWXBl10DTl3TE51dh",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "TtsNAPov8LVNiUgiAhYKyLiFWXBl10DTl3TE51dh",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "TtsNAPov8LVNiUgiAhYKyLiFWXBl10DTl3TE51dh"
  }
}
2018-08-27 21:27:49.477 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 21:27:49.501 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:27:49.516 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:27:49.520 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:27:49.523 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:27:49.527 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:27:49.530 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:27:49.533 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 21:27:49.563 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:27:52.652 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-27 21:27:57.418 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 21:28:03.152 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "102696868227620762147",
  "SubjectId": "e02e693f-fe08-4de9-9dd6-d8ac3ea61828",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCFJ60SJA3:00000009",
  "TimeStamp": "2018-08-28T00:28:03Z",
  "ProcessId": 1820,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 21:28:03.165 -03:00 [DBG] Augmenting SignInContext
2018-08-27 21:28:03.167 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 21:28:03.171 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 21:28:03.187 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 21:28:03.209 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 21:28:03.211 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 21:28:03.213 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 21:28:03.220 -03:00 [DBG] Start authorize callback request
2018-08-27 21:28:03.223 -03:00 [DBG] User in authorize request: e02e693f-fe08-4de9-9dd6-d8ac3ea61828
2018-08-27 21:28:03.225 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:28:03.236 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:28:03.239 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:28:03.243 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:28:03.246 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:28:03.249 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:28:03.250 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 21:28:03.253 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "e02e693f-fe08-4de9-9dd6-d8ac3ea61828",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "TtsNAPov8LVNiUgiAhYKyLiFWXBl10DTl3TE51dh",
  "Nonce": "TtsNAPov8LVNiUgiAhYKyLiFWXBl10DTl3TE51dh",
  "SessionId": "8e9985bae1f1be5b7456495ddc73f1ad",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "TtsNAPov8LVNiUgiAhYKyLiFWXBl10DTl3TE51dh",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "TtsNAPov8LVNiUgiAhYKyLiFWXBl10DTl3TE51dh"
  }
}
2018-08-27 21:28:03.313 -03:00 [DBG] dYngOkbvoaC+qeu2emO3ROg6Xn/Gim26ZoWO+foTiyA= found in database: false
2018-08-27 21:28:03.315 -03:00 [DBG] user_consent grant with value: UserManagementUI|e02e693f-fe08-4de9-9dd6-d8ac3ea61828 not found in store.
2018-08-27 21:28:03.317 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 21:28:03.317 -03:00 [INF] Showing consent: User has not yet consented
2018-08-27 21:28:03.350 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:28:03.359 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:28:03.362 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:28:03.364 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:28:03.367 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:28:03.369 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:28:03.369 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 21:28:03.378 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:28:03.381 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:28:03.382 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:28:06.725 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 21:28:06.757 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:28:06.767 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:28:06.770 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:28:06.772 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:28:06.774 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:28:06.778 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:28:06.779 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 21:28:06.794 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 21:28:06.796 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 21:28:06.798 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 21:28:06.800 -03:00 [DBG] Start authorize callback request
2018-08-27 21:28:06.803 -03:00 [DBG] User in authorize request: e02e693f-fe08-4de9-9dd6-d8ac3ea61828
2018-08-27 21:28:06.804 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 21:28:06.814 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:28:06.818 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:28:06.821 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:28:06.826 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:28:06.828 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:28:06.829 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 21:28:06.831 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "e02e693f-fe08-4de9-9dd6-d8ac3ea61828",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "TtsNAPov8LVNiUgiAhYKyLiFWXBl10DTl3TE51dh",
  "Nonce": "TtsNAPov8LVNiUgiAhYKyLiFWXBl10DTl3TE51dh",
  "SessionId": "8e9985bae1f1be5b7456495ddc73f1ad",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "TtsNAPov8LVNiUgiAhYKyLiFWXBl10DTl3TE51dh",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "TtsNAPov8LVNiUgiAhYKyLiFWXBl10DTl3TE51dh"
  }
}
2018-08-27 21:28:06.847 -03:00 [DBG] dYngOkbvoaC+qeu2emO3ROg6Xn/Gim26ZoWO+foTiyA= found in database: false
2018-08-27 21:28:06.850 -03:00 [DBG] user_consent grant with value: UserManagementUI|e02e693f-fe08-4de9-9dd6-d8ac3ea61828 not found in store.
2018-08-27 21:28:06.852 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 21:28:06.858 -03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-27 21:28:06.860 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-27 21:28:06.865 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: e02e693f-fe08-4de9-9dd6-d8ac3ea61828
2018-08-27 21:28:06.878 -03:00 [DBG] dYngOkbvoaC+qeu2emO3ROg6Xn/Gim26ZoWO+foTiyA= not found in database
2018-08-27 21:28:06.917 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 21:28:06.924 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 21:28:06.925 -03:00 [DBG] Getting claims for access token for subject: e02e693f-fe08-4de9-9dd6-d8ac3ea61828
2018-08-27 21:28:06.954 -03:00 [DBG] PxAqo1BQ/56Vvp/XESJYLaCZL+0E0pmQiVWv1j8N3Lw= not found in database
2018-08-27 21:28:06.968 -03:00 [DBG] Getting claims for identity token for subject: e02e693f-fe08-4de9-9dd6-d8ac3ea61828 and client: UserManagementUI
2018-08-27 21:28:06.970 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 21:28:07.029 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "e02e693f-fe08-4de9-9dd6-d8ac3ea61828",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****z5Hg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****269e"
    }
  ],
  "ActivityId": "0HLGCFJ60SJA6:00000005",
  "TimeStamp": "2018-08-28T00:28:07Z",
  "ProcessId": 1820,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 21:28:07.042 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "e02e693f-fe08-4de9-9dd6-d8ac3ea61828",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "TtsNAPov8LVNiUgiAhYKyLiFWXBl10DTl3TE51dh",
  "Scope": "openid profile email"
}
2018-08-27 21:28:07.059 -03:00 [DBG] Augmenting SignInContext
2018-08-27 21:28:07.061 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 21:28:08.803 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 21:28:08.808 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 21:28:08.809 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 21:28:08.810 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 21:28:08.812 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 21:28:08.816 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 21:28:08.817 -03:00 [DBG] Start discovery request
2018-08-27 21:28:08.828 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 21:28:08.898 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 21:28:08.902 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 21:28:08.903 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 21:28:08.904 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 21:28:08.905 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 21:28:08.907 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 21:28:08.908 -03:00 [DBG] Start key discovery request
2018-08-27 21:28:23.722 -03:00 [DBG] 2 persisted grants found for e02e693f-fe08-4de9-9dd6-d8ac3ea61828
2018-08-27 21:28:23.750 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:28:23.755 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:28:23.757 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:28:40.780 -03:00 [DBG] 2 persisted grants found for e02e693f-fe08-4de9-9dd6-d8ac3ea61828
2018-08-27 21:28:40.802 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:28:40.806 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:28:40.809 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:34:26.717 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 21:34:26.740 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 21:34:26.741 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 21:34:26.741 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 21:34:26.741 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 21:34:26.824 -03:00 [DBG] Starting token cleanup
2018-08-27 21:34:56.049 -03:00 [DBG] 2 persisted grants found for e02e693f-fe08-4de9-9dd6-d8ac3ea61828
2018-08-27 21:34:56.433 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:34:56.480 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:34:56.542 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:35:10.542 -03:00 [DBG] 2 persisted grants found for e02e693f-fe08-4de9-9dd6-d8ac3ea61828
2018-08-27 21:35:10.563 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:35:10.569 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:35:10.573 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:35:20.292 -03:00 [DBG] 2 persisted grants found for e02e693f-fe08-4de9-9dd6-d8ac3ea61828
2018-08-27 21:35:20.314 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:35:20.319 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:35:20.322 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:37:46.129 -03:00 [DBG] 2 persisted grants found for e02e693f-fe08-4de9-9dd6-d8ac3ea61828
2018-08-27 21:37:46.156 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:37:46.161 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:37:46.164 -03:00 [DBG] Found [] API scopes in database
2018-08-27 21:37:49.503 -03:00 [DBG] 2 persisted grants found for e02e693f-fe08-4de9-9dd6-d8ac3ea61828
2018-08-27 21:37:49.522 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 21:37:49.527 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 21:37:49.530 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:28:18.272 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 22:28:18.621 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 22:28:18.622 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 22:28:18.627 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 22:28:18.631 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 22:28:18.632 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 22:28:18.637 -03:00 [DBG] Start discovery request
2018-08-27 22:28:18.817 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 22:28:27.565 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 22:28:27.570 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 22:28:27.574 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 22:28:27.576 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 22:28:27.579 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 22:28:27.583 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 22:28:27.585 -03:00 [DBG] Start discovery request
2018-08-27 22:28:27.595 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 22:28:27.632 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 22:28:27.636 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 22:28:27.637 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 22:28:27.638 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 22:28:27.640 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 22:28:27.641 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 22:28:27.649 -03:00 [DBG] Start key discovery request
2018-08-27 22:28:27.895 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 22:28:27.899 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 22:28:27.900 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 22:28:27.904 -03:00 [DBG] Start authorize request
2018-08-27 22:28:27.910 -03:00 [DBG] User in authorize request: e02e693f-fe08-4de9-9dd6-d8ac3ea61828
2018-08-27 22:28:27.914 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 22:28:27.977 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 22:28:28.001 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 22:28:28.009 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:28:28.021 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 22:28:28.024 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:28:28.032 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 22:28:28.040 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "e02e693f-fe08-4de9-9dd6-d8ac3ea61828",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "W8wyhxyJQasIL1EQQl8aD0lrACFxewyScqv40hrA",
  "Nonce": "W8wyhxyJQasIL1EQQl8aD0lrACFxewyScqv40hrA",
  "SessionId": "8e9985bae1f1be5b7456495ddc73f1ad",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "W8wyhxyJQasIL1EQQl8aD0lrACFxewyScqv40hrA",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "W8wyhxyJQasIL1EQQl8aD0lrACFxewyScqv40hrA"
  }
}
2018-08-27 22:28:28.071 -03:00 [DBG] dYngOkbvoaC+qeu2emO3ROg6Xn/Gim26ZoWO+foTiyA= found in database: true
2018-08-27 22:28:28.074 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 22:28:28.079 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 22:28:28.088 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 22:28:28.088 -03:00 [DBG] Getting claims for access token for subject: e02e693f-fe08-4de9-9dd6-d8ac3ea61828
2018-08-27 22:28:28.122 -03:00 [DBG] 3PM0GhVFJXMKdTxIehwGVeg66jnghKWwEHPvBRx4cjE= not found in database
2018-08-27 22:28:28.230 -03:00 [DBG] Getting claims for identity token for subject: e02e693f-fe08-4de9-9dd6-d8ac3ea61828 and client: UserManagementUI
2018-08-27 22:28:28.232 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 22:28:28.294 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "e02e693f-fe08-4de9-9dd6-d8ac3ea61828",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****x7ug"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****8ab4"
    }
  ],
  "ActivityId": "0HLGCFO9TE7BB:00000001",
  "TimeStamp": "2018-08-28T01:28:28Z",
  "ProcessId": 9552,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 22:28:28.301 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "e02e693f-fe08-4de9-9dd6-d8ac3ea61828",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "W8wyhxyJQasIL1EQQl8aD0lrACFxewyScqv40hrA",
  "Scope": "openid profile email"
}
2018-08-27 22:28:29.685 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 22:28:29.690 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 22:28:29.691 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 22:28:29.693 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 22:28:29.695 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 22:28:29.699 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 22:28:29.701 -03:00 [DBG] Start discovery request
2018-08-27 22:28:29.712 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 22:28:29.764 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 22:28:29.769 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 22:28:29.770 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 22:28:29.771 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 22:28:29.773 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 22:28:29.774 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 22:28:29.776 -03:00 [DBG] Start key discovery request
2018-08-27 22:34:26.861 -03:00 [INF] Clearing 1 tokens
2018-08-27 22:43:55.408 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 22:43:55.432 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 22:43:55.432 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 22:43:55.432 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 22:43:55.433 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 22:43:55.517 -03:00 [DBG] Starting token cleanup
2018-08-27 22:44:11.986 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 22:44:12.133 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 22:44:12.137 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 22:44:12.207 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 22:44:12.221 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 22:44:12.223 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 22:44:12.228 -03:00 [DBG] Start discovery request
2018-08-27 22:44:12.483 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 22:44:12.528 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 22:44:12.533 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 22:44:12.534 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 22:44:12.535 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 22:44:12.537 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 22:44:12.540 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 22:44:12.546 -03:00 [DBG] Start key discovery request
2018-08-27 22:44:12.596 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 22:44:12.599 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 22:44:12.601 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 22:44:12.605 -03:00 [DBG] Start authorize request
2018-08-27 22:44:12.613 -03:00 [DBG] User in authorize request: e02e693f-fe08-4de9-9dd6-d8ac3ea61828
2018-08-27 22:44:12.617 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 22:44:12.793 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 22:44:12.833 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 22:44:12.859 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:44:12.869 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 22:44:12.872 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:44:12.877 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 22:44:12.886 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "e02e693f-fe08-4de9-9dd6-d8ac3ea61828",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "HWvzfb2ravB8HdjnvcUfHJvkZBBL57zuWYrqwBdA",
  "Nonce": "HWvzfb2ravB8HdjnvcUfHJvkZBBL57zuWYrqwBdA",
  "SessionId": "8e9985bae1f1be5b7456495ddc73f1ad",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "HWvzfb2ravB8HdjnvcUfHJvkZBBL57zuWYrqwBdA",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "HWvzfb2ravB8HdjnvcUfHJvkZBBL57zuWYrqwBdA"
  }
}
2018-08-27 22:44:12.914 -03:00 [INF] Showing login: User is not active
2018-08-27 22:44:13.028 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 22:44:13.040 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 22:44:13.043 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 22:44:13.046 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:44:13.051 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 22:44:13.053 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:44:13.054 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 22:44:13.067 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 22:44:16.984 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-27 22:44:22.035 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 22:44:26.004 -03:00 [INF] Provider Google associated.
2018-08-27 22:44:26.182 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "102696868227620762147",
  "SubjectId": "249a33a7-fece-4c9e-b66b-a5739b020906",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCGV0H2PKB:00000004",
  "TimeStamp": "2018-08-28T01:44:26Z",
  "ProcessId": 236,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 22:44:26.195 -03:00 [DBG] Augmenting SignInContext
2018-08-27 22:44:26.197 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 22:44:26.201 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 22:44:26.206 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 22:44:26.224 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 22:44:26.226 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 22:44:26.228 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 22:44:26.234 -03:00 [DBG] Start authorize callback request
2018-08-27 22:44:26.237 -03:00 [DBG] User in authorize request: 249a33a7-fece-4c9e-b66b-a5739b020906
2018-08-27 22:44:26.239 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 22:44:26.252 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 22:44:26.256 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 22:44:26.258 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:44:26.262 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 22:44:26.266 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:44:26.267 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 22:44:26.269 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "249a33a7-fece-4c9e-b66b-a5739b020906",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "HWvzfb2ravB8HdjnvcUfHJvkZBBL57zuWYrqwBdA",
  "Nonce": "HWvzfb2ravB8HdjnvcUfHJvkZBBL57zuWYrqwBdA",
  "SessionId": "eedcfd77521bf222da999068d84b0230",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "HWvzfb2ravB8HdjnvcUfHJvkZBBL57zuWYrqwBdA",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "HWvzfb2ravB8HdjnvcUfHJvkZBBL57zuWYrqwBdA"
  }
}
2018-08-27 22:44:26.303 -03:00 [DBG] 6MePV6c2OonQ4rqXzvss/w/x1+ZkNaDu0HHLbNt7WN8= found in database: false
2018-08-27 22:44:26.305 -03:00 [DBG] user_consent grant with value: UserManagementUI|249a33a7-fece-4c9e-b66b-a5739b020906 not found in store.
2018-08-27 22:44:26.308 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 22:44:26.310 -03:00 [INF] Showing consent: User has not yet consented
2018-08-27 22:44:26.340 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 22:44:26.352 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 22:44:26.356 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 22:44:26.365 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:44:26.370 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 22:44:26.373 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:44:26.376 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 22:44:26.388 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 22:44:26.392 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 22:44:26.397 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:44:28.973 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 22:44:29.005 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 22:44:29.019 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 22:44:29.023 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 22:44:29.027 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:44:29.031 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 22:44:29.035 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:44:29.037 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 22:44:29.054 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 22:44:29.056 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 22:44:29.058 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 22:44:29.059 -03:00 [DBG] Start authorize callback request
2018-08-27 22:44:29.064 -03:00 [DBG] User in authorize request: 249a33a7-fece-4c9e-b66b-a5739b020906
2018-08-27 22:44:29.065 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 22:44:29.079 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 22:44:29.083 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 22:44:29.086 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:44:29.090 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-27 22:44:29.092 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:44:29.093 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 22:44:29.097 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "249a33a7-fece-4c9e-b66b-a5739b020906",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email",
  "State": "HWvzfb2ravB8HdjnvcUfHJvkZBBL57zuWYrqwBdA",
  "Nonce": "HWvzfb2ravB8HdjnvcUfHJvkZBBL57zuWYrqwBdA",
  "SessionId": "eedcfd77521bf222da999068d84b0230",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "HWvzfb2ravB8HdjnvcUfHJvkZBBL57zuWYrqwBdA",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email",
    "nonce": "HWvzfb2ravB8HdjnvcUfHJvkZBBL57zuWYrqwBdA"
  }
}
2018-08-27 22:44:29.105 -03:00 [DBG] 6MePV6c2OonQ4rqXzvss/w/x1+ZkNaDu0HHLbNt7WN8= found in database: false
2018-08-27 22:44:29.108 -03:00 [DBG] user_consent grant with value: UserManagementUI|249a33a7-fece-4c9e-b66b-a5739b020906 not found in store.
2018-08-27 22:44:29.110 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 22:44:29.113 -03:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-08-27 22:44:29.115 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email"]
2018-08-27 22:44:29.119 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 249a33a7-fece-4c9e-b66b-a5739b020906
2018-08-27 22:44:29.132 -03:00 [DBG] 6MePV6c2OonQ4rqXzvss/w/x1+ZkNaDu0HHLbNt7WN8= not found in database
2018-08-27 22:44:29.162 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 22:44:29.170 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 22:44:29.172 -03:00 [DBG] Getting claims for access token for subject: 249a33a7-fece-4c9e-b66b-a5739b020906
2018-08-27 22:44:29.203 -03:00 [DBG] mMycxEPsJKjMLpYJwSqJB7KEnHBTz9gJ7AKB5cnhQEI= not found in database
2018-08-27 22:44:29.218 -03:00 [DBG] Getting claims for identity token for subject: 249a33a7-fece-4c9e-b66b-a5739b020906 and client: UserManagementUI
2018-08-27 22:44:29.219 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 22:44:29.267 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "249a33a7-fece-4c9e-b66b-a5739b020906",
  "Scopes": "openid profile email",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****rr4w"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****0c24"
    }
  ],
  "ActivityId": "0HLGCGV0H2PKB:0000000A",
  "TimeStamp": "2018-08-28T01:44:29Z",
  "ProcessId": 236,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 22:44:29.277 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "249a33a7-fece-4c9e-b66b-a5739b020906",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "HWvzfb2ravB8HdjnvcUfHJvkZBBL57zuWYrqwBdA",
  "Scope": "openid profile email"
}
2018-08-27 22:44:29.293 -03:00 [DBG] Augmenting SignInContext
2018-08-27 22:44:29.293 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 22:44:30.744 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 22:44:30.749 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 22:44:30.751 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 22:44:30.753 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 22:44:30.755 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 22:44:30.758 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 22:44:30.759 -03:00 [DBG] Start discovery request
2018-08-27 22:44:30.770 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 22:44:30.792 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 22:44:30.796 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 22:44:30.798 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 22:44:30.800 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 22:44:30.801 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 22:44:30.805 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 22:44:30.807 -03:00 [DBG] Start key discovery request
2018-08-27 22:46:11.789 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 22:46:11.794 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 22:46:11.798 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 22:46:11.799 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 22:46:11.803 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 22:46:11.805 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 22:46:11.807 -03:00 [DBG] Start discovery request
2018-08-27 22:46:11.818 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 22:46:11.876 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 22:46:11.881 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 22:46:11.883 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 22:46:11.884 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 22:46:11.886 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 22:46:11.891 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 22:46:11.894 -03:00 [DBG] Start key discovery request
2018-08-27 22:46:11.934 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 22:46:11.939 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 22:46:11.941 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 22:46:11.943 -03:00 [DBG] Start authorize request
2018-08-27 22:46:11.944 -03:00 [DBG] User in authorize request: 249a33a7-fece-4c9e-b66b-a5739b020906
2018-08-27 22:46:11.947 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 22:46:11.960 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 22:46:11.967 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 22:46:11.974 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:46:11.978 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 22:46:11.980 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:46:11.982 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 22:46:11.985 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "249a33a7-fece-4c9e-b66b-a5739b020906",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "0sn9r6lgV9TGOsrJYJIJchH6qQp4jx1ezL4gl81n",
  "Nonce": "0sn9r6lgV9TGOsrJYJIJchH6qQp4jx1ezL4gl81n",
  "SessionId": "eedcfd77521bf222da999068d84b0230",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "0sn9r6lgV9TGOsrJYJIJchH6qQp4jx1ezL4gl81n",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "0sn9r6lgV9TGOsrJYJIJchH6qQp4jx1ezL4gl81n"
  }
}
2018-08-27 22:46:12.000 -03:00 [DBG] 6MePV6c2OonQ4rqXzvss/w/x1+ZkNaDu0HHLbNt7WN8= found in database: true
2018-08-27 22:46:12.005 -03:00 [DBG] Consent found in consent store is different than current request, consent is required
2018-08-27 22:46:12.007 -03:00 [INF] Showing consent: User has not yet consented
2018-08-27 22:46:12.019 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 22:46:12.033 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 22:46:12.037 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 22:46:12.040 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:46:12.044 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 22:46:12.047 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:46:12.048 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 22:46:12.059 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 22:46:12.063 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 22:46:12.067 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:46:18.804 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 22:46:18.809 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 22:46:18.821 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 22:46:18.825 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 22:46:18.827 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:46:18.830 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 22:46:18.832 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:46:18.833 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 22:46:18.842 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 22:46:18.843 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 22:46:18.846 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 22:46:18.848 -03:00 [DBG] Start authorize callback request
2018-08-27 22:46:18.849 -03:00 [DBG] User in authorize request: 249a33a7-fece-4c9e-b66b-a5739b020906
2018-08-27 22:46:18.850 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 22:46:18.859 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 22:46:18.864 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 22:46:18.867 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:46:18.870 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 22:46:18.874 -03:00 [DBG] Found [] API scopes in database
2018-08-27 22:46:18.875 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 22:46:18.876 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "249a33a7-fece-4c9e-b66b-a5739b020906",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "0sn9r6lgV9TGOsrJYJIJchH6qQp4jx1ezL4gl81n",
  "Nonce": "0sn9r6lgV9TGOsrJYJIJchH6qQp4jx1ezL4gl81n",
  "SessionId": "eedcfd77521bf222da999068d84b0230",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "0sn9r6lgV9TGOsrJYJIJchH6qQp4jx1ezL4gl81n",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "0sn9r6lgV9TGOsrJYJIJchH6qQp4jx1ezL4gl81n"
  }
}
2018-08-27 22:46:18.885 -03:00 [DBG] 6MePV6c2OonQ4rqXzvss/w/x1+ZkNaDu0HHLbNt7WN8= found in database: true
2018-08-27 22:46:18.888 -03:00 [DBG] Consent found in consent store is different than current request, consent is required
2018-08-27 22:46:18.890 -03:00 [INF] User consented to scopes: ["openid","profile","email","picture"]
2018-08-27 22:46:18.891 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","picture"]
2018-08-27 22:46:18.893 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 249a33a7-fece-4c9e-b66b-a5739b020906
2018-08-27 22:46:18.898 -03:00 [DBG] 6MePV6c2OonQ4rqXzvss/w/x1+ZkNaDu0HHLbNt7WN8= found in database
2018-08-27 22:46:18.963 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 22:46:18.963 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 22:46:18.964 -03:00 [DBG] Getting claims for access token for subject: 249a33a7-fece-4c9e-b66b-a5739b020906
2018-08-27 22:46:18.975 -03:00 [DBG] 4nYXWwKMjcHGJ1sn3VY/BbfFkmCbWjL90IOTBygPP34= not found in database
2018-08-27 22:46:18.982 -03:00 [DBG] Getting claims for identity token for subject: 249a33a7-fece-4c9e-b66b-a5739b020906 and client: UserManagementUI
2018-08-27 22:46:18.983 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 22:46:18.989 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "249a33a7-fece-4c9e-b66b-a5739b020906",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****SNpQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****4eb6"
    }
  ],
  "ActivityId": "0HLGCGV0H2PK9:00000009",
  "TimeStamp": "2018-08-28T01:46:18Z",
  "ProcessId": 236,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 22:46:18.993 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "249a33a7-fece-4c9e-b66b-a5739b020906",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "0sn9r6lgV9TGOsrJYJIJchH6qQp4jx1ezL4gl81n",
  "Scope": "openid profile email picture"
}
2018-08-27 22:46:20.507 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 22:46:20.513 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 22:46:20.516 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 22:46:20.519 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 22:46:20.524 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 22:46:20.527 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 22:46:20.530 -03:00 [DBG] Start discovery request
2018-08-27 22:46:20.549 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 22:46:20.600 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 22:46:20.617 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 22:46:20.618 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 22:46:20.619 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 22:46:20.622 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 22:46:20.624 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 22:46:20.626 -03:00 [DBG] Start key discovery request
2018-08-27 22:59:52.609 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 22:59:52.634 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 22:59:52.636 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 22:59:52.639 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 22:59:52.645 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "249a33a7-fece-4c9e-b66b-a5739b020906",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGCGV0H2PKE:00000003",
  "TimeStamp": "2018-08-28T01:59:52Z",
  "ProcessId": 236,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 22:59:53.025 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 22:59:53.032 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 22:59:53.033 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 22:59:53.041 -03:00 [DBG] Processing signout callback request
2018-08-27 22:59:53.363 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 22:59:53.365 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 22:59:53.366 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 22:59:53.367 -03:00 [INF] Successful signout callback.
2018-08-27 22:59:53.367 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 22:59:53.368 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 22:59:55.882 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-27 23:00:00.379 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 23:00:00.437 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "102696868227620762147",
  "SubjectId": "249a33a7-fece-4c9e-b66b-a5739b020906",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCGV0H2PKF:0000000D",
  "TimeStamp": "2018-08-28T02:00:00Z",
  "ProcessId": 236,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 23:00:00.441 -03:00 [DBG] Augmenting SignInContext
2018-08-27 23:00:00.442 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 23:00:00.444 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 23:00:00.446 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 23:00:15.111 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 23:00:15.116 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 23:00:15.118 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 23:00:15.120 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 23:00:15.123 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "249a33a7-fece-4c9e-b66b-a5739b020906",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGCGV0H2PKF:00000012",
  "TimeStamp": "2018-08-28T02:00:15Z",
  "ProcessId": 236,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 23:00:25.045 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-27 23:00:25.722 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 23:00:25.747 -03:00 [WRN] User 19c3a55e-f2b7-432e-bf7f-f3c126aacade validation failed: DuplicateUserName.
2018-08-27 23:00:28.504 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-27 23:00:32.730 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 23:00:32.753 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "102696868227620762147",
  "SubjectId": "249a33a7-fece-4c9e-b66b-a5739b020906",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCGV0H2PKE:00000011",
  "TimeStamp": "2018-08-28T02:00:32Z",
  "ProcessId": 236,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 23:00:32.758 -03:00 [DBG] Augmenting SignInContext
2018-08-27 23:00:32.759 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 23:00:32.761 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 23:00:32.763 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 23:00:36.522 -03:00 [DBG] 3 persisted grants found for 249a33a7-fece-4c9e-b66b-a5739b020906
2018-08-27 23:00:36.543 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:00:36.551 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:00:36.558 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:02:58.638 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-27 23:02:58.659 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-27 23:02:58.659 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-27 23:02:58.659 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-27 23:02:58.660 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-27 23:02:58.731 -03:00 [DBG] Starting token cleanup
2018-08-27 23:03:06.118 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 23:03:06.173 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 23:03:06.175 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 23:03:06.176 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 23:03:06.196 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "249a33a7-fece-4c9e-b66b-a5739b020906",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGCH9I0PLRB:00000002",
  "TimeStamp": "2018-08-28T02:03:06Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 23:03:33.546 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:03:33.657 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:03:33.663 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:03:33.665 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:03:33.669 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:03:33.670 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:03:33.674 -03:00 [DBG] Start discovery request
2018-08-27 23:03:33.924 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:03:33.962 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:03:33.968 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:03:33.970 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:03:33.972 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:03:33.976 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:03:33.977 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:03:33.982 -03:00 [DBG] Start key discovery request
2018-08-27 23:03:34.020 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 23:03:34.026 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 23:03:34.030 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 23:03:34.037 -03:00 [DBG] Start authorize request
2018-08-27 23:03:34.043 -03:00 [DBG] No user present in authorize request
2018-08-27 23:03:34.048 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 23:03:34.215 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:03:34.254 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:03:34.288 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:03:34.296 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:03:34.299 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:03:34.306 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 23:03:34.314 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "ieVFPYkh7Ww5aYfot8UojOs87mtpE0s3IEiSFQEX",
  "Nonce": "ieVFPYkh7Ww5aYfot8UojOs87mtpE0s3IEiSFQEX",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "ieVFPYkh7Ww5aYfot8UojOs87mtpE0s3IEiSFQEX",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "ieVFPYkh7Ww5aYfot8UojOs87mtpE0s3IEiSFQEX"
  }
}
2018-08-27 23:03:34.324 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 23:03:34.343 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 23:03:34.356 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:03:34.361 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:03:34.365 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:03:34.370 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:03:34.373 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:03:34.376 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 23:03:34.385 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:03:38.962 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-27 23:03:43.530 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 23:03:43.702 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "102696868227620762147",
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCH9I0PLR8:0000000C",
  "TimeStamp": "2018-08-28T02:03:43Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 23:03:43.713 -03:00 [DBG] Augmenting SignInContext
2018-08-27 23:03:43.717 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 23:03:43.719 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 23:03:43.721 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 23:03:43.737 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 23:03:43.739 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 23:03:43.741 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 23:03:43.746 -03:00 [DBG] Start authorize callback request
2018-08-27 23:03:43.750 -03:00 [DBG] User in authorize request: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-27 23:03:43.751 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 23:03:43.761 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:03:43.766 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:03:43.769 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:03:43.772 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:03:43.774 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:03:43.776 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 23:03:43.777 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "ieVFPYkh7Ww5aYfot8UojOs87mtpE0s3IEiSFQEX",
  "Nonce": "ieVFPYkh7Ww5aYfot8UojOs87mtpE0s3IEiSFQEX",
  "SessionId": "6798756e040aaf100a704da6bbfe612c",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "ieVFPYkh7Ww5aYfot8UojOs87mtpE0s3IEiSFQEX",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "ieVFPYkh7Ww5aYfot8UojOs87mtpE0s3IEiSFQEX"
  }
}
2018-08-27 23:03:43.821 -03:00 [DBG] dNsKvdOaVVSYnWYeunkn1dwRkQz+bV+gEiP/tJjhjZQ= found in database: false
2018-08-27 23:03:43.823 -03:00 [DBG] user_consent grant with value: UserManagementUI|78dac1db-1c66-432f-aaf3-d728c490ec79 not found in store.
2018-08-27 23:03:43.824 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 23:03:43.825 -03:00 [INF] Showing consent: User has not yet consented
2018-08-27 23:03:43.854 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 23:03:43.866 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:03:43.870 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:03:43.874 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:03:43.878 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:03:43.881 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:03:43.883 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 23:03:43.896 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:03:43.901 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:03:43.904 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:03:50.228 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-27 23:03:50.252 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 23:03:50.264 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:03:50.269 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:03:50.273 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:03:50.278 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:03:50.282 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:03:50.284 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 23:03:50.303 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 23:03:50.305 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 23:03:50.307 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 23:03:50.309 -03:00 [DBG] Start authorize callback request
2018-08-27 23:03:50.314 -03:00 [DBG] User in authorize request: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-27 23:03:50.316 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 23:03:50.330 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:03:50.335 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:03:50.338 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:03:50.341 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:03:50.345 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:03:50.346 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 23:03:50.348 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "ieVFPYkh7Ww5aYfot8UojOs87mtpE0s3IEiSFQEX",
  "Nonce": "ieVFPYkh7Ww5aYfot8UojOs87mtpE0s3IEiSFQEX",
  "SessionId": "6798756e040aaf100a704da6bbfe612c",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "ieVFPYkh7Ww5aYfot8UojOs87mtpE0s3IEiSFQEX",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "ieVFPYkh7Ww5aYfot8UojOs87mtpE0s3IEiSFQEX"
  }
}
2018-08-27 23:03:50.358 -03:00 [DBG] dNsKvdOaVVSYnWYeunkn1dwRkQz+bV+gEiP/tJjhjZQ= found in database: false
2018-08-27 23:03:50.359 -03:00 [DBG] user_consent grant with value: UserManagementUI|78dac1db-1c66-432f-aaf3-d728c490ec79 not found in store.
2018-08-27 23:03:50.360 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-27 23:03:50.364 -03:00 [INF] User consented to scopes: ["openid","profile","email","picture"]
2018-08-27 23:03:50.367 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","picture"]
2018-08-27 23:03:50.370 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-27 23:03:50.383 -03:00 [DBG] dNsKvdOaVVSYnWYeunkn1dwRkQz+bV+gEiP/tJjhjZQ= not found in database
2018-08-27 23:03:50.427 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 23:03:50.436 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 23:03:50.436 -03:00 [DBG] Getting claims for access token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-27 23:03:50.466 -03:00 [DBG] 7v/MOYZTPpC0zlferwmvIpIq2nn3vIOIWnmShWDybjo= not found in database
2018-08-27 23:03:50.488 -03:00 [DBG] Getting claims for identity token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79 and client: UserManagementUI
2018-08-27 23:03:50.491 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 23:03:50.556 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****_Ypw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****ff3c"
    }
  ],
  "ActivityId": "0HLGCH9I0PLR8:00000012",
  "TimeStamp": "2018-08-28T02:03:50Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 23:03:50.569 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "ieVFPYkh7Ww5aYfot8UojOs87mtpE0s3IEiSFQEX",
  "Scope": "openid profile email picture"
}
2018-08-27 23:03:50.581 -03:00 [DBG] Augmenting SignInContext
2018-08-27 23:03:50.581 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 23:03:52.293 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:03:52.298 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:03:52.300 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:03:52.302 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:03:52.303 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:03:52.305 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:03:52.309 -03:00 [DBG] Start discovery request
2018-08-27 23:03:52.320 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:03:52.376 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:03:52.380 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:03:52.381 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:03:52.382 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:03:52.384 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:03:52.385 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:03:52.390 -03:00 [DBG] Start key discovery request
2018-08-27 23:09:47.685 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:09:48.059 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:09:48.061 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:09:48.062 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:09:48.064 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:09:48.065 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:09:48.067 -03:00 [DBG] Start discovery request
2018-08-27 23:09:48.098 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:09:48.193 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:09:48.198 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:09:48.199 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:09:48.200 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:09:48.203 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:09:48.207 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:09:48.209 -03:00 [DBG] Start key discovery request
2018-08-27 23:09:48.332 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:09:48.336 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:09:48.338 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:09:48.458 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:09:48.467 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:09:48.469 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:09:48.470 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 23:09:48.472 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:09:48.475 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 23:09:48.477 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 23:09:48.479 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:09:48.480 -03:00 [DBG] Start authorize request
2018-08-27 23:09:48.485 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:09:48.486 -03:00 [DBG] User in authorize request: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-27 23:09:48.489 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 23:09:48.498 -03:00 [DBG] Start userinfo request
2018-08-27 23:09:48.503 -03:00 [DBG] Bearer token found in header
2018-08-27 23:09:48.541 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:09:48.549 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:09:48.557 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:09:48.560 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:09:48.564 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:09:48.566 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 23:09:48.567 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "XmzhCE1egTbeAc4OCJ9YvPmXF9OmsoL97GXG2tGp",
  "Nonce": "XmzhCE1egTbeAc4OCJ9YvPmXF9OmsoL97GXG2tGp",
  "SessionId": "6798756e040aaf100a704da6bbfe612c",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "XmzhCE1egTbeAc4OCJ9YvPmXF9OmsoL97GXG2tGp",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "XmzhCE1egTbeAc4OCJ9YvPmXF9OmsoL97GXG2tGp"
  }
}
2018-08-27 23:09:48.586 -03:00 [DBG] dNsKvdOaVVSYnWYeunkn1dwRkQz+bV+gEiP/tJjhjZQ= found in database: true
2018-08-27 23:09:48.591 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 23:09:48.592 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 23:09:48.593 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 23:09:48.593 -03:00 [DBG] Getting claims for access token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-27 23:09:48.594 -03:00 [DBG] 7v/MOYZTPpC0zlferwmvIpIq2nn3vIOIWnmShWDybjo= found in database: true
2018-08-27 23:09:48.626 -03:00 [DBG] GHjypHgtCjlhgxDLlU8QAFRfK3gF6vgk/e4jicg9yos= not found in database
2018-08-27 23:09:48.628 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:09:48.638 -03:00 [DBG] Getting claims for identity token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79 and client: UserManagementUI
2018-08-27 23:09:48.640 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 23:09:48.645 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****bnCA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****c274"
    }
  ],
  "ActivityId": "0HLGCH9I0PLRE:00000001",
  "TimeStamp": "2018-08-28T02:09:48Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 23:09:48.647 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:09:48.650 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "XmzhCE1egTbeAc4OCJ9YvPmXF9OmsoL97GXG2tGp",
  "Scope": "openid profile email picture"
}
2018-08-27 23:09:48.665 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:09:48.672 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "fd3159e961a5c6592395040d59efad9b6c0cf274fa5ddf27e685ddc43ce0ff3c",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535421830,
    "exp": 1535425430,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535421823,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:09:48.690 -03:00 [DBG] Creating userinfo response
2018-08-27 23:09:48.693 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:09:48.696 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:09:48.702 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:09:48.707 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:09:48.708 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:09:48.716 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:09:48.811 -03:00 [INF] {
  "Name": "Unhandled Exception",
  "Category": "Error",
  "EventType": "Error",
  "Id": 3000,
  "Details": "System.OperationCanceledException: The operation was canceled.\r\n   at System.Threading.CancellationToken.ThrowOperationCanceledException()\r\n   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.FindByIdAsync(String userId, CancellationToken cancellationToken)\r\n   at IdentityServer4.AspNetIdentity.ProfileService`1.GetProfileDataAsync(ProfileDataRequestContext context) in C:\\local\\identity\\server4\\AspNetIdentity\\src\\IdentityServer4.AspNetIdentity\\ProfileService.cs:line 43\r\n   at IdentityServer4.ResponseHandling.UserInfoResponseGenerator.ProcessAsync(UserInfoRequestValidationResult validationResult) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\ResponseHandling\\UserInfoResponseGenerator.cs:line 79\r\n   at IdentityServer4.Endpoints.UserInfoEndpoint.ProcessUserInfoRequestAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\UserInfoEndpoint.cs:line 89\r\n   at IdentityServer4.Endpoints.UserInfoEndpoint.ProcessAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\UserInfoEndpoint.cs:line 60\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Hosting\\IdentityServerMiddleware.cs:line 54",
  "Message": "The operation was canceled.",
  "ActivityId": "0HLGCH9I0PLRD:00000004",
  "TimeStamp": "2018-08-28T02:09:48Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 23:09:48.818 -03:00 [FTL] Unhandled exception: The operation was canceled.
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.FindByIdAsync(String userId, CancellationToken cancellationToken)
   at IdentityServer4.AspNetIdentity.ProfileService`1.GetProfileDataAsync(ProfileDataRequestContext context) in C:\local\identity\server4\AspNetIdentity\src\IdentityServer4.AspNetIdentity\ProfileService.cs:line 43
   at IdentityServer4.ResponseHandling.UserInfoResponseGenerator.ProcessAsync(UserInfoRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\ResponseHandling\UserInfoResponseGenerator.cs:line 79
   at IdentityServer4.Endpoints.UserInfoEndpoint.ProcessUserInfoRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\UserInfoEndpoint.cs:line 89
   at IdentityServer4.Endpoints.UserInfoEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\UserInfoEndpoint.cs:line 60
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
2018-08-27 23:09:48.854 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.FindByIdAsync(String userId, CancellationToken cancellationToken)
   at IdentityServer4.AspNetIdentity.ProfileService`1.GetProfileDataAsync(ProfileDataRequestContext context) in C:\local\identity\server4\AspNetIdentity\src\IdentityServer4.AspNetIdentity\ProfileService.cs:line 43
   at IdentityServer4.ResponseHandling.UserInfoResponseGenerator.ProcessAsync(UserInfoRequestValidationResult validationResult) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\ResponseHandling\UserInfoResponseGenerator.cs:line 79
   at IdentityServer4.Endpoints.UserInfoEndpoint.ProcessUserInfoRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\UserInfoEndpoint.cs:line 89
   at IdentityServer4.Endpoints.UserInfoEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\UserInfoEndpoint.cs:line 60
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 69
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2018-08-27 23:09:53.383 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:09:53.387 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:09:53.388 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:09:53.390 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:09:53.391 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:09:53.397 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:09:53.399 -03:00 [DBG] Start discovery request
2018-08-27 23:09:53.411 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:09:53.487 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:09:53.492 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:09:53.494 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:09:53.496 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:09:53.499 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:09:53.502 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:09:53.503 -03:00 [DBG] Start key discovery request
2018-08-27 23:09:54.843 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:09:54.847 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:09:54.848 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:09:54.848 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:09:54.850 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:09:54.852 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:09:54.853 -03:00 [DBG] Start discovery request
2018-08-27 23:09:54.866 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:09:55.124 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:09:55.130 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:09:55.135 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:09:55.137 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:09:55.141 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:09:55.142 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:09:55.145 -03:00 [DBG] Start key discovery request
2018-08-27 23:09:56.686 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:09:56.689 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:09:56.690 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:09:56.747 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:09:56.751 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:09:56.752 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:09:56.754 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:09:56.755 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:09:56.757 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:09:56.761 -03:00 [DBG] Start userinfo request
2018-08-27 23:09:56.761 -03:00 [DBG] Bearer token found in header
2018-08-27 23:09:56.765 -03:00 [DBG] GHjypHgtCjlhgxDLlU8QAFRfK3gF6vgk/e4jicg9yos= found in database: true
2018-08-27 23:09:56.784 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:09:56.796 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:09:56.803 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:09:56.805 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "81e52b5d2e6b13219d7dc2eee97ca38f2b159c380e2e9c6bd2f2d05fc700c274",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422188,
    "exp": 1535425788,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535421823,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:09:56.810 -03:00 [DBG] Creating userinfo response
2018-08-27 23:09:56.811 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:09:56.813 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:09:56.820 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:09:56.821 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:09:56.823 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:09:56.828 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:09:56.835 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:09:56.837 -03:00 [DBG] End userinfo request
2018-08-27 23:12:23.116 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:12:23.120 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:12:23.121 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:12:23.122 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:12:23.124 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:12:23.125 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:12:23.127 -03:00 [DBG] Start discovery request
2018-08-27 23:12:23.150 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:12:23.423 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:12:23.425 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:12:23.426 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:12:23.428 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:12:23.430 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:12:23.431 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:12:23.436 -03:00 [DBG] Start discovery request
2018-08-27 23:12:23.448 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:12:23.649 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:12:23.653 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:12:23.655 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:12:23.658 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:12:23.661 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:12:23.665 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:12:23.668 -03:00 [DBG] Start key discovery request
2018-08-27 23:12:23.721 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:12:23.726 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:12:23.728 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:12:23.731 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:12:23.734 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:12:23.738 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:12:23.740 -03:00 [DBG] Start key discovery request
2018-08-27 23:12:23.860 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:12:23.864 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:12:23.867 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:12:23.994 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:12:23.999 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:12:24.001 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:12:24.002 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:12:24.005 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:12:24.006 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:12:24.011 -03:00 [DBG] Start userinfo request
2018-08-27 23:12:24.012 -03:00 [DBG] Bearer token found in header
2018-08-27 23:12:24.015 -03:00 [DBG] GHjypHgtCjlhgxDLlU8QAFRfK3gF6vgk/e4jicg9yos= found in database: true
2018-08-27 23:12:24.043 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:12:24.055 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:12:24.059 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:12:24.060 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "81e52b5d2e6b13219d7dc2eee97ca38f2b159c380e2e9c6bd2f2d05fc700c274",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422188,
    "exp": 1535425788,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535421823,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:12:24.067 -03:00 [DBG] Creating userinfo response
2018-08-27 23:12:24.067 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:12:24.069 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:12:24.073 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:12:24.077 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:12:24.079 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:12:24.083 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:12:24.088 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:12:24.089 -03:00 [DBG] End userinfo request
2018-08-27 23:13:32.596 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:13:32.599 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:13:32.601 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:13:32.602 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:13:32.604 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:13:32.605 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:13:32.610 -03:00 [DBG] Start discovery request
2018-08-27 23:13:32.619 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:13:32.655 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:13:32.658 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:13:32.660 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:13:32.661 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:13:32.663 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:13:32.664 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:13:32.666 -03:00 [DBG] Start key discovery request
2018-08-27 23:13:32.863 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:13:32.866 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:13:32.868 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:13:32.869 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:13:32.870 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:13:32.872 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:13:32.877 -03:00 [DBG] Start discovery request
2018-08-27 23:13:32.888 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:13:33.142 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:13:33.148 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:13:33.149 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:13:33.150 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:13:33.153 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:13:33.155 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:13:33.158 -03:00 [DBG] Start key discovery request
2018-08-27 23:13:33.283 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:13:33.288 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:13:33.289 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:13:33.451 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:13:33.462 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:13:33.465 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:13:33.469 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:13:33.474 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:13:33.477 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:13:33.479 -03:00 [DBG] Start userinfo request
2018-08-27 23:13:33.480 -03:00 [DBG] Bearer token found in header
2018-08-27 23:13:33.483 -03:00 [DBG] GHjypHgtCjlhgxDLlU8QAFRfK3gF6vgk/e4jicg9yos= found in database: true
2018-08-27 23:13:33.502 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:13:33.510 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:13:33.518 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:13:33.519 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "81e52b5d2e6b13219d7dc2eee97ca38f2b159c380e2e9c6bd2f2d05fc700c274",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422188,
    "exp": 1535425788,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535421823,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:13:33.522 -03:00 [DBG] Creating userinfo response
2018-08-27 23:13:33.525 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:13:33.527 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:13:33.531 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:13:33.532 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:13:33.535 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:13:33.538 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:13:33.546 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:13:33.547 -03:00 [DBG] End userinfo request
2018-08-27 23:13:40.779 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:13:40.782 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:13:40.784 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:13:40.785 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:13:40.787 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:13:40.789 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:13:40.793 -03:00 [DBG] Start discovery request
2018-08-27 23:13:40.803 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:13:41.234 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:13:41.237 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:13:41.239 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:13:41.240 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:13:41.242 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:13:41.244 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:13:41.249 -03:00 [DBG] Start discovery request
2018-08-27 23:13:41.260 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:13:41.411 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:13:41.415 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:13:41.416 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:13:41.417 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:13:41.419 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:13:41.421 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:13:41.422 -03:00 [DBG] Start key discovery request
2018-08-27 23:13:41.463 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:13:41.467 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:13:41.470 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:13:41.472 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:13:41.477 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:13:41.479 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:13:41.481 -03:00 [DBG] Start key discovery request
2018-08-27 23:13:41.604 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:13:41.607 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:13:41.610 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:13:41.729 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:13:41.732 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:13:41.734 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:13:41.735 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:13:41.738 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:13:41.740 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:13:41.744 -03:00 [DBG] Start userinfo request
2018-08-27 23:13:41.745 -03:00 [DBG] Bearer token found in header
2018-08-27 23:13:41.748 -03:00 [DBG] GHjypHgtCjlhgxDLlU8QAFRfK3gF6vgk/e4jicg9yos= found in database: true
2018-08-27 23:13:41.768 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:13:41.780 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:13:41.785 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:13:41.786 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "81e52b5d2e6b13219d7dc2eee97ca38f2b159c380e2e9c6bd2f2d05fc700c274",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422188,
    "exp": 1535425788,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535421823,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:13:41.792 -03:00 [DBG] Creating userinfo response
2018-08-27 23:13:41.793 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:13:41.794 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:13:41.799 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:13:41.801 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:13:41.803 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:13:41.806 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:13:41.815 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:13:41.816 -03:00 [DBG] End userinfo request
2018-08-27 23:13:59.452 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:13:59.456 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:13:59.457 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:13:59.459 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:13:59.461 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:13:59.463 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:13:59.469 -03:00 [DBG] Start discovery request
2018-08-27 23:13:59.480 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:13:59.499 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:13:59.501 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:13:59.502 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:13:59.503 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:13:59.505 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:13:59.506 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:13:59.508 -03:00 [DBG] Start key discovery request
2018-08-27 23:14:00.253 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:14:00.256 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:14:00.257 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:14:00.260 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:14:00.266 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:14:00.273 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:14:00.278 -03:00 [DBG] Start discovery request
2018-08-27 23:14:00.291 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:14:00.500 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:14:00.503 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:14:00.504 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:14:00.506 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:14:00.508 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:14:00.510 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:14:00.513 -03:00 [DBG] Start key discovery request
2018-08-27 23:14:00.623 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:14:00.627 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:14:00.629 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:14:00.749 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:14:00.753 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:14:00.755 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:14:00.756 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:14:00.758 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:14:00.763 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:14:00.765 -03:00 [DBG] Start userinfo request
2018-08-27 23:14:00.766 -03:00 [DBG] Bearer token found in header
2018-08-27 23:14:00.769 -03:00 [DBG] GHjypHgtCjlhgxDLlU8QAFRfK3gF6vgk/e4jicg9yos= found in database: true
2018-08-27 23:14:00.789 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:14:00.797 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:14:00.802 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:14:00.803 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "81e52b5d2e6b13219d7dc2eee97ca38f2b159c380e2e9c6bd2f2d05fc700c274",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422188,
    "exp": 1535425788,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535421823,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:14:00.807 -03:00 [DBG] Creating userinfo response
2018-08-27 23:14:00.807 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:14:00.811 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:14:00.815 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:14:00.816 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:14:00.818 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:14:00.824 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:14:00.828 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:14:00.829 -03:00 [DBG] End userinfo request
2018-08-27 23:14:06.889 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-27 23:14:06.894 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-27 23:14:06.896 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-27 23:14:06.902 -03:00 [DBG] Processing signout request for 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-27 23:14:06.914 -03:00 [DBG] Start end session request validation
2018-08-27 23:14:06.919 -03:00 [DBG] Start identity token validation
2018-08-27 23:14:06.936 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:14:06.937 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-27 23:14:06.973 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:14:06.974 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535422188,
    "exp": 1535422488,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "XmzhCE1egTbeAc4OCJ9YvPmXF9OmsoL97GXG2tGp",
    "iat": 1535422188,
    "at_hash": "6tX8no1QLv7DfibzkLRNtg",
    "sid": "6798756e040aaf100a704da6bbfe612c",
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535421823,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:14:06.979 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzU0MjIxODgsImV4cCI6MTUzNTQyMjQ4OCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiWG16aENFMWVnVGJlQWM0T0NKOVl2UG1YRjlPbXNvTDk3R1hHMnRHcCIsImlhdCI6MTUzNTQyMjE4OCwiYXRfaGFzaCI6IjZ0WDhubzFRTHY3RGZpYnprTFJOdGciLCJzaWQiOiI2Nzk4NzU2ZTA0MGFhZjEwMGE3MDRkYTZiYmZlNjEyYyIsInN1YiI6Ijc4ZGFjMWRiLTFjNjYtNDMyZi1hYWYzLWQ3MjhjNDkwZWM3OSIsImF1dGhfdGltZSI6MTUzNTQyMTgyMywiaWRwIjoiR29vZ2xlIiwiYW1yIjpbImV4dGVybmFsIl19.QpCyv2r8oR3YyGcwrbC45nobFBQ6XkLMzgqakxJOavobakvFHQ-dV0mNB97i_1ZRYdmV9rRoo6ReRT77IBSwfYR-62z0X-jVX0ROwwl0shzLgq2oBZwFdjO_It9PFre6Lfqh41X_B2dUdpA1p76Z4RrlXdS-EjLqLWwpGKB8im-0573E1J5BvzEJo0HX3xkDDUYLB_liIssdsbn9v3SBbCcwZsiDOsmvk0Gyj6ZpM-0GYljtouWnLmWYkTNn9H82AqC1dl02640mCCWXSJseTTCb1zGdjw_y7KxEpRrnHR4WKtImdy67dX8KJNfWF5Gp7bR_B1mblKZi3lGTPFbnCA",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-27 23:14:06.987 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-27 23:14:07.014 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-27 23:14:07.016 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 23:14:07.017 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-27 23:14:07.019 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGCH9I0PLRE:00000003",
  "TimeStamp": "2018-08-28T02:14:07Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 23:14:07.171 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-27 23:14:07.173 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-27 23:14:07.174 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-27 23:14:07.179 -03:00 [DBG] Processing signout callback request
2018-08-27 23:14:07.200 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:14:07.203 -03:00 [DBG] No client front-channel logout URLs
2018-08-27 23:14:07.205 -03:00 [DBG] No client back-channel logout URLs
2018-08-27 23:14:07.206 -03:00 [INF] Successful signout callback.
2018-08-27 23:14:07.208 -03:00 [DBG] No client front-channel iframe urls
2018-08-27 23:14:07.210 -03:00 [DBG] No client back-channel iframe urls
2018-08-27 23:14:09.940 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:14:09.942 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:14:09.943 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:14:09.944 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:14:09.946 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:14:09.947 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:14:09.949 -03:00 [DBG] Start discovery request
2018-08-27 23:14:09.955 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:14:09.986 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:14:09.991 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:14:09.993 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:14:09.994 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:14:09.996 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:14:10.000 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:14:10.002 -03:00 [DBG] Start key discovery request
2018-08-27 23:14:10.051 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 23:14:10.055 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 23:14:10.057 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 23:14:10.060 -03:00 [DBG] Start authorize request
2018-08-27 23:14:10.062 -03:00 [DBG] No user present in authorize request
2018-08-27 23:14:10.066 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 23:14:10.080 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:14:10.084 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:14:10.087 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:14:10.090 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:14:10.094 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:14:10.095 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 23:14:10.096 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "um4EbKIFlOjlBEA1s9kLGvjGrxVFIFEVBohCYl97",
  "Nonce": "um4EbKIFlOjlBEA1s9kLGvjGrxVFIFEVBohCYl97",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "um4EbKIFlOjlBEA1s9kLGvjGrxVFIFEVBohCYl97",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "um4EbKIFlOjlBEA1s9kLGvjGrxVFIFEVBohCYl97"
  }
}
2018-08-27 23:14:10.100 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 23:14:10.108 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 23:14:10.116 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:14:10.119 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:14:10.121 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:14:10.125 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:14:10.127 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:14:10.128 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 23:14:10.135 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:14:14.400 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:14:14.403 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:14:14.405 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:14:14.406 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:14:14.408 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:14:14.413 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:14:14.416 -03:00 [DBG] Start discovery request
2018-08-27 23:14:14.427 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:14:14.449 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:14:14.453 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:14:14.455 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:14:14.455 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:14:14.458 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:14:14.461 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:14:14.464 -03:00 [DBG] Start key discovery request
2018-08-27 23:14:14.541 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 23:14:14.543 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 23:14:14.546 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 23:14:14.550 -03:00 [DBG] Start authorize request
2018-08-27 23:14:14.552 -03:00 [DBG] No user present in authorize request
2018-08-27 23:14:14.555 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 23:14:14.569 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:14:14.573 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:14:14.578 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:14:14.582 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:14:14.586 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:14:14.587 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 23:14:14.588 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "dFxieHlgwRh9Rk6w1nxy2vMUl6JOxlzQuvM1lFtq",
  "Nonce": "dFxieHlgwRh9Rk6w1nxy2vMUl6JOxlzQuvM1lFtq",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "dFxieHlgwRh9Rk6w1nxy2vMUl6JOxlzQuvM1lFtq",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "dFxieHlgwRh9Rk6w1nxy2vMUl6JOxlzQuvM1lFtq"
  }
}
2018-08-27 23:14:14.595 -03:00 [INF] Showing login: User is not authenticated
2018-08-27 23:14:14.609 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 23:14:14.618 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:14:14.622 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:14:14.625 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:14:14.629 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:14:14.632 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:14:14.634 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 23:14:14.644 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:14:49.694 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 23:14:49.707 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:14:49.710 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:14:49.713 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:14:49.717 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:14:49.720 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:14:49.721 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 23:14:49.729 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:14:51.986 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:14:51.989 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:14:51.990 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:14:51.991 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:14:51.993 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:14:51.994 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:14:51.995 -03:00 [DBG] Start discovery request
2018-08-27 23:14:52.001 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:14:52.050 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:14:52.055 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:14:52.056 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:14:52.058 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:14:52.070 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:14:52.071 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:14:52.075 -03:00 [DBG] Start key discovery request
2018-08-27 23:15:28.173 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:15:28.176 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:15:28.178 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:15:28.180 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:15:28.181 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:15:28.183 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:15:28.187 -03:00 [DBG] Start discovery request
2018-08-27 23:15:28.198 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:15:28.236 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:15:28.242 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:15:28.243 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:15:28.245 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:15:28.247 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:15:28.250 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:15:28.252 -03:00 [DBG] Start key discovery request
2018-08-27 23:15:30.780 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 23:15:30.788 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:15:30.792 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:15:30.794 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:15:30.798 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:15:30.801 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:15:30.802 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 23:15:30.812 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:15:33.222 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-27 23:15:37.130 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-27 23:15:37.161 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "102696868227620762147",
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCH9I0PLRE:0000000F",
  "TimeStamp": "2018-08-28T02:15:37Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 23:15:37.163 -03:00 [DBG] Augmenting SignInContext
2018-08-27 23:15:37.164 -03:00 [DBG] Adding amr claim with value: external
2018-08-27 23:15:37.165 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 23:15:37.166 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-27 23:15:37.172 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-27 23:15:37.175 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-27 23:15:37.176 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-27 23:15:37.177 -03:00 [DBG] Start authorize callback request
2018-08-27 23:15:37.178 -03:00 [DBG] User in authorize request: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-27 23:15:37.179 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 23:15:37.188 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:15:37.191 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:15:37.193 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:15:37.196 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:15:37.198 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:15:37.199 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 23:15:37.200 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "um4EbKIFlOjlBEA1s9kLGvjGrxVFIFEVBohCYl97",
  "Nonce": "um4EbKIFlOjlBEA1s9kLGvjGrxVFIFEVBohCYl97",
  "SessionId": "d786d86016de33674665af7c5ce36828",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "um4EbKIFlOjlBEA1s9kLGvjGrxVFIFEVBohCYl97",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "um4EbKIFlOjlBEA1s9kLGvjGrxVFIFEVBohCYl97"
  }
}
2018-08-27 23:15:37.211 -03:00 [DBG] dNsKvdOaVVSYnWYeunkn1dwRkQz+bV+gEiP/tJjhjZQ= found in database: true
2018-08-27 23:15:37.216 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 23:15:37.217 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 23:15:37.217 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 23:15:37.218 -03:00 [DBG] Getting claims for access token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-27 23:15:37.229 -03:00 [DBG] BwSTUbRNn70kTbyz142EFpku3WGqmLvKhx+xOAApfNA= not found in database
2018-08-27 23:15:37.236 -03:00 [DBG] Getting claims for identity token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79 and client: UserManagementUI
2018-08-27 23:15:37.237 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 23:15:37.241 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****V6Rw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****d943"
    }
  ],
  "ActivityId": "0HLGCH9I0PLRE:00000010",
  "TimeStamp": "2018-08-28T02:15:37Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 23:15:37.247 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "um4EbKIFlOjlBEA1s9kLGvjGrxVFIFEVBohCYl97",
  "Scope": "openid profile email picture"
}
2018-08-27 23:15:37.248 -03:00 [DBG] Augmenting SignInContext
2018-08-27 23:15:37.248 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-27 23:15:38.178 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:15:38.181 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:15:38.182 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:15:38.183 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:15:38.185 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:15:38.188 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:15:38.190 -03:00 [DBG] Start discovery request
2018-08-27 23:15:38.197 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:15:38.210 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:15:38.213 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:15:38.214 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:15:38.216 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:15:38.220 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:15:38.222 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:15:38.223 -03:00 [DBG] Start discovery request
2018-08-27 23:15:38.230 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:15:38.249 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:15:38.253 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:15:38.254 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:15:38.256 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:15:38.258 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:15:38.261 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:15:38.263 -03:00 [DBG] Start key discovery request
2018-08-27 23:15:38.272 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:15:38.275 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:15:38.276 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:15:38.277 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:15:38.279 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:15:38.282 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:15:38.285 -03:00 [DBG] Start key discovery request
2018-08-27 23:15:38.336 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-27 23:15:38.338 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-27 23:15:38.341 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-27 23:15:38.343 -03:00 [DBG] Start authorize request
2018-08-27 23:15:38.344 -03:00 [DBG] User in authorize request: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-27 23:15:38.345 -03:00 [DBG] Start authorize request protocol validation
2018-08-27 23:15:38.353 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:15:38.356 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:15:38.358 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:15:38.361 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:15:38.363 -03:00 [DBG] Found [] API scopes in database
2018-08-27 23:15:38.364 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-27 23:15:38.365 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "wGCnjEDZIpiCBzz1uWkrRJbsCrFIv8Zdayc8kDte",
  "Nonce": "wGCnjEDZIpiCBzz1uWkrRJbsCrFIv8Zdayc8kDte",
  "SessionId": "d786d86016de33674665af7c5ce36828",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "wGCnjEDZIpiCBzz1uWkrRJbsCrFIv8Zdayc8kDte",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "wGCnjEDZIpiCBzz1uWkrRJbsCrFIv8Zdayc8kDte"
  }
}
2018-08-27 23:15:38.375 -03:00 [DBG] dNsKvdOaVVSYnWYeunkn1dwRkQz+bV+gEiP/tJjhjZQ= found in database: true
2018-08-27 23:15:38.378 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-27 23:15:38.380 -03:00 [DBG] Creating Implicit Flow response.
2018-08-27 23:15:38.380 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-27 23:15:38.381 -03:00 [DBG] Getting claims for access token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-27 23:15:38.390 -03:00 [DBG] esD6Gyy+b8mM17ebYSq/zBss3QxWrSxGSa2Wdo51Ki8= not found in database
2018-08-27 23:15:38.398 -03:00 [DBG] Getting claims for identity token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79 and client: UserManagementUI
2018-08-27 23:15:38.399 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-27 23:15:38.402 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****9Rbw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****d8b3"
    }
  ],
  "ActivityId": "0HLGCH9I0PLRE:00000011",
  "TimeStamp": "2018-08-28T02:15:38Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-27 23:15:38.406 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "wGCnjEDZIpiCBzz1uWkrRJbsCrFIv8Zdayc8kDte",
  "Scope": "openid profile email picture"
}
2018-08-27 23:15:39.066 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:15:39.069 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:15:39.070 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:15:39.072 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:15:39.074 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:15:39.079 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:15:39.081 -03:00 [DBG] Start discovery request
2018-08-27 23:15:39.092 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:15:39.100 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:15:39.103 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:15:39.105 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:15:39.105 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:15:39.107 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:15:39.111 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:15:39.113 -03:00 [DBG] Start discovery request
2018-08-27 23:15:39.114 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:15:39.119 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:15:39.121 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:15:39.122 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:15:39.125 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:15:39.127 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:15:39.130 -03:00 [DBG] Start key discovery request
2018-08-27 23:15:39.173 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:15:39.181 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:15:39.183 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:15:39.185 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:15:39.186 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:15:39.187 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:15:39.188 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:15:39.189 -03:00 [DBG] Start key discovery request
2018-08-27 23:15:40.410 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:15:40.412 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:15:40.414 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:15:40.709 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:15:40.713 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:15:40.714 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:15:40.716 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:15:40.717 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:15:40.721 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:15:40.723 -03:00 [DBG] Start userinfo request
2018-08-27 23:15:40.723 -03:00 [DBG] Bearer token found in header
2018-08-27 23:15:40.726 -03:00 [DBG] esD6Gyy+b8mM17ebYSq/zBss3QxWrSxGSa2Wdo51Ki8= found in database: true
2018-08-27 23:15:40.744 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:15:40.758 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:15:40.763 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:15:40.765 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "9f67dac5dcec86ea1fa05760d68f1b009aab0495980c60f21a0efb2c627cd8b3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422538,
    "exp": 1535426138,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:15:40.769 -03:00 [DBG] Creating userinfo response
2018-08-27 23:15:40.770 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:15:40.772 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:15:40.778 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:15:40.780 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:15:40.781 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:15:40.787 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:15:40.794 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:15:40.796 -03:00 [DBG] End userinfo request
2018-08-27 23:15:56.887 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:15:56.893 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:15:56.894 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:15:56.896 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:15:56.899 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:15:56.903 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:15:56.906 -03:00 [DBG] Start discovery request
2018-08-27 23:15:56.918 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:15:56.954 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:15:56.961 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:15:56.965 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:15:56.967 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:15:56.972 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:15:56.975 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:15:56.978 -03:00 [DBG] Start key discovery request
2018-08-27 23:15:57.323 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:15:57.327 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:15:57.329 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:15:57.653 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:15:57.658 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:15:57.660 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:15:57.662 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:15:57.668 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:15:57.673 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:15:57.675 -03:00 [DBG] Start userinfo request
2018-08-27 23:15:57.678 -03:00 [DBG] Bearer token found in header
2018-08-27 23:15:57.682 -03:00 [DBG] esD6Gyy+b8mM17ebYSq/zBss3QxWrSxGSa2Wdo51Ki8= found in database: true
2018-08-27 23:15:57.699 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:15:57.711 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:15:57.717 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:15:57.718 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "9f67dac5dcec86ea1fa05760d68f1b009aab0495980c60f21a0efb2c627cd8b3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422538,
    "exp": 1535426138,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:15:57.725 -03:00 [DBG] Creating userinfo response
2018-08-27 23:15:57.725 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:15:57.726 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:15:57.731 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:15:57.733 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:15:57.736 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:15:57.743 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:15:57.748 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:15:57.749 -03:00 [DBG] End userinfo request
2018-08-27 23:17:19.242 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:17:19.246 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:17:19.247 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:17:19.248 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:17:19.250 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:17:19.252 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:17:19.256 -03:00 [DBG] Start discovery request
2018-08-27 23:17:19.267 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:17:19.314 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:17:19.318 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:17:19.320 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:17:19.321 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:17:19.323 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:17:19.326 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:17:19.328 -03:00 [DBG] Start key discovery request
2018-08-27 23:17:19.651 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:17:19.654 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:17:19.655 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:17:19.951 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:17:19.955 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:17:19.956 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:17:19.958 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:17:19.960 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:17:19.962 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:17:19.966 -03:00 [DBG] Start userinfo request
2018-08-27 23:17:19.967 -03:00 [DBG] Bearer token found in header
2018-08-27 23:17:19.970 -03:00 [DBG] esD6Gyy+b8mM17ebYSq/zBss3QxWrSxGSa2Wdo51Ki8= found in database: true
2018-08-27 23:17:19.988 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:17:20.001 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:17:20.006 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:17:20.009 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "9f67dac5dcec86ea1fa05760d68f1b009aab0495980c60f21a0efb2c627cd8b3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422538,
    "exp": 1535426138,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:17:20.013 -03:00 [DBG] Creating userinfo response
2018-08-27 23:17:20.014 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:17:20.021 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:17:20.028 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:17:20.030 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:17:20.034 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:17:20.038 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:17:20.053 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:17:20.054 -03:00 [DBG] End userinfo request
2018-08-27 23:17:20.208 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:17:20.215 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:17:20.218 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:17:20.224 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:17:20.227 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:17:20.234 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:17:20.237 -03:00 [DBG] Start userinfo request
2018-08-27 23:17:20.238 -03:00 [DBG] Bearer token found in header
2018-08-27 23:17:20.241 -03:00 [DBG] esD6Gyy+b8mM17ebYSq/zBss3QxWrSxGSa2Wdo51Ki8= found in database: true
2018-08-27 23:17:20.263 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:17:20.274 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:17:20.279 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:17:20.280 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "9f67dac5dcec86ea1fa05760d68f1b009aab0495980c60f21a0efb2c627cd8b3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422538,
    "exp": 1535426138,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:17:20.297 -03:00 [DBG] Creating userinfo response
2018-08-27 23:17:20.297 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:17:20.299 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:17:20.303 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:17:20.305 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:17:20.310 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:17:20.314 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:17:20.319 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:17:20.320 -03:00 [DBG] End userinfo request
2018-08-27 23:34:29.654 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:34:29.976 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:34:29.977 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:34:29.978 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:34:29.980 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:34:29.982 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:34:29.984 -03:00 [DBG] Start discovery request
2018-08-27 23:34:30.023 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:34:30.389 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:34:30.395 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:34:30.396 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:34:30.397 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:34:30.399 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:34:30.401 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:34:30.405 -03:00 [DBG] Start key discovery request
2018-08-27 23:35:04.617 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:35:04.620 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:35:04.623 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:35:04.624 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:35:04.626 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:35:04.627 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:35:04.632 -03:00 [DBG] Start discovery request
2018-08-27 23:35:04.645 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:35:04.683 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:35:04.687 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:35:04.688 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:35:04.689 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:35:04.691 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:35:04.693 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:35:04.695 -03:00 [DBG] Start key discovery request
2018-08-27 23:35:04.965 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:35:04.968 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:35:04.969 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:35:04.970 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:35:04.972 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:35:04.974 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:35:04.976 -03:00 [DBG] Start discovery request
2018-08-27 23:35:04.989 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:35:05.037 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:35:05.041 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:35:05.042 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:35:05.343 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:35:05.347 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:35:05.348 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:35:05.349 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:35:05.350 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:35:05.352 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:35:05.356 -03:00 [DBG] Start key discovery request
2018-08-27 23:35:05.397 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:35:05.401 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:35:05.402 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:35:05.403 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:35:05.405 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:35:05.407 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:35:05.417 -03:00 [DBG] Start userinfo request
2018-08-27 23:35:05.418 -03:00 [DBG] Bearer token found in header
2018-08-27 23:35:05.435 -03:00 [DBG] esD6Gyy+b8mM17ebYSq/zBss3QxWrSxGSa2Wdo51Ki8= found in database: true
2018-08-27 23:35:05.483 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:35:05.495 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:35:05.503 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:35:05.504 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "9f67dac5dcec86ea1fa05760d68f1b009aab0495980c60f21a0efb2c627cd8b3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422538,
    "exp": 1535426138,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:35:05.507 -03:00 [DBG] Creating userinfo response
2018-08-27 23:35:05.508 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:35:05.511 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:35:05.522 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:35:05.524 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:35:05.526 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:35:05.531 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:35:05.547 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:35:05.549 -03:00 [DBG] End userinfo request
2018-08-27 23:35:05.684 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:35:05.688 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:35:05.690 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:35:05.691 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:35:05.693 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:35:05.694 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:35:05.698 -03:00 [DBG] Start userinfo request
2018-08-27 23:35:05.700 -03:00 [DBG] Bearer token found in header
2018-08-27 23:35:05.703 -03:00 [DBG] esD6Gyy+b8mM17ebYSq/zBss3QxWrSxGSa2Wdo51Ki8= found in database: true
2018-08-27 23:35:05.733 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:35:05.746 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:35:05.752 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:35:05.754 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "9f67dac5dcec86ea1fa05760d68f1b009aab0495980c60f21a0efb2c627cd8b3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422538,
    "exp": 1535426138,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:35:05.758 -03:00 [DBG] Creating userinfo response
2018-08-27 23:35:05.759 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:35:05.760 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:35:05.766 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:35:05.768 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:35:05.770 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:35:05.774 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:35:05.787 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:35:05.789 -03:00 [DBG] End userinfo request
2018-08-27 23:35:25.678 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:35:25.683 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:35:25.687 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:35:25.689 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:35:25.696 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:35:25.702 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:35:25.709 -03:00 [DBG] Start discovery request
2018-08-27 23:35:25.733 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:35:25.788 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:35:25.792 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:35:25.795 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:35:25.796 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:35:25.800 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:35:25.804 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:35:25.807 -03:00 [DBG] Start key discovery request
2018-08-27 23:35:26.207 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:35:26.210 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:35:26.212 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:35:26.519 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:35:26.525 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:35:26.540 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:35:26.542 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:35:26.546 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:35:26.548 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:35:26.553 -03:00 [DBG] Start userinfo request
2018-08-27 23:35:26.553 -03:00 [DBG] Bearer token found in header
2018-08-27 23:35:26.557 -03:00 [DBG] esD6Gyy+b8mM17ebYSq/zBss3QxWrSxGSa2Wdo51Ki8= found in database: true
2018-08-27 23:35:26.577 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:35:26.586 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:35:26.591 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:35:26.592 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "9f67dac5dcec86ea1fa05760d68f1b009aab0495980c60f21a0efb2c627cd8b3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422538,
    "exp": 1535426138,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:35:26.598 -03:00 [DBG] Creating userinfo response
2018-08-27 23:35:26.598 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:35:26.602 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:35:26.606 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:35:26.608 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:35:26.609 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:35:26.613 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:35:26.617 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:35:26.618 -03:00 [DBG] End userinfo request
2018-08-27 23:35:26.723 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:35:26.729 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:35:26.730 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:35:26.732 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:35:26.735 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:35:26.736 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:35:26.740 -03:00 [DBG] Start userinfo request
2018-08-27 23:35:26.741 -03:00 [DBG] Bearer token found in header
2018-08-27 23:35:26.745 -03:00 [DBG] esD6Gyy+b8mM17ebYSq/zBss3QxWrSxGSa2Wdo51Ki8= found in database: true
2018-08-27 23:35:26.768 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:35:26.779 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:35:26.785 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:35:26.786 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "9f67dac5dcec86ea1fa05760d68f1b009aab0495980c60f21a0efb2c627cd8b3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422538,
    "exp": 1535426138,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:35:26.790 -03:00 [DBG] Creating userinfo response
2018-08-27 23:35:26.791 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:35:26.793 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:35:26.798 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:35:26.800 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:35:26.801 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:35:26.804 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:35:26.810 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:35:26.813 -03:00 [DBG] End userinfo request
2018-08-27 23:36:09.256 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:36:09.259 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:36:09.261 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:36:09.261 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:36:09.264 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:36:09.266 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:36:09.268 -03:00 [DBG] Start discovery request
2018-08-27 23:36:09.281 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:36:09.320 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:36:09.324 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:36:09.328 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:36:09.329 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:36:09.333 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:36:09.335 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:36:09.339 -03:00 [DBG] Start key discovery request
2018-08-27 23:36:09.684 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:36:09.687 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:36:09.688 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:36:09.996 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:36:10.000 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:36:10.002 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:36:10.003 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:36:10.005 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:36:10.007 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:36:10.012 -03:00 [DBG] Start userinfo request
2018-08-27 23:36:10.013 -03:00 [DBG] Bearer token found in header
2018-08-27 23:36:10.017 -03:00 [DBG] esD6Gyy+b8mM17ebYSq/zBss3QxWrSxGSa2Wdo51Ki8= found in database: true
2018-08-27 23:36:10.043 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:36:10.055 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:36:10.061 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:36:10.062 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "9f67dac5dcec86ea1fa05760d68f1b009aab0495980c60f21a0efb2c627cd8b3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422538,
    "exp": 1535426138,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:36:10.067 -03:00 [DBG] Creating userinfo response
2018-08-27 23:36:10.068 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:36:10.069 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:36:10.074 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:36:10.077 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:36:10.078 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:36:10.081 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:36:10.087 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:36:10.088 -03:00 [DBG] End userinfo request
2018-08-27 23:36:10.220 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:36:10.223 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:36:10.224 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:36:10.226 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:36:10.228 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:36:10.233 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:36:10.235 -03:00 [DBG] Start userinfo request
2018-08-27 23:36:10.236 -03:00 [DBG] Bearer token found in header
2018-08-27 23:36:10.239 -03:00 [DBG] esD6Gyy+b8mM17ebYSq/zBss3QxWrSxGSa2Wdo51Ki8= found in database: true
2018-08-27 23:36:10.259 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:36:10.268 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:36:10.273 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:36:10.274 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "9f67dac5dcec86ea1fa05760d68f1b009aab0495980c60f21a0efb2c627cd8b3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422538,
    "exp": 1535426138,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:36:10.281 -03:00 [DBG] Creating userinfo response
2018-08-27 23:36:10.282 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:36:10.283 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:36:10.286 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:36:10.287 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:36:10.289 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:36:10.294 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:36:10.299 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:36:10.300 -03:00 [DBG] End userinfo request
2018-08-27 23:36:40.776 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:36:40.779 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:36:40.781 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:36:40.782 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:36:40.784 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:36:40.785 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:36:40.789 -03:00 [DBG] Start discovery request
2018-08-27 23:36:40.798 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:36:40.829 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:36:40.831 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:36:40.833 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:36:40.834 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:36:40.837 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:36:40.841 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:36:40.843 -03:00 [DBG] Start key discovery request
2018-08-27 23:36:41.117 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:36:41.120 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:36:41.121 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:36:41.467 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:36:41.471 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:36:41.472 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:36:41.474 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:36:41.476 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:36:41.481 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:36:41.483 -03:00 [DBG] Start userinfo request
2018-08-27 23:36:41.484 -03:00 [DBG] Bearer token found in header
2018-08-27 23:36:41.488 -03:00 [DBG] esD6Gyy+b8mM17ebYSq/zBss3QxWrSxGSa2Wdo51Ki8= found in database: true
2018-08-27 23:36:41.520 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:36:41.536 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:36:41.544 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:36:41.545 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "9f67dac5dcec86ea1fa05760d68f1b009aab0495980c60f21a0efb2c627cd8b3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422538,
    "exp": 1535426138,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:36:41.561 -03:00 [DBG] Creating userinfo response
2018-08-27 23:36:41.562 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:36:41.564 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:36:41.574 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:36:41.579 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:36:41.582 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:36:41.588 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:36:41.596 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:36:41.598 -03:00 [DBG] End userinfo request
2018-08-27 23:36:47.772 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:36:47.774 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:36:47.774 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:36:47.776 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:36:47.778 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:36:47.779 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:36:47.781 -03:00 [DBG] Start discovery request
2018-08-27 23:36:47.792 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:36:47.822 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:36:47.827 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:36:47.828 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:36:47.829 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:36:47.831 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:36:47.835 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:36:47.837 -03:00 [DBG] Start key discovery request
2018-08-27 23:36:48.143 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:36:48.147 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:36:48.148 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:36:48.439 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:36:48.449 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:36:48.458 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:36:48.460 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:36:48.461 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:36:48.463 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:36:48.466 -03:00 [DBG] Start userinfo request
2018-08-27 23:36:48.467 -03:00 [DBG] Bearer token found in header
2018-08-27 23:36:48.470 -03:00 [DBG] esD6Gyy+b8mM17ebYSq/zBss3QxWrSxGSa2Wdo51Ki8= found in database: true
2018-08-27 23:36:48.491 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:36:48.502 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:36:48.506 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:36:48.507 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "9f67dac5dcec86ea1fa05760d68f1b009aab0495980c60f21a0efb2c627cd8b3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422538,
    "exp": 1535426138,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:36:48.512 -03:00 [DBG] Creating userinfo response
2018-08-27 23:36:48.512 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:36:48.514 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:36:48.518 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:36:48.519 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:36:48.522 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:36:48.525 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:36:48.530 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:36:48.532 -03:00 [DBG] End userinfo request
2018-08-27 23:37:10.331 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:37:10.335 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:37:10.339 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:37:10.340 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:37:10.346 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:37:10.350 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:37:10.357 -03:00 [DBG] Start discovery request
2018-08-27 23:37:10.370 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:37:10.414 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:37:10.418 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:37:10.422 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:37:10.425 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:37:10.429 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:37:10.432 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:37:10.439 -03:00 [DBG] Start key discovery request
2018-08-27 23:37:53.514 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:37:53.518 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:37:53.519 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:37:53.520 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:37:53.522 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:37:53.524 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:37:53.528 -03:00 [DBG] Start discovery request
2018-08-27 23:37:53.539 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:38:05.055 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:38:05.061 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:38:05.062 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:38:05.064 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:38:05.068 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:38:05.070 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:38:05.072 -03:00 [DBG] Start key discovery request
2018-08-27 23:40:09.093 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:40:09.098 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:40:09.100 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:40:09.103 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:40:09.110 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:40:09.114 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:40:09.122 -03:00 [DBG] Start discovery request
2018-08-27 23:40:09.134 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:40:09.184 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:40:09.188 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:40:09.190 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:40:09.191 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:40:09.194 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:40:09.196 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:40:09.199 -03:00 [DBG] Start key discovery request
2018-08-27 23:41:39.557 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:41:39.565 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:41:39.566 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:41:39.568 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:41:39.570 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:41:39.573 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:41:39.575 -03:00 [DBG] Start discovery request
2018-08-27 23:41:39.587 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:41:39.618 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:41:39.623 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:41:39.624 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:41:39.625 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:41:39.628 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:41:39.631 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:41:39.634 -03:00 [DBG] Start key discovery request
2018-08-27 23:41:51.714 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:41:51.717 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:41:51.720 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:41:51.721 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:41:51.724 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:41:51.725 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:41:51.729 -03:00 [DBG] Start discovery request
2018-08-27 23:41:51.746 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:41:51.778 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:41:51.783 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:41:51.784 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:41:51.786 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:41:51.788 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:41:51.793 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:41:51.798 -03:00 [DBG] Start key discovery request
2018-08-27 23:41:52.087 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:41:52.091 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:41:52.092 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:41:52.093 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:41:52.095 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:41:52.097 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:41:52.101 -03:00 [DBG] Start discovery request
2018-08-27 23:41:52.116 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:41:52.391 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:41:52.394 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:41:52.395 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:41:52.397 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:41:52.398 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:41:52.402 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:41:52.404 -03:00 [DBG] Start key discovery request
2018-08-27 23:42:34.632 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:42:34.635 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:42:34.637 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:42:34.638 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:42:34.640 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:42:34.647 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:42:34.649 -03:00 [DBG] Start discovery request
2018-08-27 23:42:34.663 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:42:34.705 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:42:34.711 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:42:34.714 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:42:34.718 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:42:34.725 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:42:34.728 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:42:34.734 -03:00 [DBG] Start key discovery request
2018-08-27 23:42:35.656 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:42:35.660 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:42:35.661 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:42:35.662 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:42:35.663 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:42:35.665 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:42:35.670 -03:00 [DBG] Start discovery request
2018-08-27 23:42:35.681 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:42:35.933 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:42:35.938 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:42:35.940 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:42:36.115 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:42:36.120 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:42:36.122 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:42:36.125 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:42:36.129 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:42:36.131 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:42:36.133 -03:00 [DBG] Start key discovery request
2018-08-27 23:42:36.140 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:42:36.145 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:42:36.146 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:42:36.147 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:42:36.148 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:42:36.149 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:42:36.154 -03:00 [DBG] Start userinfo request
2018-08-27 23:42:36.155 -03:00 [DBG] Bearer token found in header
2018-08-27 23:42:36.157 -03:00 [DBG] esD6Gyy+b8mM17ebYSq/zBss3QxWrSxGSa2Wdo51Ki8= found in database: true
2018-08-27 23:42:36.179 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:42:36.191 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:42:36.196 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:42:36.197 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "9f67dac5dcec86ea1fa05760d68f1b009aab0495980c60f21a0efb2c627cd8b3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422538,
    "exp": 1535426138,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:42:36.202 -03:00 [DBG] Creating userinfo response
2018-08-27 23:42:36.203 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:42:36.204 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:42:36.209 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:42:36.212 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:42:36.214 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:42:36.218 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:42:36.225 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:42:36.226 -03:00 [DBG] End userinfo request
2018-08-27 23:44:10.988 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:44:10.993 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:44:10.995 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:44:10.996 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:44:11.002 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:44:11.008 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:44:11.019 -03:00 [DBG] Start discovery request
2018-08-27 23:44:11.031 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:44:11.091 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:44:11.098 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:44:11.100 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:44:11.101 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:44:11.103 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:44:11.107 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:44:11.109 -03:00 [DBG] Start key discovery request
2018-08-27 23:44:11.621 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:44:11.625 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:44:11.627 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:44:11.628 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:44:11.631 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:44:11.635 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:44:11.637 -03:00 [DBG] Start discovery request
2018-08-27 23:44:11.677 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:44:11.986 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:44:11.990 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:44:11.992 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:44:12.121 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:44:12.125 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:44:12.127 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:44:12.128 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:44:12.130 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:44:12.134 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:44:12.136 -03:00 [DBG] Start key discovery request
2018-08-27 23:44:12.142 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:44:12.147 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:44:12.148 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:44:12.150 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:44:12.154 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:44:12.156 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:44:12.157 -03:00 [DBG] Start userinfo request
2018-08-27 23:44:12.159 -03:00 [DBG] Bearer token found in header
2018-08-27 23:44:12.161 -03:00 [DBG] esD6Gyy+b8mM17ebYSq/zBss3QxWrSxGSa2Wdo51Ki8= found in database: true
2018-08-27 23:44:12.182 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:44:12.194 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:44:12.200 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:44:12.202 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "9f67dac5dcec86ea1fa05760d68f1b009aab0495980c60f21a0efb2c627cd8b3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422538,
    "exp": 1535426138,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:44:12.208 -03:00 [DBG] Creating userinfo response
2018-08-27 23:44:12.209 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:44:12.211 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:44:12.216 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:44:12.219 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:44:12.222 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:44:12.227 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:44:12.236 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:44:12.237 -03:00 [DBG] End userinfo request
2018-08-27 23:45:36.051 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:45:36.053 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:45:36.055 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:45:36.056 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:45:36.058 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:45:36.060 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:45:36.062 -03:00 [DBG] Start discovery request
2018-08-27 23:45:36.077 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:45:36.148 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:45:36.152 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:45:36.154 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:45:36.156 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:45:36.158 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:45:36.159 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:45:36.164 -03:00 [DBG] Start key discovery request
2018-08-27 23:45:36.733 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:45:36.737 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:45:36.738 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:45:36.740 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:45:36.743 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:45:36.747 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:45:36.749 -03:00 [DBG] Start discovery request
2018-08-27 23:45:36.759 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:45:37.095 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:45:37.098 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:45:37.099 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:45:37.223 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:45:37.227 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:45:37.228 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:45:37.229 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:45:37.232 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:45:37.235 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:45:37.240 -03:00 [DBG] Start key discovery request
2018-08-27 23:45:37.243 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:45:37.247 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:45:37.249 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:45:37.250 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:45:37.251 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:45:37.255 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:45:37.257 -03:00 [DBG] Start userinfo request
2018-08-27 23:45:37.260 -03:00 [DBG] Bearer token found in header
2018-08-27 23:45:37.263 -03:00 [DBG] esD6Gyy+b8mM17ebYSq/zBss3QxWrSxGSa2Wdo51Ki8= found in database: true
2018-08-27 23:45:37.285 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:45:37.299 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:45:37.305 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:45:37.306 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "9f67dac5dcec86ea1fa05760d68f1b009aab0495980c60f21a0efb2c627cd8b3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422538,
    "exp": 1535426138,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:45:37.312 -03:00 [DBG] Creating userinfo response
2018-08-27 23:45:37.313 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:45:37.318 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:45:37.323 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:45:37.325 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:45:37.329 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:45:37.332 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:45:37.337 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:45:37.339 -03:00 [DBG] End userinfo request
2018-08-27 23:46:28.194 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:46:28.198 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:46:28.200 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:46:28.201 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:46:28.202 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:46:28.206 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:46:28.208 -03:00 [DBG] Start discovery request
2018-08-27 23:46:28.222 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:46:28.286 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:46:28.290 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:46:28.291 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:46:28.292 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:46:28.294 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:46:28.298 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:46:28.300 -03:00 [DBG] Start key discovery request
2018-08-27 23:46:28.804 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:46:28.808 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:46:28.809 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:46:28.810 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:46:28.811 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:46:28.814 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:46:28.816 -03:00 [DBG] Start discovery request
2018-08-27 23:46:28.830 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:46:29.065 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:46:29.068 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:46:29.070 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:46:29.173 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:46:29.177 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:46:29.178 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:46:29.180 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:46:29.182 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:46:29.187 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:46:29.189 -03:00 [DBG] Start key discovery request
2018-08-27 23:46:29.190 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:46:29.194 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:46:29.197 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:46:29.199 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:46:29.202 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:46:29.204 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:46:29.208 -03:00 [DBG] Start userinfo request
2018-08-27 23:46:29.209 -03:00 [DBG] Bearer token found in header
2018-08-27 23:46:29.211 -03:00 [DBG] esD6Gyy+b8mM17ebYSq/zBss3QxWrSxGSa2Wdo51Ki8= found in database: true
2018-08-27 23:46:29.232 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:46:29.245 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:46:29.251 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:46:29.252 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "9f67dac5dcec86ea1fa05760d68f1b009aab0495980c60f21a0efb2c627cd8b3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422538,
    "exp": 1535426138,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:46:29.257 -03:00 [DBG] Creating userinfo response
2018-08-27 23:46:29.258 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:46:29.263 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:46:29.268 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:46:29.269 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:46:29.272 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:46:29.278 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:46:29.287 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:46:29.288 -03:00 [DBG] End userinfo request
2018-08-27 23:46:46.782 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:46:46.785 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:46:46.786 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:46:46.787 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:46:46.789 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:46:46.791 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:46:46.795 -03:00 [DBG] Start discovery request
2018-08-27 23:46:46.807 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:46:46.860 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:46:46.864 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:46:46.865 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:46:46.866 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:46:46.868 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:46:46.873 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:46:46.875 -03:00 [DBG] Start key discovery request
2018-08-27 23:46:47.158 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:46:47.162 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:46:47.163 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:46:47.164 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:46:47.165 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:46:47.166 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:46:47.169 -03:00 [DBG] Start discovery request
2018-08-27 23:46:47.186 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:46:47.375 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:46:47.377 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:46:47.378 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:46:47.518 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:46:47.523 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:46:47.526 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:46:47.530 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:46:47.533 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-27 23:46:47.534 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:46:47.539 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:46:47.539 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:46:47.541 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:46:47.547 -03:00 [DBG] Start key discovery request
2018-08-27 23:46:47.549 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-27 23:46:47.554 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-27 23:46:47.558 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-27 23:46:47.563 -03:00 [DBG] Start userinfo request
2018-08-27 23:46:47.565 -03:00 [DBG] Bearer token found in header
2018-08-27 23:46:47.571 -03:00 [DBG] esD6Gyy+b8mM17ebYSq/zBss3QxWrSxGSa2Wdo51Ki8= found in database: true
2018-08-27 23:46:47.596 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:46:47.615 -03:00 [DBG] UserManagementUI found in database: true
2018-08-27 23:46:47.621 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-27 23:46:47.624 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "9f67dac5dcec86ea1fa05760d68f1b009aab0495980c60f21a0efb2c627cd8b3",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535422538,
    "exp": 1535426138,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-27 23:46:47.635 -03:00 [DBG] Creating userinfo response
2018-08-27 23:46:47.636 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:46:47.643 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:46:47.653 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:46:47.656 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-27 23:46:47.660 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-27 23:46:47.668 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-27 23:46:47.679 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-27 23:46:47.681 -03:00 [DBG] End userinfo request
2018-08-27 23:47:00.963 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:47:00.966 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:47:00.968 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:47:00.969 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:47:00.970 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:47:00.973 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:47:00.977 -03:00 [DBG] Start discovery request
2018-08-27 23:47:00.990 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:47:01.304 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:47:01.307 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:47:01.309 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:47:01.310 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:47:01.312 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:47:01.314 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:47:01.317 -03:00 [DBG] Start key discovery request
2018-08-27 23:47:34.071 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:47:34.077 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:47:34.081 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:47:34.084 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:47:34.088 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:47:34.091 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:47:34.096 -03:00 [DBG] Start discovery request
2018-08-27 23:47:34.117 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:47:34.527 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:47:34.533 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:47:34.535 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:47:34.536 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:47:34.538 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:47:34.541 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:47:34.543 -03:00 [DBG] Start key discovery request
2018-08-27 23:51:21.645 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:51:21.939 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:51:21.941 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:51:21.942 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:51:21.943 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:51:21.944 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:51:21.946 -03:00 [DBG] Start discovery request
2018-08-27 23:51:21.975 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:51:22.008 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:51:22.012 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:51:22.014 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:51:22.016 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:51:22.021 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:51:22.023 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:51:22.025 -03:00 [DBG] Start key discovery request
2018-08-27 23:59:19.734 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-27 23:59:20.047 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:59:20.049 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:59:20.050 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-27 23:59:20.051 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-27 23:59:20.053 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-27 23:59:20.054 -03:00 [DBG] Start discovery request
2018-08-27 23:59:20.084 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-27 23:59:20.145 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-27 23:59:20.148 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-27 23:59:20.150 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-27 23:59:20.151 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-27 23:59:20.153 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-27 23:59:20.158 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-27 23:59:20.160 -03:00 [DBG] Start key discovery request
2018-08-28 00:02:58.784 -03:00 [INF] Clearing 0 tokens
2018-08-28 00:32:29.529 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:32:29.846 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:32:29.848 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:32:29.849 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:32:29.850 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:32:29.851 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:32:29.852 -03:00 [DBG] Start discovery request
2018-08-28 00:32:29.875 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:32:29.889 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:32:29.894 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:32:29.896 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:32:29.896 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:32:29.898 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:32:29.900 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:32:29.901 -03:00 [DBG] Start key discovery request
2018-08-28 00:32:29.966 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 00:32:29.968 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 00:32:29.970 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 00:32:29.972 -03:00 [DBG] Start authorize request
2018-08-28 00:32:29.973 -03:00 [DBG] User in authorize request: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 00:32:29.974 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 00:32:30.012 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:32:30.023 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:32:30.031 -03:00 [DBG] Found [] API scopes in database
2018-08-28 00:32:30.037 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:32:30.040 -03:00 [DBG] Found [] API scopes in database
2018-08-28 00:32:30.042 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 00:32:30.045 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "XwO6C4FR9PXcZ28PnjZQE7wsiHw1hiBdnDaetJQH",
  "Nonce": "XwO6C4FR9PXcZ28PnjZQE7wsiHw1hiBdnDaetJQH",
  "SessionId": "d786d86016de33674665af7c5ce36828",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "XwO6C4FR9PXcZ28PnjZQE7wsiHw1hiBdnDaetJQH",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "XwO6C4FR9PXcZ28PnjZQE7wsiHw1hiBdnDaetJQH"
  }
}
2018-08-28 00:32:30.053 -03:00 [DBG] dNsKvdOaVVSYnWYeunkn1dwRkQz+bV+gEiP/tJjhjZQ= found in database: true
2018-08-28 00:32:30.059 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-28 00:32:30.060 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 00:32:30.061 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 00:32:30.062 -03:00 [DBG] Getting claims for access token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 00:32:30.079 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= not found in database
2018-08-28 00:32:30.088 -03:00 [DBG] Getting claims for identity token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79 and client: UserManagementUI
2018-08-28 00:32:30.089 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 00:32:30.094 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****C3Iw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****d60a"
    }
  ],
  "ActivityId": "0HLGCH9I0PLRP:00000001",
  "TimeStamp": "2018-08-28T03:32:30Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 00:32:30.097 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "XwO6C4FR9PXcZ28PnjZQE7wsiHw1hiBdnDaetJQH",
  "Scope": "openid profile email picture"
}
2018-08-28 00:32:31.479 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:32:31.483 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:32:31.485 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:32:31.486 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:32:31.488 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:32:31.492 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:32:31.494 -03:00 [DBG] Start discovery request
2018-08-28 00:32:31.505 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:32:31.566 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:32:31.571 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:32:31.572 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:32:31.573 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:32:31.575 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:32:31.577 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:32:31.581 -03:00 [DBG] Start key discovery request
2018-08-28 00:32:32.877 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:32:32.883 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:32:32.885 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:32:32.886 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:32:32.888 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:32:32.893 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:32:32.896 -03:00 [DBG] Start discovery request
2018-08-28 00:32:32.905 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:32:33.061 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:32:33.064 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:32:33.065 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:32:33.193 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:32:33.197 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:32:33.199 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:32:33.200 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:32:33.202 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:32:33.203 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:32:33.208 -03:00 [DBG] Start key discovery request
2018-08-28 00:32:33.213 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:32:33.215 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:32:33.218 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:32:33.220 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:32:33.222 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:32:33.224 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:32:33.228 -03:00 [DBG] Start userinfo request
2018-08-28 00:32:33.229 -03:00 [DBG] Bearer token found in header
2018-08-28 00:32:33.232 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:32:33.252 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:32:33.262 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:32:33.267 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:32:33.269 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:32:33.273 -03:00 [DBG] Creating userinfo response
2018-08-28 00:32:33.274 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:32:33.275 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:32:33.278 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:32:33.280 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:32:33.284 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:32:33.290 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:32:33.299 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:32:33.300 -03:00 [DBG] End userinfo request
2018-08-28 00:32:43.855 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:32:43.859 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:32:43.861 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:32:43.862 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:32:43.865 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:32:43.868 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:32:43.870 -03:00 [DBG] Start discovery request
2018-08-28 00:32:43.889 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:32:43.972 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:32:43.977 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:32:43.978 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:32:43.979 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:32:43.981 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:32:43.986 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:32:43.989 -03:00 [DBG] Start key discovery request
2018-08-28 00:32:45.124 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:32:45.127 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:32:45.129 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:32:45.130 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:32:45.132 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:32:45.137 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:32:45.139 -03:00 [DBG] Start discovery request
2018-08-28 00:32:45.156 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:32:45.325 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:32:45.328 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:32:45.329 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:32:45.428 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:32:45.431 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:32:45.432 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:32:45.434 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:32:45.436 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:32:45.440 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:32:45.443 -03:00 [DBG] Start key discovery request
2018-08-28 00:32:45.449 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:32:45.452 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:32:45.454 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:32:45.455 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:32:45.458 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:32:45.462 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:32:45.463 -03:00 [DBG] Start userinfo request
2018-08-28 00:32:45.464 -03:00 [DBG] Bearer token found in header
2018-08-28 00:32:45.467 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:32:45.487 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:32:45.499 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:32:45.504 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:32:45.506 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:32:45.511 -03:00 [DBG] Creating userinfo response
2018-08-28 00:32:45.511 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:32:45.512 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:32:45.517 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:32:45.519 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:32:45.521 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:32:45.524 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:32:45.528 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:32:45.530 -03:00 [DBG] End userinfo request
2018-08-28 00:33:17.745 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:33:17.751 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:33:17.753 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:33:17.755 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:33:17.759 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:33:17.766 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:33:17.772 -03:00 [DBG] Start discovery request
2018-08-28 00:33:17.785 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:33:18.174 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:33:18.177 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:33:18.179 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:33:18.180 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:33:18.182 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:33:18.185 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:33:18.189 -03:00 [DBG] Start key discovery request
2018-08-28 00:35:19.276 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:35:19.281 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:35:19.282 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:35:19.283 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:35:19.286 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:35:19.290 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:35:19.293 -03:00 [DBG] Start discovery request
2018-08-28 00:35:19.306 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:35:19.376 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:35:19.383 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:35:19.385 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:35:19.387 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:35:19.389 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:35:19.393 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:35:19.395 -03:00 [DBG] Start key discovery request
2018-08-28 00:35:20.054 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:35:20.058 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:35:20.059 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:35:20.060 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:35:20.062 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:35:20.064 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:35:20.068 -03:00 [DBG] Start discovery request
2018-08-28 00:35:20.079 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:35:20.322 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:35:20.325 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:35:20.326 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:35:20.443 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:35:20.446 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:35:20.447 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:35:20.448 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:35:20.450 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:35:20.452 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:35:20.456 -03:00 [DBG] Start key discovery request
2018-08-28 00:35:20.461 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:35:20.465 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:35:20.466 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:35:20.469 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:35:20.472 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:35:20.473 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:35:20.477 -03:00 [DBG] Start userinfo request
2018-08-28 00:35:20.478 -03:00 [DBG] Bearer token found in header
2018-08-28 00:35:20.480 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:35:20.511 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:35:20.526 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:35:20.532 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:35:20.533 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:35:20.536 -03:00 [DBG] Creating userinfo response
2018-08-28 00:35:20.537 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:35:20.539 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:35:20.546 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:35:20.548 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:35:20.549 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:35:20.554 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:35:20.558 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:35:20.559 -03:00 [DBG] End userinfo request
2018-08-28 00:35:53.074 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:35:53.077 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:35:53.078 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:35:53.079 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:35:53.081 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:35:53.083 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:35:53.085 -03:00 [DBG] Start discovery request
2018-08-28 00:35:53.099 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:35:53.185 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:35:53.190 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:35:53.192 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:35:53.194 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:35:53.196 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:35:53.199 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:35:53.201 -03:00 [DBG] Start key discovery request
2018-08-28 00:35:53.540 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:35:53.544 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:35:53.545 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:35:53.546 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:35:53.547 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:35:53.549 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:35:53.551 -03:00 [DBG] Start discovery request
2018-08-28 00:35:53.568 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:35:53.757 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:35:53.759 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:35:53.761 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:35:53.902 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:35:53.906 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:35:53.908 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:35:53.910 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:35:53.914 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:35:53.917 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:35:53.919 -03:00 [DBG] Start key discovery request
2018-08-28 00:35:53.922 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:35:53.927 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:35:53.929 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:35:53.930 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:35:53.932 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:35:53.936 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:35:53.937 -03:00 [DBG] Start userinfo request
2018-08-28 00:35:53.938 -03:00 [DBG] Bearer token found in header
2018-08-28 00:35:53.940 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:35:53.959 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:35:53.970 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:35:53.975 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:35:53.976 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:35:53.983 -03:00 [DBG] Creating userinfo response
2018-08-28 00:35:53.984 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:35:53.985 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:35:53.989 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:35:53.992 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:35:53.994 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:35:53.997 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:35:54.003 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:35:54.005 -03:00 [DBG] End userinfo request
2018-08-28 00:36:29.347 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:36:29.350 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:36:29.352 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:36:29.353 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:36:29.356 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:36:29.362 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:36:29.365 -03:00 [DBG] Start discovery request
2018-08-28 00:36:29.411 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:36:29.445 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:36:29.454 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:36:29.457 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:36:29.461 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:36:29.465 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:36:29.470 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:36:29.473 -03:00 [DBG] Start key discovery request
2018-08-28 00:36:29.869 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:36:29.874 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:36:29.875 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:36:29.876 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:36:29.878 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:36:29.879 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:36:29.884 -03:00 [DBG] Start discovery request
2018-08-28 00:36:29.899 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:36:29.935 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:36:29.938 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:36:29.939 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:36:30.207 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:36:30.211 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:36:30.213 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:36:30.214 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:36:30.217 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:36:30.221 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:36:30.223 -03:00 [DBG] Start key discovery request
2018-08-28 00:36:30.271 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:36:30.275 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:36:30.276 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:36:30.278 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:36:30.281 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:36:30.285 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:36:30.287 -03:00 [DBG] Start userinfo request
2018-08-28 00:36:30.288 -03:00 [DBG] Bearer token found in header
2018-08-28 00:36:30.291 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:36:30.318 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:36:30.331 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:36:30.337 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:36:30.341 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:36:30.346 -03:00 [DBG] Creating userinfo response
2018-08-28 00:36:30.348 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:36:30.350 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:36:30.358 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:36:30.359 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:36:30.363 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:36:30.370 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:36:30.376 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:36:30.377 -03:00 [DBG] End userinfo request
2018-08-28 00:37:57.846 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:37:57.849 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:37:57.851 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:37:57.853 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:37:57.855 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:37:57.856 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:37:57.861 -03:00 [DBG] Start discovery request
2018-08-28 00:37:57.876 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:37:57.906 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:37:57.911 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:37:57.912 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:37:57.914 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:37:57.917 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:37:57.922 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:37:57.924 -03:00 [DBG] Start key discovery request
2018-08-28 00:37:58.299 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:37:58.303 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:37:58.304 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:37:58.306 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:37:58.308 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:37:58.312 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:37:58.315 -03:00 [DBG] Start discovery request
2018-08-28 00:37:58.340 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:37:58.376 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:37:58.379 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:37:58.381 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:37:58.667 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:37:58.671 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:37:58.673 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:37:58.675 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:37:58.677 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:37:58.678 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:37:58.681 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:37:58.686 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:37:58.686 -03:00 [DBG] Start key discovery request
2018-08-28 00:37:58.690 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:37:58.693 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:37:58.695 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:37:58.696 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:37:58.699 -03:00 [DBG] Start userinfo request
2018-08-28 00:37:58.703 -03:00 [DBG] Bearer token found in header
2018-08-28 00:37:58.705 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:37:58.724 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:37:58.736 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:37:58.742 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:37:58.743 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:37:58.745 -03:00 [DBG] Creating userinfo response
2018-08-28 00:37:58.745 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:37:58.747 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:37:58.753 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:37:58.756 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:37:58.757 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:37:58.761 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:37:58.765 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:37:58.766 -03:00 [DBG] End userinfo request
2018-08-28 00:38:12.801 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:38:12.803 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:38:12.805 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:38:12.806 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:38:12.810 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:38:12.811 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:38:12.816 -03:00 [DBG] Start discovery request
2018-08-28 00:38:12.827 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:38:12.854 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:38:12.859 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:38:12.860 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:38:12.862 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:38:12.863 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:38:12.867 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:38:12.869 -03:00 [DBG] Start key discovery request
2018-08-28 00:38:13.191 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:38:13.216 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:38:13.218 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:38:13.219 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:38:13.222 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:38:13.226 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:38:13.238 -03:00 [DBG] Start discovery request
2018-08-28 00:38:13.247 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:38:13.265 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:38:13.269 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:38:13.271 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:38:13.611 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:38:13.619 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:38:13.622 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:38:13.623 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:38:13.627 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:38:13.632 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:38:13.635 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:38:13.641 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:38:13.648 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:38:13.650 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:38:13.655 -03:00 [DBG] Start key discovery request
2018-08-28 00:38:13.658 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:38:13.664 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:38:13.668 -03:00 [DBG] Start userinfo request
2018-08-28 00:38:13.670 -03:00 [DBG] Bearer token found in header
2018-08-28 00:38:13.676 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:38:13.698 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:38:13.711 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:38:13.717 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:38:13.719 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:38:13.731 -03:00 [DBG] Creating userinfo response
2018-08-28 00:38:13.734 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:38:13.737 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:38:13.743 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:38:13.745 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:38:13.747 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:38:13.753 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:38:13.761 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:38:13.764 -03:00 [DBG] End userinfo request
2018-08-28 00:42:36.982 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:42:37.350 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:42:37.352 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:42:37.353 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:42:37.354 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:42:37.355 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:42:37.357 -03:00 [DBG] Start discovery request
2018-08-28 00:42:37.385 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:42:37.408 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:42:37.412 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:42:37.414 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:42:37.415 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:42:37.418 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:42:37.423 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:42:37.426 -03:00 [DBG] Start discovery request
2018-08-28 00:42:37.438 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:42:37.845 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:42:37.848 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:42:37.849 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:42:37.850 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:42:37.852 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:42:37.853 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:42:37.855 -03:00 [DBG] Start key discovery request
2018-08-28 00:42:37.906 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:42:37.910 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:42:37.911 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:42:37.913 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:42:37.914 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:42:37.919 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:42:37.922 -03:00 [DBG] Start key discovery request
2018-08-28 00:42:46.910 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:42:46.915 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:42:46.916 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:42:46.917 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:42:46.921 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:42:46.926 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:42:46.931 -03:00 [DBG] Start discovery request
2018-08-28 00:42:46.944 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:42:46.981 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:42:46.986 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:42:46.989 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:42:46.992 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:42:46.996 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:42:47.001 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:42:47.006 -03:00 [DBG] Start key discovery request
2018-08-28 00:42:47.266 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:42:47.270 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:42:47.271 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:42:47.272 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:42:47.274 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:42:47.276 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:42:47.283 -03:00 [DBG] Start discovery request
2018-08-28 00:42:47.295 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:43:13.707 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:43:13.711 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:43:13.713 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:43:17.762 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:43:17.771 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:43:17.772 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:43:17.774 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:43:17.777 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:43:17.782 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:43:17.783 -03:00 [DBG] Start key discovery request
2018-08-28 00:43:17.785 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:43:17.794 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:43:17.796 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:43:17.797 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:43:17.800 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:43:17.802 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:43:17.804 -03:00 [DBG] Start userinfo request
2018-08-28 00:43:17.807 -03:00 [DBG] Bearer token found in header
2018-08-28 00:43:17.812 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:43:17.853 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:43:17.865 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:43:17.876 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:43:17.877 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:43:17.881 -03:00 [DBG] Creating userinfo response
2018-08-28 00:43:17.884 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:43:17.885 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:43:17.894 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:43:17.895 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:43:17.897 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:43:17.901 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:43:17.932 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:43:17.935 -03:00 [DBG] End userinfo request
2018-08-28 00:43:33.240 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:43:33.243 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:43:33.244 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:43:33.245 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:43:33.247 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:43:33.250 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:43:33.254 -03:00 [DBG] Start discovery request
2018-08-28 00:43:33.265 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:43:33.298 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:43:33.303 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:43:33.304 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:43:33.306 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:43:33.308 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:43:33.312 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:43:33.314 -03:00 [DBG] Start key discovery request
2018-08-28 00:43:33.557 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:43:33.561 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:43:33.562 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:43:33.563 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:43:33.565 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:43:33.567 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:43:33.572 -03:00 [DBG] Start discovery request
2018-08-28 00:43:33.583 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:43:33.620 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:43:33.625 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:43:33.626 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:43:34.076 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:43:34.081 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:43:34.082 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:43:34.083 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:43:34.085 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:43:34.086 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:43:34.090 -03:00 [DBG] Start key discovery request
2018-08-28 00:43:34.128 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:43:34.133 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:43:34.134 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:43:34.135 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:43:34.137 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:43:34.141 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:43:34.143 -03:00 [DBG] Start userinfo request
2018-08-28 00:43:34.144 -03:00 [DBG] Bearer token found in header
2018-08-28 00:43:34.146 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:43:34.165 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:43:34.176 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:43:34.181 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:43:34.182 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:43:34.187 -03:00 [DBG] Creating userinfo response
2018-08-28 00:43:34.188 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:43:34.189 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:43:34.194 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:43:34.197 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:43:34.198 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:43:34.202 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:43:34.207 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:43:34.208 -03:00 [DBG] End userinfo request
2018-08-28 00:43:51.874 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:43:51.877 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:43:51.878 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:43:51.879 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:43:51.881 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:43:51.882 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:43:51.885 -03:00 [DBG] Start discovery request
2018-08-28 00:43:51.897 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:43:51.928 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:43:51.932 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:43:51.934 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:43:51.936 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:43:51.937 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:43:51.941 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:43:51.942 -03:00 [DBG] Start key discovery request
2018-08-28 00:43:52.211 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:43:52.215 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:43:52.216 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:43:52.216 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:43:52.218 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:43:52.220 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:43:52.224 -03:00 [DBG] Start discovery request
2018-08-28 00:43:52.236 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:43:52.275 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:43:52.278 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:43:52.279 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:43:52.769 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:43:52.774 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:43:52.775 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:43:52.777 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:43:52.779 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:43:52.784 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:43:52.786 -03:00 [DBG] Start key discovery request
2018-08-28 00:43:52.788 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:43:52.792 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:43:52.794 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:43:52.796 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:43:52.798 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:43:52.800 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:43:52.804 -03:00 [DBG] Start userinfo request
2018-08-28 00:43:52.805 -03:00 [DBG] Bearer token found in header
2018-08-28 00:43:52.808 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:43:52.828 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:43:52.839 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:43:52.844 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:43:52.846 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:43:52.850 -03:00 [DBG] Creating userinfo response
2018-08-28 00:43:52.851 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:43:52.852 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:43:52.856 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:43:52.860 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:43:52.861 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:43:52.865 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:43:52.873 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:43:52.874 -03:00 [DBG] End userinfo request
2018-08-28 00:44:16.483 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:44:16.486 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:44:16.487 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:44:16.488 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:44:16.490 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:44:16.494 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:44:16.497 -03:00 [DBG] Start discovery request
2018-08-28 00:44:16.507 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:44:16.541 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:44:16.546 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:44:16.547 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:44:16.549 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:44:16.550 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:44:16.555 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:44:16.557 -03:00 [DBG] Start key discovery request
2018-08-28 00:44:16.866 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:44:16.887 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:44:16.889 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:44:16.891 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:44:16.895 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:44:16.898 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:44:16.903 -03:00 [DBG] Start discovery request
2018-08-28 00:44:16.913 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:44:16.942 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:44:16.946 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:44:16.947 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:44:17.254 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:44:17.259 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:44:17.262 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:44:17.263 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:44:17.264 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:44:17.265 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:44:17.270 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:44:17.271 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:44:17.272 -03:00 [DBG] Start key discovery request
2018-08-28 00:44:17.274 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:44:17.276 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:44:17.279 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:44:17.284 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:44:17.285 -03:00 [DBG] Start userinfo request
2018-08-28 00:44:17.286 -03:00 [DBG] Bearer token found in header
2018-08-28 00:44:17.288 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:44:17.307 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:44:17.316 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:44:17.321 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:44:17.322 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:44:17.326 -03:00 [DBG] Creating userinfo response
2018-08-28 00:44:17.330 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:44:17.331 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:44:17.335 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:44:17.336 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:44:17.337 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:44:17.344 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:44:17.350 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:44:17.351 -03:00 [DBG] End userinfo request
2018-08-28 00:44:57.087 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:44:57.092 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:44:57.093 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:44:57.094 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:44:57.096 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:44:57.101 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:44:57.104 -03:00 [DBG] Start discovery request
2018-08-28 00:44:57.120 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:44:57.163 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:44:57.168 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:44:57.170 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:44:57.171 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:44:57.173 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:44:57.177 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:44:57.180 -03:00 [DBG] Start key discovery request
2018-08-28 00:44:57.636 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:44:57.642 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:44:57.643 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:44:58.059 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:44:58.064 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:44:58.066 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:44:58.068 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:44:58.073 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:44:58.076 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:44:58.078 -03:00 [DBG] Start userinfo request
2018-08-28 00:44:58.080 -03:00 [DBG] Bearer token found in header
2018-08-28 00:44:58.083 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:44:58.104 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:44:58.115 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:44:58.120 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:44:58.121 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:44:58.127 -03:00 [DBG] Creating userinfo response
2018-08-28 00:44:58.128 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:44:58.130 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:44:58.133 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:44:58.135 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:44:58.138 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:44:58.143 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:44:58.147 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:44:58.148 -03:00 [DBG] End userinfo request
2018-08-28 00:45:20.429 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:45:20.432 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:45:20.433 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:45:20.435 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:45:20.437 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:45:20.439 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:45:20.443 -03:00 [DBG] Start discovery request
2018-08-28 00:45:20.455 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:45:20.486 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:45:20.491 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:45:20.492 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:45:20.493 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:45:20.496 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:45:20.500 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:45:20.502 -03:00 [DBG] Start key discovery request
2018-08-28 00:45:20.902 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:45:20.907 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:45:20.915 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:45:21.233 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:45:21.236 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:45:21.238 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:45:21.239 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:45:21.241 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:45:21.242 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:45:21.246 -03:00 [DBG] Start userinfo request
2018-08-28 00:45:21.248 -03:00 [DBG] Bearer token found in header
2018-08-28 00:45:21.251 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:45:21.271 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:45:21.282 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:45:21.287 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:45:21.291 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:45:21.294 -03:00 [DBG] Creating userinfo response
2018-08-28 00:45:21.295 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:45:21.296 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:45:21.300 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:45:21.304 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:45:21.306 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:45:21.309 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:45:21.313 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:45:21.314 -03:00 [DBG] End userinfo request
2018-08-28 00:45:41.163 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:45:41.166 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:45:41.167 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:45:41.169 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:45:41.170 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:45:41.173 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:45:41.177 -03:00 [DBG] Start discovery request
2018-08-28 00:45:41.187 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:45:41.222 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:45:41.226 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:45:41.227 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:45:41.229 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:45:41.231 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:45:41.234 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:45:41.236 -03:00 [DBG] Start key discovery request
2018-08-28 00:45:41.627 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:45:41.633 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:45:41.634 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:45:41.924 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:45:41.929 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:45:41.931 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:45:41.931 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:45:41.933 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:45:41.934 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:45:41.936 -03:00 [DBG] Start userinfo request
2018-08-28 00:45:41.937 -03:00 [DBG] Bearer token found in header
2018-08-28 00:45:41.945 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:45:41.970 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:45:41.981 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:45:41.986 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:45:41.988 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:45:41.993 -03:00 [DBG] Creating userinfo response
2018-08-28 00:45:41.994 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:45:41.995 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:45:42.000 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:45:42.002 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:45:42.004 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:45:42.009 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:45:42.017 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:45:42.018 -03:00 [DBG] End userinfo request
2018-08-28 00:47:32.131 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:47:32.133 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:47:32.135 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:47:32.135 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:47:32.138 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:47:32.140 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:47:32.144 -03:00 [DBG] Start discovery request
2018-08-28 00:47:32.156 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:47:32.189 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:47:32.193 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:47:32.195 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:47:32.196 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:47:32.198 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:47:32.199 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:47:32.203 -03:00 [DBG] Start key discovery request
2018-08-28 00:47:32.521 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:47:32.540 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:47:32.544 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:47:32.883 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:47:32.887 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:47:32.889 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:47:32.890 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:47:32.892 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:47:32.896 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:47:32.897 -03:00 [DBG] Start userinfo request
2018-08-28 00:47:32.898 -03:00 [DBG] Bearer token found in header
2018-08-28 00:47:32.901 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:47:32.930 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:47:32.943 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:47:32.951 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:47:32.952 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:47:32.957 -03:00 [DBG] Creating userinfo response
2018-08-28 00:47:32.958 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:47:32.962 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:47:32.966 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:47:32.968 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:47:32.969 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:47:32.977 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:47:32.991 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:47:32.992 -03:00 [DBG] End userinfo request
2018-08-28 00:48:30.348 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:48:30.350 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:48:30.351 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:48:30.352 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:48:30.354 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:48:30.356 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:48:30.359 -03:00 [DBG] Start discovery request
2018-08-28 00:48:30.372 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:48:30.406 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:48:30.411 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:48:30.412 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:48:30.413 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:48:30.415 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:48:30.419 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:48:30.421 -03:00 [DBG] Start key discovery request
2018-08-28 00:48:30.849 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:48:30.852 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:48:30.853 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:48:31.159 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:48:31.163 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:48:31.164 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:48:31.166 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:48:31.170 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:48:31.171 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:48:31.172 -03:00 [DBG] Start userinfo request
2018-08-28 00:48:31.173 -03:00 [DBG] Bearer token found in header
2018-08-28 00:48:31.175 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:48:31.193 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:48:31.201 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:48:31.205 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:48:31.205 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:48:31.206 -03:00 [DBG] Creating userinfo response
2018-08-28 00:48:31.206 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:48:31.207 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:48:31.209 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:48:31.210 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:48:31.210 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:48:31.213 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:48:31.219 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:48:31.219 -03:00 [DBG] End userinfo request
2018-08-28 00:50:25.561 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:50:25.563 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:50:25.564 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:50:25.564 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:50:25.565 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:50:25.565 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:50:25.565 -03:00 [DBG] Start discovery request
2018-08-28 00:50:25.575 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:50:25.607 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:50:25.609 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:50:25.610 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:50:25.610 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:50:25.611 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:50:25.611 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:50:25.611 -03:00 [DBG] Start key discovery request
2018-08-28 00:50:26.104 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:50:26.114 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:50:26.115 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:50:26.388 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:50:26.391 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:50:26.391 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:50:26.392 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:50:26.392 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:50:26.393 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:50:26.393 -03:00 [DBG] Start userinfo request
2018-08-28 00:50:26.393 -03:00 [DBG] Bearer token found in header
2018-08-28 00:50:26.395 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:50:26.415 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:50:26.428 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:50:26.433 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:50:26.433 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:50:26.434 -03:00 [DBG] Creating userinfo response
2018-08-28 00:50:26.437 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:50:26.437 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:50:26.440 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:50:26.440 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:50:26.441 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:50:26.443 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:50:26.448 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:50:26.448 -03:00 [DBG] End userinfo request
2018-08-28 00:50:38.881 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:50:38.883 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:50:38.884 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:50:38.884 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:50:38.884 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:50:38.885 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:50:38.885 -03:00 [DBG] Start discovery request
2018-08-28 00:50:38.894 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:50:38.929 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:50:38.934 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:50:38.935 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:50:38.936 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:50:38.937 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:50:38.937 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:50:38.938 -03:00 [DBG] Start key discovery request
2018-08-28 00:50:39.330 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:50:39.334 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:50:39.334 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:50:39.664 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:50:39.667 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:50:39.668 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:50:39.668 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:50:39.669 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:50:39.670 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:50:39.670 -03:00 [DBG] Start userinfo request
2018-08-28 00:50:39.670 -03:00 [DBG] Bearer token found in header
2018-08-28 00:50:39.673 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:50:39.697 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:50:39.717 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:50:39.728 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:50:39.729 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:50:39.730 -03:00 [DBG] Creating userinfo response
2018-08-28 00:50:39.731 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:50:39.731 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:50:39.735 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:50:39.736 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:50:39.736 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:50:39.744 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:50:39.749 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:50:39.750 -03:00 [DBG] End userinfo request
2018-08-28 00:50:53.981 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:50:53.983 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:50:53.984 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:50:53.984 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:50:53.984 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:50:53.985 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:50:53.985 -03:00 [DBG] Start discovery request
2018-08-28 00:50:53.996 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:50:54.033 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:50:54.037 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:50:54.037 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:50:54.038 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:50:54.039 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:50:54.039 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:50:54.040 -03:00 [DBG] Start key discovery request
2018-08-28 00:50:54.380 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:50:54.398 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:50:54.398 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:50:54.731 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:50:54.734 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:50:54.734 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:50:54.735 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:50:54.735 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:50:54.735 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:50:54.736 -03:00 [DBG] Start userinfo request
2018-08-28 00:50:54.736 -03:00 [DBG] Bearer token found in header
2018-08-28 00:50:54.738 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:50:54.770 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:50:54.781 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:50:54.787 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:50:54.788 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:50:54.792 -03:00 [DBG] Creating userinfo response
2018-08-28 00:50:54.793 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:50:54.794 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:50:54.797 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:50:54.798 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:50:54.799 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:50:54.801 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:50:54.809 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:50:54.809 -03:00 [DBG] End userinfo request
2018-08-28 00:51:58.891 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:51:58.894 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:51:58.895 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:51:58.895 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:51:58.896 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:51:58.896 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:51:58.896 -03:00 [DBG] Start discovery request
2018-08-28 00:51:58.909 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:51:58.949 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:51:58.952 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:51:58.953 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:51:58.953 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:51:58.954 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:51:58.954 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:51:58.954 -03:00 [DBG] Start key discovery request
2018-08-28 00:51:59.347 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:51:59.350 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:51:59.350 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:51:59.724 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:51:59.730 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:51:59.730 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:51:59.731 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:51:59.732 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:51:59.732 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:51:59.732 -03:00 [DBG] Start userinfo request
2018-08-28 00:51:59.733 -03:00 [DBG] Bearer token found in header
2018-08-28 00:51:59.736 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:51:59.764 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:51:59.777 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:51:59.781 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:51:59.782 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:51:59.784 -03:00 [DBG] Creating userinfo response
2018-08-28 00:51:59.785 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:51:59.785 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:51:59.788 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:51:59.789 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:51:59.790 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:51:59.793 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:51:59.800 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:51:59.801 -03:00 [DBG] End userinfo request
2018-08-28 00:52:29.330 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:52:29.332 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:52:29.332 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:52:29.333 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:52:29.333 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:52:29.333 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:52:29.334 -03:00 [DBG] Start discovery request
2018-08-28 00:52:29.344 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:52:29.382 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:52:29.386 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:52:29.386 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:52:29.387 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:52:29.388 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:52:29.388 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:52:29.389 -03:00 [DBG] Start key discovery request
2018-08-28 00:52:29.837 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:52:29.840 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:52:29.840 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:52:30.070 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:52:30.073 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:52:30.074 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:52:30.075 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:52:30.076 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:52:30.077 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:52:30.077 -03:00 [DBG] Start userinfo request
2018-08-28 00:52:30.077 -03:00 [DBG] Bearer token found in header
2018-08-28 00:52:30.080 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:52:30.104 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:52:30.114 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:52:30.118 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:52:30.119 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:52:30.119 -03:00 [DBG] Creating userinfo response
2018-08-28 00:52:30.120 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:52:30.120 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:52:30.122 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:52:30.125 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:52:30.125 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:52:30.128 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:52:30.133 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:52:30.135 -03:00 [DBG] End userinfo request
2018-08-28 00:52:45.130 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:52:45.132 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:52:45.133 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:52:45.133 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:52:45.134 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:52:45.134 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:52:45.134 -03:00 [DBG] Start discovery request
2018-08-28 00:52:45.144 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:52:45.189 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:52:45.194 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:52:45.194 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:52:45.195 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:52:45.195 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:52:45.195 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:52:45.196 -03:00 [DBG] Start key discovery request
2018-08-28 00:52:45.515 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:52:45.517 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:52:45.517 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:52:45.784 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:52:45.787 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:52:45.788 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:52:45.788 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:52:45.789 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:52:45.789 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:52:45.790 -03:00 [DBG] Start userinfo request
2018-08-28 00:52:45.790 -03:00 [DBG] Bearer token found in header
2018-08-28 00:52:45.792 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:52:45.814 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:52:45.826 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:52:45.830 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:52:45.830 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:52:45.831 -03:00 [DBG] Creating userinfo response
2018-08-28 00:52:45.831 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:52:45.831 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:52:45.834 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:52:45.836 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:52:45.836 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:52:45.838 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:52:45.843 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:52:45.843 -03:00 [DBG] End userinfo request
2018-08-28 00:52:51.246 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:52:51.248 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:52:51.249 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:52:51.249 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:52:51.249 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:52:51.250 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:52:51.250 -03:00 [DBG] Start discovery request
2018-08-28 00:52:51.257 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:52:51.289 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:52:51.291 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:52:51.291 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:52:51.292 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:52:51.292 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:52:51.293 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:52:51.293 -03:00 [DBG] Start key discovery request
2018-08-28 00:52:51.354 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 00:52:51.361 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 00:52:51.362 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 00:52:51.362 -03:00 [DBG] Start authorize request
2018-08-28 00:52:51.363 -03:00 [DBG] User in authorize request: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 00:52:51.363 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 00:52:51.378 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:52:51.381 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:52:51.387 -03:00 [DBG] Found [] API scopes in database
2018-08-28 00:52:51.390 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:52:51.392 -03:00 [DBG] Found [] API scopes in database
2018-08-28 00:52:51.392 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 00:52:51.392 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "nAUEKFKc8o9wCLHO3j3JBBEpvNtQh0A1Gn3tzCcq",
  "Nonce": "nAUEKFKc8o9wCLHO3j3JBBEpvNtQh0A1Gn3tzCcq",
  "SessionId": "d786d86016de33674665af7c5ce36828",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "nAUEKFKc8o9wCLHO3j3JBBEpvNtQh0A1Gn3tzCcq",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "nAUEKFKc8o9wCLHO3j3JBBEpvNtQh0A1Gn3tzCcq"
  }
}
2018-08-28 00:52:51.404 -03:00 [DBG] dNsKvdOaVVSYnWYeunkn1dwRkQz+bV+gEiP/tJjhjZQ= found in database: true
2018-08-28 00:52:51.407 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-28 00:52:51.407 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 00:52:51.407 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 00:52:51.407 -03:00 [DBG] Getting claims for access token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 00:52:51.418 -03:00 [DBG] Jto132Mpvyi8rDhY8Kiy1upDINA1OB/l+Ttmg+euMWc= not found in database
2018-08-28 00:52:51.424 -03:00 [DBG] Getting claims for identity token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79 and client: UserManagementUI
2018-08-28 00:52:51.425 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 00:52:51.427 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ax-A"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****e775"
    }
  ],
  "ActivityId": "0HLGCH9I0PLRT:00000001",
  "TimeStamp": "2018-08-28T03:52:51Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 00:52:51.428 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "nAUEKFKc8o9wCLHO3j3JBBEpvNtQh0A1Gn3tzCcq",
  "Scope": "openid profile email picture"
}
2018-08-28 00:52:52.531 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:52:52.533 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:52:52.533 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:52:52.740 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:52:52.741 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:52:52.742 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:52:52.742 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:52:52.742 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:52:52.743 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:52:52.743 -03:00 [DBG] Start userinfo request
2018-08-28 00:52:52.743 -03:00 [DBG] Bearer token found in header
2018-08-28 00:52:52.745 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:52:52.763 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:52:52.774 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:52:52.778 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:52:52.779 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:52:52.780 -03:00 [DBG] Creating userinfo response
2018-08-28 00:52:52.780 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:52:52.780 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:52:52.782 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:52:52.785 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:52:52.785 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:52:52.787 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:52:52.791 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:52:52.791 -03:00 [DBG] End userinfo request
2018-08-28 00:53:31.571 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:53:31.574 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:53:31.574 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:53:31.574 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:53:31.575 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:53:31.575 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:53:31.576 -03:00 [DBG] Start discovery request
2018-08-28 00:53:31.583 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:53:31.600 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:53:31.603 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:53:31.604 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:53:31.604 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:53:31.605 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:53:31.605 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:53:31.606 -03:00 [DBG] Start key discovery request
2018-08-28 00:53:31.813 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:53:31.815 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:53:31.816 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:53:32.030 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:53:32.034 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:53:32.035 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:53:32.035 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:53:32.036 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:53:32.037 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:53:32.037 -03:00 [DBG] Start userinfo request
2018-08-28 00:53:32.038 -03:00 [DBG] Bearer token found in header
2018-08-28 00:53:32.040 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:53:32.066 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:53:32.077 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:53:32.082 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:53:32.082 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:53:32.083 -03:00 [DBG] Creating userinfo response
2018-08-28 00:53:32.083 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:53:32.083 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:53:32.086 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:53:32.087 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:53:32.087 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:53:32.090 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:53:32.093 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:53:32.094 -03:00 [DBG] End userinfo request
2018-08-28 00:53:46.915 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:53:46.918 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:53:46.918 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:53:46.918 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:53:46.919 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:53:46.920 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:53:46.920 -03:00 [DBG] Start discovery request
2018-08-28 00:53:46.932 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:53:47.471 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:53:47.475 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:53:47.475 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:53:47.476 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:53:47.476 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:53:47.477 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:53:47.477 -03:00 [DBG] Start key discovery request
2018-08-28 00:53:55.489 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:53:55.496 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:53:55.497 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:53:55.497 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:53:55.498 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:53:55.498 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:53:55.498 -03:00 [DBG] Start discovery request
2018-08-28 00:53:55.508 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:53:56.579 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:53:56.582 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:53:56.582 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:53:56.582 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:53:56.583 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:53:56.583 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:53:56.583 -03:00 [DBG] Start key discovery request
2018-08-28 00:54:05.968 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:54:05.971 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:54:05.972 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:54:05.972 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:54:05.972 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:54:05.973 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:54:05.973 -03:00 [DBG] Start discovery request
2018-08-28 00:54:05.983 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:54:06.019 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:54:06.025 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:54:06.029 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:54:06.034 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:54:06.037 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:54:06.039 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:54:06.040 -03:00 [DBG] Start key discovery request
2018-08-28 00:54:06.366 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:54:06.368 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:54:06.368 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:54:06.644 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:54:06.647 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:54:06.648 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:54:06.656 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:54:06.657 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:54:06.657 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:54:06.659 -03:00 [DBG] Start userinfo request
2018-08-28 00:54:06.659 -03:00 [DBG] Bearer token found in header
2018-08-28 00:54:06.661 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:54:06.683 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:54:06.694 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:54:06.699 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:54:06.699 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:54:06.700 -03:00 [DBG] Creating userinfo response
2018-08-28 00:54:06.700 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:54:06.700 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:54:06.703 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:54:06.704 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:54:06.704 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:54:06.708 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:54:06.711 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:54:06.712 -03:00 [DBG] End userinfo request
2018-08-28 00:54:26.512 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:54:26.515 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:54:26.515 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:54:26.515 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:54:26.516 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:54:26.516 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:54:26.516 -03:00 [DBG] Start discovery request
2018-08-28 00:54:26.525 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:54:26.562 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:54:26.566 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:54:26.567 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:54:26.567 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:54:26.568 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:54:26.569 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:54:26.569 -03:00 [DBG] Start key discovery request
2018-08-28 00:54:26.890 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:54:26.892 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:54:26.893 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:54:27.193 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:54:27.195 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:54:27.195 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:54:27.196 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:54:27.196 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:54:27.196 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:54:27.196 -03:00 [DBG] Start userinfo request
2018-08-28 00:54:27.197 -03:00 [DBG] Bearer token found in header
2018-08-28 00:54:27.199 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:54:27.216 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:54:27.227 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:54:27.232 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:54:27.232 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:54:27.233 -03:00 [DBG] Creating userinfo response
2018-08-28 00:54:27.234 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:54:27.234 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:54:27.237 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:54:27.238 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:54:27.238 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:54:27.241 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:54:27.245 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:54:27.245 -03:00 [DBG] End userinfo request
2018-08-28 00:54:45.008 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:54:45.011 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:54:45.012 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:54:45.012 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:54:45.012 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:54:45.013 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:54:45.013 -03:00 [DBG] Start discovery request
2018-08-28 00:54:45.023 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:54:45.058 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:54:45.061 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:54:45.062 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:54:45.062 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:54:45.063 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:54:45.063 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:54:45.063 -03:00 [DBG] Start key discovery request
2018-08-28 00:54:45.398 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:54:45.400 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:54:45.400 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:54:45.660 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:54:45.663 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:54:45.663 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:54:45.664 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:54:45.664 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:54:45.664 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:54:45.665 -03:00 [DBG] Start userinfo request
2018-08-28 00:54:45.665 -03:00 [DBG] Bearer token found in header
2018-08-28 00:54:45.668 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:54:45.691 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:54:45.705 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:54:45.710 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:54:45.710 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:54:45.712 -03:00 [DBG] Creating userinfo response
2018-08-28 00:54:45.712 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:54:45.713 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:54:45.716 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:54:45.717 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:54:45.717 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:54:45.720 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:54:45.738 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:54:45.739 -03:00 [DBG] End userinfo request
2018-08-28 00:55:29.697 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:55:29.699 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:55:29.699 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:55:29.700 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:55:29.700 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:55:29.700 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:55:29.701 -03:00 [DBG] Start discovery request
2018-08-28 00:55:29.714 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:55:29.757 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:55:29.760 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:55:29.760 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:55:29.761 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:55:29.761 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:55:29.761 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:55:29.762 -03:00 [DBG] Start key discovery request
2018-08-28 00:55:30.102 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:55:30.105 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:55:30.105 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:55:30.375 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:55:30.390 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:55:30.390 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:55:30.391 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:55:30.392 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:55:30.392 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:55:30.392 -03:00 [DBG] Start userinfo request
2018-08-28 00:55:30.392 -03:00 [DBG] Bearer token found in header
2018-08-28 00:55:30.394 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:55:30.417 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:55:30.429 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:55:30.442 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:55:30.443 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:55:30.444 -03:00 [DBG] Creating userinfo response
2018-08-28 00:55:30.444 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:55:30.444 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:55:30.448 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:55:30.449 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:55:30.449 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:55:30.452 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:55:30.457 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:55:30.457 -03:00 [DBG] End userinfo request
2018-08-28 00:57:26.649 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:57:26.651 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:57:26.652 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:57:26.652 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:57:26.653 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:57:26.653 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:57:26.653 -03:00 [DBG] Start discovery request
2018-08-28 00:57:26.664 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:57:26.730 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:57:26.734 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:57:26.734 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:57:26.734 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:57:26.735 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:57:26.736 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:57:26.736 -03:00 [DBG] Start key discovery request
2018-08-28 00:57:27.110 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:57:27.113 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:57:27.113 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:57:27.404 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:57:27.410 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:57:27.411 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:57:27.412 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:57:27.413 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:57:27.413 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:57:27.414 -03:00 [DBG] Start userinfo request
2018-08-28 00:57:27.414 -03:00 [DBG] Bearer token found in header
2018-08-28 00:57:27.416 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:57:27.439 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:57:27.450 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:57:27.454 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:57:27.455 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:57:27.456 -03:00 [DBG] Creating userinfo response
2018-08-28 00:57:27.456 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:57:27.456 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:57:27.460 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:57:27.461 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:57:27.462 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:57:27.464 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:57:27.469 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:57:27.469 -03:00 [DBG] End userinfo request
2018-08-28 00:58:02.558 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:58:02.562 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:58:02.562 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:58:02.563 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:58:02.563 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:58:02.563 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:58:02.563 -03:00 [DBG] Start discovery request
2018-08-28 00:58:02.574 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:58:02.609 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:58:02.611 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:58:02.611 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:58:02.612 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:58:02.612 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:58:02.613 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:58:02.613 -03:00 [DBG] Start key discovery request
2018-08-28 00:58:02.970 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:58:02.973 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:58:02.974 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:58:03.216 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:58:03.218 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:58:03.219 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:58:03.220 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:58:03.220 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:58:03.221 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:58:03.221 -03:00 [DBG] Start userinfo request
2018-08-28 00:58:03.221 -03:00 [DBG] Bearer token found in header
2018-08-28 00:58:03.223 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:58:03.243 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:58:03.255 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:58:03.267 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:58:03.268 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:58:03.269 -03:00 [DBG] Creating userinfo response
2018-08-28 00:58:03.269 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:58:03.269 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:58:03.272 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:58:03.273 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:58:03.274 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:58:03.277 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:58:03.281 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:58:03.281 -03:00 [DBG] End userinfo request
2018-08-28 00:58:23.803 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:58:23.806 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:58:23.806 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:58:23.807 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:58:23.807 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:58:23.807 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:58:23.808 -03:00 [DBG] Start discovery request
2018-08-28 00:58:23.818 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:58:23.854 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:58:23.857 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:58:23.858 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:58:23.858 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:58:23.859 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:58:23.859 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:58:23.860 -03:00 [DBG] Start key discovery request
2018-08-28 00:58:24.195 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:58:24.197 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:58:24.198 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:58:24.521 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:58:24.524 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:58:24.524 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:58:24.524 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:58:24.525 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:58:24.525 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:58:24.525 -03:00 [DBG] Start userinfo request
2018-08-28 00:58:24.525 -03:00 [DBG] Bearer token found in header
2018-08-28 00:58:24.527 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:58:24.543 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:58:24.555 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:58:24.559 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:58:24.560 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:58:24.561 -03:00 [DBG] Creating userinfo response
2018-08-28 00:58:24.561 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:58:24.564 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:58:24.566 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:58:24.567 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:58:24.567 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:58:24.569 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:58:24.573 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:58:24.575 -03:00 [DBG] End userinfo request
2018-08-28 00:59:16.134 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 00:59:16.136 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:59:16.137 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:59:16.137 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 00:59:16.138 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 00:59:16.138 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 00:59:16.138 -03:00 [DBG] Start discovery request
2018-08-28 00:59:16.147 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 00:59:16.186 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 00:59:16.189 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:59:16.190 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:59:16.191 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 00:59:16.191 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 00:59:16.192 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 00:59:16.192 -03:00 [DBG] Start key discovery request
2018-08-28 00:59:16.568 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:59:16.572 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:59:16.572 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:59:16.813 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 00:59:16.816 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 00:59:16.816 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 00:59:16.817 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 00:59:16.817 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 00:59:16.818 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 00:59:16.818 -03:00 [DBG] Start userinfo request
2018-08-28 00:59:16.818 -03:00 [DBG] Bearer token found in header
2018-08-28 00:59:16.820 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 00:59:16.844 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:59:16.854 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 00:59:16.859 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 00:59:16.859 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 00:59:16.860 -03:00 [DBG] Creating userinfo response
2018-08-28 00:59:16.860 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:59:16.860 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:59:16.864 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:59:16.866 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 00:59:16.867 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 00:59:16.870 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 00:59:16.890 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 00:59:16.891 -03:00 [DBG] End userinfo request
2018-08-28 01:00:06.672 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:00:06.674 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:00:06.675 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:00:06.675 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:00:06.675 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:00:06.675 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:00:06.676 -03:00 [DBG] Start discovery request
2018-08-28 01:00:06.685 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:00:06.746 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:00:06.748 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:00:06.749 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:00:06.749 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:00:06.749 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:00:06.750 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:00:06.750 -03:00 [DBG] Start key discovery request
2018-08-28 01:00:08.574 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:00:08.576 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:00:08.576 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:00:08.838 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:00:08.841 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:00:08.842 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:00:08.842 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:00:08.843 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:00:08.843 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:00:08.843 -03:00 [DBG] Start userinfo request
2018-08-28 01:00:08.844 -03:00 [DBG] Bearer token found in header
2018-08-28 01:00:08.846 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 01:00:08.865 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:00:08.877 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:00:08.881 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 01:00:08.881 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 01:00:08.882 -03:00 [DBG] Creating userinfo response
2018-08-28 01:00:08.882 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:00:08.882 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:00:08.885 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:00:08.886 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 01:00:08.886 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:00:08.889 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:00:08.894 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 01:00:08.896 -03:00 [DBG] End userinfo request
2018-08-28 01:00:17.527 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:00:17.529 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:00:17.530 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:00:17.530 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:00:17.530 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:00:17.531 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:00:17.531 -03:00 [DBG] Start discovery request
2018-08-28 01:00:17.540 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:00:17.574 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:00:17.577 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:00:17.577 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:00:17.577 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:00:17.578 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:00:17.578 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:00:17.579 -03:00 [DBG] Start key discovery request
2018-08-28 01:00:17.924 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:00:17.927 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:00:17.928 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:00:18.210 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:00:18.214 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:00:18.214 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:00:18.215 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:00:18.216 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:00:18.216 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:00:18.230 -03:00 [DBG] Start userinfo request
2018-08-28 01:00:18.230 -03:00 [DBG] Bearer token found in header
2018-08-28 01:00:18.232 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 01:00:18.253 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:00:18.261 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:00:18.266 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 01:00:18.266 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 01:00:18.267 -03:00 [DBG] Creating userinfo response
2018-08-28 01:00:18.267 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:00:18.267 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:00:18.270 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:00:18.270 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 01:00:18.271 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:00:18.273 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:00:18.279 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 01:00:18.279 -03:00 [DBG] End userinfo request
2018-08-28 01:00:40.390 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:00:40.393 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:00:40.393 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:00:40.393 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:00:40.394 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:00:40.394 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:00:40.394 -03:00 [DBG] Start discovery request
2018-08-28 01:00:40.404 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:00:40.482 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:00:40.484 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:00:40.485 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:00:40.485 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:00:40.486 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:00:40.487 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:00:40.487 -03:00 [DBG] Start key discovery request
2018-08-28 01:00:40.809 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:00:40.812 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:00:40.812 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:00:41.168 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:00:41.172 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:00:41.172 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:00:41.173 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:00:41.173 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:00:41.173 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:00:41.174 -03:00 [DBG] Start userinfo request
2018-08-28 01:00:41.186 -03:00 [DBG] Bearer token found in header
2018-08-28 01:00:41.188 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 01:00:41.204 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:00:41.213 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:00:41.217 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 01:00:41.217 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 01:00:41.217 -03:00 [DBG] Creating userinfo response
2018-08-28 01:00:41.218 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:00:41.218 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:00:41.221 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:00:41.221 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 01:00:41.222 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:00:41.224 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:00:41.229 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 01:00:41.229 -03:00 [DBG] End userinfo request
2018-08-28 01:00:45.532 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:00:45.534 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:00:45.534 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:00:45.534 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:00:45.535 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:00:45.535 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:00:45.535 -03:00 [DBG] Start discovery request
2018-08-28 01:00:45.543 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:00:45.610 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:00:45.613 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:00:45.614 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:00:45.614 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:00:45.614 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:00:45.615 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:00:45.615 -03:00 [DBG] Start key discovery request
2018-08-28 01:00:45.968 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:00:45.972 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:00:45.972 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:00:45.972 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:00:45.973 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:00:45.973 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:00:45.974 -03:00 [DBG] Start userinfo request
2018-08-28 01:00:45.974 -03:00 [DBG] Bearer token found in header
2018-08-28 01:00:45.976 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: true
2018-08-28 01:00:46.000 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:00:46.011 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:00:46.017 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 01:00:46.034 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535427150,
    "exp": 1535430750,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 01:00:46.036 -03:00 [DBG] Creating userinfo response
2018-08-28 01:00:46.037 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:00:46.037 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:00:46.041 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:00:46.042 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 01:00:46.042 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:00:46.045 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:00:46.053 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 01:00:46.053 -03:00 [DBG] End userinfo request
2018-08-28 01:02:10.891 -03:00 [DBG] 7 persisted grants found for 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:02:10.911 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:02:10.914 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:02:10.916 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:02:12.511 -03:00 [DBG] CORS request made for path: /Grants/Revoke from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-28 01:02:12.537 -03:00 [DBG] removing 7 persisted grants from database for subject 78dac1db-1c66-432f-aaf3-d728c490ec79, clientId UserManagementUI
2018-08-28 01:02:12.564 -03:00 [DBG] 0 persisted grants found for 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:02:15.652 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:02:15.655 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:02:15.655 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:02:15.656 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:02:15.656 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:02:15.656 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:02:15.656 -03:00 [DBG] Start discovery request
2018-08-28 01:02:15.666 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:02:15.701 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:02:15.704 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:02:15.705 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:02:15.705 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:02:15.705 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:02:15.706 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:02:15.706 -03:00 [DBG] Start key discovery request
2018-08-28 01:02:16.085 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:02:16.088 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:02:16.088 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:02:16.364 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:02:16.367 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:02:16.368 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:02:16.368 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:02:16.368 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:02:16.369 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:02:16.369 -03:00 [DBG] Start userinfo request
2018-08-28 01:02:16.369 -03:00 [DBG] Bearer token found in header
2018-08-28 01:02:16.372 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: false
2018-08-28 01:02:16.373 -03:00 [DBG] reference_token grant with value: ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a not found in store.
2018-08-28 01:02:16.374 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a"
}
2018-08-28 01:02:24.544 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:02:24.547 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:02:24.547 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:02:24.548 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:02:24.548 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:02:24.548 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:02:24.549 -03:00 [DBG] Start discovery request
2018-08-28 01:02:24.557 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:02:24.596 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:02:24.599 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:02:24.599 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:02:24.600 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:02:24.600 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:02:24.601 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:02:24.601 -03:00 [DBG] Start key discovery request
2018-08-28 01:02:24.953 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:02:24.956 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:02:24.956 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:02:25.250 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:02:25.253 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:02:25.254 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:02:25.255 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:02:25.255 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:02:25.256 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:02:25.256 -03:00 [DBG] Start userinfo request
2018-08-28 01:02:25.257 -03:00 [DBG] Bearer token found in header
2018-08-28 01:02:25.259 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: false
2018-08-28 01:02:25.263 -03:00 [DBG] reference_token grant with value: ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a not found in store.
2018-08-28 01:02:25.264 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a"
}
2018-08-28 01:02:58.794 -03:00 [INF] Clearing 0 tokens
2018-08-28 01:04:58.545 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:04:58.548 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:04:58.549 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:04:58.549 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:04:58.550 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:04:58.550 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:04:58.550 -03:00 [DBG] Start discovery request
2018-08-28 01:04:58.561 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:04:58.669 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:04:58.672 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:04:58.673 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:04:58.673 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:04:58.673 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:04:58.674 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:04:58.674 -03:00 [DBG] Start key discovery request
2018-08-28 01:05:06.977 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:05:06.980 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:05:06.981 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:05:07.259 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:05:07.262 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:05:07.263 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:05:07.263 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:05:07.264 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:05:07.264 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:05:07.265 -03:00 [DBG] Start userinfo request
2018-08-28 01:05:07.265 -03:00 [DBG] Bearer token found in header
2018-08-28 01:05:07.267 -03:00 [DBG] 5e+/SGs5EKIMKl5/k9ClPtB7DU02+3y9V7M2eXCJFCw= found in database: false
2018-08-28 01:05:07.268 -03:00 [DBG] reference_token grant with value: ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a not found in store.
2018-08-28 01:05:07.268 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ee7667a9da627810bc86d84bb1fd920ff3fedfa875cc12aa46f7102487bed60a"
}
2018-08-28 01:05:25.934 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:05:25.936 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:05:25.936 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:05:25.936 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:05:25.937 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:05:25.937 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:05:25.937 -03:00 [DBG] Start discovery request
2018-08-28 01:05:25.948 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:05:25.996 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:05:25.999 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:05:25.999 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:05:26.000 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:05:26.001 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:05:26.001 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:05:26.001 -03:00 [DBG] Start key discovery request
2018-08-28 01:10:23.690 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:10:24.019 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:10:24.020 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:10:25.509 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:10:25.512 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:10:25.512 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:10:25.513 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:10:25.513 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:10:25.513 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:10:25.514 -03:00 [DBG] Start discovery request
2018-08-28 01:10:25.560 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:10:25.584 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:10:25.587 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:10:25.588 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:10:25.588 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:10:25.589 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:10:25.589 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:10:25.589 -03:00 [DBG] Start key discovery request
2018-08-28 01:10:41.452 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:10:41.454 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:10:41.455 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:10:41.455 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:10:41.455 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:10:41.455 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:10:41.456 -03:00 [DBG] Start discovery request
2018-08-28 01:10:41.472 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:10:41.559 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:10:41.561 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:10:41.561 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:10:41.562 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:10:41.562 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:10:41.563 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:10:41.563 -03:00 [DBG] Start key discovery request
2018-08-28 01:10:41.690 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 01:10:41.691 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 01:10:41.691 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 01:10:41.691 -03:00 [DBG] Start authorize request
2018-08-28 01:10:41.691 -03:00 [DBG] User in authorize request: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:10:41.692 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 01:10:41.753 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:10:41.759 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:10:41.765 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:10:41.767 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:10:41.769 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:10:41.770 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 01:10:41.770 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "Ehtv7poeE27mXX0BWkBEHTMqzXrE4dOIPkd1hbFG",
  "Nonce": "Ehtv7poeE27mXX0BWkBEHTMqzXrE4dOIPkd1hbFG",
  "SessionId": "d786d86016de33674665af7c5ce36828",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "Ehtv7poeE27mXX0BWkBEHTMqzXrE4dOIPkd1hbFG",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "Ehtv7poeE27mXX0BWkBEHTMqzXrE4dOIPkd1hbFG"
  }
}
2018-08-28 01:10:41.774 -03:00 [DBG] dNsKvdOaVVSYnWYeunkn1dwRkQz+bV+gEiP/tJjhjZQ= found in database: false
2018-08-28 01:10:41.774 -03:00 [DBG] user_consent grant with value: UserManagementUI|78dac1db-1c66-432f-aaf3-d728c490ec79 not found in store.
2018-08-28 01:10:41.774 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-28 01:10:41.775 -03:00 [INF] Showing consent: User has not yet consented
2018-08-28 01:10:41.784 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 01:10:41.794 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:10:41.796 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:10:41.798 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:10:41.800 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:10:41.802 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:10:41.803 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 01:10:41.812 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:10:41.814 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:10:41.816 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:10:47.795 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 01:10:47.811 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:10:47.813 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:10:47.815 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:10:47.817 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:10:47.818 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:10:47.819 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 01:10:47.826 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:10:47.828 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:10:47.829 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:10:50.512 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 01:10:50.528 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:10:50.531 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:10:50.534 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:10:50.537 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:10:50.538 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:10:50.539 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 01:10:50.548 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:10:50.550 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:10:50.552 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:10:54.661 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 01:10:54.675 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:10:54.677 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:10:54.679 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:10:54.681 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:10:54.682 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:10:54.683 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 01:10:54.690 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:10:54.692 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:10:54.694 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:11:03.679 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 01:11:03.696 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:11:03.700 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:03.702 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:11:03.704 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:03.705 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:11:03.706 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 01:11:03.714 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:11:03.716 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:03.717 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:11:07.357 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 01:11:07.373 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:11:07.377 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:07.379 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:11:07.381 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:07.383 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:11:07.383 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 01:11:07.391 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:11:07.393 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:07.394 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:11:10.376 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-28 01:11:10.379 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 01:11:10.391 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:11:10.394 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:10.397 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:11:10.399 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:10.400 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:11:10.400 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 01:11:10.408 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-28 01:11:10.409 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-28 01:11:10.410 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-28 01:11:10.410 -03:00 [DBG] Start authorize callback request
2018-08-28 01:11:10.410 -03:00 [DBG] User in authorize request: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:11:10.411 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 01:11:10.424 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:11:10.428 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:10.429 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:11:10.431 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:10.432 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:11:10.433 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 01:11:10.433 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "Ehtv7poeE27mXX0BWkBEHTMqzXrE4dOIPkd1hbFG",
  "Nonce": "Ehtv7poeE27mXX0BWkBEHTMqzXrE4dOIPkd1hbFG",
  "SessionId": "d786d86016de33674665af7c5ce36828",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "Ehtv7poeE27mXX0BWkBEHTMqzXrE4dOIPkd1hbFG",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "Ehtv7poeE27mXX0BWkBEHTMqzXrE4dOIPkd1hbFG"
  }
}
2018-08-28 01:11:10.441 -03:00 [DBG] dNsKvdOaVVSYnWYeunkn1dwRkQz+bV+gEiP/tJjhjZQ= found in database: false
2018-08-28 01:11:10.441 -03:00 [DBG] user_consent grant with value: UserManagementUI|78dac1db-1c66-432f-aaf3-d728c490ec79 not found in store.
2018-08-28 01:11:10.442 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-28 01:11:10.442 -03:00 [INF] User consented to scopes: ["openid","profile","email","picture"]
2018-08-28 01:11:10.442 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","picture"]
2018-08-28 01:11:10.442 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:11:10.446 -03:00 [DBG] dNsKvdOaVVSYnWYeunkn1dwRkQz+bV+gEiP/tJjhjZQ= not found in database
2018-08-28 01:11:10.457 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 01:11:10.458 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 01:11:10.458 -03:00 [DBG] Getting claims for access token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:11:10.469 -03:00 [DBG] wUF/IwAaL3m4b4gJZ5X+MNx4ypvkpkmlcoIB7mgE43Y= not found in database
2018-08-28 01:11:10.476 -03:00 [DBG] Getting claims for identity token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79 and client: UserManagementUI
2018-08-28 01:11:10.476 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 01:11:10.478 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****CuPg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****e9ac"
    }
  ],
  "ActivityId": "0HLGCH9I0PLS2:0000000A",
  "TimeStamp": "2018-08-28T04:11:10Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 01:11:10.479 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "Ehtv7poeE27mXX0BWkBEHTMqzXrE4dOIPkd1hbFG",
  "Scope": "openid profile email picture"
}
2018-08-28 01:11:12.133 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:11:12.135 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:11:12.136 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:11:12.136 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:11:12.136 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:11:12.136 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:11:12.137 -03:00 [DBG] Start discovery request
2018-08-28 01:11:12.147 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:11:12.191 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:11:12.195 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:11:12.195 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:11:12.196 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:11:12.196 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:11:12.197 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:11:12.197 -03:00 [DBG] Start discovery request
2018-08-28 01:11:12.207 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:11:12.222 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:11:12.224 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:11:12.224 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:11:12.225 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:11:12.225 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:11:12.226 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:11:12.226 -03:00 [DBG] Start key discovery request
2018-08-28 01:11:12.236 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:11:12.239 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:11:12.239 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:11:12.240 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:11:12.240 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:11:12.241 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:11:12.241 -03:00 [DBG] Start key discovery request
2018-08-28 01:11:13.597 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:11:13.599 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:11:13.599 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:11:13.828 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:11:13.831 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:11:13.831 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:11:13.832 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:11:13.833 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:11:13.834 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:11:13.834 -03:00 [DBG] Start userinfo request
2018-08-28 01:11:13.834 -03:00 [DBG] Bearer token found in header
2018-08-28 01:11:13.836 -03:00 [DBG] wUF/IwAaL3m4b4gJZ5X+MNx4ypvkpkmlcoIB7mgE43Y= found in database: true
2018-08-28 01:11:13.858 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:11:13.871 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:11:13.876 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 01:11:13.877 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "f651d91d684ba18352fec540745fcbf78a5b41ea79a3acbbf2f1e79a1f81e9ac",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535429470,
    "exp": 1535433070,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 01:11:13.880 -03:00 [DBG] Creating userinfo response
2018-08-28 01:11:13.880 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:11:13.880 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:11:13.883 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:13.884 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 01:11:13.884 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:11:13.887 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:13.892 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 01:11:13.893 -03:00 [DBG] End userinfo request
2018-08-28 01:11:17.731 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:11:17.733 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:11:17.733 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:11:17.734 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:11:17.734 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:11:17.734 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:11:17.735 -03:00 [DBG] Start discovery request
2018-08-28 01:11:17.746 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:11:17.791 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:11:17.794 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:11:17.794 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:11:17.794 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:11:17.795 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:11:17.795 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:11:17.796 -03:00 [DBG] Start key discovery request
2018-08-28 01:11:19.527 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:11:19.529 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:11:19.529 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:11:19.772 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:11:19.774 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:11:19.775 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:11:19.775 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:11:19.776 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:11:19.777 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:11:19.777 -03:00 [DBG] Start userinfo request
2018-08-28 01:11:19.778 -03:00 [DBG] Bearer token found in header
2018-08-28 01:11:19.780 -03:00 [DBG] wUF/IwAaL3m4b4gJZ5X+MNx4ypvkpkmlcoIB7mgE43Y= found in database: true
2018-08-28 01:11:19.801 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:11:19.814 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:11:19.819 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 01:11:19.820 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "f651d91d684ba18352fec540745fcbf78a5b41ea79a3acbbf2f1e79a1f81e9ac",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535429470,
    "exp": 1535433070,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 01:11:19.823 -03:00 [DBG] Creating userinfo response
2018-08-28 01:11:19.823 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:11:19.823 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:11:19.826 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:19.827 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 01:11:19.827 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:11:19.830 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:19.834 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 01:11:19.834 -03:00 [DBG] End userinfo request
2018-08-28 01:11:22.946 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-28 01:11:22.948 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-28 01:11:22.948 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-28 01:11:22.949 -03:00 [DBG] Processing signout request for 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:11:22.950 -03:00 [DBG] Start end session request validation
2018-08-28 01:11:22.950 -03:00 [DBG] Start identity token validation
2018-08-28 01:11:22.964 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:11:22.965 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-28 01:11:22.972 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 01:11:22.972 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535429470,
    "exp": 1535429770,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "Ehtv7poeE27mXX0BWkBEHTMqzXrE4dOIPkd1hbFG",
    "iat": 1535429470,
    "at_hash": "qvHrAGS864SrXu7Xm1l0tg",
    "sid": "d786d86016de33674665af7c5ce36828",
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535422537,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 01:11:22.973 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzU0Mjk0NzAsImV4cCI6MTUzNTQyOTc3MCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoiRWh0djdwb2VFMjdtWFgwQldrQkVIVE1xelhyRTRkT0lQa2QxaGJGRyIsImlhdCI6MTUzNTQyOTQ3MCwiYXRfaGFzaCI6InF2SHJBR1M4NjRTclh1N1htMWwwdGciLCJzaWQiOiJkNzg2ZDg2MDE2ZGUzMzY3NDY2NWFmN2M1Y2UzNjgyOCIsInN1YiI6Ijc4ZGFjMWRiLTFjNjYtNDMyZi1hYWYzLWQ3MjhjNDkwZWM3OSIsImF1dGhfdGltZSI6MTUzNTQyMjUzNywiaWRwIjoiR29vZ2xlIiwiYW1yIjpbImV4dGVybmFsIl19.hqJOI88cRUVvAIPEgxYHfRo4bZCv8mfFEYNhBES03ih952effzGBanGiwSYmjlYVvGDm5NnAiQlly_qTm32GXe57bhr4F3bcsWHJM3RgkNE8hiuIqW7RxTmvgj58-vP_I6ilP706Hyp0pcK5vajhRNGe7MKYQB7yH1nx1UuwHoDyaZ0ZvDhKGyaXpn-d4oV3jmdCAqHpR9YQvcL6VVgmDlcCfjc0z5eDTXRSVc80UZaIvOcELFhOOz3hzZQRny6OxXfEIrmoIgNotWyvbIUefWKgmwLEAnKDmlufQYnYFBgEyVQYTpQSMDHsiOWCa2vhgNncKHDMXE80dMnz2DCuPg",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-28 01:11:22.974 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-28 01:11:22.989 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-28 01:11:22.990 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-28 01:11:22.990 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-28 01:11:22.990 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGCH9I0PLS2:0000000C",
  "TimeStamp": "2018-08-28T04:11:22Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 01:11:23.399 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-28 01:11:23.400 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-28 01:11:23.401 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-28 01:11:23.401 -03:00 [DBG] Processing signout callback request
2018-08-28 01:11:23.417 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:11:23.418 -03:00 [DBG] No client front-channel logout URLs
2018-08-28 01:11:23.419 -03:00 [DBG] No client back-channel logout URLs
2018-08-28 01:11:23.419 -03:00 [INF] Successful signout callback.
2018-08-28 01:11:23.422 -03:00 [DBG] No client front-channel iframe urls
2018-08-28 01:11:23.422 -03:00 [DBG] No client back-channel iframe urls
2018-08-28 01:11:26.783 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:11:26.785 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:11:26.785 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:11:26.786 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:11:26.786 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:11:26.786 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:11:26.787 -03:00 [DBG] Start discovery request
2018-08-28 01:11:26.797 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:11:26.835 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:11:26.838 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:11:26.838 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:11:26.839 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:11:26.839 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:11:26.840 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:11:26.841 -03:00 [DBG] Start key discovery request
2018-08-28 01:11:26.975 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 01:11:26.980 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 01:11:26.983 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 01:11:26.983 -03:00 [DBG] Start authorize request
2018-08-28 01:11:26.984 -03:00 [DBG] No user present in authorize request
2018-08-28 01:11:26.984 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 01:11:26.998 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:11:27.001 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:27.003 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:11:27.005 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:27.007 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:11:27.008 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 01:11:27.011 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "Ly92ZYlEa4RfRcTWw7dSsVRsPgjUScnXV3uNFWY4",
  "Nonce": "Ly92ZYlEa4RfRcTWw7dSsVRsPgjUScnXV3uNFWY4",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "Ly92ZYlEa4RfRcTWw7dSsVRsPgjUScnXV3uNFWY4",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "Ly92ZYlEa4RfRcTWw7dSsVRsPgjUScnXV3uNFWY4"
  }
}
2018-08-28 01:11:27.011 -03:00 [INF] Showing login: User is not authenticated
2018-08-28 01:11:27.025 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 01:11:27.040 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:11:27.044 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:27.046 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:11:27.049 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:27.052 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:11:27.052 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 01:11:27.062 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:11:29.198 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-28 01:11:34.353 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-28 01:11:34.400 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "102696868227620762147",
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCH9I0PLS4:0000000C",
  "TimeStamp": "2018-08-28T04:11:34Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 01:11:34.401 -03:00 [DBG] Augmenting SignInContext
2018-08-28 01:11:34.402 -03:00 [DBG] Adding amr claim with value: external
2018-08-28 01:11:34.402 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-28 01:11:34.402 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-28 01:11:34.410 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-28 01:11:34.413 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-28 01:11:34.413 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-28 01:11:34.413 -03:00 [DBG] Start authorize callback request
2018-08-28 01:11:34.414 -03:00 [DBG] User in authorize request: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:11:34.414 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 01:11:34.425 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:11:34.429 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:34.431 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:11:34.434 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:34.436 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:11:34.437 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 01:11:34.437 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "Ly92ZYlEa4RfRcTWw7dSsVRsPgjUScnXV3uNFWY4",
  "Nonce": "Ly92ZYlEa4RfRcTWw7dSsVRsPgjUScnXV3uNFWY4",
  "SessionId": "2055f3401506d7e35803a42278a046a3",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "Ly92ZYlEa4RfRcTWw7dSsVRsPgjUScnXV3uNFWY4",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "Ly92ZYlEa4RfRcTWw7dSsVRsPgjUScnXV3uNFWY4"
  }
}
2018-08-28 01:11:34.443 -03:00 [DBG] dNsKvdOaVVSYnWYeunkn1dwRkQz+bV+gEiP/tJjhjZQ= found in database: true
2018-08-28 01:11:34.447 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-28 01:11:34.448 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 01:11:34.448 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 01:11:34.448 -03:00 [DBG] Getting claims for access token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:11:34.461 -03:00 [DBG] zSHI1Ha1SsHN7WMt4js7E2jkRD4iK8c6yZbYH/SM1Ms= not found in database
2018-08-28 01:11:34.470 -03:00 [DBG] Getting claims for identity token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79 and client: UserManagementUI
2018-08-28 01:11:34.470 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 01:11:34.473 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****y0Rw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****e28c"
    }
  ],
  "ActivityId": "0HLGCH9I0PLS4:0000000D",
  "TimeStamp": "2018-08-28T04:11:34Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 01:11:34.474 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "Ly92ZYlEa4RfRcTWw7dSsVRsPgjUScnXV3uNFWY4",
  "Scope": "openid profile email picture"
}
2018-08-28 01:11:34.475 -03:00 [DBG] Augmenting SignInContext
2018-08-28 01:11:34.475 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-28 01:11:35.834 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:11:35.836 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:11:35.836 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:11:35.837 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:11:35.837 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:11:35.837 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:11:35.838 -03:00 [DBG] Start discovery request
2018-08-28 01:11:35.847 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:11:35.873 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:11:35.877 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:11:35.877 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:11:35.878 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:11:35.878 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:11:35.878 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:11:35.879 -03:00 [DBG] Start discovery request
2018-08-28 01:11:35.889 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:11:35.926 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:11:35.929 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:11:35.929 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:11:35.930 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:11:35.930 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:11:35.931 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:11:35.931 -03:00 [DBG] Start key discovery request
2018-08-28 01:11:35.945 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:11:35.950 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:11:35.950 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:11:35.951 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:11:35.951 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:11:35.952 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:11:35.952 -03:00 [DBG] Start key discovery request
2018-08-28 01:11:37.314 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:11:37.316 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:11:37.316 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:11:37.622 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:11:37.625 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:11:37.626 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:11:37.626 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:11:37.626 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:11:37.627 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:11:37.627 -03:00 [DBG] Start userinfo request
2018-08-28 01:11:37.627 -03:00 [DBG] Bearer token found in header
2018-08-28 01:11:37.629 -03:00 [DBG] zSHI1Ha1SsHN7WMt4js7E2jkRD4iK8c6yZbYH/SM1Ms= found in database: true
2018-08-28 01:11:37.651 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:11:37.664 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:11:37.669 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 01:11:37.669 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "c831fdd0790d9cdf4cc9a4e17a3f6f502b49a947524c992cfa4aefbe449fe28c",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535429494,
    "exp": 1535433094,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535429494,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 01:11:37.672 -03:00 [DBG] Creating userinfo response
2018-08-28 01:11:37.672 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:11:37.672 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:11:37.676 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:37.676 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 01:11:37.676 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:11:37.679 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:11:37.684 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 01:11:37.685 -03:00 [DBG] End userinfo request
2018-08-28 01:15:01.521 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:15:01.524 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:15:01.525 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:15:01.525 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:15:01.526 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:15:01.527 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:15:01.528 -03:00 [DBG] Start discovery request
2018-08-28 01:15:01.537 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:15:01.606 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:15:01.609 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:15:01.610 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:15:01.611 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:15:01.611 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:15:01.612 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:15:01.612 -03:00 [DBG] Start key discovery request
2018-08-28 01:15:02.260 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:15:02.263 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:15:02.263 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:15:02.532 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:15:02.536 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:15:02.536 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:15:02.536 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:15:02.537 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:15:02.537 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:15:02.537 -03:00 [DBG] Start userinfo request
2018-08-28 01:15:02.537 -03:00 [DBG] Bearer token found in header
2018-08-28 01:15:02.540 -03:00 [DBG] zSHI1Ha1SsHN7WMt4js7E2jkRD4iK8c6yZbYH/SM1Ms= found in database: true
2018-08-28 01:15:02.558 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:15:02.571 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:15:02.575 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 01:15:02.576 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "c831fdd0790d9cdf4cc9a4e17a3f6f502b49a947524c992cfa4aefbe449fe28c",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535429494,
    "exp": 1535433094,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535429494,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 01:15:02.577 -03:00 [DBG] Creating userinfo response
2018-08-28 01:15:02.577 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:15:02.578 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:15:02.581 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:15:02.582 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 01:15:02.582 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:15:02.584 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:15:02.588 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 01:15:02.589 -03:00 [DBG] End userinfo request
2018-08-28 01:15:49.248 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:15:49.255 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:15:49.255 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:15:49.255 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:15:49.256 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:15:49.256 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:15:49.257 -03:00 [DBG] Start discovery request
2018-08-28 01:15:49.275 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:15:49.380 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:15:49.384 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:15:49.385 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:15:49.385 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:15:49.386 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:15:49.386 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:15:49.386 -03:00 [DBG] Start key discovery request
2018-08-28 01:15:52.101 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:15:52.104 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:15:52.104 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:15:52.328 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:15:52.331 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:15:52.332 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:15:52.332 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:15:52.333 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:15:52.334 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:15:52.334 -03:00 [DBG] Start userinfo request
2018-08-28 01:15:52.335 -03:00 [DBG] Bearer token found in header
2018-08-28 01:15:52.337 -03:00 [DBG] zSHI1Ha1SsHN7WMt4js7E2jkRD4iK8c6yZbYH/SM1Ms= found in database: true
2018-08-28 01:15:52.363 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:15:52.374 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:15:52.379 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 01:15:52.380 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "c831fdd0790d9cdf4cc9a4e17a3f6f502b49a947524c992cfa4aefbe449fe28c",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535429494,
    "exp": 1535433094,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535429494,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 01:15:52.385 -03:00 [DBG] Creating userinfo response
2018-08-28 01:15:52.385 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:15:52.385 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:15:52.388 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:15:52.389 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 01:15:52.390 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:15:52.393 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:15:52.400 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 01:15:52.400 -03:00 [DBG] End userinfo request
2018-08-28 01:16:38.933 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:16:38.936 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:16:38.936 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:16:38.937 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:16:38.937 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:16:38.938 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:16:38.938 -03:00 [DBG] Start discovery request
2018-08-28 01:16:38.947 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:16:39.021 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:16:39.029 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:16:39.033 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:16:39.033 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:16:39.034 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:16:39.034 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:16:39.035 -03:00 [DBG] Start key discovery request
2018-08-28 01:16:46.526 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:16:46.529 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:16:46.529 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:16:46.529 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:16:46.530 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:16:46.530 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:16:46.530 -03:00 [DBG] Start discovery request
2018-08-28 01:16:46.540 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:16:46.584 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:16:46.586 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:16:46.587 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:16:46.587 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:16:46.588 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:16:46.588 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:16:46.589 -03:00 [DBG] Start key discovery request
2018-08-28 01:16:46.698 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 01:16:46.700 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 01:16:46.700 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 01:16:46.700 -03:00 [DBG] Start authorize request
2018-08-28 01:16:46.701 -03:00 [DBG] User in authorize request: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:16:46.701 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 01:16:46.724 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:16:46.729 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:16:46.732 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:16:46.735 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:16:46.737 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:16:46.739 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 01:16:46.739 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "uz3Hb09Ll7xIHsqz6m43yEqcoBfq9HJH0QrbzTtj",
  "Nonce": "uz3Hb09Ll7xIHsqz6m43yEqcoBfq9HJH0QrbzTtj",
  "SessionId": "2055f3401506d7e35803a42278a046a3",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "uz3Hb09Ll7xIHsqz6m43yEqcoBfq9HJH0QrbzTtj",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "uz3Hb09Ll7xIHsqz6m43yEqcoBfq9HJH0QrbzTtj"
  }
}
2018-08-28 01:16:46.753 -03:00 [DBG] dNsKvdOaVVSYnWYeunkn1dwRkQz+bV+gEiP/tJjhjZQ= found in database: true
2018-08-28 01:16:46.757 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-28 01:16:46.757 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 01:16:46.758 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 01:16:46.758 -03:00 [DBG] Getting claims for access token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:16:46.772 -03:00 [DBG] BTzF7ngYLWOSXqIEMeyrhLpZgwtWRlzC7nk/WXHiJQ0= not found in database
2018-08-28 01:16:46.785 -03:00 [DBG] Getting claims for identity token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79 and client: UserManagementUI
2018-08-28 01:16:46.786 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 01:16:46.789 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****B4Qg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****62c9"
    }
  ],
  "ActivityId": "0HLGCH9I0PLS6:00000001",
  "TimeStamp": "2018-08-28T04:16:46Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 01:16:46.790 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "uz3Hb09Ll7xIHsqz6m43yEqcoBfq9HJH0QrbzTtj",
  "Scope": "openid profile email picture"
}
2018-08-28 01:16:48.177 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:16:48.180 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:16:48.180 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:16:48.180 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:16:48.181 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:16:48.181 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:16:48.182 -03:00 [DBG] Start discovery request
2018-08-28 01:16:48.191 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:16:48.218 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:16:48.222 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:16:48.223 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:16:48.223 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:16:48.223 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:16:48.224 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:16:48.224 -03:00 [DBG] Start discovery request
2018-08-28 01:16:48.234 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:16:48.241 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:16:48.286 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:16:48.287 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:16:48.287 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:16:48.288 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:16:48.288 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:16:48.288 -03:00 [DBG] Start key discovery request
2018-08-28 01:16:48.299 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:16:48.301 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:16:48.301 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:16:48.302 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:16:48.302 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:16:48.303 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:16:48.303 -03:00 [DBG] Start key discovery request
2018-08-28 01:16:49.669 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:16:49.672 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:16:49.672 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:16:49.891 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:16:49.893 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:16:49.894 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:16:49.894 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:16:49.895 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:16:49.895 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:16:49.896 -03:00 [DBG] Start userinfo request
2018-08-28 01:16:49.897 -03:00 [DBG] Bearer token found in header
2018-08-28 01:16:49.899 -03:00 [DBG] BTzF7ngYLWOSXqIEMeyrhLpZgwtWRlzC7nk/WXHiJQ0= found in database: true
2018-08-28 01:16:49.921 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:16:49.932 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:16:49.941 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 01:16:49.942 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "1646173c96f12971d422341ecbff1aaac87c7eb8b839920c47252a754c8c62c9",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535429806,
    "exp": 1535433406,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535429494,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 01:16:49.943 -03:00 [DBG] Creating userinfo response
2018-08-28 01:16:49.943 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:16:49.943 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:16:49.947 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:16:49.947 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 01:16:49.948 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:16:49.950 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:16:49.955 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 01:16:49.956 -03:00 [DBG] End userinfo request
2018-08-28 01:16:57.460 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:16:57.462 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:16:57.463 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:16:57.463 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:16:57.464 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:16:57.465 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:16:57.465 -03:00 [DBG] Start discovery request
2018-08-28 01:16:57.476 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:16:57.513 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:16:57.515 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:16:57.516 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:16:57.516 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:16:57.517 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:16:57.517 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:16:57.517 -03:00 [DBG] Start key discovery request
2018-08-28 01:16:58.584 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:16:58.587 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:16:58.587 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:16:58.742 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:16:58.746 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:16:58.746 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:16:58.747 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:16:58.747 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:16:58.747 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:16:58.748 -03:00 [DBG] Start userinfo request
2018-08-28 01:16:58.748 -03:00 [DBG] Bearer token found in header
2018-08-28 01:16:58.750 -03:00 [DBG] BTzF7ngYLWOSXqIEMeyrhLpZgwtWRlzC7nk/WXHiJQ0= found in database: true
2018-08-28 01:16:58.775 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:16:58.787 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:16:58.803 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 01:16:58.803 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "1646173c96f12971d422341ecbff1aaac87c7eb8b839920c47252a754c8c62c9",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535429806,
    "exp": 1535433406,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535429494,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 01:16:58.804 -03:00 [DBG] Creating userinfo response
2018-08-28 01:16:58.804 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:16:58.807 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:16:58.810 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:16:58.811 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 01:16:58.811 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:16:58.814 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:16:58.818 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 01:16:58.818 -03:00 [DBG] End userinfo request
2018-08-28 01:17:39.620 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:17:39.622 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:17:39.623 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:17:39.623 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:17:39.624 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:17:39.624 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:17:39.624 -03:00 [DBG] Start discovery request
2018-08-28 01:17:39.634 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:17:39.675 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:17:39.677 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:17:39.678 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:17:39.678 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:17:39.679 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:17:39.679 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:17:39.679 -03:00 [DBG] Start key discovery request
2018-08-28 01:17:39.853 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:17:39.857 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:17:39.858 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:17:40.051 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:17:40.065 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:17:40.084 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:17:40.103 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:17:40.104 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:17:40.104 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:17:40.105 -03:00 [DBG] Start userinfo request
2018-08-28 01:17:40.105 -03:00 [DBG] Bearer token found in header
2018-08-28 01:17:40.107 -03:00 [DBG] BTzF7ngYLWOSXqIEMeyrhLpZgwtWRlzC7nk/WXHiJQ0= found in database: true
2018-08-28 01:17:40.125 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:17:40.158 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:17:40.177 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 01:17:40.178 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "1646173c96f12971d422341ecbff1aaac87c7eb8b839920c47252a754c8c62c9",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535429806,
    "exp": 1535433406,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535429494,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 01:17:40.179 -03:00 [DBG] Creating userinfo response
2018-08-28 01:17:40.180 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:17:40.180 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:17:40.184 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:17:40.184 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 01:17:40.185 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:17:40.188 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:17:40.196 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 01:17:40.196 -03:00 [DBG] End userinfo request
2018-08-28 01:18:52.874 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:18:52.877 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:18:52.877 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:18:52.878 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:18:52.878 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:18:52.878 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:18:52.879 -03:00 [DBG] Start discovery request
2018-08-28 01:18:52.888 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:18:52.926 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:18:52.930 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:18:52.930 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:18:52.931 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:18:52.931 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:18:52.932 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:18:52.932 -03:00 [DBG] Start key discovery request
2018-08-28 01:18:53.229 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:18:53.232 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:18:53.232 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:18:53.613 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:18:53.615 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:18:53.616 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:18:53.616 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:18:53.616 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:18:53.617 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:18:53.617 -03:00 [DBG] Start userinfo request
2018-08-28 01:18:53.617 -03:00 [DBG] Bearer token found in header
2018-08-28 01:18:53.619 -03:00 [DBG] BTzF7ngYLWOSXqIEMeyrhLpZgwtWRlzC7nk/WXHiJQ0= found in database: true
2018-08-28 01:18:53.635 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:18:53.643 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:18:53.647 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 01:18:53.648 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "1646173c96f12971d422341ecbff1aaac87c7eb8b839920c47252a754c8c62c9",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535429806,
    "exp": 1535433406,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535429494,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 01:18:53.648 -03:00 [DBG] Creating userinfo response
2018-08-28 01:18:53.648 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:18:53.649 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:18:53.651 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:18:53.651 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 01:18:53.651 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:18:53.653 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:18:53.657 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 01:18:53.658 -03:00 [DBG] End userinfo request
2018-08-28 01:24:10.217 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:24:10.533 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:24:10.534 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:24:10.534 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:24:10.534 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:24:10.535 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:24:10.535 -03:00 [DBG] Start discovery request
2018-08-28 01:24:10.562 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:24:10.742 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:24:10.744 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:24:10.745 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:24:10.745 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:24:10.746 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:24:10.746 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:24:10.746 -03:00 [DBG] Start key discovery request
2018-08-28 01:24:18.785 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:24:18.787 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:24:18.788 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:24:18.788 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:24:18.788 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:24:18.789 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:24:18.789 -03:00 [DBG] Start discovery request
2018-08-28 01:24:18.799 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:24:18.842 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:24:18.845 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:24:18.845 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:24:18.846 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:24:18.846 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:24:18.846 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:24:18.847 -03:00 [DBG] Start key discovery request
2018-08-28 01:24:18.965 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 01:24:18.977 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 01:24:18.978 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 01:24:18.978 -03:00 [DBG] Start authorize request
2018-08-28 01:24:18.978 -03:00 [DBG] User in authorize request: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:24:18.978 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 01:24:19.018 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:24:19.027 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:24:19.035 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:24:19.038 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:24:19.041 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:24:19.041 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 01:24:19.041 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "gfaLgHKB9tYnIboq46H2RgawH8jQjWYmsmVhH6Um",
  "Nonce": "gfaLgHKB9tYnIboq46H2RgawH8jQjWYmsmVhH6Um",
  "SessionId": "2055f3401506d7e35803a42278a046a3",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "gfaLgHKB9tYnIboq46H2RgawH8jQjWYmsmVhH6Um",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "gfaLgHKB9tYnIboq46H2RgawH8jQjWYmsmVhH6Um"
  }
}
2018-08-28 01:24:19.056 -03:00 [DBG] dNsKvdOaVVSYnWYeunkn1dwRkQz+bV+gEiP/tJjhjZQ= found in database: true
2018-08-28 01:24:19.059 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-28 01:24:19.059 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 01:24:19.060 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 01:24:19.060 -03:00 [DBG] Getting claims for access token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:24:19.080 -03:00 [DBG] c6NvbiJyjpLfrlRlUlFBwlQG9SEVmWiK+CNBBh/h3xc= not found in database
2018-08-28 01:24:19.087 -03:00 [DBG] Getting claims for identity token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79 and client: UserManagementUI
2018-08-28 01:24:19.087 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 01:24:19.090 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****FfyQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****09aa"
    }
  ],
  "ActivityId": "0HLGCH9I0PLSA:00000001",
  "TimeStamp": "2018-08-28T04:24:19Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 01:24:19.090 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "gfaLgHKB9tYnIboq46H2RgawH8jQjWYmsmVhH6Um",
  "Scope": "openid profile email picture"
}
2018-08-28 01:24:20.418 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:24:20.421 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:24:20.421 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:24:20.422 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:24:20.422 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:24:20.422 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:24:20.423 -03:00 [DBG] Start discovery request
2018-08-28 01:24:20.432 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:24:20.456 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:24:20.459 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:24:20.459 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:24:20.460 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:24:20.460 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:24:20.461 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:24:20.462 -03:00 [DBG] Start discovery request
2018-08-28 01:24:20.470 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:24:20.491 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:24:20.531 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:24:20.532 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:24:20.532 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:24:20.533 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:24:20.533 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:24:20.534 -03:00 [DBG] Start key discovery request
2018-08-28 01:24:20.542 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:24:20.545 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:24:20.545 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:24:20.545 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:24:20.546 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:24:20.546 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:24:20.546 -03:00 [DBG] Start key discovery request
2018-08-28 01:24:21.871 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:24:21.873 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:24:21.873 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:24:22.102 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:24:22.105 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:24:22.105 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:24:22.105 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:24:22.106 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:24:22.107 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:24:22.107 -03:00 [DBG] Start userinfo request
2018-08-28 01:24:22.107 -03:00 [DBG] Bearer token found in header
2018-08-28 01:24:22.109 -03:00 [DBG] c6NvbiJyjpLfrlRlUlFBwlQG9SEVmWiK+CNBBh/h3xc= found in database: true
2018-08-28 01:24:22.131 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:24:22.143 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:24:22.147 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 01:24:22.147 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "786111555c121d495de1f4498826ca06f25aff0609b65a4eca18089c939909aa",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535430259,
    "exp": 1535433859,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535429494,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 01:24:22.148 -03:00 [DBG] Creating userinfo response
2018-08-28 01:24:22.149 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:24:22.149 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:24:22.152 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:24:22.153 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 01:24:22.153 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:24:22.157 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:24:22.161 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 01:24:22.163 -03:00 [DBG] End userinfo request
2018-08-28 01:26:01.257 -03:00 [DBG] 5 persisted grants found for 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:26:01.276 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:26:01.279 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:26:01.281 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:26:02.502 -03:00 [DBG] CORS request made for path: /Grants/Revoke from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-28 01:26:02.507 -03:00 [DBG] removing 5 persisted grants from database for subject 78dac1db-1c66-432f-aaf3-d728c490ec79, clientId UserManagementUI
2018-08-28 01:26:02.579 -03:00 [DBG] 0 persisted grants found for 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:26:12.409 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:26:12.411 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:26:12.412 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:26:12.412 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:26:12.412 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:26:12.413 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:26:12.413 -03:00 [DBG] Start discovery request
2018-08-28 01:26:12.422 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:26:12.456 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:26:12.459 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:26:12.459 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:26:12.459 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:26:12.460 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:26:12.460 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:26:12.461 -03:00 [DBG] Start key discovery request
2018-08-28 01:26:12.870 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:26:12.873 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:26:12.873 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:26:13.135 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:26:13.139 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:26:13.139 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:26:13.140 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:26:13.141 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:26:13.141 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:26:13.142 -03:00 [DBG] Start userinfo request
2018-08-28 01:26:13.142 -03:00 [DBG] Bearer token found in header
2018-08-28 01:26:13.144 -03:00 [DBG] c6NvbiJyjpLfrlRlUlFBwlQG9SEVmWiK+CNBBh/h3xc= found in database: false
2018-08-28 01:26:13.144 -03:00 [DBG] reference_token grant with value: 786111555c121d495de1f4498826ca06f25aff0609b65a4eca18089c939909aa not found in store.
2018-08-28 01:26:13.144 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "786111555c121d495de1f4498826ca06f25aff0609b65a4eca18089c939909aa"
}
2018-08-28 01:26:17.339 -03:00 [DBG] 0 persisted grants found for 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:27:42.141 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:27:42.143 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:27:42.144 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:27:42.144 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:27:42.144 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:27:42.145 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:27:42.145 -03:00 [DBG] Start discovery request
2018-08-28 01:27:42.154 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:27:42.239 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:27:42.242 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:27:42.243 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:27:42.244 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:27:42.245 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:27:42.245 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:27:42.247 -03:00 [DBG] Start key discovery request
2018-08-28 01:27:42.676 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:27:42.686 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:27:42.687 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:27:42.950 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:27:42.954 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:27:42.954 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:27:42.954 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:27:42.955 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:27:42.955 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:27:42.956 -03:00 [DBG] Start userinfo request
2018-08-28 01:27:42.956 -03:00 [DBG] Bearer token found in header
2018-08-28 01:27:42.958 -03:00 [DBG] c6NvbiJyjpLfrlRlUlFBwlQG9SEVmWiK+CNBBh/h3xc= found in database: false
2018-08-28 01:27:42.959 -03:00 [DBG] reference_token grant with value: 786111555c121d495de1f4498826ca06f25aff0609b65a4eca18089c939909aa not found in store.
2018-08-28 01:27:42.959 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "786111555c121d495de1f4498826ca06f25aff0609b65a4eca18089c939909aa"
}
2018-08-28 01:27:54.701 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:27:54.703 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:27:54.703 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:27:54.704 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:27:54.704 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:27:54.705 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:27:54.705 -03:00 [DBG] Start discovery request
2018-08-28 01:27:54.715 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:27:54.746 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:27:54.749 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:27:54.750 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:27:54.750 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:27:54.751 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:27:54.751 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:27:54.751 -03:00 [DBG] Start key discovery request
2018-08-28 01:27:55.113 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:27:55.142 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:27:55.143 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:27:55.392 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:27:55.394 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:27:55.395 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:27:55.395 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:27:55.395 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:27:55.396 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:27:55.396 -03:00 [DBG] Start userinfo request
2018-08-28 01:27:55.397 -03:00 [DBG] Bearer token found in header
2018-08-28 01:27:55.398 -03:00 [DBG] c6NvbiJyjpLfrlRlUlFBwlQG9SEVmWiK+CNBBh/h3xc= found in database: false
2018-08-28 01:27:55.398 -03:00 [DBG] reference_token grant with value: 786111555c121d495de1f4498826ca06f25aff0609b65a4eca18089c939909aa not found in store.
2018-08-28 01:27:55.399 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "786111555c121d495de1f4498826ca06f25aff0609b65a4eca18089c939909aa"
}
2018-08-28 01:36:21.043 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:36:21.386 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:36:21.387 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:36:21.387 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:36:21.388 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:36:21.388 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:36:21.388 -03:00 [DBG] Start discovery request
2018-08-28 01:36:21.415 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:36:22.164 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:36:22.166 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:36:22.167 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:36:22.167 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:36:22.167 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:36:22.168 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:36:22.168 -03:00 [DBG] Start key discovery request
2018-08-28 01:36:54.680 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:36:54.683 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:36:54.684 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:36:54.684 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:36:54.685 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:36:54.685 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:36:54.685 -03:00 [DBG] Start discovery request
2018-08-28 01:36:54.695 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:36:54.760 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:36:54.763 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:36:54.763 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:36:54.764 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:36:54.764 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:36:54.765 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:36:54.765 -03:00 [DBG] Start key discovery request
2018-08-28 01:36:59.353 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:36:59.356 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:36:59.356 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:36:59.356 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:36:59.357 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:36:59.357 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:36:59.357 -03:00 [DBG] Start discovery request
2018-08-28 01:36:59.367 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:36:59.426 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:36:59.431 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:36:59.431 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:36:59.432 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:36:59.432 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:36:59.433 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:36:59.433 -03:00 [DBG] Start key discovery request
2018-08-28 01:37:00.495 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:37:00.500 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:37:00.500 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:37:00.501 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:37:00.501 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:37:00.501 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:37:00.502 -03:00 [DBG] Start discovery request
2018-08-28 01:37:00.512 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:37:00.590 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:37:00.593 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:37:00.594 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:37:00.594 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:37:00.595 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:37:00.595 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:37:00.595 -03:00 [DBG] Start key discovery request
2018-08-28 01:37:53.881 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:37:53.884 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:37:53.884 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:37:53.885 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:37:53.885 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:37:53.885 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:37:53.885 -03:00 [DBG] Start discovery request
2018-08-28 01:37:53.899 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:37:53.953 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:37:53.956 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:37:53.958 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:37:53.959 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:37:53.960 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:37:53.961 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:37:53.961 -03:00 [DBG] Start key discovery request
2018-08-28 01:37:54.640 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:37:54.643 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:37:54.643 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:37:54.643 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:37:54.644 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:37:54.644 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:37:54.644 -03:00 [DBG] Start discovery request
2018-08-28 01:37:54.655 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:37:54.700 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:37:54.703 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:37:54.704 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:37:54.704 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:37:54.705 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:37:54.705 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:37:54.705 -03:00 [DBG] Start key discovery request
2018-08-28 01:37:54.980 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 01:37:54.982 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 01:37:54.983 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 01:37:54.983 -03:00 [DBG] Start authorize request
2018-08-28 01:37:54.984 -03:00 [DBG] User in authorize request: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:37:54.984 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 01:37:55.026 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:37:55.034 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:37:55.041 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:37:55.045 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:37:55.047 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:37:55.048 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 01:37:55.048 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "n15iR1oJUAMHBQ7OpZ1pVMyJt84s11jRq3jDXMCn",
  "Nonce": "n15iR1oJUAMHBQ7OpZ1pVMyJt84s11jRq3jDXMCn",
  "SessionId": "2055f3401506d7e35803a42278a046a3",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "n15iR1oJUAMHBQ7OpZ1pVMyJt84s11jRq3jDXMCn",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "n15iR1oJUAMHBQ7OpZ1pVMyJt84s11jRq3jDXMCn"
  }
}
2018-08-28 01:37:55.063 -03:00 [DBG] dNsKvdOaVVSYnWYeunkn1dwRkQz+bV+gEiP/tJjhjZQ= found in database: false
2018-08-28 01:37:55.064 -03:00 [DBG] user_consent grant with value: UserManagementUI|78dac1db-1c66-432f-aaf3-d728c490ec79 not found in store.
2018-08-28 01:37:55.064 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-28 01:37:55.064 -03:00 [INF] Showing consent: User has not yet consented
2018-08-28 01:37:55.075 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 01:37:55.092 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:37:55.097 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:37:55.100 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:37:55.103 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:37:55.106 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:37:55.107 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 01:37:55.120 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:37:55.124 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:37:55.127 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:37:57.966 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-28 01:37:57.967 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 01:37:57.982 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:37:57.985 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:37:57.987 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:37:57.990 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:37:57.992 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:37:57.993 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 01:37:58.001 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-28 01:37:58.001 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-28 01:37:58.001 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-28 01:37:58.002 -03:00 [DBG] Start authorize callback request
2018-08-28 01:37:58.002 -03:00 [DBG] User in authorize request: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:37:58.002 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 01:37:58.020 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:37:58.025 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:37:58.027 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:37:58.031 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:37:58.034 -03:00 [DBG] Found [] API scopes in database
2018-08-28 01:37:58.034 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 01:37:58.035 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "n15iR1oJUAMHBQ7OpZ1pVMyJt84s11jRq3jDXMCn",
  "Nonce": "n15iR1oJUAMHBQ7OpZ1pVMyJt84s11jRq3jDXMCn",
  "SessionId": "2055f3401506d7e35803a42278a046a3",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "n15iR1oJUAMHBQ7OpZ1pVMyJt84s11jRq3jDXMCn",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "n15iR1oJUAMHBQ7OpZ1pVMyJt84s11jRq3jDXMCn"
  }
}
2018-08-28 01:37:58.042 -03:00 [DBG] dNsKvdOaVVSYnWYeunkn1dwRkQz+bV+gEiP/tJjhjZQ= found in database: false
2018-08-28 01:37:58.043 -03:00 [DBG] user_consent grant with value: UserManagementUI|78dac1db-1c66-432f-aaf3-d728c490ec79 not found in store.
2018-08-28 01:37:58.043 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-28 01:37:58.043 -03:00 [INF] User consented to scopes: ["openid","profile","email","picture"]
2018-08-28 01:37:58.044 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","picture"]
2018-08-28 01:37:58.044 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:37:58.050 -03:00 [DBG] dNsKvdOaVVSYnWYeunkn1dwRkQz+bV+gEiP/tJjhjZQ= not found in database
2018-08-28 01:37:58.062 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 01:37:58.063 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 01:37:58.063 -03:00 [DBG] Getting claims for access token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79
2018-08-28 01:37:58.078 -03:00 [DBG] lP7u4/5lOSz/d0DghQY74H+lmOhY7Q/iK/1rskh9PrA= not found in database
2018-08-28 01:37:58.086 -03:00 [DBG] Getting claims for identity token for subject: 78dac1db-1c66-432f-aaf3-d728c490ec79 and client: UserManagementUI
2018-08-28 01:37:58.086 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 01:37:58.091 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****wGfg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****0559"
    }
  ],
  "ActivityId": "0HLGCH9I0PLSH:00000004",
  "TimeStamp": "2018-08-28T04:37:58Z",
  "ProcessId": 22804,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 01:37:58.092 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "78dac1db-1c66-432f-aaf3-d728c490ec79",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "n15iR1oJUAMHBQ7OpZ1pVMyJt84s11jRq3jDXMCn",
  "Scope": "openid profile email picture"
}
2018-08-28 01:37:59.355 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:37:59.358 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:37:59.358 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:37:59.358 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:37:59.359 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:37:59.359 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:37:59.359 -03:00 [DBG] Start discovery request
2018-08-28 01:37:59.370 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:37:59.394 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 01:37:59.398 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:37:59.399 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:37:59.400 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 01:37:59.400 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 01:37:59.400 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 01:37:59.401 -03:00 [DBG] Start discovery request
2018-08-28 01:37:59.410 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 01:37:59.419 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:37:59.421 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:37:59.422 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:37:59.422 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:37:59.423 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:37:59.423 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:37:59.423 -03:00 [DBG] Start key discovery request
2018-08-28 01:37:59.434 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 01:37:59.437 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:37:59.438 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:37:59.439 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 01:37:59.439 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 01:37:59.439 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 01:37:59.440 -03:00 [DBG] Start key discovery request
2018-08-28 01:38:00.820 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:38:00.826 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:38:00.827 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:38:01.060 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 01:38:01.063 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 01:38:01.064 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 01:38:01.064 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 01:38:01.065 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 01:38:01.066 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 01:38:01.066 -03:00 [DBG] Start userinfo request
2018-08-28 01:38:01.067 -03:00 [DBG] Bearer token found in header
2018-08-28 01:38:01.071 -03:00 [DBG] lP7u4/5lOSz/d0DghQY74H+lmOhY7Q/iK/1rskh9PrA= found in database: true
2018-08-28 01:38:01.098 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:38:01.109 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 01:38:01.115 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 01:38:01.115 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "026dd3de9dff6b951de74881c39dbab64a2719d7024e510b4df36efb0efc0559",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535431078,
    "exp": 1535434678,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "78dac1db-1c66-432f-aaf3-d728c490ec79",
    "auth_time": 1535429494,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 01:38:01.116 -03:00 [DBG] Creating userinfo response
2018-08-28 01:38:01.116 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:38:01.119 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:38:01.122 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:38:01.123 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 01:38:01.123 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 01:38:01.130 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 01:38:01.135 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 01:38:01.135 -03:00 [DBG] End userinfo request
2018-08-28 08:53:26.081 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-28 08:53:26.104 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-28 08:53:26.105 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-28 08:53:26.105 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-28 08:53:26.106 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-28 08:53:26.186 -03:00 [DBG] Starting token cleanup
2018-08-28 08:54:31.897 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 08:54:31.991 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 08:54:31.995 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 08:54:32.042 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 08:54:32.052 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 08:54:32.054 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 08:54:32.058 -03:00 [DBG] Start discovery request
2018-08-28 08:54:32.314 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 08:54:32.348 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 08:54:32.356 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 08:54:32.357 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 08:54:32.360 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 08:54:32.366 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 08:54:32.367 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 08:54:32.370 -03:00 [DBG] Start key discovery request
2018-08-28 08:58:51.897 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 08:58:51.902 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 08:58:51.903 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 08:58:51.906 -03:00 [DBG] Start authorize request
2018-08-28 08:58:51.916 -03:00 [DBG] User in authorize request: e71ac70f-e78d-44c5-becb-bee7d655923c
2018-08-28 08:58:51.919 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 08:58:52.086 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 08:58:52.128 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-28 08:58:52.159 -03:00 [DBG] Found [] API scopes in database
2018-08-28 08:58:52.161 -03:00 [ERR] Invalid scope: picture
2018-08-28 08:58:52.164 -03:00 [ERR] Request validation failed
2018-08-28 08:58:52.171 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "e71ac70f-e78d-44c5-becb-bee7d655923c",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "SiV3JczVX2MgpEdQ4cRQIGPN1MOBbBG936LH7UJJ",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "SiV3JczVX2MgpEdQ4cRQIGPN1MOBbBG936LH7UJJ",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "SiV3JczVX2MgpEdQ4cRQIGPN1MOBbBG936LH7UJJ"
  }
}
2018-08-28 08:58:52.196 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "e71ac70f-e78d-44c5-becb-bee7d655923c",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Error": "invalid_scope",
  "ActivityId": "0HLGCRJHUFQ21:00000001",
  "TimeStamp": "2018-08-28T11:58:52Z",
  "ProcessId": 29144,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 08:59:04.533 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 08:59:04.535 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 08:59:04.536 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 08:59:04.537 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 08:59:04.538 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 08:59:04.539 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 08:59:04.540 -03:00 [DBG] Start discovery request
2018-08-28 08:59:04.547 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 08:59:04.575 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 08:59:04.580 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 08:59:04.581 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 08:59:04.582 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 08:59:04.583 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 08:59:04.586 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 08:59:04.589 -03:00 [DBG] Start key discovery request
2018-08-28 08:59:04.671 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 08:59:04.673 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 08:59:04.674 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 08:59:04.675 -03:00 [DBG] Start authorize request
2018-08-28 08:59:04.676 -03:00 [DBG] User in authorize request: e71ac70f-e78d-44c5-becb-bee7d655923c
2018-08-28 08:59:04.677 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 08:59:04.690 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 08:59:04.695 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-28 08:59:04.698 -03:00 [DBG] Found [] API scopes in database
2018-08-28 08:59:04.700 -03:00 [ERR] Invalid scope: picture
2018-08-28 08:59:04.700 -03:00 [ERR] Request validation failed
2018-08-28 08:59:04.702 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "e71ac70f-e78d-44c5-becb-bee7d655923c",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "5k0g2ANfl44nGcOP2auPfOsxxMof2eoqvIGbuA3z",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "5k0g2ANfl44nGcOP2auPfOsxxMof2eoqvIGbuA3z",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "5k0g2ANfl44nGcOP2auPfOsxxMof2eoqvIGbuA3z"
  }
}
2018-08-28 08:59:04.707 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "e71ac70f-e78d-44c5-becb-bee7d655923c",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Error": "invalid_scope",
  "ActivityId": "0HLGCRJHUFQ26:0000000A",
  "TimeStamp": "2018-08-28T11:59:04Z",
  "ProcessId": 29144,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 08:59:14.174 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 08:59:14.177 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 08:59:14.178 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 08:59:14.179 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 08:59:14.180 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 08:59:14.182 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 08:59:14.183 -03:00 [DBG] Start discovery request
2018-08-28 08:59:14.189 -03:00 [DBG] Found ["openid","profile","email","custom.profile","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 08:59:14.209 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 08:59:14.212 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 08:59:14.213 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 08:59:14.214 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 08:59:14.215 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 08:59:14.216 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 08:59:14.218 -03:00 [DBG] Start key discovery request
2018-08-28 08:59:14.301 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 08:59:14.304 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 08:59:14.305 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 08:59:14.308 -03:00 [DBG] Start authorize request
2018-08-28 08:59:14.308 -03:00 [DBG] User in authorize request: e71ac70f-e78d-44c5-becb-bee7d655923c
2018-08-28 08:59:14.310 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 08:59:14.318 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 08:59:14.321 -03:00 [DBG] Found ["openid","profile","email"] identity scopes in database
2018-08-28 08:59:14.325 -03:00 [DBG] Found [] API scopes in database
2018-08-28 08:59:14.326 -03:00 [ERR] Invalid scope: picture
2018-08-28 08:59:14.326 -03:00 [ERR] Request validation failed
2018-08-28 08:59:14.327 -03:00 [INF] {
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "http://localhost:4200/login-callback",
    "https://localhost:5003/swagger/oauth2-redirect.html"
  ],
  "SubjectId": "e71ac70f-e78d-44c5-becb-bee7d655923c",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "Xnj7drKedWXGHMspO26LM490lmJf1FKKL6wTovbn",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "Xnj7drKedWXGHMspO26LM490lmJf1FKKL6wTovbn",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "Xnj7drKedWXGHMspO26LM490lmJf1FKKL6wTovbn"
  }
}
2018-08-28 08:59:14.330 -03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "e71ac70f-e78d-44c5-becb-bee7d655923c",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Error": "invalid_scope",
  "ActivityId": "0HLGCRJHUFQ26:00000010",
  "TimeStamp": "2018-08-28T11:59:14Z",
  "ProcessId": 29144,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 08:59:42.341 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-28 08:59:42.362 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-28 08:59:42.363 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-28 08:59:42.363 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-28 08:59:42.363 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-28 08:59:42.435 -03:00 [DBG] Starting token cleanup
2018-08-28 09:00:19.090 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 09:00:19.202 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:00:19.206 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:00:19.250 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 09:00:19.256 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 09:00:19.257 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 09:00:19.260 -03:00 [DBG] Start discovery request
2018-08-28 09:00:19.518 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 09:00:19.553 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 09:00:19.556 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:00:19.557 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:00:19.561 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 09:00:19.566 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 09:00:19.568 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 09:00:19.574 -03:00 [DBG] Start key discovery request
2018-08-28 09:00:19.631 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 09:00:19.637 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 09:00:19.638 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 09:00:19.642 -03:00 [DBG] Start authorize request
2018-08-28 09:00:19.650 -03:00 [DBG] User in authorize request: e71ac70f-e78d-44c5-becb-bee7d655923c
2018-08-28 09:00:19.653 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 09:00:19.812 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 09:00:19.851 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:00:19.879 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:00:19.889 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:00:19.891 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:00:19.896 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 09:00:19.905 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "e71ac70f-e78d-44c5-becb-bee7d655923c",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "3uCdZ8lWEedPyvAQm7vjmfBXIZsTnlmmIjE0HIwV",
  "Nonce": "3uCdZ8lWEedPyvAQm7vjmfBXIZsTnlmmIjE0HIwV",
  "SessionId": "403f675de3ed1276a0bf70df854e78e4",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "3uCdZ8lWEedPyvAQm7vjmfBXIZsTnlmmIjE0HIwV",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "3uCdZ8lWEedPyvAQm7vjmfBXIZsTnlmmIjE0HIwV"
  }
}
2018-08-28 09:00:19.946 -03:00 [INF] Showing login: User is not active
2018-08-28 09:00:20.051 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 09:00:20.062 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 09:00:20.065 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:00:20.067 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:00:20.070 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:00:20.073 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:00:20.074 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 09:00:20.083 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 09:00:22.166 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-28 09:00:27.602 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-28 09:00:27.790 -03:00 [INF] Provider Google associated.
2018-08-28 09:00:27.940 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "102696868227620762147",
  "SubjectId": "b202c098-6d0f-4557-bb18-12f2350441d3",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCRN967IK0:00000005",
  "TimeStamp": "2018-08-28T12:00:27Z",
  "ProcessId": 29948,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 09:00:27.949 -03:00 [DBG] Augmenting SignInContext
2018-08-28 09:00:27.951 -03:00 [DBG] Adding amr claim with value: external
2018-08-28 09:00:27.955 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-28 09:00:27.959 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-28 09:00:27.972 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-28 09:00:27.974 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-28 09:00:27.975 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-28 09:00:27.979 -03:00 [DBG] Start authorize callback request
2018-08-28 09:00:27.981 -03:00 [DBG] User in authorize request: b202c098-6d0f-4557-bb18-12f2350441d3
2018-08-28 09:00:27.982 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 09:00:27.989 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 09:00:27.992 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:00:27.995 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:00:27.997 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:00:27.999 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:00:28.000 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 09:00:28.002 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "b202c098-6d0f-4557-bb18-12f2350441d3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "3uCdZ8lWEedPyvAQm7vjmfBXIZsTnlmmIjE0HIwV",
  "Nonce": "3uCdZ8lWEedPyvAQm7vjmfBXIZsTnlmmIjE0HIwV",
  "SessionId": "16b3a730f64eb3d7f7d78f44515cfbb0",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "3uCdZ8lWEedPyvAQm7vjmfBXIZsTnlmmIjE0HIwV",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "3uCdZ8lWEedPyvAQm7vjmfBXIZsTnlmmIjE0HIwV"
  }
}
2018-08-28 09:00:28.029 -03:00 [DBG] nX8P84e9XdYwtwx8oFilnmSr3U25XJEua2jLjiBy9wE= found in database: false
2018-08-28 09:00:28.031 -03:00 [DBG] user_consent grant with value: UserManagementUI|b202c098-6d0f-4557-bb18-12f2350441d3 not found in store.
2018-08-28 09:00:28.031 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-28 09:00:28.032 -03:00 [INF] Showing consent: User has not yet consented
2018-08-28 09:00:28.059 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 09:00:28.067 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 09:00:28.070 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:00:28.072 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:00:28.075 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:00:28.076 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:00:28.077 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 09:00:28.084 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 09:00:28.087 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:00:28.090 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:00:31.466 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-28 09:00:31.501 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 09:00:31.510 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 09:00:31.513 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:00:31.515 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:00:31.517 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:00:31.519 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:00:31.519 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 09:00:31.533 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-28 09:00:31.535 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-28 09:00:31.536 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-28 09:00:31.536 -03:00 [DBG] Start authorize callback request
2018-08-28 09:00:31.541 -03:00 [DBG] User in authorize request: b202c098-6d0f-4557-bb18-12f2350441d3
2018-08-28 09:00:31.542 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 09:00:31.549 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 09:00:31.553 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:00:31.557 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:00:31.560 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:00:31.562 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:00:31.563 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 09:00:31.564 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "b202c098-6d0f-4557-bb18-12f2350441d3",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "3uCdZ8lWEedPyvAQm7vjmfBXIZsTnlmmIjE0HIwV",
  "Nonce": "3uCdZ8lWEedPyvAQm7vjmfBXIZsTnlmmIjE0HIwV",
  "SessionId": "16b3a730f64eb3d7f7d78f44515cfbb0",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "3uCdZ8lWEedPyvAQm7vjmfBXIZsTnlmmIjE0HIwV",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "3uCdZ8lWEedPyvAQm7vjmfBXIZsTnlmmIjE0HIwV"
  }
}
2018-08-28 09:00:31.571 -03:00 [DBG] nX8P84e9XdYwtwx8oFilnmSr3U25XJEua2jLjiBy9wE= found in database: false
2018-08-28 09:00:31.573 -03:00 [DBG] user_consent grant with value: UserManagementUI|b202c098-6d0f-4557-bb18-12f2350441d3 not found in store.
2018-08-28 09:00:31.574 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-28 09:00:31.577 -03:00 [INF] User consented to scopes: ["openid","profile","email","picture"]
2018-08-28 09:00:31.578 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","picture"]
2018-08-28 09:00:31.581 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: b202c098-6d0f-4557-bb18-12f2350441d3
2018-08-28 09:00:31.593 -03:00 [DBG] nX8P84e9XdYwtwx8oFilnmSr3U25XJEua2jLjiBy9wE= not found in database
2018-08-28 09:00:31.620 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 09:00:31.627 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 09:00:31.628 -03:00 [DBG] Getting claims for access token for subject: b202c098-6d0f-4557-bb18-12f2350441d3
2018-08-28 09:00:31.656 -03:00 [DBG] hqtvFWM5ZBhgUigWlxpBp/rdbXICm/4TNdDERJGCjrY= not found in database
2018-08-28 09:00:31.668 -03:00 [DBG] Getting claims for identity token for subject: b202c098-6d0f-4557-bb18-12f2350441d3 and client: UserManagementUI
2018-08-28 09:00:31.668 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 09:00:31.718 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "b202c098-6d0f-4557-bb18-12f2350441d3",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Vc_w"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****c30f"
    }
  ],
  "ActivityId": "0HLGCRN967IK1:00000002",
  "TimeStamp": "2018-08-28T12:00:31Z",
  "ProcessId": 29948,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 09:00:31.727 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "b202c098-6d0f-4557-bb18-12f2350441d3",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "3uCdZ8lWEedPyvAQm7vjmfBXIZsTnlmmIjE0HIwV",
  "Scope": "openid profile email picture"
}
2018-08-28 09:00:31.742 -03:00 [DBG] Augmenting SignInContext
2018-08-28 09:00:31.743 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-28 09:00:33.158 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 09:00:33.160 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:00:33.161 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:00:33.162 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 09:00:33.163 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 09:00:33.164 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 09:00:33.166 -03:00 [DBG] Start discovery request
2018-08-28 09:00:33.174 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 09:00:33.182 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 09:00:33.186 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:00:33.187 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:00:33.188 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 09:00:33.190 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 09:00:33.191 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 09:00:33.192 -03:00 [DBG] Start discovery request
2018-08-28 09:00:33.194 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 09:00:33.230 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 09:00:33.258 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:00:33.261 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:00:33.262 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 09:00:33.263 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 09:00:33.264 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 09:00:33.265 -03:00 [DBG] Start key discovery request
2018-08-28 09:00:33.268 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 09:00:33.271 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:00:33.275 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:00:33.276 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 09:00:33.278 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 09:00:33.279 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 09:00:33.282 -03:00 [DBG] Start key discovery request
2018-08-28 09:00:34.544 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 09:00:34.547 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:00:34.548 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:00:34.750 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 09:00:34.753 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:00:34.755 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:00:34.756 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 09:00:34.760 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 09:00:34.763 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 09:00:34.768 -03:00 [DBG] Start userinfo request
2018-08-28 09:00:34.770 -03:00 [DBG] Bearer token found in header
2018-08-28 09:00:34.790 -03:00 [DBG] hqtvFWM5ZBhgUigWlxpBp/rdbXICm/4TNdDERJGCjrY= found in database: true
2018-08-28 09:00:34.810 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 09:00:34.824 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 09:00:34.831 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 09:00:34.836 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ec32905ac3f1a299ae9180e29257ef069a40f2f4982e0bf3a17a83ddee41c30f",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535457631,
    "exp": 1535461231,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b202c098-6d0f-4557-bb18-12f2350441d3",
    "auth_time": 1535457627,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 09:00:34.849 -03:00 [DBG] Creating userinfo response
2018-08-28 09:00:34.851 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 09:00:34.854 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 09:00:34.861 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:00:34.863 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 09:00:34.864 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 09:00:34.867 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:00:34.875 -03:00 [INF] Profile service returned to the following claim types: sub name email preferred_username email email_verified
2018-08-28 09:00:34.876 -03:00 [DBG] End userinfo request
2018-08-28 09:01:33.519 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-28 09:01:33.540 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-28 09:01:33.541 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-28 09:01:33.542 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-28 09:01:33.542 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-28 09:01:33.611 -03:00 [DBG] Starting token cleanup
2018-08-28 09:01:54.670 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 09:01:54.782 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:01:54.786 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:01:54.826 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 09:01:54.831 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 09:01:54.832 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 09:01:54.835 -03:00 [DBG] Start discovery request
2018-08-28 09:01:55.101 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 09:01:55.133 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 09:01:55.136 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:01:55.137 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:01:55.142 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 09:01:55.148 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 09:01:55.150 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 09:01:55.152 -03:00 [DBG] Start key discovery request
2018-08-28 09:01:55.862 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 09:01:55.866 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:01:55.867 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:01:56.015 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 09:01:56.019 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:01:56.021 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:01:56.023 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 09:01:56.027 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 09:01:56.028 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 09:01:56.033 -03:00 [DBG] Start userinfo request
2018-08-28 09:01:56.036 -03:00 [DBG] Bearer token found in header
2018-08-28 09:01:56.079 -03:00 [DBG] hqtvFWM5ZBhgUigWlxpBp/rdbXICm/4TNdDERJGCjrY= found in database: false
2018-08-28 09:01:56.081 -03:00 [DBG] reference_token grant with value: ec32905ac3f1a299ae9180e29257ef069a40f2f4982e0bf3a17a83ddee41c30f not found in store.
2018-08-28 09:01:56.086 -03:00 [ERR] Invalid reference token.
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "ec32905ac3f1a299ae9180e29257ef069a40f2f4982e0bf3a17a83ddee41c30f"
}
2018-08-28 09:02:12.376 -03:00 [DBG] 0 persisted grants found for b202c098-6d0f-4557-bb18-12f2350441d3
2018-08-28 09:02:16.821 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-28 09:02:16.867 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-28 09:02:16.870 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-28 09:02:16.871 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-28 09:02:16.890 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "b202c098-6d0f-4557-bb18-12f2350441d3",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGCRO5LBQEA:00000009",
  "TimeStamp": "2018-08-28T12:02:16Z",
  "ProcessId": 15800,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 09:02:17.066 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-28 09:02:17.076 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-28 09:02:17.078 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-28 09:02:17.083 -03:00 [DBG] Processing signout callback request
2018-08-28 09:02:17.266 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 09:02:17.268 -03:00 [DBG] No client front-channel logout URLs
2018-08-28 09:02:17.268 -03:00 [DBG] No client back-channel logout URLs
2018-08-28 09:02:17.269 -03:00 [INF] Successful signout callback.
2018-08-28 09:02:17.270 -03:00 [DBG] No client front-channel iframe urls
2018-08-28 09:02:17.270 -03:00 [DBG] No client back-channel iframe urls
2018-08-28 09:02:21.811 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-28 09:02:27.045 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-28 09:04:41.960 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-28 09:04:41.983 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-28 09:04:41.983 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-28 09:04:41.983 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-28 09:04:41.983 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-28 09:04:42.060 -03:00 [DBG] Starting token cleanup
2018-08-28 09:04:42.603 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-28 09:04:46.735 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-28 09:07:06.840 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-28 09:07:06.861 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-28 09:07:06.861 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-28 09:07:06.861 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-28 09:07:06.861 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-28 09:07:06.936 -03:00 [DBG] Starting token cleanup
2018-08-28 09:07:24.137 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-28 09:07:24.158 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-28 09:07:24.159 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-28 09:07:24.159 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-28 09:07:24.160 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-28 09:07:24.236 -03:00 [DBG] Starting token cleanup
2018-08-28 09:08:00.846 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-28 09:08:00.868 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-28 09:08:00.868 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-28 09:08:00.868 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-28 09:08:00.868 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-28 09:08:00.939 -03:00 [DBG] Starting token cleanup
2018-08-28 09:08:14.144 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-08-28 09:08:16.153 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-28 09:13:33.294 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-28 09:13:33.314 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-28 09:13:33.315 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-28 09:13:33.315 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-28 09:13:33.315 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-28 09:13:33.403 -03:00 [DBG] Starting token cleanup
2018-08-28 09:13:36.832 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-28 09:13:51.819 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-28 09:13:51.840 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-28 09:13:51.841 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-28 09:13:51.841 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-28 09:13:51.841 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-28 09:13:51.912 -03:00 [DBG] Starting token cleanup
2018-08-28 09:13:54.446 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-28 09:19:30.721 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-28 09:20:04.748 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-28 09:21:34.914 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-28 09:21:34.935 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-28 09:21:34.935 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-28 09:21:34.936 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-28 09:21:34.936 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-28 09:21:35.007 -03:00 [DBG] Starting token cleanup
2018-08-28 09:21:50.395 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-28 09:25:21.505 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-28 09:25:21.526 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-28 09:25:21.526 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-28 09:25:21.527 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-28 09:25:21.527 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-28 09:25:21.601 -03:00 [DBG] Starting token cleanup
2018-08-28 09:25:55.065 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-28 09:33:24.728 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-28 09:33:24.762 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-28 09:33:24.763 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-28 09:33:24.764 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-28 09:33:24.764 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-28 09:33:24.843 -03:00 [DBG] Starting token cleanup
2018-08-28 09:36:01.440 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-28 09:36:01.461 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-28 09:36:01.462 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-28 09:36:01.462 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-28 09:36:01.462 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-28 09:36:01.541 -03:00 [DBG] Starting token cleanup
2018-08-28 09:36:11.629 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-08-28 09:36:13.171 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-28 09:36:17.339 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-28 09:36:31.677 -03:00 [INF] Provider Google associated.
2018-08-28 09:36:31.875 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "102696868227620762147",
  "SubjectId": "0e4dcd74-3853-448e-8adf-7cb490b9debb",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCSB8THDA4:00000006",
  "TimeStamp": "2018-08-28T12:36:31Z",
  "ProcessId": 30256,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 09:36:31.893 -03:00 [DBG] Augmenting SignInContext
2018-08-28 09:36:31.895 -03:00 [DBG] Adding amr claim with value: external
2018-08-28 09:36:31.900 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-28 09:36:31.905 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-28 09:36:31.948 -03:00 [DBG] 0 persisted grants found for 0e4dcd74-3853-448e-8adf-7cb490b9debb
2018-08-28 09:36:44.386 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-28 09:36:44.414 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-28 09:36:44.415 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-28 09:36:44.417 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-28 09:36:44.420 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "0e4dcd74-3853-448e-8adf-7cb490b9debb",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGCSB8THDA4:00000009",
  "TimeStamp": "2018-08-28T12:36:44Z",
  "ProcessId": 30256,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 09:37:16.135 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-28 09:37:16.157 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-28 09:37:16.158 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-28 09:37:16.158 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-28 09:37:16.158 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-28 09:37:16.228 -03:00 [DBG] Starting token cleanup
2018-08-28 09:37:19.316 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-28 09:37:20.249 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-28 09:37:31.236 -03:00 [INF] Provider Facebook associated.
2018-08-28 09:37:31.422 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "b7be0a9f-e776-4d74-9727-057ab0d8c03d",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCSBUC9NJI:00000004",
  "TimeStamp": "2018-08-28T12:37:31Z",
  "ProcessId": 32216,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-28 09:37:31.431 -03:00 [DBG] Augmenting SignInContext
2018-08-28 09:37:31.433 -03:00 [DBG] Adding amr claim with value: external
2018-08-28 09:37:31.439 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-28 09:37:31.443 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-28 09:37:57.324 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 09:37:57.403 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:37:57.418 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:37:57.431 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 09:37:57.445 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 09:37:57.454 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 09:37:57.470 -03:00 [DBG] Start discovery request
2018-08-28 09:37:57.706 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 09:37:57.727 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 09:37:57.728 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:37:57.729 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:37:57.730 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 09:37:57.733 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 09:37:57.734 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 09:37:57.737 -03:00 [DBG] Start key discovery request
2018-08-28 09:37:57.757 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 09:37:57.762 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 09:37:57.762 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 09:37:57.767 -03:00 [DBG] Start authorize request
2018-08-28 09:37:57.772 -03:00 [DBG] User in authorize request: b7be0a9f-e776-4d74-9727-057ab0d8c03d
2018-08-28 09:37:57.775 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 09:37:57.933 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 09:37:57.973 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:37:58.000 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:37:58.008 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:37:58.012 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:37:58.017 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 09:37:58.024 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "b7be0a9f-e776-4d74-9727-057ab0d8c03d",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "uBmlSTEC2xaCmJpRNIB9EsGG6Jb60dxK9z82Zz6K",
  "Nonce": "uBmlSTEC2xaCmJpRNIB9EsGG6Jb60dxK9z82Zz6K",
  "SessionId": "f02320f9e69a6a421e9191fd60cc50b1",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "uBmlSTEC2xaCmJpRNIB9EsGG6Jb60dxK9z82Zz6K",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "uBmlSTEC2xaCmJpRNIB9EsGG6Jb60dxK9z82Zz6K"
  }
}
2018-08-28 09:37:58.095 -03:00 [DBG] UrTZasnsaGmcCTekWHDDshrH0mTJChx8ANwn2soApo4= found in database: false
2018-08-28 09:37:58.096 -03:00 [DBG] user_consent grant with value: UserManagementUI|b7be0a9f-e776-4d74-9727-057ab0d8c03d not found in store.
2018-08-28 09:37:58.097 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-28 09:37:58.097 -03:00 [INF] Showing consent: User has not yet consented
2018-08-28 09:37:58.126 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 09:37:58.133 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 09:37:58.139 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:37:58.141 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:37:58.144 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:37:58.146 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:37:58.146 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 09:37:58.154 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 09:37:58.156 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:37:58.158 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:38:00.485 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-28 09:38:00.517 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 09:38:00.523 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 09:38:00.526 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:38:00.528 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:38:00.530 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:38:00.532 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:38:00.533 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 09:38:00.546 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-28 09:38:00.548 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-28 09:38:00.548 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-28 09:38:00.552 -03:00 [DBG] Start authorize callback request
2018-08-28 09:38:00.556 -03:00 [DBG] User in authorize request: b7be0a9f-e776-4d74-9727-057ab0d8c03d
2018-08-28 09:38:00.557 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 09:38:00.565 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 09:38:00.567 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:38:00.569 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:38:00.571 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:38:00.573 -03:00 [DBG] Found [] API scopes in database
2018-08-28 09:38:00.573 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 09:38:00.576 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "b7be0a9f-e776-4d74-9727-057ab0d8c03d",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "uBmlSTEC2xaCmJpRNIB9EsGG6Jb60dxK9z82Zz6K",
  "Nonce": "uBmlSTEC2xaCmJpRNIB9EsGG6Jb60dxK9z82Zz6K",
  "SessionId": "f02320f9e69a6a421e9191fd60cc50b1",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "uBmlSTEC2xaCmJpRNIB9EsGG6Jb60dxK9z82Zz6K",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "uBmlSTEC2xaCmJpRNIB9EsGG6Jb60dxK9z82Zz6K"
  }
}
2018-08-28 09:38:00.585 -03:00 [DBG] UrTZasnsaGmcCTekWHDDshrH0mTJChx8ANwn2soApo4= found in database: false
2018-08-28 09:38:00.587 -03:00 [DBG] user_consent grant with value: UserManagementUI|b7be0a9f-e776-4d74-9727-057ab0d8c03d not found in store.
2018-08-28 09:38:00.588 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-28 09:38:00.590 -03:00 [INF] User consented to scopes: ["openid","profile","email","picture"]
2018-08-28 09:38:00.592 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","picture"]
2018-08-28 09:38:00.596 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: b7be0a9f-e776-4d74-9727-057ab0d8c03d
2018-08-28 09:38:00.608 -03:00 [DBG] UrTZasnsaGmcCTekWHDDshrH0mTJChx8ANwn2soApo4= not found in database
2018-08-28 09:38:00.641 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 09:38:00.649 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 09:38:00.650 -03:00 [DBG] Getting claims for access token for subject: b7be0a9f-e776-4d74-9727-057ab0d8c03d
2018-08-28 09:38:00.679 -03:00 [DBG] lIn4zl3M0iCPRqC/6zEr3V9mH80jVpZNQNqHM46gwJE= not found in database
2018-08-28 09:38:00.689 -03:00 [DBG] Getting claims for identity token for subject: b7be0a9f-e776-4d74-9727-057ab0d8c03d and client: UserManagementUI
2018-08-28 09:38:00.690 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 09:38:00.736 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "b7be0a9f-e776-4d74-9727-057ab0d8c03d",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ZZrw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****f2c7"
    }
  ],
  "ActivityId": "0HLGCSBUC9NJI:00000009",
  "TimeStamp": "2018-08-28T12:38:00Z",
  "ProcessId": 32216,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-08-28 09:38:00.744 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "b7be0a9f-e776-4d74-9727-057ab0d8c03d",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "uBmlSTEC2xaCmJpRNIB9EsGG6Jb60dxK9z82Zz6K",
  "Scope": "openid profile email picture"
}
2018-08-28 09:38:00.758 -03:00 [DBG] Augmenting SignInContext
2018-08-28 09:38:00.758 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-28 09:38:01.290 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 09:38:01.293 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:38:01.294 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:38:01.295 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 09:38:01.296 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 09:38:01.298 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 09:38:01.299 -03:00 [DBG] Start discovery request
2018-08-28 09:38:01.310 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 09:38:01.316 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 09:38:01.318 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:38:01.319 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:38:01.320 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 09:38:01.321 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 09:38:01.322 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 09:38:01.323 -03:00 [DBG] Start discovery request
2018-08-28 09:38:01.332 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 09:38:01.334 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 09:38:01.335 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:38:01.339 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:38:01.341 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 09:38:01.342 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 09:38:01.346 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 09:38:01.348 -03:00 [DBG] Start key discovery request
2018-08-28 09:38:01.351 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 09:38:01.354 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:38:01.355 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:38:01.356 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 09:38:01.357 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 09:38:01.359 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 09:38:01.362 -03:00 [DBG] Start key discovery request
2018-08-28 09:38:02.543 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 09:38:02.545 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:38:02.546 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:38:02.719 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 09:38:02.722 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 09:38:02.723 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 09:38:02.724 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 09:38:02.727 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 09:38:02.728 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 09:38:02.734 -03:00 [DBG] Start userinfo request
2018-08-28 09:38:02.737 -03:00 [DBG] Bearer token found in header
2018-08-28 09:38:02.754 -03:00 [DBG] lIn4zl3M0iCPRqC/6zEr3V9mH80jVpZNQNqHM46gwJE= found in database: true
2018-08-28 09:38:02.774 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 09:38:02.786 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 09:38:02.793 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 09:38:02.800 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "304803680f07161908fc99391450fb428ccb507fd4f58c7eb58d77024f8af2c7",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535459880,
    "exp": 1535463480,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b7be0a9f-e776-4d74-9727-057ab0d8c03d",
    "auth_time": 1535459851,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-08-28 09:38:02.809 -03:00 [DBG] Creating userinfo response
2018-08-28 09:38:02.813 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 09:38:02.816 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 09:38:02.820 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:38:02.821 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 09:38:02.822 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 09:38:02.826 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 09:38:02.833 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 09:38:02.835 -03:00 [DBG] End userinfo request
2018-08-28 10:37:16.387 -03:00 [INF] Clearing 0 tokens
2018-08-28 10:43:36.433 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 10:43:36.468 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:43:36.470 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:43:36.474 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 10:43:36.476 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 10:43:36.477 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 10:43:36.478 -03:00 [DBG] Start discovery request
2018-08-28 10:43:36.494 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 10:43:36.619 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 10:43:36.623 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:43:36.624 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:43:36.625 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 10:43:36.627 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 10:43:36.632 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 10:43:36.634 -03:00 [DBG] Start key discovery request
2018-08-28 10:43:41.119 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 10:43:41.121 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:43:41.122 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:43:41.123 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 10:43:41.124 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 10:43:41.125 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 10:43:41.126 -03:00 [DBG] Start discovery request
2018-08-28 10:43:41.136 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 10:43:41.158 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 10:43:41.162 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:43:41.163 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:43:41.164 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 10:43:41.165 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 10:43:41.167 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 10:43:41.169 -03:00 [DBG] Start key discovery request
2018-08-28 10:43:41.217 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 10:43:41.223 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 10:43:41.223 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 10:43:41.224 -03:00 [DBG] Start authorize request
2018-08-28 10:43:41.225 -03:00 [DBG] User in authorize request: b7be0a9f-e776-4d74-9727-057ab0d8c03d
2018-08-28 10:43:41.227 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 10:43:41.239 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:43:41.242 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:43:41.245 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:43:41.248 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:43:41.250 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:43:41.251 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 10:43:41.252 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "b7be0a9f-e776-4d74-9727-057ab0d8c03d",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "ziwSdKKGEPwNXk4GwH3951Nqhfj273NbLCh3wq5E",
  "Nonce": "ziwSdKKGEPwNXk4GwH3951Nqhfj273NbLCh3wq5E",
  "SessionId": "f02320f9e69a6a421e9191fd60cc50b1",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "ziwSdKKGEPwNXk4GwH3951Nqhfj273NbLCh3wq5E",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "ziwSdKKGEPwNXk4GwH3951Nqhfj273NbLCh3wq5E"
  }
}
2018-08-28 10:43:41.259 -03:00 [DBG] UrTZasnsaGmcCTekWHDDshrH0mTJChx8ANwn2soApo4= found in database: true
2018-08-28 10:43:41.264 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-28 10:43:41.264 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 10:43:41.265 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 10:43:41.267 -03:00 [DBG] Getting claims for access token for subject: b7be0a9f-e776-4d74-9727-057ab0d8c03d
2018-08-28 10:43:41.278 -03:00 [DBG] wPdaEv7jfCspb5duO53wn0/1Q0+BG8/D8SGG4xsLxjs= not found in database
2018-08-28 10:43:41.285 -03:00 [DBG] Getting claims for identity token for subject: b7be0a9f-e776-4d74-9727-057ab0d8c03d and client: UserManagementUI
2018-08-28 10:43:41.299 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 10:43:41.304 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "b7be0a9f-e776-4d74-9727-057ab0d8c03d",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****zkmw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****3b93"
    }
  ],
  "ActivityId": "0HLGCSBUC9NJO:00000001",
  "TimeStamp": "2018-08-28T13:43:41Z",
  "ProcessId": 32216,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 10:43:41.309 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "b7be0a9f-e776-4d74-9727-057ab0d8c03d",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "ziwSdKKGEPwNXk4GwH3951Nqhfj273NbLCh3wq5E",
  "Scope": "openid profile email picture"
}
2018-08-28 10:43:41.842 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 10:43:41.845 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:43:41.847 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:43:41.848 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 10:43:41.849 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 10:43:41.850 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 10:43:41.850 -03:00 [DBG] Start discovery request
2018-08-28 10:43:41.855 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 10:43:41.865 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 10:43:41.870 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:43:41.871 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:43:41.872 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 10:43:41.873 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 10:43:41.873 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 10:43:41.875 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 10:43:41.876 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:43:41.876 -03:00 [DBG] Start discovery request
2018-08-28 10:43:41.878 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:43:41.879 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 10:43:41.884 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 10:43:41.886 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 10:43:41.887 -03:00 [DBG] Start key discovery request
2018-08-28 10:43:41.888 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 10:43:41.911 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 10:43:41.915 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:43:41.916 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:43:41.918 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 10:43:41.921 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 10:43:41.925 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 10:43:41.926 -03:00 [DBG] Start key discovery request
2018-08-28 10:43:43.091 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 10:43:43.096 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:43:43.097 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:43:43.241 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 10:43:43.245 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:43:43.247 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:43:43.247 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 10:43:43.249 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 10:43:43.251 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 10:43:43.254 -03:00 [DBG] Start userinfo request
2018-08-28 10:43:43.255 -03:00 [DBG] Bearer token found in header
2018-08-28 10:43:43.258 -03:00 [DBG] wPdaEv7jfCspb5duO53wn0/1Q0+BG8/D8SGG4xsLxjs= found in database: true
2018-08-28 10:43:43.276 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:43:43.289 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:43:43.293 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 10:43:43.295 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "387e9163a07becb6e867d5d4c33edceb19e0a7ec03500dfdba2a9f1072e43b93",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535463821,
    "exp": 1535467421,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b7be0a9f-e776-4d74-9727-057ab0d8c03d",
    "auth_time": 1535459851,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-08-28 10:43:43.304 -03:00 [DBG] Creating userinfo response
2018-08-28 10:43:43.305 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 10:43:43.306 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 10:43:43.311 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:43:43.312 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 10:43:43.313 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 10:43:43.318 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:43:43.325 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 10:43:43.326 -03:00 [DBG] End userinfo request
2018-08-28 10:43:45.662 -03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-08-28 10:43:45.664 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-08-28 10:43:45.666 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-08-28 10:43:45.670 -03:00 [DBG] Processing signout request for b7be0a9f-e776-4d74-9727-057ab0d8c03d
2018-08-28 10:43:45.674 -03:00 [DBG] Start end session request validation
2018-08-28 10:43:45.679 -03:00 [DBG] Start identity token validation
2018-08-28 10:43:45.694 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:43:45.695 -03:00 [DBG] Client found: UserManagementUI / User Management UI
2018-08-28 10:43:45.733 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 10:43:45.735 -03:00 [DBG] Token validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1535463821,
    "exp": 1535464121,
    "iss": "http://localhost:5000",
    "aud": "UserManagementUI",
    "nonce": "ziwSdKKGEPwNXk4GwH3951Nqhfj273NbLCh3wq5E",
    "iat": 1535463821,
    "at_hash": "anL0RqGY6ipMcVR5cF6VSA",
    "sid": "f02320f9e69a6a421e9191fd60cc50b1",
    "sub": "b7be0a9f-e776-4d74-9727-057ab0d8c03d",
    "auth_time": 1535459851,
    "idp": "Facebook",
    "amr": "external"
  }
}
2018-08-28 10:43:45.741 -03:00 [INF] End session request validation success
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "SubjectId": "b7be0a9f-e776-4d74-9727-057ab0d8c03d",
  "PostLogOutUri": "http://localhost:4200/",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6ImIwMzg4M2ZhMjcwNmRiM2IzZTdiNjI4ZWE0YmE5MjdkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MzU0NjM4MjEsImV4cCI6MTUzNTQ2NDEyMSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiVXNlck1hbmFnZW1lbnRVSSIsIm5vbmNlIjoieml3U2RLS0dFUHdOWGs0R3dIMzk1MU5xaGZqMjczTmJMQ2gzd3E1RSIsImlhdCI6MTUzNTQ2MzgyMSwiYXRfaGFzaCI6ImFuTDBScUdZNmlwTWNWUjVjRjZWU0EiLCJzaWQiOiJmMDIzMjBmOWU2OWE2YTQyMWU5MTkxZmQ2MGNjNTBiMSIsInN1YiI6ImI3YmUwYTlmLWU3NzYtNGQ3NC05NzI3LTA1N2FiMGQ4YzAzZCIsImF1dGhfdGltZSI6MTUzNTQ1OTg1MSwiaWRwIjoiRmFjZWJvb2siLCJhbXIiOlsiZXh0ZXJuYWwiXX0.DZBz5g1awlsK_Z54h-lrdp6KrVaMuvA6opZGerhQwkWvDCgT_ttXy0ceDHwOFBFkodQPbWe_cAlGUlqR98iAhT36YAQjvORKoIotsJG9QSW0vCgWHzPAOBU_hitifIwiSwS-QYC-Ljth4crMBDNLhQtZ7Hv6L5p1BAblsaIDi25teNi3qK2ieDyUcoDlUPiuraq2XN9Y7B0lAT8gwtii-SHDosRq14s-8C7nPj9OGaZUu9WDBf3JN0cJ3wK2qzohcsmpxj9ZkJ6rikdKx-TEY834OPHBgYGc_X6gY_AXV6VCvRXNTImtnCt8-nwxuDueQdnskf3hrjReNpkfwwzkmw",
    "post_logout_redirect_uri": "http://localhost:4200/"
  }
}
2018-08-28 10:43:45.747 -03:00 [DBG] Success validating end session request from UserManagementUI
2018-08-28 10:43:45.788 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-28 10:43:45.790 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-28 10:43:45.792 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-28 10:43:45.795 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "b7be0a9f-e776-4d74-9727-057ab0d8c03d",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGCSBUC9NJO:00000003",
  "TimeStamp": "2018-08-28T13:43:45Z",
  "ProcessId": 32216,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 10:43:45.859 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-28 10:43:45.861 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-28 10:43:45.863 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-28 10:43:45.867 -03:00 [DBG] Processing signout callback request
2018-08-28 10:43:45.885 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:43:45.888 -03:00 [DBG] No client front-channel logout URLs
2018-08-28 10:43:45.890 -03:00 [DBG] No client back-channel logout URLs
2018-08-28 10:43:45.890 -03:00 [INF] Successful signout callback.
2018-08-28 10:43:45.891 -03:00 [DBG] No client front-channel iframe urls
2018-08-28 10:43:45.892 -03:00 [DBG] No client back-channel iframe urls
2018-08-28 10:43:48.169 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 10:43:48.172 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:43:48.173 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:43:48.174 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 10:43:48.175 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 10:43:48.177 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 10:43:48.180 -03:00 [DBG] Start discovery request
2018-08-28 10:43:48.189 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 10:43:48.205 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 10:43:48.211 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:43:48.212 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:43:48.214 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 10:43:48.216 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 10:43:48.219 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 10:43:48.221 -03:00 [DBG] Start key discovery request
2018-08-28 10:43:48.241 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 10:43:48.243 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 10:43:48.244 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 10:43:48.245 -03:00 [DBG] Start authorize request
2018-08-28 10:43:48.246 -03:00 [DBG] No user present in authorize request
2018-08-28 10:43:48.247 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 10:43:48.256 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:43:48.259 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:43:48.261 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:43:48.264 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:43:48.267 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:43:48.268 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 10:43:48.269 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "wr27jo3UnmPuNKTtuRMu7Q20mZHBnwlisHBAb09n",
  "Nonce": "wr27jo3UnmPuNKTtuRMu7Q20mZHBnwlisHBAb09n",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "wr27jo3UnmPuNKTtuRMu7Q20mZHBnwlisHBAb09n",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "wr27jo3UnmPuNKTtuRMu7Q20mZHBnwlisHBAb09n"
  }
}
2018-08-28 10:43:48.274 -03:00 [INF] Showing login: User is not authenticated
2018-08-28 10:43:48.278 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 10:43:48.286 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:43:48.289 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:43:48.292 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:43:48.296 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:43:48.298 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:43:48.299 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 10:43:48.307 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:45:28.718 -03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-08-28 10:47:12.840 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 10:47:12.843 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:47:12.844 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:47:12.845 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 10:47:12.848 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 10:47:12.850 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 10:47:12.850 -03:00 [DBG] Start discovery request
2018-08-28 10:47:12.857 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 10:47:12.909 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 10:47:12.913 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:47:12.918 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:47:12.919 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 10:47:12.922 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 10:47:12.923 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 10:47:12.925 -03:00 [DBG] Start key discovery request
2018-08-28 10:47:12.948 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 10:47:12.949 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 10:47:12.956 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 10:47:12.958 -03:00 [DBG] Start authorize request
2018-08-28 10:47:12.959 -03:00 [DBG] No user present in authorize request
2018-08-28 10:47:12.960 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 10:47:12.971 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:47:12.975 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:47:12.977 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:47:12.979 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:47:12.981 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:47:12.982 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 10:47:12.984 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "sNJbvJb5MqASroFAErZeSeSGqC9v1xPkkdzHfQyc",
  "Nonce": "sNJbvJb5MqASroFAErZeSeSGqC9v1xPkkdzHfQyc",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "sNJbvJb5MqASroFAErZeSeSGqC9v1xPkkdzHfQyc",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "sNJbvJb5MqASroFAErZeSeSGqC9v1xPkkdzHfQyc"
  }
}
2018-08-28 10:47:12.988 -03:00 [INF] Showing login: User is not authenticated
2018-08-28 10:47:12.994 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 10:47:13.000 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:47:13.003 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:47:13.005 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:47:13.008 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:47:13.010 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:47:13.011 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 10:47:13.018 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:47:20.231 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-28 10:47:29.291 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-28 10:47:29.314 -03:00 [WRN] User 7db5a2d9-7826-41f4-847b-8c00e8f51420 validation failed: DuplicateUserName.
2018-08-28 10:47:32.335 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-28 10:47:33.067 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-28 10:47:33.087 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Facebook",
  "ProviderUserId": "1832756710095231",
  "SubjectId": "b7be0a9f-e776-4d74-9727-057ab0d8c03d",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCSBUC9NJO:00000013",
  "TimeStamp": "2018-08-28T13:47:33Z",
  "ProcessId": 32216,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 10:47:33.089 -03:00 [DBG] Augmenting SignInContext
2018-08-28 10:47:33.089 -03:00 [DBG] Adding amr claim with value: external
2018-08-28 10:47:33.091 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-28 10:47:33.092 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-28 10:54:58.450 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 10:55:08.517 -03:00 [ERR] An error occurred using the connection to database 'Usuarios' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:101a2c77-c010-4ee1-955a-21224b9e604a
Error Number:4060,State:1,Class:11
2018-08-28 10:55:08.574 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:101a2c77-c010-4ee1-955a-21224b9e604a
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:101a2c77-c010-4ee1-955a-21224b9e604a
Error Number:4060,State:1,Class:11
2018-08-28 10:55:08.591 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Collections.Generic.List`1.AddEnumerable(IEnumerable`1 enumerable)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at IdentityServer4.EntityFramework.Services.CorsPolicyService.IsOriginAllowedAsync(String origin) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Services\CorsPolicyService.cs:line 45
   at IdentityServer4.Hosting.CorsPolicyProvider.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\CorsPolicyProvider.cs:line 56
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:101a2c77-c010-4ee1-955a-21224b9e604a
Error Number:4060,State:1,Class:11
2018-08-28 10:55:23.538 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 10:55:26.989 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 10:55:33.605 -03:00 [ERR] An error occurred using the connection to database 'Usuarios' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:c3e44087-3982-450e-aeb5-12be5717b802
Error Number:4060,State:1,Class:11
2018-08-28 10:55:33.605 -03:00 [ERR] An error occurred using the connection to database 'Usuarios' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:c3e44087-3982-450e-aeb5-12be5717b802
Error Number:4060,State:1,Class:11
2018-08-28 10:55:33.609 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:c3e44087-3982-450e-aeb5-12be5717b802
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:c3e44087-3982-450e-aeb5-12be5717b802
Error Number:4060,State:1,Class:11
2018-08-28 10:55:33.613 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:c3e44087-3982-450e-aeb5-12be5717b802
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:c3e44087-3982-450e-aeb5-12be5717b802
Error Number:4060,State:1,Class:11
2018-08-28 10:55:33.622 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Collections.Generic.List`1.AddEnumerable(IEnumerable`1 enumerable)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at IdentityServer4.EntityFramework.Services.CorsPolicyService.IsOriginAllowedAsync(String origin) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Services\CorsPolicyService.cs:line 45
   at IdentityServer4.Hosting.CorsPolicyProvider.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\CorsPolicyProvider.cs:line 56
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:c3e44087-3982-450e-aeb5-12be5717b802
Error Number:4060,State:1,Class:11
2018-08-28 10:55:33.632 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Collections.Generic.List`1.AddEnumerable(IEnumerable`1 enumerable)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at IdentityServer4.EntityFramework.Services.CorsPolicyService.IsOriginAllowedAsync(String origin) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Services\CorsPolicyService.cs:line 45
   at IdentityServer4.Hosting.CorsPolicyProvider.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\CorsPolicyProvider.cs:line 56
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:c3e44087-3982-450e-aeb5-12be5717b802
Error Number:4060,State:1,Class:11
2018-08-28 10:55:36.615 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 10:55:36.619 -03:00 [ERR] An error occurred using the connection to database 'Usuarios' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:c3e44087-3982-450e-aeb5-12be5717b802
Error Number:4060,State:1,Class:11
2018-08-28 10:55:36.631 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:c3e44087-3982-450e-aeb5-12be5717b802
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:c3e44087-3982-450e-aeb5-12be5717b802
Error Number:4060,State:1,Class:11
2018-08-28 10:55:36.650 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Collections.Generic.List`1.AddEnumerable(IEnumerable`1 enumerable)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at IdentityServer4.EntityFramework.Services.CorsPolicyService.IsOriginAllowedAsync(String origin) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Services\CorsPolicyService.cs:line 45
   at IdentityServer4.Hosting.CorsPolicyProvider.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\CorsPolicyProvider.cs:line 56
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:c3e44087-3982-450e-aeb5-12be5717b802
Error Number:4060,State:1,Class:11
2018-08-28 10:57:27.849 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 10:57:37.915 -03:00 [ERR] An error occurred using the connection to database 'Usuarios' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:c52efd76-d835-4623-a400-36ec2c4b3258
Error Number:4060,State:1,Class:11
2018-08-28 10:57:37.922 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:c52efd76-d835-4623-a400-36ec2c4b3258
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:c52efd76-d835-4623-a400-36ec2c4b3258
Error Number:4060,State:1,Class:11
2018-08-28 10:57:37.935 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Collections.Generic.List`1.AddEnumerable(IEnumerable`1 enumerable)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at IdentityServer4.EntityFramework.Services.CorsPolicyService.IsOriginAllowedAsync(String origin) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Services\CorsPolicyService.cs:line 45
   at IdentityServer4.Hosting.CorsPolicyProvider.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\CorsPolicyProvider.cs:line 56
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:c52efd76-d835-4623-a400-36ec2c4b3258
Error Number:4060,State:1,Class:11
2018-08-28 10:58:11.890 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 10:58:15.324 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 10:58:21.966 -03:00 [ERR] An error occurred using the connection to database 'Usuarios' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:e12da2dc-ae21-4ccd-9ac0-a10930e4a647
Error Number:4060,State:1,Class:11
2018-08-28 10:58:21.966 -03:00 [ERR] An error occurred using the connection to database 'Usuarios' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:e12da2dc-ae21-4ccd-9ac0-a10930e4a647
Error Number:4060,State:1,Class:11
2018-08-28 10:58:21.971 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:e12da2dc-ae21-4ccd-9ac0-a10930e4a647
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:e12da2dc-ae21-4ccd-9ac0-a10930e4a647
Error Number:4060,State:1,Class:11
2018-08-28 10:58:21.975 -03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:e12da2dc-ae21-4ccd-9ac0-a10930e4a647
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:e12da2dc-ae21-4ccd-9ac0-a10930e4a647
Error Number:4060,State:1,Class:11
2018-08-28 10:58:21.984 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Collections.Generic.List`1.AddEnumerable(IEnumerable`1 enumerable)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at IdentityServer4.EntityFramework.Services.CorsPolicyService.IsOriginAllowedAsync(String origin) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Services\CorsPolicyService.cs:line 45
   at IdentityServer4.Hosting.CorsPolicyProvider.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\CorsPolicyProvider.cs:line 56
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:e12da2dc-ae21-4ccd-9ac0-a10930e4a647
Error Number:4060,State:1,Class:11
2018-08-28 10:58:21.995 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "Usuarios" requested by the login. The login failed.
Login failed for user 'sa'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Collections.Generic.List`1.AddEnumerable(IEnumerable`1 enumerable)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at IdentityServer4.EntityFramework.Services.CorsPolicyService.IsOriginAllowedAsync(String origin) in C:\local\identity\server4\EntityFramework\src\IdentityServer4.EntityFramework\Services\CorsPolicyService.cs:line 45
   at IdentityServer4.Hosting.CorsPolicyProvider.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\CorsPolicyProvider.cs:line 56
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:e12da2dc-ae21-4ccd-9ac0-a10930e4a647
Error Number:4060,State:1,Class:11
2018-08-28 10:58:49.063 -03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-28 10:58:49.085 -03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-28 10:58:49.085 -03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-28 10:58:49.085 -03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-28 10:58:49.085 -03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-28 10:58:49.164 -03:00 [DBG] Starting token cleanup
2018-08-28 10:58:52.143 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 10:58:52.253 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:58:52.257 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:58:52.299 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 10:58:52.305 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 10:58:52.307 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 10:58:52.311 -03:00 [DBG] Start discovery request
2018-08-28 10:58:52.569 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 10:58:52.601 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 10:58:52.609 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:58:52.610 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:58:52.612 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 10:58:52.613 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 10:58:52.616 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 10:58:52.620 -03:00 [DBG] Start key discovery request
2018-08-28 10:58:52.668 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 10:58:52.672 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 10:58:52.673 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 10:58:52.676 -03:00 [DBG] Start authorize request
2018-08-28 10:58:52.683 -03:00 [DBG] User in authorize request: b7be0a9f-e776-4d74-9727-057ab0d8c03d
2018-08-28 10:58:52.687 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 10:58:52.839 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:58:52.877 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:58:52.902 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:58:52.909 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:58:52.911 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:58:52.916 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 10:58:52.928 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "b7be0a9f-e776-4d74-9727-057ab0d8c03d",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "pdMMO4IcYisg91FLdwTATYPZbxq6AMMqhRzPuz2c",
  "Nonce": "pdMMO4IcYisg91FLdwTATYPZbxq6AMMqhRzPuz2c",
  "SessionId": "a6f71b9a306734ffc5b0c4e25c767da9",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "pdMMO4IcYisg91FLdwTATYPZbxq6AMMqhRzPuz2c",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "pdMMO4IcYisg91FLdwTATYPZbxq6AMMqhRzPuz2c"
  }
}
2018-08-28 10:58:52.953 -03:00 [INF] Showing login: User is not active
2018-08-28 10:58:53.065 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 10:58:53.073 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:58:53.075 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:58:53.077 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:58:53.079 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:58:53.080 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:58:53.081 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 10:58:53.090 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:59:03.950 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 10:59:03.961 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:59:03.964 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:59:03.966 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:59:03.968 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:59:03.970 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:59:03.971 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 10:59:03.977 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:59:27.087 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-28 10:59:33.584 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-28 10:59:33.802 -03:00 [INF] Provider Google associated.
2018-08-28 10:59:33.964 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "102696868227620762147",
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCTPHEAHHT:00000006",
  "TimeStamp": "2018-08-28T13:59:33Z",
  "ProcessId": 7424,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 10:59:33.973 -03:00 [DBG] Augmenting SignInContext
2018-08-28 10:59:33.975 -03:00 [DBG] Adding amr claim with value: external
2018-08-28 10:59:33.986 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-28 10:59:33.992 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-28 10:59:34.005 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-28 10:59:34.010 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-28 10:59:34.011 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-28 10:59:34.016 -03:00 [DBG] Start authorize callback request
2018-08-28 10:59:34.019 -03:00 [DBG] User in authorize request: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 10:59:34.020 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 10:59:34.027 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:59:34.029 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:59:34.031 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:59:34.033 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:59:34.035 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:59:34.035 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 10:59:34.037 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "pdMMO4IcYisg91FLdwTATYPZbxq6AMMqhRzPuz2c",
  "Nonce": "pdMMO4IcYisg91FLdwTATYPZbxq6AMMqhRzPuz2c",
  "SessionId": "00867094f2019ddfd591e6fe582228ed",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "pdMMO4IcYisg91FLdwTATYPZbxq6AMMqhRzPuz2c",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "pdMMO4IcYisg91FLdwTATYPZbxq6AMMqhRzPuz2c"
  }
}
2018-08-28 10:59:34.066 -03:00 [DBG] QYjmOIUlO1JMQyooCx/iUDvC+TjVxZorU2p8hBc4yho= found in database: false
2018-08-28 10:59:34.068 -03:00 [DBG] user_consent grant with value: UserManagementUI|b1c5ef37-eef5-4d49-b367-c4adbbae9548 not found in store.
2018-08-28 10:59:34.069 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-28 10:59:34.069 -03:00 [INF] Showing consent: User has not yet consented
2018-08-28 10:59:34.091 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 10:59:34.098 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:59:34.103 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:59:34.106 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:59:34.110 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:59:34.112 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:59:34.113 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 10:59:34.120 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:59:34.122 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:59:34.124 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:59:55.859 -03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-28 10:59:55.899 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 10:59:55.906 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:59:55.909 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:59:55.911 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:59:55.913 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:59:55.914 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:59:55.915 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 10:59:55.929 -03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-28 10:59:55.930 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-28 10:59:55.931 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-28 10:59:55.932 -03:00 [DBG] Start authorize callback request
2018-08-28 10:59:55.935 -03:00 [DBG] User in authorize request: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 10:59:55.936 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 10:59:55.944 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:59:55.947 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:59:55.950 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:59:55.952 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:59:55.954 -03:00 [DBG] Found [] API scopes in database
2018-08-28 10:59:55.955 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 10:59:55.956 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "pdMMO4IcYisg91FLdwTATYPZbxq6AMMqhRzPuz2c",
  "Nonce": "pdMMO4IcYisg91FLdwTATYPZbxq6AMMqhRzPuz2c",
  "SessionId": "00867094f2019ddfd591e6fe582228ed",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "pdMMO4IcYisg91FLdwTATYPZbxq6AMMqhRzPuz2c",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "pdMMO4IcYisg91FLdwTATYPZbxq6AMMqhRzPuz2c"
  }
}
2018-08-28 10:59:55.965 -03:00 [DBG] QYjmOIUlO1JMQyooCx/iUDvC+TjVxZorU2p8hBc4yho= found in database: false
2018-08-28 10:59:55.965 -03:00 [DBG] user_consent grant with value: UserManagementUI|b1c5ef37-eef5-4d49-b367-c4adbbae9548 not found in store.
2018-08-28 10:59:55.966 -03:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-28 10:59:55.969 -03:00 [INF] User consented to scopes: ["openid","profile","email","picture"]
2018-08-28 10:59:55.970 -03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","email","picture"]
2018-08-28 10:59:55.975 -03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 10:59:55.986 -03:00 [DBG] QYjmOIUlO1JMQyooCx/iUDvC+TjVxZorU2p8hBc4yho= not found in database
2018-08-28 10:59:56.019 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 10:59:56.027 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 10:59:56.027 -03:00 [DBG] Getting claims for access token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 10:59:56.055 -03:00 [DBG] JHM1nTVTnShmCa+3lFBx3VBLKD+NCU/LjoC41yt/5/w= not found in database
2018-08-28 10:59:56.068 -03:00 [DBG] Getting claims for identity token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548 and client: UserManagementUI
2018-08-28 10:59:56.069 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 10:59:56.128 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****-DbQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****f07a"
    }
  ],
  "ActivityId": "0HLGCTPHEAHHT:0000000C",
  "TimeStamp": "2018-08-28T13:59:56Z",
  "ProcessId": 7424,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 10:59:56.137 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "pdMMO4IcYisg91FLdwTATYPZbxq6AMMqhRzPuz2c",
  "Scope": "openid profile email picture"
}
2018-08-28 10:59:56.150 -03:00 [DBG] Augmenting SignInContext
2018-08-28 10:59:56.150 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-28 10:59:57.555 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 10:59:57.558 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:59:57.558 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:59:57.559 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 10:59:57.560 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 10:59:57.562 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 10:59:57.563 -03:00 [DBG] Start discovery request
2018-08-28 10:59:57.570 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 10:59:57.585 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 10:59:57.588 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:59:57.591 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:59:57.592 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 10:59:57.594 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 10:59:57.595 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 10:59:57.598 -03:00 [DBG] Start discovery request
2018-08-28 10:59:57.602 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 10:59:57.605 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:59:57.607 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:59:57.610 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 10:59:57.611 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 10:59:57.613 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 10:59:57.614 -03:00 [DBG] Start key discovery request
2018-08-28 10:59:57.643 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 10:59:57.669 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 10:59:57.673 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:59:57.674 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:59:57.676 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 10:59:57.677 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 10:59:57.678 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 10:59:57.679 -03:00 [DBG] Start key discovery request
2018-08-28 10:59:58.900 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 10:59:58.903 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:59:58.904 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:59:59.151 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 10:59:59.154 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 10:59:59.155 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 10:59:59.156 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 10:59:59.159 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 10:59:59.160 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 10:59:59.168 -03:00 [DBG] Start userinfo request
2018-08-28 10:59:59.171 -03:00 [DBG] Bearer token found in header
2018-08-28 10:59:59.190 -03:00 [DBG] JHM1nTVTnShmCa+3lFBx3VBLKD+NCU/LjoC41yt/5/w= found in database: true
2018-08-28 10:59:59.214 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:59:59.229 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 10:59:59.236 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 10:59:59.243 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "bc96ca97ee152d0a411f02d77cc67bb188426856386d87de607730ba22ccf07a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535464796,
    "exp": 1535468396,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535464773,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 10:59:59.255 -03:00 [DBG] Creating userinfo response
2018-08-28 10:59:59.259 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 10:59:59.262 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 10:59:59.266 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:59:59.268 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 10:59:59.269 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 10:59:59.272 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 10:59:59.279 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 10:59:59.280 -03:00 [DBG] End userinfo request
2018-08-28 11:00:18.798 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 11:00:18.801 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 11:00:18.802 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 11:00:18.803 -03:00 [DBG] Start discovery request
2018-08-28 11:00:18.811 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 11:00:33.713 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 11:00:33.716 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 11:00:33.718 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 11:00:33.719 -03:00 [DBG] Start userinfo request
2018-08-28 11:00:33.720 -03:00 [DBG] Bearer token not found
2018-08-28 11:00:33.721 -03:00 [ERR] No access token found.
2018-08-28 11:08:05.147 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 11:08:05.194 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:08:05.196 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:08:05.197 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 11:08:05.198 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 11:08:05.202 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 11:08:05.203 -03:00 [DBG] Start discovery request
2018-08-28 11:08:05.212 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 11:08:05.236 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 11:08:05.239 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:08:05.242 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:08:05.245 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 11:08:05.248 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 11:08:05.249 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 11:08:05.251 -03:00 [DBG] Start key discovery request
2018-08-28 11:08:10.689 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 11:08:10.693 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:08:10.694 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:08:10.694 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 11:08:10.695 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 11:08:10.696 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 11:08:10.697 -03:00 [DBG] Start discovery request
2018-08-28 11:08:10.703 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 11:08:10.755 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 11:08:10.759 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:08:10.761 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:08:10.762 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 11:08:10.764 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 11:08:10.766 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 11:08:10.768 -03:00 [DBG] Start key discovery request
2018-08-28 11:08:10.813 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 11:08:10.816 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 11:08:10.817 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 11:08:10.820 -03:00 [DBG] Start authorize request
2018-08-28 11:08:10.821 -03:00 [DBG] User in authorize request: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 11:08:10.822 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 11:08:10.831 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 11:08:10.834 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 11:08:10.836 -03:00 [DBG] Found [] API scopes in database
2018-08-28 11:08:10.839 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 11:08:10.841 -03:00 [DBG] Found [] API scopes in database
2018-08-28 11:08:10.842 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 11:08:10.845 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "iflz0qSjzQtckM0UEcQOd3sy8fGaRNRYLM6ts1go",
  "Nonce": "iflz0qSjzQtckM0UEcQOd3sy8fGaRNRYLM6ts1go",
  "SessionId": "00867094f2019ddfd591e6fe582228ed",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "iflz0qSjzQtckM0UEcQOd3sy8fGaRNRYLM6ts1go",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "iflz0qSjzQtckM0UEcQOd3sy8fGaRNRYLM6ts1go"
  }
}
2018-08-28 11:08:10.852 -03:00 [DBG] QYjmOIUlO1JMQyooCx/iUDvC+TjVxZorU2p8hBc4yho= found in database: true
2018-08-28 11:08:10.856 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-28 11:08:10.857 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 11:08:10.858 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 11:08:10.858 -03:00 [DBG] Getting claims for access token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 11:08:10.868 -03:00 [DBG] rd4asFxGXKcDfKOP/xR+VON6pMF82QdWVe20woP4GpY= not found in database
2018-08-28 11:08:10.874 -03:00 [DBG] Getting claims for identity token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548 and client: UserManagementUI
2018-08-28 11:08:10.875 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 11:08:10.881 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****USFw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****78be"
    }
  ],
  "ActivityId": "0HLGCTPHEAHHV:00000001",
  "TimeStamp": "2018-08-28T14:08:10Z",
  "ProcessId": 7424,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 11:08:10.883 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "iflz0qSjzQtckM0UEcQOd3sy8fGaRNRYLM6ts1go",
  "Scope": "openid profile email picture"
}
2018-08-28 11:08:11.421 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 11:08:11.424 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:08:11.425 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:08:11.428 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 11:08:11.429 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 11:08:11.431 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 11:08:11.432 -03:00 [DBG] Start discovery request
2018-08-28 11:08:11.441 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 11:08:11.445 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 11:08:11.447 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:08:11.448 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:08:11.449 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 11:08:11.450 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 11:08:11.451 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 11:08:11.451 -03:00 [DBG] Start discovery request
2018-08-28 11:08:11.458 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 11:08:11.458 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 11:08:11.463 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:08:11.469 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:08:11.470 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 11:08:11.472 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 11:08:11.473 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 11:08:11.479 -03:00 [DBG] Start key discovery request
2018-08-28 11:08:11.485 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 11:08:11.487 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:08:11.488 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:08:11.489 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 11:08:11.490 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 11:08:11.491 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 11:08:11.492 -03:00 [DBG] Start key discovery request
2018-08-28 11:08:12.677 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 11:08:12.679 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:08:12.680 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:08:12.894 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 11:08:12.898 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:08:12.899 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:08:12.901 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 11:08:12.902 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 11:08:12.903 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 11:08:12.903 -03:00 [DBG] Start userinfo request
2018-08-28 11:08:12.903 -03:00 [DBG] Bearer token found in header
2018-08-28 11:08:12.905 -03:00 [DBG] rd4asFxGXKcDfKOP/xR+VON6pMF82QdWVe20woP4GpY= found in database: true
2018-08-28 11:08:12.920 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 11:08:12.927 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 11:08:12.931 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 11:08:12.932 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "d2e74012cb37532b8dd6c42fabb0cc42c1ef8dd12b6b54cc43ba748bcf7878be",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535465290,
    "exp": 1535468890,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535464773,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 11:08:12.936 -03:00 [DBG] Creating userinfo response
2018-08-28 11:08:12.937 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 11:08:12.937 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 11:08:12.942 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 11:08:12.947 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 11:08:12.948 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 11:08:12.951 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 11:08:12.956 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 11:08:12.957 -03:00 [DBG] End userinfo request
2018-08-28 11:44:05.046 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 11:44:05.047 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 11:44:05.048 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 11:44:05.048 -03:00 [DBG] Start authorize request
2018-08-28 11:44:05.049 -03:00 [DBG] User in authorize request: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 11:44:05.049 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 11:44:05.055 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 11:44:05.059 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 11:44:05.061 -03:00 [DBG] Found [] API scopes in database
2018-08-28 11:44:05.063 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 11:44:05.064 -03:00 [DBG] Found [] API scopes in database
2018-08-28 11:44:05.065 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 11:44:05.065 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "kNeLH8L2L4fopRvK7wyzAocMiFrhnaZVPonvjgcm",
  "Nonce": "kNeLH8L2L4fopRvK7wyzAocMiFrhnaZVPonvjgcm",
  "SessionId": "00867094f2019ddfd591e6fe582228ed",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "kNeLH8L2L4fopRvK7wyzAocMiFrhnaZVPonvjgcm",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "kNeLH8L2L4fopRvK7wyzAocMiFrhnaZVPonvjgcm"
  }
}
2018-08-28 11:44:05.070 -03:00 [DBG] QYjmOIUlO1JMQyooCx/iUDvC+TjVxZorU2p8hBc4yho= found in database: true
2018-08-28 11:44:05.073 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-28 11:44:05.073 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 11:44:05.074 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 11:44:05.074 -03:00 [DBG] Getting claims for access token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 11:44:05.088 -03:00 [DBG] t1Zkls/1UlZPNrhplVw03H1UiKO7bKKwecOAPhDddmc= not found in database
2018-08-28 11:44:05.093 -03:00 [DBG] Getting claims for identity token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548 and client: UserManagementUI
2018-08-28 11:44:05.094 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 11:44:05.097 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****5nKg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****a762"
    }
  ],
  "ActivityId": "0HLGCTPHEAHI3:00000001",
  "TimeStamp": "2018-08-28T14:44:05Z",
  "ProcessId": 7424,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 11:44:05.099 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "kNeLH8L2L4fopRvK7wyzAocMiFrhnaZVPonvjgcm",
  "Scope": "openid profile email picture"
}
2018-08-28 11:44:06.399 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 11:44:06.401 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:44:06.401 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:44:06.402 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 11:44:06.402 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 11:44:06.403 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 11:44:06.403 -03:00 [DBG] Start discovery request
2018-08-28 11:44:06.409 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 11:44:06.423 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 11:44:06.426 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:44:06.427 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:44:06.427 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 11:44:06.428 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 11:44:06.429 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 11:44:06.430 -03:00 [DBG] Start discovery request
2018-08-28 11:44:06.437 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 11:44:06.457 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 11:44:06.496 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:44:06.497 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:44:06.499 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 11:44:06.500 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 11:44:06.500 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 11:44:06.501 -03:00 [DBG] Start key discovery request
2018-08-28 11:44:06.504 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 11:44:06.508 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:44:06.509 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:44:06.509 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 11:44:06.510 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 11:44:06.511 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 11:44:06.512 -03:00 [DBG] Start key discovery request
2018-08-28 11:44:07.794 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 11:44:07.796 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:44:07.797 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:44:07.950 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 11:44:07.953 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:44:07.954 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:44:07.955 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 11:44:07.956 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 11:44:07.960 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 11:44:07.961 -03:00 [DBG] Start userinfo request
2018-08-28 11:44:07.962 -03:00 [DBG] Bearer token found in header
2018-08-28 11:44:07.964 -03:00 [DBG] t1Zkls/1UlZPNrhplVw03H1UiKO7bKKwecOAPhDddmc= found in database: true
2018-08-28 11:44:07.980 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 11:44:07.987 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 11:44:07.992 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 11:44:07.993 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "1c5c01e53e3d498a739ef4e6957d54d37ea428d1bc4de2b1250fee24c59fa762",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535467445,
    "exp": 1535471045,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535464773,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 11:44:07.995 -03:00 [DBG] Creating userinfo response
2018-08-28 11:44:07.996 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 11:44:07.996 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 11:44:07.999 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 11:44:08.000 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 11:44:08.001 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 11:44:08.003 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 11:44:08.009 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 11:44:08.010 -03:00 [DBG] End userinfo request
2018-08-28 11:58:49.277 -03:00 [INF] Clearing 0 tokens
2018-08-28 11:59:23.264 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 11:59:23.268 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:59:23.268 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:59:23.269 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 11:59:23.270 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 11:59:23.271 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 11:59:23.272 -03:00 [DBG] Start discovery request
2018-08-28 11:59:23.279 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 11:59:23.295 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 11:59:23.298 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:59:23.298 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:59:23.299 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 11:59:23.300 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 11:59:23.301 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 11:59:23.302 -03:00 [DBG] Start key discovery request
2018-08-28 11:59:25.081 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 11:59:25.082 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 11:59:25.083 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 11:59:25.084 -03:00 [DBG] Start authorize request
2018-08-28 11:59:25.084 -03:00 [DBG] User in authorize request: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 11:59:25.085 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 11:59:25.091 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 11:59:25.093 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 11:59:25.095 -03:00 [DBG] Found [] API scopes in database
2018-08-28 11:59:25.096 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 11:59:25.098 -03:00 [DBG] Found [] API scopes in database
2018-08-28 11:59:25.099 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 11:59:25.099 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "dMw01x7lWkzSyTvMV4ey5vD27hCBSKWD2Eii2rnf",
  "Nonce": "dMw01x7lWkzSyTvMV4ey5vD27hCBSKWD2Eii2rnf",
  "SessionId": "00867094f2019ddfd591e6fe582228ed",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "dMw01x7lWkzSyTvMV4ey5vD27hCBSKWD2Eii2rnf",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "dMw01x7lWkzSyTvMV4ey5vD27hCBSKWD2Eii2rnf"
  }
}
2018-08-28 11:59:25.104 -03:00 [DBG] QYjmOIUlO1JMQyooCx/iUDvC+TjVxZorU2p8hBc4yho= found in database: true
2018-08-28 11:59:25.107 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-28 11:59:25.108 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 11:59:25.108 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 11:59:25.108 -03:00 [DBG] Getting claims for access token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 11:59:25.122 -03:00 [DBG] fOtXnt7kF4+bzKE2P/unQTvwWJFjsqjnxbatUafKQ44= not found in database
2018-08-28 11:59:25.129 -03:00 [DBG] Getting claims for identity token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548 and client: UserManagementUI
2018-08-28 11:59:25.130 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 11:59:25.134 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****84ng"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****baf9"
    }
  ],
  "ActivityId": "0HLGCTPHEAHI8:00000001",
  "TimeStamp": "2018-08-28T14:59:25Z",
  "ProcessId": 7424,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 11:59:25.135 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "dMw01x7lWkzSyTvMV4ey5vD27hCBSKWD2Eii2rnf",
  "Scope": "openid profile email picture"
}
2018-08-28 11:59:26.255 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 11:59:26.257 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:59:26.258 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:59:26.258 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 11:59:26.259 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 11:59:26.260 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 11:59:26.261 -03:00 [DBG] Start discovery request
2018-08-28 11:59:26.270 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 11:59:26.282 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 11:59:26.284 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:59:26.285 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:59:26.285 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 11:59:26.287 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 11:59:26.288 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 11:59:26.288 -03:00 [DBG] Start discovery request
2018-08-28 11:59:26.300 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 11:59:26.301 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 11:59:26.337 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:59:26.337 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:59:26.337 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 11:59:26.338 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 11:59:26.338 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 11:59:26.338 -03:00 [DBG] Start key discovery request
2018-08-28 11:59:26.343 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 11:59:26.345 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:59:26.346 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:59:26.349 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 11:59:26.350 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 11:59:26.350 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 11:59:26.351 -03:00 [DBG] Start key discovery request
2018-08-28 11:59:27.619 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 11:59:27.620 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:59:27.621 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:59:27.797 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 11:59:27.800 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 11:59:27.800 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 11:59:27.801 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 11:59:27.801 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 11:59:27.802 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 11:59:27.803 -03:00 [DBG] Start userinfo request
2018-08-28 11:59:27.804 -03:00 [DBG] Bearer token found in header
2018-08-28 11:59:27.806 -03:00 [DBG] fOtXnt7kF4+bzKE2P/unQTvwWJFjsqjnxbatUafKQ44= found in database: true
2018-08-28 11:59:27.820 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 11:59:27.828 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 11:59:27.832 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 11:59:27.832 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "86b784628aa05a6118b206c7e09c5255884fa64c9b6038252a8c32b94166baf9",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535468365,
    "exp": 1535471965,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535464773,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 11:59:27.834 -03:00 [DBG] Creating userinfo response
2018-08-28 11:59:27.835 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 11:59:27.835 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 11:59:27.838 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 11:59:27.839 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 11:59:27.840 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 11:59:27.843 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 11:59:27.847 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 11:59:27.848 -03:00 [DBG] End userinfo request
2018-08-28 12:01:27.593 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:01:27.596 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:01:27.596 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:01:27.596 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:01:27.597 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:01:27.598 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:01:27.599 -03:00 [DBG] Start discovery request
2018-08-28 12:01:27.605 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:01:27.627 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:01:27.630 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:01:27.631 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:01:27.632 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:01:27.633 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:01:27.634 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:01:27.635 -03:00 [DBG] Start key discovery request
2018-08-28 12:01:27.864 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:01:27.867 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:01:27.868 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:01:28.055 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:01:28.058 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:01:28.059 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:01:28.060 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:01:28.060 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:01:28.061 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:01:28.062 -03:00 [DBG] Start userinfo request
2018-08-28 12:01:28.062 -03:00 [DBG] Bearer token found in header
2018-08-28 12:01:28.065 -03:00 [DBG] fOtXnt7kF4+bzKE2P/unQTvwWJFjsqjnxbatUafKQ44= found in database: true
2018-08-28 12:01:28.079 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:01:28.087 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:01:28.090 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:01:28.091 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "86b784628aa05a6118b206c7e09c5255884fa64c9b6038252a8c32b94166baf9",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535468365,
    "exp": 1535471965,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535464773,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:01:28.093 -03:00 [DBG] Creating userinfo response
2018-08-28 12:01:28.093 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:01:28.094 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:01:28.098 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:01:28.100 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:01:28.101 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:01:28.104 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:01:28.111 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:01:28.113 -03:00 [DBG] End userinfo request
2018-08-28 12:01:53.558 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:01:53.561 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:01:53.561 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:01:53.562 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:01:53.563 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:01:53.563 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:01:53.564 -03:00 [DBG] Start discovery request
2018-08-28 12:01:53.572 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:01:53.606 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:01:53.609 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:01:53.609 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:01:53.610 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:01:53.611 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:01:53.612 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:01:53.613 -03:00 [DBG] Start key discovery request
2018-08-28 12:01:53.997 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:01:54.000 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:01:54.000 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:01:54.001 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:01:54.002 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:01:54.003 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:01:54.004 -03:00 [DBG] Start discovery request
2018-08-28 12:01:54.010 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:01:54.029 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:01:54.032 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:01:54.033 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:01:54.033 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:01:54.035 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:01:54.035 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:01:54.036 -03:00 [DBG] Start key discovery request
2018-08-28 12:01:54.121 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:01:54.123 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:01:54.123 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:01:54.358 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:01:54.360 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:01:54.360 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:01:54.361 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:01:54.362 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:01:54.362 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:01:54.363 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:01:54.364 -03:00 [DBG] Start userinfo request
2018-08-28 12:01:54.365 -03:00 [DBG] Bearer token found in header
2018-08-28 12:01:54.367 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:01:54.367 -03:00 [DBG] fOtXnt7kF4+bzKE2P/unQTvwWJFjsqjnxbatUafKQ44= found in database: true
2018-08-28 12:01:54.367 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:01:54.387 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:01:54.422 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:01:54.426 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:01:54.427 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "86b784628aa05a6118b206c7e09c5255884fa64c9b6038252a8c32b94166baf9",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535468365,
    "exp": 1535471965,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535464773,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:01:54.428 -03:00 [DBG] Creating userinfo response
2018-08-28 12:01:54.428 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:01:54.429 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:01:54.432 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:01:54.433 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:01:54.433 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:01:54.436 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:01:54.439 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:01:54.440 -03:00 [DBG] End userinfo request
2018-08-28 12:01:54.556 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:01:54.559 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:01:54.560 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:01:54.562 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:01:54.563 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:01:54.563 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:01:54.564 -03:00 [DBG] Start userinfo request
2018-08-28 12:01:54.564 -03:00 [DBG] Bearer token found in header
2018-08-28 12:01:54.566 -03:00 [DBG] fOtXnt7kF4+bzKE2P/unQTvwWJFjsqjnxbatUafKQ44= found in database: true
2018-08-28 12:01:54.579 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:01:54.585 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:01:54.589 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:01:54.589 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "86b784628aa05a6118b206c7e09c5255884fa64c9b6038252a8c32b94166baf9",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535468365,
    "exp": 1535471965,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535464773,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:01:54.590 -03:00 [DBG] Creating userinfo response
2018-08-28 12:01:54.591 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:01:54.592 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:01:54.594 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:01:54.595 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:01:54.596 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:01:54.599 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:01:54.601 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:01:54.602 -03:00 [DBG] End userinfo request
2018-08-28 12:02:11.321 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-28 12:02:12.739 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-28 12:02:12.753 -03:00 [WRN] User 5810f9e5-275c-41cb-a68a-4b97a7d281c3 validation failed: DuplicateUserName.
2018-08-28 12:02:18.452 -03:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-28 12:02:18.469 -03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-28 12:02:18.470 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-28 12:02:18.471 -03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-28 12:02:18.475 -03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "DisplayName": "Bruno Brito",
  "ActivityId": "0HLGCTPHEAHIE:00000005",
  "TimeStamp": "2018-08-28T15:02:18Z",
  "ProcessId": 7424,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 12:02:18.555 -03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-08-28 12:02:18.558 -03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-08-28 12:02:18.559 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-08-28 12:02:18.565 -03:00 [DBG] Processing signout callback request
2018-08-28 12:02:18.582 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:02:18.583 -03:00 [DBG] No client front-channel logout URLs
2018-08-28 12:02:18.584 -03:00 [DBG] No client back-channel logout URLs
2018-08-28 12:02:18.584 -03:00 [INF] Successful signout callback.
2018-08-28 12:02:18.585 -03:00 [DBG] No client front-channel iframe urls
2018-08-28 12:02:18.585 -03:00 [DBG] No client back-channel iframe urls
2018-08-28 12:02:20.984 -03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-08-28 12:02:21.580 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-28 12:02:21.590 -03:00 [WRN] User 2b886a7b-d998-4b13-b19e-d025afce1493 validation failed: DuplicateUserName.
2018-08-28 12:02:23.750 -03:00 [INF] AuthenticationScheme: Google was challenged.
2018-08-28 12:02:28.403 -03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2018-08-28 12:02:28.417 -03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "102696868227620762147",
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "DisplayName": "Bruno Brito",
  "Endpoint": "UI",
  "ActivityId": "0HLGCTPHEAHIE:00000010",
  "TimeStamp": "2018-08-28T15:02:28Z",
  "ProcessId": 7424,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 12:02:28.418 -03:00 [DBG] Augmenting SignInContext
2018-08-28 12:02:28.418 -03:00 [DBG] Adding amr claim with value: external
2018-08-28 12:02:28.419 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-28 12:02:28.419 -03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-28 12:02:37.965 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:02:37.968 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:02:37.968 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:02:37.969 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:02:37.969 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:02:37.970 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:02:37.971 -03:00 [DBG] Start discovery request
2018-08-28 12:02:37.975 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:02:38.031 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:02:38.034 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:02:38.035 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:02:38.036 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:02:38.037 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:02:38.038 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:02:38.039 -03:00 [DBG] Start key discovery request
2018-08-28 12:02:39.154 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:02:39.156 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:02:39.158 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:02:39.366 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:02:39.369 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:02:39.370 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:02:39.371 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:02:39.372 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:02:39.373 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:02:39.373 -03:00 [DBG] Start userinfo request
2018-08-28 12:02:39.374 -03:00 [DBG] Bearer token found in header
2018-08-28 12:02:39.376 -03:00 [DBG] fOtXnt7kF4+bzKE2P/unQTvwWJFjsqjnxbatUafKQ44= found in database: true
2018-08-28 12:02:39.390 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:02:39.404 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:02:39.408 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:02:39.408 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "86b784628aa05a6118b206c7e09c5255884fa64c9b6038252a8c32b94166baf9",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535468365,
    "exp": 1535471965,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535464773,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:02:39.411 -03:00 [DBG] Creating userinfo response
2018-08-28 12:02:39.411 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:02:39.412 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:02:39.417 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:02:39.418 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:02:39.420 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:02:39.423 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:02:39.427 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:02:39.429 -03:00 [DBG] End userinfo request
2018-08-28 12:05:36.867 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:05:36.912 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:05:36.913 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:05:36.914 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:05:36.915 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:05:36.916 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:05:36.917 -03:00 [DBG] Start discovery request
2018-08-28 12:05:36.939 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:05:37.270 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:05:37.272 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:05:37.273 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:05:37.274 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:05:37.274 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:05:37.275 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:05:37.275 -03:00 [DBG] Start key discovery request
2018-08-28 12:05:37.530 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:05:37.532 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:05:37.533 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:05:37.535 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:05:37.536 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:05:37.536 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:05:37.537 -03:00 [DBG] Start discovery request
2018-08-28 12:05:37.542 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:05:37.560 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:05:37.563 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:05:37.563 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:05:37.564 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:05:37.564 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:05:37.565 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:05:37.566 -03:00 [DBG] Start key discovery request
2018-08-28 12:09:21.082 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 12:09:21.087 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 12:09:21.088 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 12:09:21.089 -03:00 [DBG] Start authorize request
2018-08-28 12:09:21.090 -03:00 [DBG] User in authorize request: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 12:09:21.091 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 12:09:21.101 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:09:21.104 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:09:21.109 -03:00 [DBG] Found [] API scopes in database
2018-08-28 12:09:21.112 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:09:21.114 -03:00 [DBG] Found [] API scopes in database
2018-08-28 12:09:21.114 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 12:09:21.115 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "QKmxreVigW8bh6e1gjBkTou8RjgBpTPUQiUAha5B",
  "Nonce": "QKmxreVigW8bh6e1gjBkTou8RjgBpTPUQiUAha5B",
  "SessionId": "9b33451916578b9ba73f8dcb4bb0031b",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "QKmxreVigW8bh6e1gjBkTou8RjgBpTPUQiUAha5B",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "QKmxreVigW8bh6e1gjBkTou8RjgBpTPUQiUAha5B"
  }
}
2018-08-28 12:09:21.121 -03:00 [DBG] QYjmOIUlO1JMQyooCx/iUDvC+TjVxZorU2p8hBc4yho= found in database: true
2018-08-28 12:09:21.124 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-28 12:09:21.125 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 12:09:21.125 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 12:09:21.126 -03:00 [DBG] Getting claims for access token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 12:09:21.140 -03:00 [DBG] yT8dJX9qWyg1qGFX46Rl1UpPQt+SEj8adME6HofBeKE= not found in database
2018-08-28 12:09:21.147 -03:00 [DBG] Getting claims for identity token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548 and client: UserManagementUI
2018-08-28 12:09:21.148 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 12:09:21.153 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****O4Jg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****02c2"
    }
  ],
  "ActivityId": "0HLGCTPHEAHIG:00000001",
  "TimeStamp": "2018-08-28T15:09:21Z",
  "ProcessId": 7424,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 12:09:21.155 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "QKmxreVigW8bh6e1gjBkTou8RjgBpTPUQiUAha5B",
  "Scope": "openid profile email picture"
}
2018-08-28 12:09:21.156 -03:00 [DBG] Augmenting SignInContext
2018-08-28 12:09:21.156 -03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-28 12:09:22.558 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:09:22.560 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:09:22.560 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:09:22.561 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:09:22.561 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:09:22.562 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:09:22.562 -03:00 [DBG] Start discovery request
2018-08-28 12:09:22.569 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:09:22.581 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:09:22.583 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:09:22.584 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:09:22.585 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:09:22.586 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:09:22.588 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:09:22.589 -03:00 [DBG] Start discovery request
2018-08-28 12:09:22.593 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:09:22.597 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:09:22.641 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:09:22.642 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:09:22.643 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:09:22.644 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:09:22.645 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:09:22.646 -03:00 [DBG] Start key discovery request
2018-08-28 12:09:22.675 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:09:22.677 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:09:22.679 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:09:22.680 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:09:22.680 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:09:22.681 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:09:22.682 -03:00 [DBG] Start key discovery request
2018-08-28 12:09:23.959 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:09:23.962 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:09:23.962 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:09:24.119 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:09:24.122 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:09:24.122 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:09:24.124 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:09:24.125 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:09:24.125 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:09:24.126 -03:00 [DBG] Start userinfo request
2018-08-28 12:09:24.127 -03:00 [DBG] Bearer token found in header
2018-08-28 12:09:24.131 -03:00 [DBG] yT8dJX9qWyg1qGFX46Rl1UpPQt+SEj8adME6HofBeKE= found in database: true
2018-08-28 12:09:24.147 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:09:24.158 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:09:24.165 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:09:24.166 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "c5be86946eeccb4f15d58990d7a9ade3a7782cef509fc1be259a8ca0b93c02c2",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535468961,
    "exp": 1535472561,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:09:24.169 -03:00 [DBG] Creating userinfo response
2018-08-28 12:09:24.169 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:09:24.170 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:09:24.174 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:09:24.175 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:09:24.176 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:09:24.178 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:09:24.182 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:09:24.183 -03:00 [DBG] End userinfo request
2018-08-28 12:09:40.853 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:09:40.857 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:09:40.858 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:09:40.859 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:09:40.859 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:09:40.860 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:09:40.861 -03:00 [DBG] Start discovery request
2018-08-28 12:09:40.868 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:09:40.886 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:09:40.889 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:09:40.889 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:09:40.890 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:09:40.891 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:09:40.892 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:09:40.893 -03:00 [DBG] Start key discovery request
2018-08-28 12:09:41.174 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:09:41.176 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:09:41.178 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:09:41.280 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:09:41.282 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:09:41.283 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:09:41.283 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:09:41.284 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:09:41.285 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:09:41.286 -03:00 [DBG] Start discovery request
2018-08-28 12:09:41.294 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:09:41.323 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:09:41.325 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:09:41.326 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:09:41.327 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:09:41.328 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:09:41.329 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:09:41.329 -03:00 [DBG] Start key discovery request
2018-08-28 12:09:41.402 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:09:41.404 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:09:41.405 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:09:41.406 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:09:41.406 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:09:41.407 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:09:41.407 -03:00 [DBG] Start userinfo request
2018-08-28 12:09:41.408 -03:00 [DBG] Bearer token found in header
2018-08-28 12:09:41.410 -03:00 [DBG] yT8dJX9qWyg1qGFX46Rl1UpPQt+SEj8adME6HofBeKE= found in database: true
2018-08-28 12:09:41.430 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:09:41.439 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:09:41.444 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:09:41.444 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "c5be86946eeccb4f15d58990d7a9ade3a7782cef509fc1be259a8ca0b93c02c2",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535468961,
    "exp": 1535472561,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:09:41.446 -03:00 [DBG] Creating userinfo response
2018-08-28 12:09:41.447 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:09:41.449 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:09:41.453 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:09:41.454 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:09:41.455 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:09:41.460 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:09:41.465 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:09:41.466 -03:00 [DBG] End userinfo request
2018-08-28 12:10:08.473 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:10:08.476 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:10:08.477 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:10:08.478 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:10:08.479 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:10:08.480 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:10:08.482 -03:00 [DBG] Start discovery request
2018-08-28 12:10:08.488 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:10:08.516 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:10:08.519 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:10:08.521 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:10:08.522 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:10:08.523 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:10:08.524 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:10:08.525 -03:00 [DBG] Start key discovery request
2018-08-28 12:10:08.599 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:10:08.601 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:10:08.602 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:10:08.603 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:10:08.604 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:10:08.606 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:10:08.607 -03:00 [DBG] Start discovery request
2018-08-28 12:10:08.617 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:10:08.627 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:10:08.640 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:10:08.643 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:10:08.645 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:10:08.648 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:10:08.650 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:10:08.652 -03:00 [DBG] Start key discovery request
2018-08-28 12:10:09.076 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:10:09.078 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:10:09.079 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:10:09.291 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:10:09.293 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:10:09.294 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:10:09.295 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:10:09.295 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:10:09.296 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:10:09.297 -03:00 [DBG] Start userinfo request
2018-08-28 12:10:09.297 -03:00 [DBG] Bearer token found in header
2018-08-28 12:10:09.299 -03:00 [DBG] yT8dJX9qWyg1qGFX46Rl1UpPQt+SEj8adME6HofBeKE= found in database: true
2018-08-28 12:10:09.319 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:10:09.327 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:10:09.331 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:10:09.331 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "c5be86946eeccb4f15d58990d7a9ade3a7782cef509fc1be259a8ca0b93c02c2",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535468961,
    "exp": 1535472561,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:10:09.333 -03:00 [DBG] Creating userinfo response
2018-08-28 12:10:09.333 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:10:09.334 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:10:09.338 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:10:09.339 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:10:09.340 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:10:09.343 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:10:09.348 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:10:09.350 -03:00 [DBG] End userinfo request
2018-08-28 12:10:57.118 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:10:57.121 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:10:57.121 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:10:57.122 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:10:57.123 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:10:57.124 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:10:57.124 -03:00 [DBG] Start discovery request
2018-08-28 12:10:57.133 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:10:57.169 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:10:57.172 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:10:57.173 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:10:57.174 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:10:57.174 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:10:57.175 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:10:57.176 -03:00 [DBG] Start key discovery request
2018-08-28 12:10:57.501 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:10:57.505 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:10:57.505 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:10:57.561 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:10:57.563 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:10:57.564 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:10:57.564 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:10:57.565 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:10:57.566 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:10:57.567 -03:00 [DBG] Start discovery request
2018-08-28 12:10:57.574 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:10:57.606 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:10:57.609 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:10:57.609 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:10:57.610 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:10:57.610 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:10:57.611 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:10:57.612 -03:00 [DBG] Start key discovery request
2018-08-28 12:10:57.735 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:10:57.738 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:10:57.738 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:10:57.739 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:10:57.740 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:10:57.740 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:10:57.741 -03:00 [DBG] Start userinfo request
2018-08-28 12:10:57.742 -03:00 [DBG] Bearer token found in header
2018-08-28 12:10:57.744 -03:00 [DBG] yT8dJX9qWyg1qGFX46Rl1UpPQt+SEj8adME6HofBeKE= found in database: true
2018-08-28 12:10:57.762 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:10:57.772 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:10:57.777 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:10:57.778 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "c5be86946eeccb4f15d58990d7a9ade3a7782cef509fc1be259a8ca0b93c02c2",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535468961,
    "exp": 1535472561,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:10:57.780 -03:00 [DBG] Creating userinfo response
2018-08-28 12:10:57.781 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:10:57.782 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:10:57.788 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:10:57.789 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:10:57.789 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:10:57.793 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:10:57.798 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:10:57.798 -03:00 [DBG] End userinfo request
2018-08-28 12:11:19.391 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:11:19.393 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:11:19.394 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:11:19.394 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:11:19.395 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:11:19.395 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:11:19.396 -03:00 [DBG] Start discovery request
2018-08-28 12:11:19.403 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:11:19.419 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:11:19.419 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:11:19.421 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:11:19.422 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:11:19.422 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:11:19.423 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:11:19.424 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:11:19.424 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:11:19.424 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:11:19.425 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:11:19.426 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:11:19.427 -03:00 [DBG] Start key discovery request
2018-08-28 12:11:19.428 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:11:19.429 -03:00 [DBG] Start discovery request
2018-08-28 12:11:19.443 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:11:19.465 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:11:19.468 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:11:19.468 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:11:19.469 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:11:19.470 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:11:19.471 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:11:19.472 -03:00 [DBG] Start key discovery request
2018-08-28 12:11:19.681 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:11:19.684 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:11:19.686 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:11:19.896 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:11:19.899 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:11:19.900 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:11:19.901 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:11:19.902 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:11:19.903 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:11:19.904 -03:00 [DBG] Start userinfo request
2018-08-28 12:11:19.904 -03:00 [DBG] Bearer token found in header
2018-08-28 12:11:19.906 -03:00 [DBG] yT8dJX9qWyg1qGFX46Rl1UpPQt+SEj8adME6HofBeKE= found in database: true
2018-08-28 12:11:19.925 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:11:19.935 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:11:19.940 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:11:19.941 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "c5be86946eeccb4f15d58990d7a9ade3a7782cef509fc1be259a8ca0b93c02c2",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535468961,
    "exp": 1535472561,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:11:19.946 -03:00 [DBG] Creating userinfo response
2018-08-28 12:11:19.947 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:11:19.948 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:11:19.956 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:11:19.957 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:11:19.957 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:11:19.960 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:11:19.964 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:11:19.964 -03:00 [DBG] End userinfo request
2018-08-28 12:11:26.284 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:11:26.285 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:11:26.286 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:11:26.286 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:11:26.289 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:11:26.290 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:11:26.290 -03:00 [DBG] Start discovery request
2018-08-28 12:11:26.297 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:11:26.309 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:11:26.312 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:11:26.312 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:11:26.313 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:11:26.314 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:11:26.315 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:11:26.318 -03:00 [DBG] Start key discovery request
2018-08-28 12:11:26.554 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:11:26.558 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:11:26.559 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:11:26.766 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:11:26.769 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:11:26.770 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:11:26.771 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:11:26.772 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:11:26.772 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:11:26.773 -03:00 [DBG] Start userinfo request
2018-08-28 12:11:26.774 -03:00 [DBG] Bearer token found in header
2018-08-28 12:11:26.777 -03:00 [DBG] yT8dJX9qWyg1qGFX46Rl1UpPQt+SEj8adME6HofBeKE= found in database: true
2018-08-28 12:11:26.795 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:11:26.807 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:11:26.812 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:11:26.812 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "c5be86946eeccb4f15d58990d7a9ade3a7782cef509fc1be259a8ca0b93c02c2",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535468961,
    "exp": 1535472561,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:11:26.815 -03:00 [DBG] Creating userinfo response
2018-08-28 12:11:26.815 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:11:26.816 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:11:26.820 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:11:26.821 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:11:26.822 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:11:26.825 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:11:26.830 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:11:26.831 -03:00 [DBG] End userinfo request
2018-08-28 12:12:01.845 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:12:01.847 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:12:01.848 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:12:01.940 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:12:01.943 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:12:01.946 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:12:01.948 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:12:01.949 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:12:01.949 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:12:01.950 -03:00 [DBG] Start userinfo request
2018-08-28 12:12:01.950 -03:00 [DBG] Bearer token found in header
2018-08-28 12:12:01.952 -03:00 [DBG] yT8dJX9qWyg1qGFX46Rl1UpPQt+SEj8adME6HofBeKE= found in database: true
2018-08-28 12:12:01.967 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:12:01.978 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:12:01.982 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:12:01.982 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "c5be86946eeccb4f15d58990d7a9ade3a7782cef509fc1be259a8ca0b93c02c2",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535468961,
    "exp": 1535472561,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:12:01.985 -03:00 [DBG] Creating userinfo response
2018-08-28 12:12:01.985 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:12:01.986 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:12:01.991 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:12:01.992 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:12:01.993 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:12:01.996 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:12:01.999 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:12:02.000 -03:00 [DBG] End userinfo request
2018-08-28 12:16:17.592 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:16:17.594 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:16:17.595 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:16:17.596 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:16:17.597 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:16:17.598 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:16:17.598 -03:00 [DBG] Start discovery request
2018-08-28 12:16:17.603 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:16:17.631 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:16:17.633 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:16:17.633 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:16:17.634 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:16:17.635 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:16:17.636 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:16:17.636 -03:00 [DBG] Start key discovery request
2018-08-28 12:16:17.954 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:16:17.957 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:16:17.958 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:16:17.958 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:16:17.959 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:16:17.961 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:16:17.962 -03:00 [DBG] Start discovery request
2018-08-28 12:16:17.970 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:16:18.005 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:16:18.008 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:16:18.009 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:16:18.010 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:16:18.013 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:16:18.014 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:16:18.015 -03:00 [DBG] Start key discovery request
2018-08-28 12:16:20.186 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:16:20.191 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:16:20.192 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:16:20.193 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:16:20.212 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:16:20.213 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:16:20.214 -03:00 [DBG] Start discovery request
2018-08-28 12:16:20.223 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:16:20.248 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:16:20.250 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:16:20.251 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:16:20.252 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:16:20.253 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:16:20.254 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:16:20.255 -03:00 [DBG] Start key discovery request
2018-08-28 12:16:24.105 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:16:24.110 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:16:24.110 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:16:24.111 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:16:24.113 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:16:24.114 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:16:24.116 -03:00 [DBG] Start discovery request
2018-08-28 12:16:24.123 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:16:24.136 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:16:24.139 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:16:24.139 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:16:24.140 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:16:24.141 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:16:24.142 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:16:24.143 -03:00 [DBG] Start key discovery request
2018-08-28 12:16:24.950 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 12:16:24.952 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 12:16:24.953 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 12:16:24.953 -03:00 [DBG] Start authorize request
2018-08-28 12:16:24.953 -03:00 [DBG] User in authorize request: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 12:16:24.954 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 12:16:24.962 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:16:24.965 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:16:24.966 -03:00 [DBG] Found [] API scopes in database
2018-08-28 12:16:24.968 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:16:24.969 -03:00 [DBG] Found [] API scopes in database
2018-08-28 12:16:24.970 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 12:16:24.971 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "QPv4mYneQJFjsgUK9mfkpx3BND4ZMhdnO3QlDU7o",
  "Nonce": "QPv4mYneQJFjsgUK9mfkpx3BND4ZMhdnO3QlDU7o",
  "SessionId": "9b33451916578b9ba73f8dcb4bb0031b",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "QPv4mYneQJFjsgUK9mfkpx3BND4ZMhdnO3QlDU7o",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "QPv4mYneQJFjsgUK9mfkpx3BND4ZMhdnO3QlDU7o"
  }
}
2018-08-28 12:16:24.980 -03:00 [DBG] QYjmOIUlO1JMQyooCx/iUDvC+TjVxZorU2p8hBc4yho= found in database: true
2018-08-28 12:16:24.983 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-28 12:16:24.984 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 12:16:24.984 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 12:16:24.984 -03:00 [DBG] Getting claims for access token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 12:16:24.992 -03:00 [DBG] X+n7yHWk6d5yoiiKDlkil2zkdFPi08lVeTHqP8YtCwk= not found in database
2018-08-28 12:16:25.000 -03:00 [DBG] Getting claims for identity token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548 and client: UserManagementUI
2018-08-28 12:16:25.001 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 12:16:25.004 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****zfsA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****89b2"
    }
  ],
  "ActivityId": "0HLGCTPHEAHIJ:00000001",
  "TimeStamp": "2018-08-28T15:16:25Z",
  "ProcessId": 7424,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 12:16:25.005 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "QPv4mYneQJFjsgUK9mfkpx3BND4ZMhdnO3QlDU7o",
  "Scope": "openid profile email picture"
}
2018-08-28 12:16:25.940 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:16:25.942 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:16:25.943 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:16:25.943 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:16:25.944 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:16:25.944 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:16:25.945 -03:00 [DBG] Start discovery request
2018-08-28 12:16:25.951 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:16:25.963 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:16:25.965 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:16:25.966 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:16:25.966 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:16:25.967 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:16:25.968 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:16:25.969 -03:00 [DBG] Start discovery request
2018-08-28 12:16:25.975 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:16:26.103 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:16:26.105 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:16:26.106 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:16:26.109 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:16:26.110 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:16:26.110 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:16:26.111 -03:00 [DBG] Start key discovery request
2018-08-28 12:16:26.114 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:16:26.116 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:16:26.116 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:16:26.117 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:16:26.118 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:16:26.119 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:16:26.120 -03:00 [DBG] Start key discovery request
2018-08-28 12:16:27.393 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:16:27.395 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:16:27.396 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:16:27.553 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:16:27.556 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:16:27.559 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:16:27.559 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:16:27.561 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:16:27.562 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:16:27.562 -03:00 [DBG] Start userinfo request
2018-08-28 12:16:27.562 -03:00 [DBG] Bearer token found in header
2018-08-28 12:16:27.564 -03:00 [DBG] X+n7yHWk6d5yoiiKDlkil2zkdFPi08lVeTHqP8YtCwk= found in database: true
2018-08-28 12:16:27.581 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:16:27.592 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:16:27.598 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:16:27.599 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "02ec4a3e47384ddbb55a7507bc237395b9192ab163b730d028e868ca963789b2",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535469384,
    "exp": 1535472984,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:16:27.602 -03:00 [DBG] Creating userinfo response
2018-08-28 12:16:27.603 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:16:27.604 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:16:27.608 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:16:27.610 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:16:27.611 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:16:27.614 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:16:27.618 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:16:27.618 -03:00 [DBG] End userinfo request
2018-08-28 12:18:31.690 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:18:31.692 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:18:31.693 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:18:31.693 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:18:31.694 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:18:31.695 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:18:31.696 -03:00 [DBG] Start discovery request
2018-08-28 12:18:31.700 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:18:31.717 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:18:31.719 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:18:31.719 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:18:31.720 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:18:31.721 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:18:31.721 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:18:31.722 -03:00 [DBG] Start key discovery request
2018-08-28 12:18:31.833 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:18:31.835 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:18:31.836 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:18:31.836 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:18:31.837 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:18:31.838 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:18:31.838 -03:00 [DBG] Start discovery request
2018-08-28 12:18:31.849 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:18:31.973 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:18:31.975 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:18:31.975 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:18:31.976 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:18:31.977 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:18:31.978 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:18:31.979 -03:00 [DBG] Start key discovery request
2018-08-28 12:18:56.289 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:18:56.291 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:18:56.292 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:18:56.292 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:18:56.293 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:18:56.294 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:18:56.295 -03:00 [DBG] Start discovery request
2018-08-28 12:18:56.302 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:18:56.321 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:18:56.324 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:18:56.325 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:18:56.326 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:18:56.327 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:18:56.328 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:18:56.329 -03:00 [DBG] Start key discovery request
2018-08-28 12:18:56.364 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:18:56.367 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:18:56.367 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:18:56.368 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:18:56.369 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:18:56.370 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:18:56.372 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:18:56.372 -03:00 [DBG] Start discovery request
2018-08-28 12:18:56.405 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:18:56.421 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:18:56.423 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:18:56.424 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:18:56.425 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:18:56.425 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:18:56.426 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:18:56.427 -03:00 [DBG] Start key discovery request
2018-08-28 12:18:56.435 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:18:56.436 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:18:56.505 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:18:56.508 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:18:56.508 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:18:56.509 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:18:56.510 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:18:56.511 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:18:56.512 -03:00 [DBG] Start userinfo request
2018-08-28 12:18:56.512 -03:00 [DBG] Bearer token found in header
2018-08-28 12:18:56.514 -03:00 [DBG] X+n7yHWk6d5yoiiKDlkil2zkdFPi08lVeTHqP8YtCwk= found in database: true
2018-08-28 12:18:56.535 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:18:56.541 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:18:56.546 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:18:56.546 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "02ec4a3e47384ddbb55a7507bc237395b9192ab163b730d028e868ca963789b2",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535469384,
    "exp": 1535472984,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:18:56.548 -03:00 [DBG] Creating userinfo response
2018-08-28 12:18:56.548 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:18:56.549 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:18:56.552 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:18:56.553 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:18:56.553 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:18:56.555 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:18:56.560 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:18:56.561 -03:00 [DBG] End userinfo request
2018-08-28 12:20:21.603 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:20:21.606 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:20:21.607 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:20:21.608 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:20:21.609 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:20:21.610 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:20:21.611 -03:00 [DBG] Start discovery request
2018-08-28 12:20:21.616 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:20:21.640 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:20:21.643 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:20:21.643 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:20:21.644 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:20:21.646 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:20:21.646 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:20:21.647 -03:00 [DBG] Start key discovery request
2018-08-28 12:20:21.704 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:20:21.707 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:20:21.707 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:20:21.707 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:20:21.708 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:20:21.709 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:20:21.709 -03:00 [DBG] Start discovery request
2018-08-28 12:20:21.715 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:20:21.728 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:20:21.730 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:20:21.731 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:20:21.731 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:20:21.733 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:20:21.734 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:20:21.734 -03:00 [DBG] Start key discovery request
2018-08-28 12:20:21.782 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:20:21.785 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:20:21.786 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:20:21.895 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:20:21.897 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:20:21.898 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:20:21.899 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:20:21.900 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:20:21.900 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:20:21.901 -03:00 [DBG] Start userinfo request
2018-08-28 12:20:21.901 -03:00 [DBG] Bearer token found in header
2018-08-28 12:20:21.903 -03:00 [DBG] X+n7yHWk6d5yoiiKDlkil2zkdFPi08lVeTHqP8YtCwk= found in database: true
2018-08-28 12:20:21.941 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:20:21.951 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:20:21.956 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:20:21.957 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "02ec4a3e47384ddbb55a7507bc237395b9192ab163b730d028e868ca963789b2",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535469384,
    "exp": 1535472984,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:20:21.958 -03:00 [DBG] Creating userinfo response
2018-08-28 12:20:21.959 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:20:21.961 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:20:21.967 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:20:21.968 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:20:21.969 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:20:21.973 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:20:21.979 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:20:21.980 -03:00 [DBG] End userinfo request
2018-08-28 12:20:35.399 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:20:35.405 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:20:35.406 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:20:35.406 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:20:35.407 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:20:35.408 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:20:35.409 -03:00 [DBG] Start discovery request
2018-08-28 12:20:35.414 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:20:35.426 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:20:35.428 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:20:35.428 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:20:35.429 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:20:35.430 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:20:35.430 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:20:35.431 -03:00 [DBG] Start key discovery request
2018-08-28 12:20:35.515 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:20:35.519 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:20:35.520 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:20:35.521 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:20:35.522 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:20:35.523 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:20:35.524 -03:00 [DBG] Start discovery request
2018-08-28 12:20:35.533 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:20:35.544 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:20:35.547 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:20:35.549 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:20:35.549 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:20:35.551 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:20:35.552 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:20:35.553 -03:00 [DBG] Start key discovery request
2018-08-28 12:20:35.587 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:20:35.590 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:20:35.591 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:20:35.712 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:20:35.716 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:20:35.716 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:20:35.718 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:20:35.719 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:20:35.720 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:20:35.720 -03:00 [DBG] Start userinfo request
2018-08-28 12:20:35.720 -03:00 [DBG] Bearer token found in header
2018-08-28 12:20:35.723 -03:00 [DBG] X+n7yHWk6d5yoiiKDlkil2zkdFPi08lVeTHqP8YtCwk= found in database: true
2018-08-28 12:20:35.745 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:20:35.753 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:20:35.757 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:20:35.758 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "02ec4a3e47384ddbb55a7507bc237395b9192ab163b730d028e868ca963789b2",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535469384,
    "exp": 1535472984,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:20:35.761 -03:00 [DBG] Creating userinfo response
2018-08-28 12:20:35.762 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:20:35.763 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:20:35.766 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:20:35.767 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:20:35.767 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:20:35.770 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:20:35.773 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:20:35.774 -03:00 [DBG] End userinfo request
2018-08-28 12:21:56.708 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:21:56.714 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:21:56.714 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:21:56.714 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:21:56.715 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:21:56.716 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:21:56.716 -03:00 [DBG] Start discovery request
2018-08-28 12:21:56.722 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:21:56.736 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:21:56.739 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:21:56.740 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:21:56.741 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:21:56.741 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:21:56.743 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:21:56.744 -03:00 [DBG] Start key discovery request
2018-08-28 12:21:56.843 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:21:56.844 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:21:56.845 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:21:56.845 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:21:56.846 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:21:56.847 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:21:56.848 -03:00 [DBG] Start discovery request
2018-08-28 12:21:56.854 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:21:56.867 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:21:56.869 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:21:56.870 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:21:56.870 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:21:56.871 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:21:56.873 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:21:56.874 -03:00 [DBG] Start key discovery request
2018-08-28 12:21:58.269 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 12:21:58.270 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 12:21:58.270 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 12:21:58.271 -03:00 [DBG] Start authorize request
2018-08-28 12:21:58.271 -03:00 [DBG] User in authorize request: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 12:21:58.271 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 12:21:58.278 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:21:58.280 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:21:58.281 -03:00 [DBG] Found [] API scopes in database
2018-08-28 12:21:58.283 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:21:58.284 -03:00 [DBG] Found [] API scopes in database
2018-08-28 12:21:58.285 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 12:21:58.286 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "yEcAzCBrKmiItrBEUHm74iaWpMf3fxVg8zr6Mm0P",
  "Nonce": "yEcAzCBrKmiItrBEUHm74iaWpMf3fxVg8zr6Mm0P",
  "SessionId": "9b33451916578b9ba73f8dcb4bb0031b",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "yEcAzCBrKmiItrBEUHm74iaWpMf3fxVg8zr6Mm0P",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "yEcAzCBrKmiItrBEUHm74iaWpMf3fxVg8zr6Mm0P"
  }
}
2018-08-28 12:21:58.292 -03:00 [DBG] QYjmOIUlO1JMQyooCx/iUDvC+TjVxZorU2p8hBc4yho= found in database: true
2018-08-28 12:21:58.295 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-28 12:21:58.296 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 12:21:58.296 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 12:21:58.297 -03:00 [DBG] Getting claims for access token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 12:21:58.305 -03:00 [DBG] CVG9+L8kr9+gmXW4wP5NcdOeqgmVzioo2lYlWaJSCLE= not found in database
2018-08-28 12:21:58.311 -03:00 [DBG] Getting claims for identity token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548 and client: UserManagementUI
2018-08-28 12:21:58.311 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 12:21:58.314 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****onhQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****f233"
    }
  ],
  "ActivityId": "0HLGCTPHEAHIM:00000001",
  "TimeStamp": "2018-08-28T15:21:58Z",
  "ProcessId": 7424,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 12:21:58.315 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "yEcAzCBrKmiItrBEUHm74iaWpMf3fxVg8zr6Mm0P",
  "Scope": "openid profile email picture"
}
2018-08-28 12:21:59.442 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:21:59.444 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:21:59.445 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:21:59.445 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:21:59.446 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:21:59.447 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:21:59.447 -03:00 [DBG] Start discovery request
2018-08-28 12:21:59.456 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:21:59.470 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:21:59.473 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:21:59.474 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:21:59.474 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:21:59.475 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:21:59.477 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:21:59.477 -03:00 [DBG] Start discovery request
2018-08-28 12:21:59.480 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:21:59.483 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:21:59.484 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:21:59.484 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:21:59.485 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:21:59.485 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:21:59.488 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:21:59.489 -03:00 [DBG] Start key discovery request
2018-08-28 12:21:59.521 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:21:59.524 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:21:59.525 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:21:59.525 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:21:59.526 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:21:59.527 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:21:59.528 -03:00 [DBG] Start key discovery request
2018-08-28 12:22:00.777 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:22:00.779 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:22:00.779 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:22:00.931 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:22:00.934 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:22:00.934 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:22:00.935 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:22:00.936 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:22:00.939 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:22:00.941 -03:00 [DBG] Start userinfo request
2018-08-28 12:22:00.941 -03:00 [DBG] Bearer token found in header
2018-08-28 12:22:00.944 -03:00 [DBG] CVG9+L8kr9+gmXW4wP5NcdOeqgmVzioo2lYlWaJSCLE= found in database: true
2018-08-28 12:22:00.958 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:22:00.967 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:22:00.972 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:22:00.973 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "b37e968cadf54e82897d1f63aaa0a4b59d06be90f68600c352bbf9d22506f233",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535469718,
    "exp": 1535473318,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:22:00.975 -03:00 [DBG] Creating userinfo response
2018-08-28 12:22:00.975 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:22:00.976 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:22:00.980 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:22:00.981 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:22:00.981 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:22:00.984 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:22:00.988 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:22:00.988 -03:00 [DBG] End userinfo request
2018-08-28 12:23:33.519 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:23:33.524 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:23:33.525 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:23:33.525 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:23:33.526 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:23:33.526 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:23:33.527 -03:00 [DBG] Start discovery request
2018-08-28 12:23:33.536 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:23:33.546 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:23:33.548 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:23:33.549 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:23:33.551 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:23:33.551 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:23:33.552 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:23:33.552 -03:00 [DBG] Start key discovery request
2018-08-28 12:23:33.579 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:23:33.581 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:23:33.581 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:23:33.669 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:23:33.672 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:23:33.673 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:23:33.673 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:23:33.675 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:23:33.675 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:23:33.678 -03:00 [DBG] Start userinfo request
2018-08-28 12:23:33.678 -03:00 [DBG] Bearer token found in header
2018-08-28 12:23:33.680 -03:00 [DBG] CVG9+L8kr9+gmXW4wP5NcdOeqgmVzioo2lYlWaJSCLE= found in database: true
2018-08-28 12:23:33.700 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:23:33.710 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:23:33.721 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:23:33.725 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "b37e968cadf54e82897d1f63aaa0a4b59d06be90f68600c352bbf9d22506f233",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535469718,
    "exp": 1535473318,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:23:33.729 -03:00 [DBG] Creating userinfo response
2018-08-28 12:23:33.729 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:23:33.730 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:23:33.735 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:23:33.736 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:23:33.737 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:23:33.742 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:23:33.751 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:23:33.752 -03:00 [DBG] End userinfo request
2018-08-28 12:23:34.288 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:23:34.290 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:23:34.291 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:23:34.291 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:23:34.292 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:23:34.293 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:23:34.293 -03:00 [DBG] Start discovery request
2018-08-28 12:23:34.298 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:23:34.315 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:23:34.317 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:23:34.318 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:23:34.318 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:23:34.319 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:23:34.320 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:23:34.320 -03:00 [DBG] Start key discovery request
2018-08-28 12:23:39.417 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:23:39.420 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:23:39.421 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:23:39.421 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:23:39.422 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:23:39.423 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:23:39.424 -03:00 [DBG] Start discovery request
2018-08-28 12:23:39.433 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:23:39.453 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:23:39.457 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:23:39.458 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:23:39.458 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:23:39.462 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:23:39.463 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:23:39.464 -03:00 [DBG] Start key discovery request
2018-08-28 12:23:40.576 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:23:40.582 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:23:40.582 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:23:40.648 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:23:40.651 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:23:40.651 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:23:40.652 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:23:40.654 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:23:40.654 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:23:40.656 -03:00 [DBG] Start userinfo request
2018-08-28 12:23:40.656 -03:00 [DBG] Bearer token found in header
2018-08-28 12:23:40.658 -03:00 [DBG] CVG9+L8kr9+gmXW4wP5NcdOeqgmVzioo2lYlWaJSCLE= found in database: true
2018-08-28 12:23:40.670 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:23:40.675 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:23:40.679 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:23:40.679 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "b37e968cadf54e82897d1f63aaa0a4b59d06be90f68600c352bbf9d22506f233",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535469718,
    "exp": 1535473318,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:23:40.680 -03:00 [DBG] Creating userinfo response
2018-08-28 12:23:40.681 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:23:40.682 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:23:40.684 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:23:40.684 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:23:40.685 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:23:40.686 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:23:40.692 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:23:40.692 -03:00 [DBG] End userinfo request
2018-08-28 12:23:51.124 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:23:51.126 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:23:51.129 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:23:51.131 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:23:51.134 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:23:51.138 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:23:51.139 -03:00 [DBG] Start discovery request
2018-08-28 12:23:51.151 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:23:51.565 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:23:51.568 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:23:51.569 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:23:51.570 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:23:51.571 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:23:51.572 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:23:51.573 -03:00 [DBG] Start key discovery request
2018-08-28 12:23:52.363 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:23:52.364 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:23:52.365 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:23:52.365 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:23:52.366 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:23:52.367 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:23:52.367 -03:00 [DBG] Start discovery request
2018-08-28 12:23:52.372 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:23:52.392 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:23:52.396 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:23:52.397 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:23:52.397 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:23:52.398 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:23:52.399 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:23:52.400 -03:00 [DBG] Start key discovery request
2018-08-28 12:24:05.299 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:24:05.301 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:05.302 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:05.302 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:24:05.303 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:24:05.304 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:24:05.304 -03:00 [DBG] Start discovery request
2018-08-28 12:24:05.308 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:24:05.323 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:24:05.325 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:05.325 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:05.327 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:24:05.330 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:24:05.331 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:24:05.332 -03:00 [DBG] Start key discovery request
2018-08-28 12:24:05.785 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:24:05.787 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:05.788 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:05.944 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:24:05.947 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:05.947 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:05.948 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:24:05.949 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:24:05.950 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:24:05.951 -03:00 [DBG] Start userinfo request
2018-08-28 12:24:05.951 -03:00 [DBG] Bearer token found in header
2018-08-28 12:24:05.953 -03:00 [DBG] CVG9+L8kr9+gmXW4wP5NcdOeqgmVzioo2lYlWaJSCLE= found in database: true
2018-08-28 12:24:05.969 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:24:05.979 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:24:05.984 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:24:05.985 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "b37e968cadf54e82897d1f63aaa0a4b59d06be90f68600c352bbf9d22506f233",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535469718,
    "exp": 1535473318,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:24:05.988 -03:00 [DBG] Creating userinfo response
2018-08-28 12:24:05.989 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:24:05.991 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:24:05.995 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:24:05.996 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:24:05.997 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:24:06.000 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:24:06.005 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:24:06.006 -03:00 [DBG] End userinfo request
2018-08-28 12:24:06.340 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:24:06.343 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:06.343 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:06.344 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:24:06.345 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:24:06.347 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:24:06.347 -03:00 [DBG] Start discovery request
2018-08-28 12:24:06.352 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:24:06.371 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:24:06.373 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:06.374 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:06.374 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:24:06.375 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:24:06.376 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:24:06.377 -03:00 [DBG] Start key discovery request
2018-08-28 12:24:16.797 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:24:16.800 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:16.801 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:16.802 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:24:16.804 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:24:16.805 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:24:16.807 -03:00 [DBG] Start discovery request
2018-08-28 12:24:16.818 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:24:17.445 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:24:17.447 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:17.447 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:17.447 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:24:17.448 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:24:17.449 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:24:17.449 -03:00 [DBG] Start discovery request
2018-08-28 12:24:17.454 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:24:17.473 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:24:17.475 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:17.476 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:17.476 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:24:17.477 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:24:17.478 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:24:17.480 -03:00 [DBG] Start key discovery request
2018-08-28 12:24:17.846 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:24:17.848 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:17.848 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:17.849 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:24:17.850 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:24:17.851 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:24:17.852 -03:00 [DBG] Start key discovery request
2018-08-28 12:24:28.047 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:24:28.049 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:28.050 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:28.050 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:24:28.052 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:24:28.053 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:24:28.054 -03:00 [DBG] Start discovery request
2018-08-28 12:24:28.060 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:24:28.147 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:24:28.149 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:28.149 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:28.150 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:24:28.151 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:24:28.152 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:24:28.153 -03:00 [DBG] Start key discovery request
2018-08-28 12:24:29.223 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:24:29.225 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:29.226 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:29.226 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:24:29.227 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:24:29.228 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:24:29.229 -03:00 [DBG] Start discovery request
2018-08-28 12:24:29.234 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:24:29.253 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:24:29.256 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:29.257 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:29.257 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:24:29.258 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:24:29.259 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:24:29.260 -03:00 [DBG] Start key discovery request
2018-08-28 12:24:31.537 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:24:31.540 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:31.540 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:31.540 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:24:31.541 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:24:31.542 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:24:31.542 -03:00 [DBG] Start discovery request
2018-08-28 12:24:31.550 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:24:31.568 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:24:31.573 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:31.574 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:31.574 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:24:31.576 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:24:31.576 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:24:31.579 -03:00 [DBG] Start key discovery request
2018-08-28 12:24:32.557 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:24:32.561 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:32.563 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:32.623 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:24:32.626 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:32.627 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:32.629 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:24:32.631 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:24:32.631 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:24:32.632 -03:00 [DBG] Start userinfo request
2018-08-28 12:24:32.633 -03:00 [DBG] Bearer token found in header
2018-08-28 12:24:32.634 -03:00 [DBG] CVG9+L8kr9+gmXW4wP5NcdOeqgmVzioo2lYlWaJSCLE= found in database: true
2018-08-28 12:24:32.647 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:24:32.652 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:24:32.655 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:24:32.657 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "b37e968cadf54e82897d1f63aaa0a4b59d06be90f68600c352bbf9d22506f233",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535469718,
    "exp": 1535473318,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:24:32.658 -03:00 [DBG] Creating userinfo response
2018-08-28 12:24:32.659 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:24:32.659 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:24:32.662 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:24:32.663 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:24:32.663 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:24:32.665 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:24:32.669 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:24:32.669 -03:00 [DBG] End userinfo request
2018-08-28 12:24:45.414 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:24:45.417 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:45.418 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:45.418 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:24:45.419 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:24:45.420 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:24:45.421 -03:00 [DBG] Start discovery request
2018-08-28 12:24:45.429 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:24:45.532 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:24:45.534 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:45.535 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:45.535 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:24:45.536 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:24:45.537 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:24:45.538 -03:00 [DBG] Start key discovery request
2018-08-28 12:24:46.243 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:24:46.246 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:46.247 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:46.247 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:24:46.248 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:24:46.249 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:24:46.249 -03:00 [DBG] Start discovery request
2018-08-28 12:24:46.253 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:24:46.273 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:24:46.275 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:24:46.276 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:24:46.276 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:24:46.277 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:24:46.278 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:24:46.279 -03:00 [DBG] Start key discovery request
2018-08-28 12:26:13.603 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:26:13.605 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:26:13.606 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:26:13.607 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:26:13.608 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:26:13.609 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:26:13.612 -03:00 [DBG] Start discovery request
2018-08-28 12:26:13.619 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:26:13.628 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:26:13.630 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:26:13.631 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:26:13.631 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:26:13.633 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:26:13.634 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:26:13.635 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:26:13.635 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:26:13.636 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:26:13.636 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:26:13.638 -03:00 [DBG] Start discovery request
2018-08-28 12:26:13.640 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:26:13.641 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:26:13.641 -03:00 [DBG] Start key discovery request
2018-08-28 12:26:13.649 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:26:13.656 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:26:13.658 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:26:13.659 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:26:13.659 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:26:13.660 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:26:13.661 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:26:13.663 -03:00 [DBG] Start key discovery request
2018-08-28 12:26:13.680 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:26:13.683 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:26:13.684 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:26:13.777 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:26:13.779 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:26:13.780 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:26:13.781 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:26:13.782 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:26:13.783 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:26:13.783 -03:00 [DBG] Start userinfo request
2018-08-28 12:26:13.784 -03:00 [DBG] Bearer token found in header
2018-08-28 12:26:13.787 -03:00 [DBG] CVG9+L8kr9+gmXW4wP5NcdOeqgmVzioo2lYlWaJSCLE= found in database: true
2018-08-28 12:26:13.803 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:26:13.808 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:26:13.812 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:26:13.813 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "b37e968cadf54e82897d1f63aaa0a4b59d06be90f68600c352bbf9d22506f233",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535469718,
    "exp": 1535473318,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:26:13.815 -03:00 [DBG] Creating userinfo response
2018-08-28 12:26:13.815 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:26:13.816 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:26:13.818 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:26:13.819 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:26:13.819 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:26:13.821 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:26:13.824 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:26:13.824 -03:00 [DBG] End userinfo request
2018-08-28 12:26:25.468 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:26:25.470 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:26:25.470 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:26:25.472 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:26:25.473 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:26:25.474 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:26:25.475 -03:00 [DBG] Start discovery request
2018-08-28 12:26:25.481 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:26:25.493 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:26:25.495 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:26:25.496 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:26:25.496 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:26:25.497 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:26:25.498 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:26:25.499 -03:00 [DBG] Start key discovery request
2018-08-28 12:26:25.554 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:26:25.556 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:26:25.557 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:26:25.589 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:26:25.591 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:26:25.591 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:26:25.592 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:26:25.593 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:26:25.594 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:26:25.596 -03:00 [DBG] Start discovery request
2018-08-28 12:26:25.604 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:26:25.621 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:26:25.624 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:26:25.624 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:26:25.626 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:26:25.627 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:26:25.630 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:26:25.630 -03:00 [DBG] Start key discovery request
2018-08-28 12:26:25.646 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:26:25.649 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:26:25.650 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:26:25.651 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:26:25.652 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:26:25.652 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:26:25.653 -03:00 [DBG] Start userinfo request
2018-08-28 12:26:25.653 -03:00 [DBG] Bearer token found in header
2018-08-28 12:26:25.655 -03:00 [DBG] CVG9+L8kr9+gmXW4wP5NcdOeqgmVzioo2lYlWaJSCLE= found in database: true
2018-08-28 12:26:25.668 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:26:25.674 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:26:25.678 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:26:25.679 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "b37e968cadf54e82897d1f63aaa0a4b59d06be90f68600c352bbf9d22506f233",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535469718,
    "exp": 1535473318,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:26:25.680 -03:00 [DBG] Creating userinfo response
2018-08-28 12:26:25.681 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:26:25.681 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:26:25.683 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:26:25.684 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:26:25.685 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:26:25.687 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:26:25.690 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:26:25.690 -03:00 [DBG] End userinfo request
2018-08-28 12:26:33.368 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:26:33.370 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:26:33.371 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:26:33.371 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:26:33.372 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:26:33.372 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:26:33.373 -03:00 [DBG] Start discovery request
2018-08-28 12:26:33.377 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:26:33.392 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:26:33.394 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:26:33.394 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:26:33.394 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:26:33.395 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:26:33.396 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:26:33.397 -03:00 [DBG] Start key discovery request
2018-08-28 12:26:33.416 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:26:33.418 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:26:33.418 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:26:33.493 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:26:33.495 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:26:33.496 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:26:33.497 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:26:33.497 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:26:33.498 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:26:33.499 -03:00 [DBG] Start userinfo request
2018-08-28 12:26:33.499 -03:00 [DBG] Bearer token found in header
2018-08-28 12:26:33.501 -03:00 [DBG] CVG9+L8kr9+gmXW4wP5NcdOeqgmVzioo2lYlWaJSCLE= found in database: true
2018-08-28 12:26:33.520 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:26:33.525 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:26:33.531 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:26:33.532 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "b37e968cadf54e82897d1f63aaa0a4b59d06be90f68600c352bbf9d22506f233",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535469718,
    "exp": 1535473318,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:26:33.536 -03:00 [DBG] Creating userinfo response
2018-08-28 12:26:33.536 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:26:33.536 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:26:33.539 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:26:33.540 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:26:33.541 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:26:33.544 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:26:33.550 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:26:33.551 -03:00 [DBG] End userinfo request
2018-08-28 12:40:11.486 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:40:11.523 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:40:11.524 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:40:11.525 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:40:11.526 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:40:11.526 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:40:11.527 -03:00 [DBG] Start discovery request
2018-08-28 12:40:11.533 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:40:11.553 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:40:11.560 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:40:11.560 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:40:11.561 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:40:11.562 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:40:11.563 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:40:11.563 -03:00 [DBG] Start key discovery request
2018-08-28 12:40:12.270 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:40:12.273 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:40:12.273 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:40:12.274 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:40:12.274 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:40:12.275 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:40:12.276 -03:00 [DBG] Start discovery request
2018-08-28 12:40:12.281 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:40:12.296 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:40:12.299 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:40:12.299 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:40:12.300 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:40:12.301 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:40:12.301 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:40:12.313 -03:00 [DBG] Start key discovery request
2018-08-28 12:40:15.554 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:40:15.556 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:40:15.556 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:40:15.557 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:40:15.558 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:40:15.558 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:40:15.559 -03:00 [DBG] Start discovery request
2018-08-28 12:40:15.569 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:40:15.594 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:40:15.597 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:40:15.598 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:40:15.599 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:40:15.601 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:40:15.602 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:40:15.604 -03:00 [DBG] Start key discovery request
2018-08-28 12:40:16.257 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:40:16.259 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:40:16.260 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:40:16.260 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:40:16.262 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:40:16.262 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:40:16.264 -03:00 [DBG] Start discovery request
2018-08-28 12:40:16.269 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:40:16.287 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:40:16.290 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:40:16.291 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:40:16.291 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:40:16.292 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:40:16.293 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:40:16.294 -03:00 [DBG] Start key discovery request
2018-08-28 12:40:16.486 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 12:40:16.487 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 12:40:16.488 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 12:40:16.489 -03:00 [DBG] Start authorize request
2018-08-28 12:40:16.489 -03:00 [DBG] User in authorize request: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 12:40:16.490 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 12:40:16.497 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:40:16.499 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:40:16.500 -03:00 [DBG] Found [] API scopes in database
2018-08-28 12:40:16.502 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:40:16.505 -03:00 [DBG] Found [] API scopes in database
2018-08-28 12:40:16.505 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 12:40:16.506 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "90jRXGx6TblQqaTKn0lHaSlN5luchoLwdXrUsA3d",
  "Nonce": "90jRXGx6TblQqaTKn0lHaSlN5luchoLwdXrUsA3d",
  "SessionId": "9b33451916578b9ba73f8dcb4bb0031b",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "90jRXGx6TblQqaTKn0lHaSlN5luchoLwdXrUsA3d",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "90jRXGx6TblQqaTKn0lHaSlN5luchoLwdXrUsA3d"
  }
}
2018-08-28 12:40:16.508 -03:00 [DBG] QYjmOIUlO1JMQyooCx/iUDvC+TjVxZorU2p8hBc4yho= found in database: true
2018-08-28 12:40:16.512 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-28 12:40:16.512 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 12:40:16.513 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 12:40:16.513 -03:00 [DBG] Getting claims for access token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 12:40:16.522 -03:00 [DBG] XLrcZkLu2H9DrGy/6eqxDfibC9OjbG4tTVH8kB6eO8k= not found in database
2018-08-28 12:40:16.539 -03:00 [DBG] Getting claims for identity token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548 and client: UserManagementUI
2018-08-28 12:40:16.540 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 12:40:16.542 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****WWuA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****284a"
    }
  ],
  "ActivityId": "0HLGCTPHEAHIP:00000001",
  "TimeStamp": "2018-08-28T15:40:16Z",
  "ProcessId": 7424,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 12:40:16.544 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "90jRXGx6TblQqaTKn0lHaSlN5luchoLwdXrUsA3d",
  "Scope": "openid profile email picture"
}
2018-08-28 12:40:17.016 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:40:17.018 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:40:17.019 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:40:17.020 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:40:17.021 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:40:17.022 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:40:17.022 -03:00 [DBG] Start discovery request
2018-08-28 12:40:17.031 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:40:17.033 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:40:17.036 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:40:17.037 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:40:17.037 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:40:17.038 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:40:17.039 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:40:17.039 -03:00 [DBG] Start discovery request
2018-08-28 12:40:17.044 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:40:17.053 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:40:17.057 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:40:17.059 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:40:17.059 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:40:17.060 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:40:17.062 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:40:17.063 -03:00 [DBG] Start key discovery request
2018-08-28 12:40:17.065 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:40:17.068 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:40:17.069 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:40:17.070 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:40:17.071 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:40:17.073 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:40:17.074 -03:00 [DBG] Start key discovery request
2018-08-28 12:40:18.113 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:40:18.115 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:40:18.116 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:40:18.187 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:40:18.190 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:40:18.191 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:40:18.191 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:40:18.192 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:40:18.192 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:40:18.193 -03:00 [DBG] Start userinfo request
2018-08-28 12:40:18.193 -03:00 [DBG] Bearer token found in header
2018-08-28 12:40:18.195 -03:00 [DBG] XLrcZkLu2H9DrGy/6eqxDfibC9OjbG4tTVH8kB6eO8k= found in database: true
2018-08-28 12:40:18.212 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:40:18.218 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:40:18.222 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:40:18.222 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "71c88cca0e900a396f27ef23cd650b9e0cd781b36a0f67bda75969354e0d284a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535470816,
    "exp": 1535474416,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:40:18.224 -03:00 [DBG] Creating userinfo response
2018-08-28 12:40:18.224 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:40:18.225 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:40:18.227 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:40:18.228 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:40:18.229 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:40:18.230 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:40:18.234 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:40:18.235 -03:00 [DBG] End userinfo request
2018-08-28 12:41:09.784 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:41:09.786 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:41:09.788 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:41:09.789 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:41:09.792 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:41:09.795 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:41:09.796 -03:00 [DBG] Start discovery request
2018-08-28 12:41:09.805 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:41:09.816 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:41:09.818 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:41:09.819 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:41:09.820 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:41:09.821 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:41:09.822 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:41:09.822 -03:00 [DBG] Start key discovery request
2018-08-28 12:41:09.844 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:41:09.846 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:41:09.846 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:41:09.930 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:41:09.933 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:41:09.934 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:41:09.934 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:41:09.936 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:41:09.937 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:41:09.938 -03:00 [DBG] Start userinfo request
2018-08-28 12:41:09.939 -03:00 [DBG] Bearer token found in header
2018-08-28 12:41:09.942 -03:00 [DBG] XLrcZkLu2H9DrGy/6eqxDfibC9OjbG4tTVH8kB6eO8k= found in database: true
2018-08-28 12:41:09.962 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:41:09.972 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:41:09.976 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:41:09.976 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "71c88cca0e900a396f27ef23cd650b9e0cd781b36a0f67bda75969354e0d284a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535470816,
    "exp": 1535474416,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:41:09.978 -03:00 [DBG] Creating userinfo response
2018-08-28 12:41:09.978 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:41:09.979 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:41:09.984 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:41:09.985 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:41:09.986 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:41:09.991 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:41:09.995 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:41:09.996 -03:00 [DBG] End userinfo request
2018-08-28 12:41:10.314 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:41:10.315 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:41:10.316 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:41:10.316 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:41:10.317 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:41:10.318 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:41:10.318 -03:00 [DBG] Start discovery request
2018-08-28 12:41:10.324 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:41:10.343 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:41:10.345 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:41:10.345 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:41:10.346 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:41:10.347 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:41:10.347 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:41:10.348 -03:00 [DBG] Start key discovery request
2018-08-28 12:44:44.233 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:44:44.239 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:44:44.241 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:44:44.242 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:44:44.244 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:44:44.244 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:44:44.246 -03:00 [DBG] Start discovery request
2018-08-28 12:44:44.253 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:44:44.273 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:44:44.277 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:44:44.278 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:44:44.278 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:44:44.279 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:44:44.280 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:44:44.280 -03:00 [DBG] Start key discovery request
2018-08-28 12:44:44.312 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:44:44.314 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:44:44.315 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:44:44.399 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:44:44.403 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:44:44.404 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:44:44.405 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:44:44.407 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:44:44.410 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:44:44.411 -03:00 [DBG] Start userinfo request
2018-08-28 12:44:44.412 -03:00 [DBG] Bearer token found in header
2018-08-28 12:44:44.414 -03:00 [DBG] XLrcZkLu2H9DrGy/6eqxDfibC9OjbG4tTVH8kB6eO8k= found in database: true
2018-08-28 12:44:44.434 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:44:44.446 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:44:44.455 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:44:44.456 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "71c88cca0e900a396f27ef23cd650b9e0cd781b36a0f67bda75969354e0d284a",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535470816,
    "exp": 1535474416,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:44:44.458 -03:00 [DBG] Creating userinfo response
2018-08-28 12:44:44.459 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:44:44.460 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:44:44.463 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:44:44.464 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:44:44.465 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:44:44.468 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:44:44.474 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:44:44.475 -03:00 [DBG] End userinfo request
2018-08-28 12:44:44.607 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:44:44.611 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:44:44.611 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:44:44.612 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:44:44.613 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:44:44.613 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:44:44.614 -03:00 [DBG] Start discovery request
2018-08-28 12:44:44.622 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:44:44.639 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:44:44.642 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:44:44.643 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:44:44.644 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:44:44.646 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:44:44.646 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:44:44.647 -03:00 [DBG] Start key discovery request
2018-08-28 12:45:56.851 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:45:56.854 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:45:56.855 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:45:56.856 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:45:56.856 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:45:56.859 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:45:56.860 -03:00 [DBG] Start discovery request
2018-08-28 12:45:56.865 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:45:56.881 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:45:56.883 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:45:56.884 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:45:56.884 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:45:56.885 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:45:56.886 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:45:56.886 -03:00 [DBG] Start key discovery request
2018-08-28 12:45:57.364 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:45:57.367 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:45:57.368 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:45:57.368 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:45:57.369 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:45:57.370 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:45:57.370 -03:00 [DBG] Start discovery request
2018-08-28 12:45:57.375 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:45:57.395 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:45:57.397 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:45:57.398 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:45:57.398 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:45:57.399 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:45:57.399 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:45:57.400 -03:00 [DBG] Start key discovery request
2018-08-28 12:46:07.835 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:46:07.839 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:46:07.841 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:46:07.844 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:46:07.846 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:46:07.847 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:46:07.848 -03:00 [DBG] Start discovery request
2018-08-28 12:46:07.865 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:46:07.892 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:46:07.898 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:46:07.899 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:46:07.900 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:46:07.902 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:46:07.904 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:46:07.907 -03:00 [DBG] Start key discovery request
2018-08-28 12:46:08.392 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:46:08.394 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:46:08.395 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:46:08.395 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:46:08.396 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:46:08.397 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:46:08.397 -03:00 [DBG] Start discovery request
2018-08-28 12:46:08.403 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:46:08.425 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:46:08.428 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:46:08.429 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:46:08.429 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:46:08.430 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:46:08.431 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:46:08.431 -03:00 [DBG] Start key discovery request
2018-08-28 12:46:08.870 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 12:46:08.871 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 12:46:08.872 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 12:46:08.873 -03:00 [DBG] Start authorize request
2018-08-28 12:46:08.874 -03:00 [DBG] User in authorize request: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 12:46:08.874 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 12:46:08.881 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:46:08.884 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:46:08.885 -03:00 [DBG] Found [] API scopes in database
2018-08-28 12:46:08.887 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:46:08.888 -03:00 [DBG] Found [] API scopes in database
2018-08-28 12:46:08.889 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 12:46:08.892 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "K5BkkpCv3XHaZH57ZozslHjDldbixdIN2zDvVbmh",
  "Nonce": "K5BkkpCv3XHaZH57ZozslHjDldbixdIN2zDvVbmh",
  "SessionId": "9b33451916578b9ba73f8dcb4bb0031b",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "K5BkkpCv3XHaZH57ZozslHjDldbixdIN2zDvVbmh",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "K5BkkpCv3XHaZH57ZozslHjDldbixdIN2zDvVbmh"
  }
}
2018-08-28 12:46:08.897 -03:00 [DBG] QYjmOIUlO1JMQyooCx/iUDvC+TjVxZorU2p8hBc4yho= found in database: true
2018-08-28 12:46:08.900 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-28 12:46:08.901 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 12:46:08.901 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 12:46:08.901 -03:00 [DBG] Getting claims for access token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 12:46:08.910 -03:00 [DBG] blLRLO8zqPRxXM7yPpM69wGx6CydIaF0nL5MeYuwpDk= not found in database
2018-08-28 12:46:08.922 -03:00 [DBG] Getting claims for identity token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548 and client: UserManagementUI
2018-08-28 12:46:08.924 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 12:46:08.926 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****1imA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****245b"
    }
  ],
  "ActivityId": "0HLGCTPHEAHIR:00000001",
  "TimeStamp": "2018-08-28T15:46:08Z",
  "ProcessId": 7424,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 12:46:08.928 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "K5BkkpCv3XHaZH57ZozslHjDldbixdIN2zDvVbmh",
  "Scope": "openid profile email picture"
}
2018-08-28 12:46:09.428 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:46:09.430 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:46:09.430 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:46:09.431 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:46:09.432 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:46:09.432 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:46:09.433 -03:00 [DBG] Start discovery request
2018-08-28 12:46:09.443 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:46:09.445 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:46:09.447 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:46:09.448 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:46:09.448 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:46:09.449 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:46:09.449 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:46:09.450 -03:00 [DBG] Start discovery request
2018-08-28 12:46:09.454 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:46:09.462 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:46:09.464 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:46:09.465 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:46:09.466 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:46:09.468 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:46:09.469 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:46:09.470 -03:00 [DBG] Start key discovery request
2018-08-28 12:46:09.472 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:46:09.474 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:46:09.475 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:46:09.476 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:46:09.477 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:46:09.479 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:46:09.480 -03:00 [DBG] Start key discovery request
2018-08-28 12:46:10.514 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:46:10.516 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:46:10.518 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:46:10.586 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:46:10.589 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:46:10.589 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:46:10.590 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:46:10.591 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:46:10.592 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:46:10.593 -03:00 [DBG] Start userinfo request
2018-08-28 12:46:10.593 -03:00 [DBG] Bearer token found in header
2018-08-28 12:46:10.595 -03:00 [DBG] blLRLO8zqPRxXM7yPpM69wGx6CydIaF0nL5MeYuwpDk= found in database: true
2018-08-28 12:46:10.613 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:46:10.619 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:46:10.623 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:46:10.623 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "0da631b20c7cd097114af5428129bd27e2669920d03200827b10b3094256245b",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535471168,
    "exp": 1535474768,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:46:10.625 -03:00 [DBG] Creating userinfo response
2018-08-28 12:46:10.625 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:46:10.626 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:46:10.628 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:46:10.629 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:46:10.629 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:46:10.631 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:46:10.634 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:46:10.634 -03:00 [DBG] End userinfo request
2018-08-28 12:50:51.197 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:50:51.236 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:50:51.237 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:50:51.239 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:50:51.240 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:50:51.241 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:50:51.242 -03:00 [DBG] Start discovery request
2018-08-28 12:50:51.253 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:50:51.422 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:50:51.425 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:50:51.427 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:50:51.429 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:50:51.431 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:50:51.432 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:50:51.434 -03:00 [DBG] Start key discovery request
2018-08-28 12:50:51.885 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:50:51.887 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:50:51.888 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:50:51.888 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:50:51.889 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:50:51.890 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:50:51.891 -03:00 [DBG] Start discovery request
2018-08-28 12:50:51.898 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:50:51.914 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:50:51.916 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:50:51.916 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:50:51.917 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:50:51.918 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:50:51.918 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:50:51.919 -03:00 [DBG] Start key discovery request
2018-08-28 12:51:02.800 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:51:02.802 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:51:02.803 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:51:02.804 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:51:02.805 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:51:02.806 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:51:02.807 -03:00 [DBG] Start discovery request
2018-08-28 12:51:02.817 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:51:02.929 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:51:02.933 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:51:02.934 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:51:02.934 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:51:02.935 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:51:02.936 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:51:02.938 -03:00 [DBG] Start key discovery request
2018-08-28 12:51:03.363 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:51:03.365 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:51:03.366 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:51:03.366 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:51:03.368 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:51:03.368 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:51:03.369 -03:00 [DBG] Start discovery request
2018-08-28 12:51:03.373 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:51:03.394 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:51:03.395 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:51:03.396 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:51:03.397 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:51:03.398 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:51:03.399 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:51:03.399 -03:00 [DBG] Start key discovery request
2018-08-28 12:51:09.812 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:51:09.816 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:51:09.817 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:51:09.818 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:51:09.819 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:51:09.819 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:51:09.820 -03:00 [DBG] Start discovery request
2018-08-28 12:51:09.829 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:51:09.839 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:51:09.844 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:51:09.846 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:51:09.847 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:51:09.848 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:51:09.850 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:51:09.851 -03:00 [DBG] Start key discovery request
2018-08-28 12:51:10.466 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:51:10.469 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:51:10.470 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:51:10.471 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:51:10.471 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:51:10.472 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:51:10.473 -03:00 [DBG] Start discovery request
2018-08-28 12:51:10.480 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:51:10.499 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:51:10.503 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:51:10.503 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:51:10.504 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:51:10.505 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:51:10.506 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:51:10.506 -03:00 [DBG] Start key discovery request
2018-08-28 12:51:11.005 -03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-28 12:51:11.007 -03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-28 12:51:11.009 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-28 12:51:11.009 -03:00 [DBG] Start authorize request
2018-08-28 12:51:11.010 -03:00 [DBG] User in authorize request: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 12:51:11.010 -03:00 [DBG] Start authorize request protocol validation
2018-08-28 12:51:11.017 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:51:11.019 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:51:11.021 -03:00 [DBG] Found [] API scopes in database
2018-08-28 12:51:11.023 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:51:11.025 -03:00 [DBG] Found [] API scopes in database
2018-08-28 12:51:11.025 -03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-28 12:51:11.026 -03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "AllowedRedirectUris": [
    "https://localhost:5003/swagger/oauth2-redirect.html",
    "http://localhost:4200/login-callback"
  ],
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile email picture",
  "State": "2TCoCh8YVfIask8lXZzoYcVuDwZ2ioKGmQYrbrX6",
  "Nonce": "2TCoCh8YVfIask8lXZzoYcVuDwZ2ioKGmQYrbrX6",
  "SessionId": "9b33451916578b9ba73f8dcb4bb0031b",
  "Raw": {
    "response_type": "id_token token",
    "client_id": "UserManagementUI",
    "state": "2TCoCh8YVfIask8lXZzoYcVuDwZ2ioKGmQYrbrX6",
    "redirect_uri": "http://localhost:4200/login-callback",
    "scope": "openid profile email picture",
    "nonce": "2TCoCh8YVfIask8lXZzoYcVuDwZ2ioKGmQYrbrX6"
  }
}
2018-08-28 12:51:11.032 -03:00 [DBG] QYjmOIUlO1JMQyooCx/iUDvC+TjVxZorU2p8hBc4yho= found in database: true
2018-08-28 12:51:11.036 -03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-08-28 12:51:11.037 -03:00 [DBG] Creating Implicit Flow response.
2018-08-28 12:51:11.037 -03:00 [DBG] Getting claims for access token for client: UserManagementUI
2018-08-28 12:51:11.038 -03:00 [DBG] Getting claims for access token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548
2018-08-28 12:51:11.047 -03:00 [DBG] 5ZQ3T82dWXR4ox2bdozfyAezM/aUUEoSVX0ocFsldlA= not found in database
2018-08-28 12:51:11.059 -03:00 [DBG] Getting claims for identity token for subject: b1c5ef37-eef5-4d49-b367-c4adbbae9548 and client: UserManagementUI
2018-08-28 12:51:11.060 -03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-28 12:51:11.062 -03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "UserManagementUI",
  "ClientName": "User Management UI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "Endpoint": "Authorize",
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "Scopes": "openid profile email picture",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Pchw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****67ad"
    }
  ],
  "ActivityId": "0HLGCTPHEAHIT:00000001",
  "TimeStamp": "2018-08-28T15:51:11Z",
  "ProcessId": 7424,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-08-28 12:51:11.064 -03:00 [INF] Authorize endpoint response
{
  "SubjectId": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
  "ClientId": "UserManagementUI",
  "RedirectUri": "http://localhost:4200/login-callback",
  "State": "2TCoCh8YVfIask8lXZzoYcVuDwZ2ioKGmQYrbrX6",
  "Scope": "openid profile email picture"
}
2018-08-28 12:51:11.644 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:51:11.647 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:51:11.648 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:51:11.649 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:51:11.650 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:51:11.651 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:51:11.651 -03:00 [DBG] Start discovery request
2018-08-28 12:51:11.660 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:51:11.662 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2018-08-28 12:51:11.664 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:51:11.664 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:51:11.664 -03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-28 12:51:11.665 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-28 12:51:11.665 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-28 12:51:11.665 -03:00 [DBG] Start discovery request
2018-08-28 12:51:11.670 -03:00 [DBG] Found ["openid","profile","email","picture","roles","api1","UserManagementApi.full_access","UserManagementApi.read_access","UserManagementApi.write_access"] as all scopes in database
2018-08-28 12:51:11.677 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:51:11.679 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:51:11.680 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:51:11.680 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:51:11.681 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:51:11.681 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:51:11.681 -03:00 [DBG] Start key discovery request
2018-08-28 12:51:11.683 -03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-08-28 12:51:11.685 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:51:11.686 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:51:11.686 -03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-28 12:51:11.687 -03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-28 12:51:11.687 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-28 12:51:11.687 -03:00 [DBG] Start key discovery request
2018-08-28 12:51:12.720 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:51:12.722 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:51:12.722 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:51:12.783 -03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-08-28 12:51:12.785 -03:00 [DBG] Origin http://localhost:4200 is allowed: true
2018-08-28 12:51:12.786 -03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-08-28 12:51:12.786 -03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-28 12:51:12.786 -03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-28 12:51:12.787 -03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-28 12:51:12.787 -03:00 [DBG] Start userinfo request
2018-08-28 12:51:12.788 -03:00 [DBG] Bearer token found in header
2018-08-28 12:51:12.789 -03:00 [DBG] 5ZQ3T82dWXR4ox2bdozfyAezM/aUUEoSVX0ocFsldlA= found in database: true
2018-08-28 12:51:12.805 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:51:12.814 -03:00 [DBG] UserManagementUI found in database: true
2018-08-28 12:51:12.817 -03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-28 12:51:12.817 -03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Reference",
  "ExpectedScope": "openid",
  "TokenHandle": "6d3e8f3dae97baa6186a85782735eddc99bdbf7760bb20e87cbe2df7f55d67ad",
  "Claims": {
    "iss": "http://localhost:5000",
    "nbf": 1535471471,
    "exp": 1535475071,
    "aud": "http://localhost:5000/resources",
    "client_id": "UserManagementUI",
    "scope": [
      "openid",
      "profile",
      "email",
      "picture"
    ],
    "sub": "b1c5ef37-eef5-4d49-b367-c4adbbae9548",
    "auth_time": 1535468548,
    "idp": "Google",
    "amr": "external"
  }
}
2018-08-28 12:51:12.818 -03:00 [DBG] Creating userinfo response
2018-08-28 12:51:12.818 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:51:12.818 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:51:12.820 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:51:12.820 -03:00 [DBG] Requested claim types: sub updated_at locale zoneinfo birthdate gender website profile preferred_username nickname middle_name given_name family_name name picture email_verified email
2018-08-28 12:51:12.820 -03:00 [DBG] Scopes in access token: openid profile email picture
2018-08-28 12:51:12.822 -03:00 [DBG] Found ["openid","profile","email","picture"] identity scopes in database
2018-08-28 12:51:12.824 -03:00 [INF] Profile service returned to the following claim types: sub name email picture preferred_username email email_verified
2018-08-28 12:51:12.825 -03:00 [DBG] End userinfo request
